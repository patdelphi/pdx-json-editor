# PDX JSON Editor 2.0 功能详解

本文档详细介绍了PDX JSON Editor 2.0版本的所有功能和使用方法，包括新增和改进的功能。

## 核心功能

### 编辑器功能

#### 语法高亮
- 自动识别JSON语法并高亮显示
- 支持不同类型值的颜色区分（字符串、数字、布尔值、null等）
- 支持JSON注释的高亮（使用JSONC模式）

#### 实时验证
- 即时检测JSON语法错误
- 错误提示包含详细信息和位置
- 错误行高亮显示
- 错误信息悬停提示

#### 格式化和压缩
- 一键格式化JSON（Ctrl+Shift+F）
- 一键压缩JSON（Ctrl+Shift+M）
- 自动缩进和对齐
- 可配置的缩进大小

#### 搜索和替换
- 全文搜索（Ctrl+F）
- 搜索和替换（Ctrl+H）
- 支持正则表达式搜索
- 大小写敏感选项
- 全词匹配选项
- 搜索结果高亮和导航

#### 字体大小调整
- 通过工具栏按钮增大字体（放大镜+图标）
- 通过工具栏按钮减小字体（放大镜-图标）
- 字体大小变化时的平滑过渡效果
- 字体大小调整后的状态保持

### 文件操作

#### 文件管理
- 新建文件（Ctrl+N）
- 打开文件（Ctrl+O）
- 保存文件（Ctrl+S）
- 另存为（Ctrl+Shift+S）
- 文件拖放支持
- 自动检测文件类型

#### 智能保存
- 保存文件时自动定位到当前文件所在目录
- 支持文件系统访问API（在支持的浏览器中）
- 传统下载方式的回退支持

#### 差异对比
- 文件变更的可视化差异对比（Ctrl+Alt+D）
- 并排显示原始内容和修改后内容
- 高亮显示变更部分
- 支持合并变更

### 用户界面

#### 主题支持
- 浅色主题
- 深色主题
- 自动跟随系统主题
- 高对比度主题（辅助功能）

#### 响应式设计
- 适配桌面设备
- 适配平板设备
- 适配移动设备
- 自动调整布局和功能

#### 触摸支持
- 触摸滚动
- 触摸缩放
- 双击选择
- 长按菜单

#### 键盘快捷键
- 丰富的编辑器快捷键
- 文件操作快捷键
- 导航快捷键
- 快捷键帮助对话框（按?键）

### 高级功能

#### JSON Schema支持 (2.0版本增强)
- 增强的自动完成建议
- 更精确的属性验证
- 详细的错误提示和修复建议
- 高级类型检查
- 扩展的格式验证
- 改进的自定义Schema管理界面
- 智能Schema自动检测
- Schema版本管理 (新增)
- 内联Schema编辑 (新增)

#### 性能优化 (2.0版本大幅提升)
- 全新的大文件处理引擎
- 智能延迟加载策略
- 增强的虚拟化渲染
- 优化的代码分割
- 改进的内存管理和垃圾回收
- 智能防抖和节流算法
- 多线程Web Workers支持
- 预编译模板 (新增)
- 静态资源优化 (新增)
- 增量更新渲染 (新增)

#### 自动保存和恢复 (2.0版本新增)
- 自动保存编辑内容到本地存储
- 会话恢复功能
- 编辑历史记录
- 版本比较
- 自定义保存间隔
- 手动保存检查点

## 使用技巧

### 高效编辑

1. **使用快捷键**：熟悉并使用键盘快捷键可以显著提高编辑效率。
2. **格式化和压缩**：使用格式化功能使JSON更易读，使用压缩功能减小文件大小。
3. **折叠和展开**：使用折叠功能隐藏不需要关注的部分，使用展开功能查看完整内容。
4. **搜索功能**：使用搜索功能快速定位到需要的内容。
5. **字体调整**：根据需要调整字体大小，提高可读性。

### JSON Schema使用

1. **选择合适的Schema**：从下拉菜单中选择适合当前JSON文件的Schema。
2. **自动检测**：使用自动检测功能让编辑器尝试匹配合适的Schema。
3. **添加自定义Schema**：点击添加按钮，输入Schema名称、URL或内容。
4. **编辑Schema**：选择已有Schema后，点击编辑按钮修改其配置。

### 大文件处理

1. **启用性能模式**：处理大文件时，选择启用性能模式以获得更流畅的体验。
2. **分段编辑**：对于特别大的文件，考虑分段编辑而不是一次性加载整个文件。
3. **使用搜索**：在大文件中使用搜索功能快速定位到需要编辑的部分。
4. **折叠不相关部分**：折叠不需要关注的JSON节点，减少渲染负担。

## 常见问题解答

### Q: 编辑器支持哪些文件格式？
A: 主要支持JSON文件（.json扩展名），也支持JSONC（带注释的JSON）。2.0版本增加了对大型JSON文件的更好支持。

### Q: 如何恢复意外关闭的编辑内容？
A: 2.0版本引入了增强的自动保存和恢复功能，编辑器会定期保存当前编辑内容到本地存储，重新打开应用后会自动恢复。您还可以通过历史记录功能查看和恢复之前的版本。

### Q: 如何使用JSON Schema验证？
A: 从工具栏的Schema下拉菜单中选择适合的Schema，或使用自动检测功能。2.0版本增加了Schema版本管理和内联Schema编辑功能。

### Q: 编辑器是否支持离线使用？
A: 是的，一旦加载完成，编辑器可以完全离线使用。2.0版本优化了离线体验，提供更可靠的本地存储。

### Q: 2.0版本与1.x版本有什么主要区别？
A: 2.0版本带来了显著的性能提升，特别是在处理大型JSON文件时；全新的深色主题；增强的JSON Schema支持；自动保存和恢复功能；以及底层技术栈的升级（Preact和Vite）。

### Q: 如何报告问题或提出功能建议？
A: 请在GitHub仓库的Issues页面提交问题或建议。2.0版本增加了更详细的错误报告功能，可以帮助我们更快地解决问题。