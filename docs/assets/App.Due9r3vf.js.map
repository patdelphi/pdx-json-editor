{"version":3,"file":"App.Due9r3vf.js","sources":["../../src/components/Editor/JsonEditor.tsx","../../src/components/Settings/ThemeSelector.tsx","../../src/constants/zIndex.ts","../../src/components/Settings/SettingsPanel.tsx","../../src/components/FileManager/FileOperations.tsx","../../src/components/FileManager/FileDropZone.tsx","../../src/components/SearchReplace/SearchPanel.tsx","../../src/components/UI/ErrorBoundary.tsx","../../src/components/UI/Toast.tsx","../../src/components/UI/ToastContainer.tsx","../../src/components/UI/Modal.tsx","../../src/App.tsx","../../src/hooks/useToast.ts","../../src/hooks/useModal.ts","../../src/hooks/useKeyboardShortcuts.ts"],"sourcesContent":["import { useRef, useEffect, useImperativeHandle, forwardRef, useCallback } from 'react';\nimport Editor, { type OnMount, type OnChange } from '@monaco-editor/react';\nimport type { MonacoEditorProps, EditorMethods } from '../../types/editor.types';\n\nconst JsonEditor = forwardRef<EditorMethods, MonacoEditorProps>(({\n  value,\n  onChange,\n  onValidationChange,\n  onCursorPositionChange,\n  onSelectionChange,\n  theme,\n  settings\n}, ref) => {\n  const editorRef = useRef<any>(null);\n  const monacoRef = useRef<any>(null);\n\n  // Editor methods that can be called from parent components\n  const formatDocument = useCallback(() => {\n    if (editorRef.current) {\n      editorRef.current.trigger('editor', 'editor.action.formatDocument', {});\n    }\n  }, []);\n\n  const undo = useCallback(() => {\n    if (editorRef.current) {\n      editorRef.current.trigger('editor', 'undo', {});\n    }\n  }, []);\n\n  const redo = useCallback(() => {\n    if (editorRef.current) {\n      editorRef.current.trigger('editor', 'redo', {});\n    }\n  }, []);\n\n  const selectAll = useCallback(() => {\n    if (editorRef.current) {\n      editorRef.current.trigger('editor', 'editor.action.selectAll', {});\n    }\n  }, []);\n\n  const find = useCallback(() => {\n    if (editorRef.current) {\n      try {\n        // 确保编辑器获得焦点\n        editorRef.current.focus();\n        \n        // 使用Monaco编辑器的内置命令\n        const editor = editorRef.current;\n        const monaco = monacoRef.current;\n        \n        // 方法1: 使用actions.find命令ID (这是Monaco推荐的方式)\n        try {\n          editor.trigger('keyboard', 'actions.find', null);\n          return;\n        } catch (e) {\n          console.log('Method 1 failed:', e);\n        }\n        \n        // 方法2: 使用editor.action.startFindAction命令ID (备用方式)\n        try {\n          editor.trigger('keyboard', 'editor.action.startFindAction', null);\n          return;\n        } catch (e) {\n          console.log('Method 2 failed:', e);\n        }\n        \n        // 方法3: 使用编辑器的内置操作\n        try {\n          // Use getAction for specific actions instead of getActions\n          const actions = [];\n          const findAction1 = (editor as any).getAction('actions.find');\n          const findAction2 = (editor as any).getAction('editor.action.startFindAction');\n          if (findAction1) actions.push(findAction1);\n          if (findAction2) actions.push(findAction2);\n          \n          // Try to find any action with 'find' in its ID\n          const findAction = actions.find((a: { id: string; run: () => void }) => \n            a.id === 'actions.find' || \n            a.id === 'editor.action.startFindAction' ||\n            a.id.toLowerCase().includes('find')\n          );\n          if (findAction) {\n            findAction.run();\n            return;\n          }\n        } catch (e) {\n          console.log('Method 3 failed:', e);\n        }\n        \n        // 方法4: 使用Monaco的键盘命令\n        try {\n          if (monaco) {\n            editor.trigger('keyboard', monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyF, null);\n            return;\n          }\n        } catch (e) {\n          console.log('Method 4 failed:', e);\n        }\n        \n        // 方法5: 使用浏览器的原生搜索 (最后的备选方案)\n        try {\n          // Use window.find as a fallback, but need to declare it properly for TypeScript\n          (window as any).find();\n        } catch (e) {\n          console.log('Method 5 failed:', e);\n        }\n      } catch (error) {\n        console.error('Error in find function:', error);\n      }\n    }\n  }, []);\n\n  const replace = useCallback(() => {\n    if (editorRef.current) {\n      try {\n        // 确保编辑器获得焦点\n        editorRef.current.focus();\n        \n        // 使用Monaco编辑器的内置命令\n        const editor = editorRef.current;\n        const monaco = monacoRef.current;\n        \n        // 方法1: 使用editor.action.startFindReplaceAction命令ID (主要方式)\n        try {\n          editor.trigger('keyboard', 'editor.action.startFindReplaceAction', null);\n          return;\n        } catch (e) {\n          console.log('Method 1 failed:', e);\n        }\n        \n        // 方法2: 使用actions.findWithReplace命令ID (备用方式)\n        try {\n          editor.trigger('keyboard', 'actions.findWithReplace', null);\n          return;\n        } catch (e) {\n          console.log('Method 2 failed:', e);\n        }\n        \n        // 方法3: 使用编辑器的内置操作\n        try {\n          // Use getAction for specific actions instead of getActions\n          const actions = [];\n          const replaceAction1 = (editor as any).getAction('editor.action.startFindReplaceAction');\n          const replaceAction2 = (editor as any).getAction('actions.findWithReplace');\n          if (replaceAction1) actions.push(replaceAction1);\n          if (replaceAction2) actions.push(replaceAction2);\n          \n          // Try to find any action with 'replace' in its ID\n          const replaceAction = actions.find((a: { id: string; run: () => void }) => \n            a.id === 'editor.action.startFindReplaceAction' || \n            a.id === 'actions.findWithReplace' ||\n            a.id.toLowerCase().includes('replace')\n          );\n          if (replaceAction) {\n            replaceAction.run();\n            return;\n          }\n        } catch (e) {\n          console.log('Method 3 failed:', e);\n        }\n        \n        // 方法4: 使用Monaco的键盘命令\n        try {\n          if (monaco) {\n            editor.trigger('keyboard', monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyH, null);\n            return;\n          }\n        } catch (e) {\n          console.log('Method 4 failed:', e);\n        }\n      } catch (error) {\n        console.error('Error in replace function:', error);\n      }\n    }\n  }, []);\n\n  const gotoLine = useCallback((line: number, column?: number) => {\n    if (editorRef.current) {\n      editorRef.current.revealLineInCenter(line);\n      editorRef.current.setPosition({ lineNumber: line, column: column || 1 });\n      editorRef.current.focus();\n    }\n  }, []);\n\n  const getSelection = useCallback(() => {\n    if (editorRef.current) {\n      return editorRef.current.getSelection();\n    }\n    return null;\n  }, []);\n\n  const getSelectedText = useCallback(() => {\n    if (editorRef.current) {\n      const selection = editorRef.current.getSelection();\n      const model = editorRef.current.getModel();\n      if (selection && model) {\n        return model.getValueInRange(selection);\n      }\n    }\n    return '';\n  }, []);\n\n  const insertText = useCallback((text: string) => {\n    if (editorRef.current) {\n      const selection = editorRef.current.getSelection();\n      const range = selection || new monacoRef.current.Range(1, 1, 1, 1);\n      editorRef.current.executeEdits('insert-text', [{\n        range,\n        text,\n        forceMoveMarkers: true\n      }]);\n    }\n  }, []);\n\n  const canUndo = useCallback(() => {\n    if (editorRef.current) {\n      const model = editorRef.current.getModel();\n      return model ? model.canUndo() : false;\n    }\n    return false;\n  }, []);\n\n  const canRedo = useCallback(() => {\n    if (editorRef.current) {\n      const model = editorRef.current.getModel();\n      return model ? model.canRedo() : false;\n    }\n    return false;\n  }, []);\n\n  // Expose methods to parent components\n  useImperativeHandle(ref, () => ({\n    formatDocument,\n    undo,\n    redo,\n    selectAll,\n    find,\n    replace,\n    gotoLine,\n    getSelection,\n    getSelectedText,\n    insertText,\n    canUndo,\n    canRedo,\n    focus: () => editorRef.current?.focus(),\n    getEditor: () => editorRef.current,\n    getMonaco: () => monacoRef.current\n  }), [formatDocument, undo, redo, selectAll, find, replace, gotoLine, getSelection, getSelectedText, insertText, canUndo, canRedo]);\n\n  const handleEditorDidMount: OnMount = (editor, monaco) => {\n    editorRef.current = editor;\n    monacoRef.current = monaco;\n    \n    // 配置搜索控件，防止自动关闭\n    editor.updateOptions({\n      find: {\n        addExtraSpaceOnTop: true,\n        autoFindInSelection: 'never',\n        seedSearchStringFromSelection: 'always',\n        loop: true\n        // Removed closeOnFocusLost as it's not in IEditorFindOptions\n      }\n    });\n    \n    // Configure JSON language settings with enhanced validation\n    monaco.languages.json.jsonDefaults.setDiagnosticsOptions({\n      validate: true,\n      allowComments: false,\n      schemas: [],\n      enableSchemaRequest: false,\n      schemaValidation: 'error',\n      schemaRequest: 'error'\n    });\n\n    // Enhanced bracket matching configuration\n    monaco.languages.setLanguageConfiguration('json', {\n      brackets: [\n        ['{', '}'],\n        ['[', ']'],\n        ['\"', '\"']\n      ],\n      autoClosingPairs: [\n        { open: '{', close: '}' },\n        { open: '[', close: ']' },\n        { open: '\"', close: '\"', notIn: ['string'] }\n      ],\n      surroundingPairs: [\n        { open: '{', close: '}' },\n        { open: '[', close: ']' },\n        { open: '\"', close: '\"' }\n      ]\n    });\n\n    // 添加搜索窗口状态监听器\n    const findController = editor.getContribution('editor.contrib.findController') as any;\n    if (findController && typeof findController.getState === 'function') {\n      // 监听搜索控制器状态变化\n      editor.onDidBlurEditorWidget(() => {\n        // 当编辑器失去焦点时，尝试保持搜索窗口打开\n        setTimeout(() => {\n          try {\n            const state = findController.getState();\n            if (state && state.isRevealed) {\n              // 如果搜索窗口已经打开，尝试保持它打开\n              findController.focus && findController.focus();\n            }\n          } catch (e) {\n            console.log('Error keeping find widget open:', e);\n          }\n        }, 100);\n      });\n    }\n\n    // Add keyboard shortcut for search (Ctrl+F)\n    editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyF, () => {\n      // This will open the search widget\n      // Use getAction for each action ID instead of getActions\n      const actions = [];\n      const findAction1 = editor.getAction('actions.find');\n      const findAction2 = editor.getAction('editor.action.startFindAction');\n      if (findAction1) actions.push(findAction1);\n      if (findAction2) actions.push(findAction2);\n      \n      // Try to find the search action\n      const findAction = actions.find((a: { id: string; run: () => void }) => \n        a.id === 'actions.find' || \n        a.id === 'editor.action.startFindAction'\n      );\n      \n      if (findAction) {\n        findAction.run();\n      } else {\n        // Fallback to trigger method\n        editor.trigger('keyboard', 'actions.find', null);\n      }\n    });\n    \n    // Add keyboard shortcut for replace (Ctrl+H)\n    editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyH, () => {\n      // This will open the replace widget\n      // Use getAction for each action ID instead of getActions\n      const actions = [];\n      const replaceAction1 = editor.getAction('editor.action.startFindReplaceAction');\n      const replaceAction2 = editor.getAction('actions.findWithReplace');\n      if (replaceAction1) actions.push(replaceAction1);\n      if (replaceAction2) actions.push(replaceAction2);\n      \n      // Try to find the replace action\n      const replaceAction = actions.find((a: { id: string; run: () => void }) => \n        a.id === 'editor.action.startFindReplaceAction'\n      );\n      \n      if (replaceAction) {\n        replaceAction.run();\n      } else {\n        // Fallback to trigger method\n        editor.trigger('keyboard', 'editor.action.startFindReplaceAction', null);\n      }\n    });\n    \n    const model = editor.getModel();\n    if (model) {\n      // Set up validation change listener with enhanced error reporting\n      const markersDisposable = monaco.editor.onDidChangeMarkers((uris) => {\n        const editorUri = model.uri;\n        if (uris.find(uri => uri.toString() === editorUri.toString())) {\n          const markers = monaco.editor.getModelMarkers({ resource: editorUri });\n          const errors = markers.map(marker => ({\n            line: marker.startLineNumber,\n            column: marker.startColumn,\n            message: marker.message,\n            severity: marker.severity === monaco.MarkerSeverity.Error ? 'error' as const : 'warning' as const\n          }));\n          onValidationChange(errors);\n        }\n      });\n\n      // Set up cursor position change listener\n      const cursorDisposable = editor.onDidChangeCursorPosition((e) => {\n        if (onCursorPositionChange) {\n          onCursorPositionChange({\n            line: e.position.lineNumber,\n            column: e.position.column\n          });\n        }\n      });\n\n      // Set up selection change listener\n      const selectionDisposable = editor.onDidChangeCursorSelection((e) => {\n        if (onSelectionChange) {\n          onSelectionChange({\n            startLine: e.selection.startLineNumber,\n            startColumn: e.selection.startColumn,\n            endLine: e.selection.endLineNumber,\n            endColumn: e.selection.endColumn\n          });\n        }\n      });\n\n      // Set up content change listener for undo/redo state\n      const contentDisposable = model.onDidChangeContent(() => {\n        // This will trigger validation automatically\n        // Additional logic can be added here for undo/redo state tracking\n      });\n\n      // Enhanced keyboard shortcuts\n      editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyD, () => {\n        // Duplicate line\n        editor.trigger('keyboard', 'editor.action.copyLinesDownAction', {});\n      });\n\n      editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyMod.Shift | monaco.KeyCode.KeyK, () => {\n        // Delete line\n        editor.trigger('keyboard', 'editor.action.deleteLines', {});\n      });\n\n      editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.Slash, () => {\n        // Toggle line comment (though JSON doesn't support comments, this is for future extensibility)\n        editor.trigger('keyboard', 'editor.action.commentLine', {});\n      });\n\n      // Clean up on unmount\n      return () => {\n        markersDisposable.dispose();\n        cursorDisposable.dispose();\n        selectionDisposable.dispose();\n        contentDisposable.dispose();\n      };\n    }\n  };\n\n  const handleEditorChange: OnChange = (value) => {\n    if (value !== undefined) {\n      onChange(value);\n    }\n  };\n\n  // Update editor options when settings change\n  useEffect(() => {\n    if (editorRef.current) {\n      editorRef.current.updateOptions({\n        tabSize: settings.indentSize,\n        insertSpaces: settings.indentType === 'spaces',\n        wordWrap: settings.wordWrap ? 'on' : 'off',\n        lineNumbers: settings.lineNumbers ? 'on' : 'off',\n        minimap: { enabled: settings.minimap }\n      });\n    }\n  }, [settings]);\n\n  const editorOptions: any = {\n    language: 'json',\n    theme: theme === 'dark' ? 'vs-dark' : 'vs',\n    automaticLayout: true,\n    fontSize: 14,\n    fontFamily: 'Monaco, Menlo, \"Ubuntu Mono\", monospace',\n    tabSize: settings.indentSize,\n    insertSpaces: settings.indentType === 'spaces',\n    wordWrap: settings.wordWrap ? 'on' : 'off',\n    lineNumbers: settings.lineNumbers ? 'on' : 'off',\n    minimap: { enabled: settings.minimap },\n    scrollBeyondLastLine: false,\n    renderWhitespace: 'selection',\n    \n    // Enhanced bracket and matching features\n    bracketPairColorization: { enabled: true },\n    matchBrackets: 'always',\n    showFoldingControls: 'always',\n    foldingStrategy: 'indentation',\n    foldingHighlight: true,\n    \n    // Enhanced auto-completion and suggestions\n    autoClosingBrackets: 'always',\n    autoClosingQuotes: 'always',\n    autoClosingDelete: 'always',\n    autoClosingOvertype: 'always',\n    autoSurround: 'languageDefined',\n    autoIndent: 'full',\n    formatOnPaste: true,\n    formatOnType: true,\n    \n    // Enhanced IntelliSense\n    suggest: {\n      showKeywords: true,\n      showSnippets: true,\n      showFunctions: true,\n      showConstructors: true,\n      showFields: true,\n      showVariables: true,\n      showClasses: true,\n      showStructs: true,\n      showInterfaces: true,\n      showModules: true,\n      showProperties: true,\n      showEvents: true,\n      showOperators: true,\n      showUnits: true,\n      showValues: true,\n      showConstants: true,\n      showEnums: true,\n      showEnumMembers: true,\n      showColors: true,\n      showFiles: true,\n      showReferences: true,\n      showFolders: true,\n      showTypeParameters: true,\n      showIssues: true,\n      showUsers: true,\n      insertMode: 'insert',\n      filterGraceful: true,\n      snippetsPreventQuickSuggestions: false\n    },\n    \n    quickSuggestions: {\n      other: true,\n      comments: false,\n      strings: true\n    },\n    \n    // Enhanced editing features\n    multiCursorModifier: 'ctrlCmd',\n    multiCursorMergeOverlapping: true,\n    multiCursorPaste: 'spread',\n    \n    // Find and replace enhancements\n    find: {\n      addExtraSpaceOnTop: true,\n      autoFindInSelection: 'never',\n      seedSearchStringFromSelection: 'always',\n      loop: true\n      // Removed closeOnFocusLost as it's not in IEditorFindOptions\n    },\n    \n    // Enhanced error and warning display\n    renderValidationDecorations: 'on',\n    renderLineHighlight: 'all',\n    renderLineHighlightOnlyWhenFocus: false,\n    \n    // Undo/Redo enhancements\n    undoStopOnWordBoundary: true,\n    \n    // Performance optimizations\n    largeFileOptimizations: true,\n    \n    // Accessibility features\n    accessibilitySupport: 'auto',\n    ariaLabel: 'PDX JSON Editor',\n    \n    // Selection and cursor enhancements\n    cursorBlinking: 'blink',\n    cursorSmoothCaretAnimation: 'on',\n    cursorStyle: 'line',\n    cursorWidth: 2,\n    \n    // Scrolling enhancements\n    smoothScrolling: true,\n    mouseWheelScrollSensitivity: 1,\n    fastScrollSensitivity: 5\n  };\n\n  return (\n    <div className=\"w-full h-full\">\n      <Editor\n        value={value}\n        onChange={handleEditorChange}\n        onMount={handleEditorDidMount}\n        options={editorOptions}\n        loading={\n          <div className=\"flex items-center justify-center h-full\">\n            <div className=\"text-gray-500\">Loading editor...</div>\n          </div>\n        }\n      />\n    </div>\n  );\n});\n\nexport default JsonEditor;","import React from 'react';\n\ninterface ThemeSelectorProps {\n  theme: 'light' | 'dark';\n  onThemeChange: (theme: 'light' | 'dark') => void;\n  disabled?: boolean;\n}\n\nconst ThemeSelector: React.FC<ThemeSelectorProps> = ({\n  theme,\n  onThemeChange,\n  disabled = false\n}) => {\n  const handleToggle = () => {\n    if (disabled) return;\n    onThemeChange(theme === 'light' ? 'dark' : 'light');\n  };\n\n  const buttonClass = `\n    relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ease-in-out\n    ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\n    ${theme === 'dark' \n      ? 'bg-blue-600' \n      : 'bg-gray-200'\n    }\n    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\n  `;\n\n  const switchClass = `\n    inline-block h-4 w-4 transform rounded-full bg-white transition duration-200 ease-in-out\n    ${theme === 'dark' ? 'translate-x-6' : 'translate-x-1'}\n  `;\n\n  return (\n    <div className=\"flex items-center space-x-3\">\n      {/* Light theme icon */}\n      <span \n        className={`text-sm ${theme === 'light' ? 'text-yellow-500' : 'text-gray-400'}`}\n        title=\"Light theme\"\n      >\n        ☀️\n      </span>\n\n      {/* Toggle switch */}\n      <button\n        type=\"button\"\n        className={buttonClass}\n        onClick={handleToggle}\n        disabled={disabled}\n        role=\"switch\"\n        aria-checked={theme === 'dark'}\n        aria-label={`Switch to ${theme === 'light' ? 'dark' : 'light'} theme`}\n      >\n        <span className={switchClass} />\n      </button>\n\n      {/* Dark theme icon */}\n      <span \n        className={`text-sm ${theme === 'dark' ? 'text-blue-400' : 'text-gray-400'}`}\n        title=\"Dark theme\"\n      >\n        🌙\n      </span>\n\n      {/* Theme label */}\n      <span className={`text-sm font-medium ${\n        theme === 'dark' ? 'text-gray-200' : 'text-gray-700'\n      }`}>\n        {theme === 'light' ? 'Light' : 'Dark'}\n      </span>\n    </div>\n  );\n};\n\nexport default ThemeSelector;","/**\r\n * Z-Index常量\r\n * \r\n * 这个文件定义了应用程序中使用的所有z-index值，\r\n * 以确保组件之间的层叠顺序一致。\r\n */\r\n\r\nconst Z_INDEX = {\r\n  // 基础层级\r\n  BASE: 1,\r\n  \r\n  // 下拉菜单和工具提示\r\n  DROPDOWN: 10,\r\n  TOOLTIP: 20,\r\n  \r\n  // 编辑器组件\r\n  EDITOR_GUTTER: 30,\r\n  EDITOR_CONTENT: 40,\r\n  \r\n  // 面板组件\r\n  SEARCH_PANEL: 100,\r\n  \r\n  // 模态窗口组件\r\n  MODAL_OVERLAY: 9000,\r\n  MODAL_CONTENT: 9100,\r\n  \r\n  // 顶层组件（通知、警告等）\r\n  TOAST: 9500,\r\n};\r\n\r\nexport default Z_INDEX;","import React, { useState, useEffect, useRef } from 'react';\r\nimport type { EditorSettings } from '../../types/editor.types';\r\nimport { ThemeSelector } from './index';\r\nimport Z_INDEX from '../../constants/zIndex';\r\n\r\ninterface SettingsPanelProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  settings: EditorSettings;\r\n  onSettingsChange: (settings: Partial<EditorSettings>) => void;\r\n  theme: 'light' | 'dark';\r\n  onThemeChange: (theme: 'light' | 'dark') => void;\r\n}\r\n\r\nconst SettingsPanel: React.FC<SettingsPanelProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  settings,\r\n  onSettingsChange,\r\n  theme,\r\n  onThemeChange,\r\n}) => {\r\n  const [localSettings, setLocalSettings] = useState<EditorSettings>(settings);\r\n  const modalRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Update local settings when props change\r\n  useEffect(() => {\r\n    setLocalSettings(settings);\r\n  }, [settings]);\r\n\r\n  // Handle settings changes\r\n  const handleSettingChange = <K extends keyof EditorSettings>(\r\n    key: K,\r\n    value: EditorSettings[K]\r\n  ) => {\r\n    const newSettings = { ...localSettings, [key]: value };\r\n    setLocalSettings(newSettings);\r\n    onSettingsChange({ [key]: value });\r\n  };\r\n\r\n  // Reset settings to defaults\r\n  const handleReset = () => {\r\n    const defaultSettings: EditorSettings = {\r\n      indentSize: 2,\r\n      indentType: 'spaces',\r\n      wordWrap: false,\r\n      lineNumbers: true,\r\n      minimap: true,\r\n    };\r\n    setLocalSettings(defaultSettings);\r\n    onSettingsChange(defaultSettings);\r\n  };\r\n\r\n  // Handle ESC key press to close modal\r\n  useEffect(() => {\r\n    const handleEscKey = (event: KeyboardEvent) => {\r\n      if (event.key === 'Escape' && isOpen) {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscKey);\r\n      document.body.style.overflow = 'hidden'; // Prevent background scrolling\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscKey);\r\n      document.body.style.overflow = ''; // Restore scrolling\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  // Focus trap inside modal\r\n  useEffect(() => {\r\n    if (isOpen && modalRef.current) {\r\n      modalRef.current.focus();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div \r\n      style={{ \r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: Z_INDEX.MODAL_OVERLAY\r\n      }}\r\n    >\r\n      <div \r\n        ref={modalRef}\r\n        tabIndex={-1}\r\n        style={{\r\n          backgroundColor: theme === 'dark' ? '#1f2937' : 'white',\r\n          borderRadius: '0.5rem',\r\n          padding: '1.5rem',\r\n          boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08)',\r\n          maxHeight: '80vh',\r\n          overflowY: 'auto',\r\n          width: '95%',\r\n          maxWidth: '450px',\r\n          position: 'relative',\r\n          zIndex: Z_INDEX.MODAL_CONTENT\r\n        }}\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-gray-100\">\r\n            编辑器设置\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl font-bold w-8 h-8 flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n            aria-label=\"关闭设置\"\r\n          >\r\n            ✕\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"space-y-6\">\r\n          {/* Theme Settings */}\r\n          <div>\r\n            <h3 className=\"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3\">\r\n              外观\r\n            </h3>\r\n            <div className=\"pl-4\">\r\n              <ThemeSelector\r\n                theme={theme}\r\n                onThemeChange={onThemeChange}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Editor Settings */}\r\n          <div>\r\n            <h3 className=\"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3\">\r\n              编辑器\r\n            </h3>\r\n            <div className=\"space-y-4 pl-4\">\r\n              {/* Indent Size */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  缩进大小\r\n                </label>\r\n                <select\r\n                  value={localSettings.indentSize}\r\n                  onChange={(e) => handleSettingChange('indentSize', Number(e.target.value) as 2 | 4)}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                >\r\n                  <option value={2}>2 个空格</option>\r\n                  <option value={4}>4 个空格</option>\r\n                </select>\r\n              </div>\r\n\r\n              {/* Indent Type */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  缩进类型\r\n                </label>\r\n                <div className=\"flex space-x-4\">\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"indentType\"\r\n                      value=\"spaces\"\r\n                      checked={localSettings.indentType === 'spaces'}\r\n                      onChange={(e) => handleSettingChange('indentType', e.target.value as 'spaces' | 'tabs')}\r\n                      className=\"mr-2 text-blue-600 focus:ring-blue-500\"\r\n                    />\r\n                    <span className=\"text-sm text-gray-700 dark:text-gray-300\">空格</span>\r\n                  </label>\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"indentType\"\r\n                      value=\"tabs\"\r\n                      checked={localSettings.indentType === 'tabs'}\r\n                      onChange={(e) => handleSettingChange('indentType', e.target.value as 'spaces' | 'tabs')}\r\n                      className=\"mr-2 text-blue-600 focus:ring-blue-500\"\r\n                    />\r\n                    <span className=\"text-sm text-gray-700 dark:text-gray-300\">制表符</span>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Word Wrap */}\r\n              <div>\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={localSettings.wordWrap}\r\n                    onChange={(e) => handleSettingChange('wordWrap', e.target.checked)}\r\n                    className=\"mr-3 text-blue-600 focus:ring-blue-500 rounded\"\r\n                  />\r\n                  <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                    自动换行\r\n                  </span>\r\n                </label>\r\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6\">\r\n                  将长行自动换行以适应编辑器宽度\r\n                </p>\r\n              </div>\r\n\r\n              {/* Line Numbers */}\r\n              <div>\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={localSettings.lineNumbers}\r\n                    onChange={(e) => handleSettingChange('lineNumbers', e.target.checked)}\r\n                    className=\"mr-3 text-blue-600 focus:ring-blue-500 rounded\"\r\n                  />\r\n                  <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                    行号\r\n                  </span>\r\n                </label>\r\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6\">\r\n                  在编辑器中显示行号\r\n                </p>\r\n              </div>\r\n\r\n              {/* Minimap */}\r\n              <div>\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={localSettings.minimap}\r\n                    onChange={(e) => handleSettingChange('minimap', e.target.checked)}\r\n                    className=\"mr-3 text-blue-600 focus:ring-blue-500 rounded\"\r\n                  />\r\n                  <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                    缩略图\r\n                  </span>\r\n                </label>\r\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6\">\r\n                  显示文档的缩略图概览\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex justify-between items-center mt-8 pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n          <button\r\n            onClick={handleReset}\r\n            className=\"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors\"\r\n          >\r\n            重置为默认值\r\n          </button>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors\"\r\n          >\r\n            完成\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SettingsPanel;","import React, { useRef } from 'react';\nimport type { FileInfo } from '../../types/editor.types';\n\ninterface FileOperationsProps {\n  onOpen: (file: FileInfo) => void;\n  onSave: () => void;\n  onNew: () => void;\n  isDirty: boolean;\n  currentFile: FileInfo | null;\n  theme: 'light' | 'dark';\n  disabled?: boolean;\n}\n\nconst FileOperations: React.FC<FileOperationsProps> = ({\n  onOpen,\n  onSave,\n  onNew,\n  isDirty,\n  currentFile,\n  theme,\n  disabled = false\n}) => {\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    try {\n      const content = await readFileContent(file);\n      const fileInfo: FileInfo = {\n        name: file.name,\n        size: file.size,\n        lastModified: new Date(file.lastModified),\n        content\n      };\n      onOpen(fileInfo);\n    } catch (error) {\n      console.error('Error reading file:', error);\n      // TODO: Show error toast\n    }\n\n    // Reset input value to allow selecting the same file again\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const readFileContent = (file: File): Promise<string> => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = (e) => resolve(e.target?.result as string);\n      reader.onerror = () => reject(new Error('Failed to read file'));\n      reader.readAsText(file);\n    });\n  };\n\n  const handleOpenClick = () => {\n    if (disabled) return;\n    fileInputRef.current?.click();\n  };\n\n  const handleSaveClick = () => {\n    if (disabled) return;\n    onSave();\n  };\n\n  const handleNewClick = () => {\n    if (disabled) return;\n    onNew();\n  };\n\n  const buttonBaseClass = `\n    px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 flex items-center space-x-2\n    ${theme === 'dark' \n      ? 'text-gray-300 hover:text-white hover:bg-gray-700 border-gray-600' \n      : 'text-gray-700 hover:text-gray-900 hover:bg-gray-50 border-gray-300'\n    }\n    ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\n    border\n  `;\n\n  const primaryButtonClass = `\n    px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 flex items-center space-x-2\n    ${theme === 'dark' \n      ? 'bg-blue-600 hover:bg-blue-700 text-white' \n      : 'bg-blue-600 hover:bg-blue-700 text-white'\n    }\n    ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\n  `;\n\n  const dangerButtonClass = `\n    px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 flex items-center space-x-2\n    ${theme === 'dark' \n      ? 'bg-red-600 hover:bg-red-700 text-white' \n      : 'bg-red-600 hover:bg-red-700 text-white'\n    }\n    ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\n  `;\n\n  return (\n    <div className=\"flex items-center space-x-2\">\n      {/* Hidden file input */}\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\".json,.txt\"\n        onChange={handleFileSelect}\n        className=\"hidden\"\n        aria-label=\"Select JSON file\"\n      />\n\n      {/* New File Button */}\n      <button\n        onClick={handleNewClick}\n        className={buttonBaseClass}\n        disabled={disabled}\n        title=\"创建新文件 (Ctrl+N)\"\n      >\n        <span>📄</span>\n        <span>新建</span>\n      </button>\n\n      {/* Open File Button */}\n      <button\n        onClick={handleOpenClick}\n        className={buttonBaseClass}\n        disabled={disabled}\n        title=\"打开文件 (Ctrl+O)\"\n      >\n        <span>📁</span>\n        <span>打开</span>\n      </button>\n\n      {/* Save File Button */}\n      <button\n        onClick={handleSaveClick}\n        className={isDirty ? primaryButtonClass : buttonBaseClass}\n        disabled={disabled}\n        title=\"保存文件 (Ctrl+S)\"\n      >\n        <span>💾</span>\n        <span>保存</span>\n        {isDirty && (\n          <span className=\"w-2 h-2 bg-orange-500 rounded-full ml-1\" title=\"未保存的更改\" />\n        )}\n      </button>\n\n      {/* File Info */}\n      {currentFile && (\n        <div className={`\n          px-3 py-2 text-sm rounded-md border\n          ${theme === 'dark' \n            ? 'bg-gray-800 border-gray-600 text-gray-300' \n            : 'bg-gray-50 border-gray-300 text-gray-600'\n          }\n        `}>\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"font-medium\">{currentFile.name}</span>\n            <span className=\"text-xs opacity-75\">\n              ({formatFileSize(currentFile.size)})\n            </span>\n            {isDirty && (\n              <span className=\"text-orange-500 text-xs\">●</span>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst formatFileSize = (bytes: number): string => {\n  if (bytes < 1024) return `${bytes} B`;\n  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n};\n\nexport default FileOperations;","import React, { useState, useCallback } from 'react';\nimport type { FileInfo } from '../../types/editor.types';\n\ninterface FileDropZoneProps {\n  onFileDrop: (file: FileInfo) => void;\n  onError: (error: string) => void;\n  theme: 'light' | 'dark';\n  disabled?: boolean;\n  children: React.ReactNode;\n}\n\nconst FileDropZone: React.FC<FileDropZoneProps> = ({\n  onFileDrop,\n  onError,\n  theme,\n  disabled = false,\n  children\n}) => {\n  const [isDragOver, setIsDragOver] = useState(false);\n  const [dragCounter, setDragCounter] = useState(0);\n\n  const validateFile = (file: File): boolean => {\n    // Check file type\n    const validTypes = ['application/json', 'text/plain'];\n    const validExtensions = ['.json', '.txt'];\n    \n    const isValidType = validTypes.includes(file.type) || \n                       validExtensions.some(ext => file.name.toLowerCase().endsWith(ext));\n    \n    if (!isValidType) {\n      onError('Please select a JSON or text file');\n      return false;\n    }\n\n    // Check file size (max 10MB)\n    const maxSize = 10 * 1024 * 1024; // 10MB\n    if (file.size > maxSize) {\n      onError('File size must be less than 10MB');\n      return false;\n    }\n\n    return true;\n  };\n\n  const readFileContent = (file: File): Promise<string> => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = (e) => resolve(e.target?.result as string);\n      reader.onerror = () => reject(new Error('Failed to read file'));\n      reader.readAsText(file);\n    });\n  };\n\n  const handleFile = async (file: File) => {\n    if (!validateFile(file)) return;\n\n    try {\n      const content = await readFileContent(file);\n      const fileInfo: FileInfo = {\n        name: file.name,\n        size: file.size,\n        lastModified: new Date(file.lastModified),\n        content\n      };\n      onFileDrop(fileInfo);\n    } catch (error) {\n      onError('Failed to read file content');\n    }\n  };\n\n  const handleDragEnter = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (disabled) return;\n    \n    setDragCounter(prev => prev + 1);\n    \n    if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {\n      setIsDragOver(true);\n    }\n  }, [disabled]);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (disabled) return;\n    \n    setDragCounter(prev => {\n      const newCounter = prev - 1;\n      if (newCounter === 0) {\n        setIsDragOver(false);\n      }\n      return newCounter;\n    });\n  }, [disabled]);\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (disabled) return;\n    \n    // Set the dropEffect to indicate this is a copy operation\n    e.dataTransfer.dropEffect = 'copy';\n  }, [disabled]);\n\n  const handleDrop = useCallback(async (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (disabled) return;\n    \n    setIsDragOver(false);\n    setDragCounter(0);\n    \n    const files = Array.from(e.dataTransfer.files);\n    \n    if (files.length === 0) {\n      onError('No files were dropped');\n      return;\n    }\n    \n    if (files.length > 1) {\n      onError('Please drop only one file at a time');\n      return;\n    }\n    \n    await handleFile(files[0]);\n  }, [disabled, onError]);\n\n  const overlayClass = `\n    absolute inset-0 z-10 flex items-center justify-center\n    ${theme === 'dark' \n      ? 'bg-gray-900/80 border-blue-400' \n      : 'bg-white/80 border-blue-500'\n    }\n    border-2 border-dashed rounded-lg transition-all duration-200\n    ${isDragOver ? 'opacity-100' : 'opacity-0 pointer-events-none'}\n  `;\n\n  const dropMessageClass = `\n    px-6 py-4 rounded-lg text-center\n    ${theme === 'dark' \n      ? 'bg-gray-800 text-gray-200 border-gray-600' \n      : 'bg-white text-gray-700 border-gray-300'\n    }\n    border shadow-lg\n  `;\n\n  return (\n    <div\n      className=\"relative w-full h-full\"\n      onDragEnter={handleDragEnter}\n      onDragLeave={handleDragLeave}\n      onDragOver={handleDragOver}\n      onDrop={handleDrop}\n    >\n      {children}\n      \n      {/* Drag overlay */}\n      <div className={overlayClass}>\n        <div className={dropMessageClass}>\n          <div className=\"text-2xl mb-2\">📁</div>\n          <div className=\"text-lg font-medium mb-1\">\n            Drop your JSON file here\n          </div>\n          <div className=\"text-sm opacity-75\">\n            Supports .json and .txt files (max 10MB)\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default FileDropZone;","import React, { useState, useEffect, useRef } from 'react';\nimport Z_INDEX from '../../constants/zIndex';\n\ninterface SearchPanelProps {\n  isVisible: boolean;\n  onClose: () => void;\n  onSearch: (query: string, options: SearchOptions) => void;\n  onReplace: (searchQuery: string, replaceText: string, options: SearchOptions) => void;\n  onReplaceAll: (searchQuery: string, replaceText: string, options: SearchOptions) => void;\n  onFindNext: () => void;\n  onFindPrevious: () => void;\n  searchResults: SearchResult[];\n  currentResultIndex: number;\n  theme: 'light' | 'dark';\n}\n\ninterface SearchOptions {\n  caseSensitive: boolean;\n  useRegex: boolean;\n  wholeWord: boolean;\n}\n\ninterface SearchResult {\n  line: number;\n  column: number;\n  length: number;\n  text: string;\n}\n\n/**\n * 自定义搜索面板，固定在菜单行右侧\n */\nconst SearchPanel: React.FC<SearchPanelProps> = ({\n  isVisible,\n  onSearch,\n  onReplace,\n  onReplaceAll,\n  onFindNext,\n  onFindPrevious,\n  theme\n}) => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [replaceText, setReplaceText] = useState('');\n  const [showReplace, setShowReplace] = useState(false);\n  const [options, setOptions] = useState<SearchOptions>({\n    caseSensitive: false,\n    useRegex: false,\n    wholeWord: false\n  });\n  \n  const searchInputRef = useRef<HTMLInputElement>(null);\n  \n  // 当面板变为可见时，聚焦搜索输入框\n  useEffect(() => {\n    if (isVisible && searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n  }, [isVisible]);\n  \n  // 处理搜索 - 当输入框内容变化时自动触发搜索\n  useEffect(() => {\n    if (searchQuery.trim()) {\n      onSearch(searchQuery, options);\n    }\n  }, [searchQuery, options, onSearch]);\n  \n  // 处理替换\n  const handleReplace = () => {\n    if (searchQuery.trim()) {\n      onReplace(searchQuery, replaceText, options);\n    }\n  };\n  \n  // 处理全部替换\n  const handleReplaceAll = () => {\n    if (searchQuery.trim()) {\n      onReplaceAll(searchQuery, replaceText, options);\n    }\n  };\n  \n  // 处理按键事件\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      if (e.shiftKey) {\n        onFindPrevious();\n      } else {\n        onFindNext();\n      }\n      e.preventDefault();\n    }\n  };\n  \n  // 切换选项\n  const toggleOption = (option: keyof SearchOptions) => {\n    setOptions(prev => ({\n      ...prev,\n      [option]: !prev[option]\n    }));\n  };\n\n  const inputClass = `\n    w-full px-2 py-1 text-xs border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500\n    ${theme === 'dark' \n      ? 'bg-gray-800 text-gray-200 border-gray-600' \n      : 'bg-white text-gray-700 border-gray-300'\n    }\n  `;\n  \n  const buttonClass = `\n    px-1.5 py-0.5 text-xs font-medium rounded-md transition-colors\n    ${theme === 'dark' \n      ? 'bg-gray-700 hover:bg-gray-600 text-gray-200 border-gray-600' \n      : 'bg-gray-100 hover:bg-gray-200 text-gray-700 border-gray-300'\n    }\n    border\n  `;\n  \n  const optionButtonClass = (active: boolean) => `\n    px-1.5 py-0.5 text-xs font-medium rounded-md transition-colors border\n    ${theme === 'dark'\n      ? active \n        ? 'bg-blue-600 text-white border-blue-700' \n        : 'bg-gray-700 text-gray-300 border-gray-600 hover:bg-gray-600'\n      : active\n        ? 'bg-blue-500 text-white border-blue-600'\n        : 'bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200'\n    }\n  `;\n\n  return (\n    <div \n      className={`flex-shrink-0 ${!isVisible ? 'hidden' : ''}`}\n      style={{ \n        backgroundColor: theme === 'dark' ? '#1f2937' : 'white',\n        borderLeft: `1px solid ${theme === 'dark' ? '#374151' : '#e5e7eb'}`,\n        color: theme === 'dark' ? '#f3f4f6' : '#111827',\n        padding: '0.25rem 0.5rem',\n        zIndex: Z_INDEX.SEARCH_PANEL,\n        height: '100%',\n        display: 'flex',\n        alignItems: 'center',\n        position: 'absolute',\n        right: 0,\n        top: 0\n      }}\n    >\n      <div className=\"flex items-center space-x-1\">\n        {/* 搜索输入框 */}\n        <input\n          ref={searchInputRef}\n          type=\"text\"\n          value={searchQuery}\n          onChange={(e) => setSearchQuery(e.target.value)}\n          onKeyDown={handleKeyDown}\n          placeholder=\"搜索...\"\n          className={inputClass}\n          style={{ width: '150px' }}\n        />\n        \n        {/* 搜索选项按钮 */}\n        <button \n          className={optionButtonClass(options.caseSensitive)}\n          onClick={() => toggleOption('caseSensitive')}\n          title=\"区分大小写\"\n        >\n          Aa\n        </button>\n        <button \n          className={optionButtonClass(options.wholeWord)}\n          onClick={() => toggleOption('wholeWord')}\n          title=\"全字匹配\"\n        >\n          W\n        </button>\n        <button \n          className={optionButtonClass(options.useRegex)}\n          onClick={() => toggleOption('useRegex')}\n          title=\"使用正则表达式\"\n        >\n          .*\n        </button>\n        \n        {/* 导航按钮 */}\n        <button \n          className={buttonClass}\n          onClick={onFindPrevious}\n          title=\"查找上一个 (Shift+Enter)\"\n        >\n          ↑\n        </button>\n        <button \n          className={buttonClass}\n          onClick={onFindNext}\n          title=\"查找下一个 (Enter)\"\n        >\n          ↓\n        </button>\n        \n        {/* 替换切换按钮 */}\n        <button \n          className={buttonClass}\n          onClick={() => setShowReplace(!showReplace)}\n          title={showReplace ? \"隐藏替换\" : \"显示替换\"}\n        >\n          {showReplace ? \"−\" : \"+\"}\n        </button>\n        \n        {/* 替换输入框和按钮 */}\n        {showReplace && (\n          <>\n            <input\n              type=\"text\"\n              value={replaceText}\n              onChange={(e) => setReplaceText(e.target.value)}\n              placeholder=\"替换为...\"\n              className={inputClass}\n              style={{ width: '120px' }}\n            />\n            <button \n              className={buttonClass}\n              onClick={handleReplace}\n              title=\"替换\"\n            >\n              替换\n            </button>\n            <button \n              className={buttonClass}\n              onClick={handleReplaceAll}\n              title=\"全部替换\"\n            >\n              全部\n            </button>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SearchPanel;","import React, { Component, ErrorInfo, ReactNode } from 'react';\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n  fallback?: ReactNode;\r\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\r\n}\r\n\r\ninterface State {\r\n  hasError: boolean;\r\n  error?: Error;\r\n  errorInfo?: ErrorInfo;\r\n}\r\n\r\nclass ErrorBoundary extends Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): State {\r\n    // Update state so the next render will show the fallback UI\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n    // Log error details\r\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\r\n    \r\n    // Update state with error info\r\n    this.setState({\r\n      error,\r\n      errorInfo\r\n    });\r\n\r\n    // Call optional error handler\r\n    if (this.props.onError) {\r\n      this.props.onError(error, errorInfo);\r\n    }\r\n\r\n    // TODO: Send error to logging service\r\n    // logErrorToService(error, errorInfo);\r\n  }\r\n\r\n  handleRetry = () => {\r\n    this.setState({ hasError: false, error: undefined, errorInfo: undefined });\r\n  };\r\n\r\n  handleReload = () => {\r\n    window.location.reload();\r\n  };\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // Custom fallback UI\r\n      if (this.props.fallback) {\r\n        return this.props.fallback;\r\n      }\r\n\r\n      // Default error UI\r\n      return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\r\n          <div className=\"max-w-md w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6\">\r\n            <div className=\"flex items-center mb-4\">\r\n              <div className=\"flex-shrink-0\">\r\n                <svg\r\n                  className=\"h-8 w-8 text-red-500\"\r\n                  fill=\"none\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  stroke=\"currentColor\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n              <div className=\"ml-3\">\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100\">\r\n                  Something went wrong\r\n                </h3>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mb-4\">\r\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                The JSON Editor encountered an unexpected error. You can try to recover by clicking the buttons below.\r\n              </p>\r\n            </div>\r\n\r\n            {/* Error details (only in development) */}\r\n            {import.meta.env.DEV && this.state.error && (\r\n              <div className=\"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded\">\r\n                <h4 className=\"text-sm font-medium text-red-800 dark:text-red-200 mb-2\">\r\n                  Error Details:\r\n                </h4>\r\n                <pre className=\"text-xs text-red-700 dark:text-red-300 whitespace-pre-wrap overflow-auto max-h-32\">\r\n                  {this.state.error.message}\r\n                  {this.state.errorInfo?.componentStack && (\r\n                    <>\r\n                      {'\\n\\nComponent Stack:'}\r\n                      {this.state.errorInfo.componentStack}\r\n                    </>\r\n                  )}\r\n                </pre>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"flex space-x-3\">\r\n              <button\r\n                onClick={this.handleRetry}\r\n                className=\"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors\"\r\n              >\r\n                Try Again\r\n              </button>\r\n              <button\r\n                onClick={this.handleReload}\r\n                className=\"flex-1 bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors\"\r\n              >\r\n                Reload Page\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"mt-4 text-center\">\r\n              <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                If the problem persists, please refresh the page or contact support.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary;","import React, { useEffect, useState } from 'react';\r\n\r\nexport type ToastType = 'success' | 'error' | 'warning' | 'info';\r\n\r\nexport interface ToastMessage {\r\n  id: string;\r\n  type: ToastType;\r\n  title: string;\r\n  message?: string;\r\n  duration?: number;\r\n  action?: {\r\n    label: string;\r\n    onClick: () => void;\r\n  };\r\n}\r\n\r\ninterface ToastProps {\r\n  toast: ToastMessage;\r\n  onClose: (id: string) => void;\r\n}\r\n\r\nconst Toast: React.FC<ToastProps> = ({ toast, onClose }) => {\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const [isLeaving, setIsLeaving] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Trigger entrance animation\r\n    const timer = setTimeout(() => setIsVisible(true), 10);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const duration = toast.duration ?? 5000; // Default 5 seconds\r\n    if (duration > 0) {\r\n      const timer = setTimeout(() => {\r\n        handleClose();\r\n      }, duration);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [toast.duration]);\r\n\r\n  const handleClose = () => {\r\n    setIsLeaving(true);\r\n    setTimeout(() => {\r\n      onClose(toast.id);\r\n    }, 300); // Match animation duration\r\n  };\r\n\r\n  const getToastStyles = () => {\r\n    const baseStyles = `\r\n      relative flex items-start p-4 mb-3 rounded-lg shadow-lg border-l-4 transition-all duration-300 ease-in-out\r\n      ${isVisible && !isLeaving ? 'translate-x-0 opacity-100' : 'translate-x-full opacity-0'}\r\n    `;\r\n\r\n    switch (toast.type) {\r\n      case 'success':\r\n        return `${baseStyles} bg-green-50 dark:bg-green-900/20 border-green-500 text-green-800 dark:text-green-200`;\r\n      case 'error':\r\n        return `${baseStyles} bg-red-50 dark:bg-red-900/20 border-red-500 text-red-800 dark:text-red-200`;\r\n      case 'warning':\r\n        return `${baseStyles} bg-yellow-50 dark:bg-yellow-900/20 border-yellow-500 text-yellow-800 dark:text-yellow-200`;\r\n      case 'info':\r\n        return `${baseStyles} bg-blue-50 dark:bg-blue-900/20 border-blue-500 text-blue-800 dark:text-blue-200`;\r\n      default:\r\n        return `${baseStyles} bg-gray-50 dark:bg-gray-800 border-gray-500 text-gray-800 dark:text-gray-200`;\r\n    }\r\n  };\r\n\r\n  const getIcon = () => {\r\n    switch (toast.type) {\r\n      case 'success':\r\n        return (\r\n          <svg className=\"w-5 h-5 text-green-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\r\n          </svg>\r\n        );\r\n      case 'error':\r\n        return (\r\n          <svg className=\"w-5 h-5 text-red-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\r\n          </svg>\r\n        );\r\n      case 'warning':\r\n        return (\r\n          <svg className=\"w-5 h-5 text-yellow-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\r\n          </svg>\r\n        );\r\n      case 'info':\r\n        return (\r\n          <svg className=\"w-5 h-5 text-blue-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\r\n          </svg>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={getToastStyles()}>\r\n      {/* Icon */}\r\n      <div className=\"flex-shrink-0 mr-3\">\r\n        {getIcon()}\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"flex-1 min-w-0\">\r\n        <h4 className=\"text-sm font-medium\">{toast.title}</h4>\r\n        {toast.message && (\r\n          <p className=\"mt-1 text-sm opacity-90\">{toast.message}</p>\r\n        )}\r\n        {toast.action && (\r\n          <div className=\"mt-2\">\r\n            <button\r\n              onClick={toast.action.onClick}\r\n              className=\"text-sm font-medium underline hover:no-underline focus:outline-none\"\r\n            >\r\n              {toast.action.label}\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Close Button */}\r\n      <button\r\n        onClick={handleClose}\r\n        className=\"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none\"\r\n      >\r\n        <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n          <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\r\n        </svg>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Toast;","import React from 'react';\r\nimport Toast, { ToastMessage } from './Toast';\r\n\r\ninterface ToastContainerProps {\r\n  toasts: ToastMessage[];\r\n  onRemoveToast: (id: string) => void;\r\n  position?: 'top-right' | 'top-left' | 'bottom-right' | 'bottom-left' | 'top-center' | 'bottom-center';\r\n}\r\n\r\nconst ToastContainer: React.FC<ToastContainerProps> = ({\r\n  toasts,\r\n  onRemoveToast,\r\n  position = 'top-right'\r\n}) => {\r\n  const getPositionStyles = () => {\r\n    const baseStyles = 'fixed z-50 max-w-sm w-full';\r\n    \r\n    switch (position) {\r\n      case 'top-right':\r\n        return `${baseStyles} top-4 right-4`;\r\n      case 'top-left':\r\n        return `${baseStyles} top-4 left-4`;\r\n      case 'bottom-right':\r\n        return `${baseStyles} bottom-4 right-4`;\r\n      case 'bottom-left':\r\n        return `${baseStyles} bottom-4 left-4`;\r\n      case 'top-center':\r\n        return `${baseStyles} top-4 left-1/2 transform -translate-x-1/2`;\r\n      case 'bottom-center':\r\n        return `${baseStyles} bottom-4 left-1/2 transform -translate-x-1/2`;\r\n      default:\r\n        return `${baseStyles} top-4 right-4`;\r\n    }\r\n  };\r\n\r\n  if (toasts.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={getPositionStyles()}>\r\n      {toasts.map((toast) => (\r\n        <Toast\r\n          key={toast.id}\r\n          toast={toast}\r\n          onClose={onRemoveToast}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ToastContainer;","import React, { useEffect, useState, useRef } from 'react';\r\nimport Z_INDEX from '../../constants/zIndex';\r\n\r\ninterface ModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  children: React.ReactNode;\r\n  type?: 'success' | 'error' | 'warning' | 'info';\r\n  actions?: React.ReactNode;\r\n}\r\n\r\nconst Modal: React.FC<ModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  children,\r\n  type = 'info',\r\n  actions\r\n}) => {\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const modalRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Handle ESC key press to close modal\r\n  useEffect(() => {\r\n    const handleEscKey = (event: KeyboardEvent) => {\r\n      if (event.key === 'Escape' && isOpen) {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscKey);\r\n      document.body.style.overflow = 'hidden'; // Prevent background scrolling\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscKey);\r\n      document.body.style.overflow = ''; // Restore scrolling\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  // Animation handling\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      // Ensure DOM is updated before animation\r\n      requestAnimationFrame(() => {\r\n        requestAnimationFrame(() => {\r\n          setIsVisible(true);\r\n        });\r\n      });\r\n    } else {\r\n      setIsVisible(false);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // Focus trap inside modal\r\n  useEffect(() => {\r\n    if (isOpen && modalRef.current) {\r\n      modalRef.current.focus();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const getIconByType = () => {\r\n    switch (type) {\r\n      case 'success':\r\n        return (\r\n          <div className=\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30\">\r\n            <svg className=\"h-6 w-6 text-green-600 dark:text-green-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\" />\r\n            </svg>\r\n          </div>\r\n        );\r\n      case 'error':\r\n        return (\r\n          <div className=\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30\">\r\n            <svg className=\"h-6 w-6 text-red-600 dark:text-red-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </div>\r\n        );\r\n      case 'warning':\r\n        return (\r\n          <div className=\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30\">\r\n            <svg className=\"h-6 w-6 text-yellow-600 dark:text-yellow-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\r\n            </svg>\r\n          </div>\r\n        );\r\n      case 'info':\r\n      default:\r\n        return (\r\n          <div className=\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 dark:bg-blue-900/30\">\r\n            <svg className=\"h-6 w-6 text-blue-600 dark:text-blue-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n            </svg>\r\n          </div>\r\n        );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className=\"fixed inset-0 overflow-y-auto\" \r\n      style={{ \r\n        zIndex: Z_INDEX.MODAL_OVERLAY,\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n      }}\r\n      aria-labelledby=\"modal-title\" \r\n      role=\"dialog\" \r\n      aria-modal=\"true\"\r\n    >\r\n      {/* 背景遮罩 */}\r\n      <div \r\n        style={{ \r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n          opacity: isVisible ? 1 : 0,\r\n          transition: 'opacity 0.2s ease-in-out'\r\n        }} \r\n        aria-hidden=\"true\"\r\n        onClick={onClose}\r\n      ></div>\r\n      \r\n      {/* 模态框面板 */}\r\n      <div \r\n        ref={modalRef}\r\n        tabIndex={-1}\r\n        style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.5rem',\r\n          boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08)',\r\n          width: '100%',\r\n          maxWidth: '500px',\r\n          margin: '0 1rem',\r\n          opacity: isVisible ? 1 : 0,\r\n          transform: isVisible ? 'scale(1)' : 'scale(0.95)',\r\n          transition: 'opacity 0.2s ease-in-out, transform 0.2s ease-in-out',\r\n          zIndex: Z_INDEX.MODAL_CONTENT,\r\n          position: 'relative',\r\n          overflow: 'hidden'\r\n        }}\r\n        onClick={(e) => e.stopPropagation()} // 防止点击事件冒泡到背景层\r\n      >\r\n        <div style={{ padding: '1.5rem 1.5rem 1rem' }}>\r\n          <div style={{ display: 'flex', alignItems: 'flex-start' }}>\r\n            {getIconByType()}\r\n            <div style={{ marginLeft: '1rem', width: '100%' }}>\r\n              <h3 \r\n                style={{ \r\n                  fontSize: '1.125rem', \r\n                  fontWeight: 600, \r\n                  marginTop: 0,\r\n                  marginBottom: '0.5rem',\r\n                  color: '#111827'\r\n                }}\r\n                id=\"modal-title\"\r\n              >\r\n                {title}\r\n              </h3>\r\n              <div style={{ fontSize: '0.875rem', color: '#4B5563' }}>\r\n                {children}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div \r\n          style={{ \r\n            backgroundColor: '#F9FAFB', \r\n            padding: '0.75rem 1.5rem',\r\n            display: 'flex',\r\n            justifyContent: 'flex-end',\r\n            borderTop: '1px solid #E5E7EB'\r\n          }}\r\n        >\r\n          {actions || (\r\n            <button\r\n              type=\"button\"\r\n              style={{\r\n                backgroundColor: '#3B82F6',\r\n                color: 'white',\r\n                fontWeight: 500,\r\n                padding: '0.5rem 1rem',\r\n                borderRadius: '0.375rem',\r\n                border: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n              onClick={onClose}\r\n            >\r\n              确定\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;","import { useState, useRef, useEffect } from 'react';\nimport './App.css';\nimport JsonEditor from './components/Editor/JsonEditor';\nimport { SettingsPanel } from './components/Settings';\nimport { FileOperations, FileDropZone } from './components/FileManager';\nimport { SearchPanel } from './components/SearchReplace';\nimport { ErrorBoundary, ToastContainer, Modal } from './components/UI';\n// import { ErrorService } from './services/errorService';\nimport useToast from './hooks/useToast';\nimport useModal from './hooks/useModal';\nimport useKeyboardShortcuts from './hooks/useKeyboardShortcuts';\nimport type { EditorSettings, JsonError, FileInfo, EditorMethods } from './types/editor.types';\n\n// 开发环境下加载测试脚本\nif (process.env.NODE_ENV === 'development') {\n  // Use a more direct approach to avoid TypeScript errors with dynamic imports\n  const importModalTest = async () => {\n    try {\n      // @ts-ignore - Ignore TypeScript error for this development-only import\n      await import('./test/modalTest');\n    } catch (error) {\n      console.error('Error loading modalTest:', error);\n    }\n  };\n  importModalTest();\n}\n\nfunction App() {\n  const [content, setContent] = useState('{\\n  \"example\": \"JSON content\",\\n  \"number\": 42,\\n  \"boolean\": true\\n}');\n  const [errors, setErrors] = useState<JsonError[]>([]);\n  const [theme, setTheme] = useState<'light' | 'dark'>('light');\n  const [cursorPosition, setCursorPosition] = useState({ line: 1, column: 1 });\n  const [selection, setSelection] = useState({ startLine: 1, startColumn: 1, endLine: 1, endColumn: 1 });\n  const [showSettings, setShowSettings] = useState(false);\n  // We still keep this state for the fallback search panel, but it's rarely used now\n  const [showSearch, setShowSearch] = useState(false);\n  const [currentFile, setCurrentFile] = useState<FileInfo | null>(null);\n  const [isDirty, setIsDirty] = useState(false);\n  const [originalContent, setOriginalContent] = useState('{\\n  \"example\": \"JSON content\",\\n  \"number\": 42,\\n  \"boolean\": true\\n}');\n  // 移除自定义搜索状态，使用Monaco内置搜索功能\n  \n  const editorRef = useRef<EditorMethods>(null);\n  const { toasts, removeToast, showSuccess } = useToast();\n  const { isOpen, options, closeModal, showError, showSuccess: showModalSuccess, showWarning, showConfirm } = useModal();\n  \n  // 移除useEffect，改为直接在导航函数中处理\n  \n  const [settings, setSettings] = useState<EditorSettings>({\n    indentSize: 2,\n    indentType: 'spaces',\n    wordWrap: false,\n    lineNumbers: true,\n    minimap: true\n  });\n\n  const handleContentChange = (value: string) => {\n    handleContentChangeWithDirty(value);\n  };\n\n  const handleValidationChange = (validationErrors: JsonError[]) => {\n    setErrors(validationErrors);\n  };\n\n  const handleCursorPositionChange = (position: { line: number; column: number }) => {\n    setCursorPosition(position);\n  };\n\n  const handleSelectionChange = (sel: { startLine: number; startColumn: number; endLine: number; endColumn: number }) => {\n    setSelection(sel);\n  };\n\n  const toggleTheme = () => {\n    setTheme(prev => prev === 'light' ? 'dark' : 'light');\n  };\n\n  const handleSettingsChange = (newSettings: Partial<EditorSettings>) => {\n    setSettings(prev => ({ ...prev, ...newSettings }));\n  };\n\n  const toggleSettings = () => {\n    setShowSettings(prev => !prev);\n  };\n\n  // File operations handlers\n  const handleFileOpen = (file: FileInfo) => {\n    if (isDirty) {\n      showConfirm(\n        '未保存的更改',\n        '您有未保存的更改。是否要放弃这些更改？',\n        () => {\n          setCurrentFile(file);\n          setContent(file.content);\n          setOriginalContent(file.content);\n          setIsDirty(false);\n        }\n      );\n      return;\n    }\n    \n    setCurrentFile(file);\n    setContent(file.content);\n    setOriginalContent(file.content);\n    setIsDirty(false);\n  };\n\n  const handleFileSave = () => {\n    const filename = currentFile?.name || 'untitled.json';\n    const blob = new Blob([content], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n    \n    setOriginalContent(content);\n    setIsDirty(false);\n    showModalSuccess('文件已保存', `成功保存文件 ${filename}`);\n  };\n\n  const handleFileNew = () => {\n    if (isDirty) {\n      showConfirm(\n        '未保存的更改',\n        '您有未保存的更改。是否要放弃这些更改？',\n        () => {\n          const newContent = '{\\n  \\n}';\n          setCurrentFile(null);\n          setContent(newContent);\n          setOriginalContent(newContent);\n          setIsDirty(false);\n        }\n      );\n      return;\n    }\n    \n    const newContent = '{\\n  \\n}';\n    setCurrentFile(null);\n    setContent(newContent);\n    setOriginalContent(newContent);\n    setIsDirty(false);\n  };\n\n  const handleFileError = (error: string) => {\n    showError('文件错误', error);\n  };\n\n  // Track content changes for dirty state\n  const handleContentChangeWithDirty = (value: string) => {\n    setContent(value);\n    setIsDirty(value !== originalContent);\n  };\n\n  // Format and minify handlers\n  const handleFormat = () => {\n    try {\n      const parsed = JSON.parse(content);\n      const formatted = JSON.stringify(parsed, null, settings.indentSize);\n      setContent(formatted);\n      setIsDirty(formatted !== originalContent);\n      showModalSuccess('JSON 格式化成功', '您的 JSON 已成功格式化。');\n    } catch (error) {\n      showError('格式化错误', '无法格式化无效的 JSON。请先修复语法错误。');\n    }\n  };\n\n  const handleMinify = () => {\n    try {\n      const parsed = JSON.parse(content);\n      const minified = JSON.stringify(parsed);\n      setContent(minified);\n      setIsDirty(minified !== originalContent);\n      showModalSuccess('JSON 压缩成功', '您的 JSON 已成功压缩。');\n    } catch (error) {\n      showError('压缩错误', '无法压缩无效的 JSON。请先修复语法错误。');\n    }\n  };\n\n  const handleValidate = () => {\n    try {\n      JSON.parse(content);\n      showModalSuccess('JSON 验证通过', '您的 JSON 语法有效！');\n    } catch (error) {\n      showError('JSON 验证失败', `JSON 语法错误: ${(error as Error).message}`);\n    }\n  };\n\n  // 不再需要自定义装饰器处理，使用Monaco内置的搜索高亮\n  \n  // Search and replace handlers\n  const toggleSearch = () => {\n    // 使用Monaco编辑器内置的搜索功能\n    if (editorRef.current) {\n      try {\n        // 确保编辑器获得焦点\n        editorRef.current.focus && editorRef.current.focus();\n        \n        // 直接调用编辑器的find方法\n        // 确保编辑器已经完全初始化\n        setTimeout(() => {\n          editorRef.current?.find();\n        }, 0);\n        \n        return;\n      } catch (error) {\n        console.error('Error triggering search:', error);\n      }\n    }\n    \n    // 如果Monaco编辑器不可用，回退到原来的搜索面板\n    setShowSearch(prev => !prev);\n  };\n  \n  // 添加替换功能触发器\n  const toggleReplace = () => {\n    if (editorRef.current) {\n      try {\n        // 确保编辑器获得焦点\n        editorRef.current.focus && editorRef.current.focus();\n        \n        // 直接调用JsonEditor组件中的replace方法\n        // 确保编辑器已经完全初始化\n        setTimeout(() => {\n          editorRef.current?.replace();\n        }, 0);\n      } catch (error) {\n        console.error('Error triggering replace:', error);\n      }\n    }\n  };\n\n  // 使用Monaco编辑器的搜索功能，但通过自定义搜索面板控制\n  const handleSearch = (query: string, options: any) => {\n    if (editorRef.current && query.trim()) {\n      const editor = editorRef.current.getEditor();\n      if (editor) {\n        // 获取Monaco的搜索控制器\n        const findController = editor.getContribution('editor.contrib.findController') as any;\n        if (findController && typeof findController.getState === 'function') {\n          try {\n            // 设置搜索选项\n            const findState = findController.getState();\n            findState.change({\n              searchString: query,\n              isRegex: options.useRegex,\n              matchCase: options.caseSensitive,\n              wholeWord: options.wholeWord,\n              searchScope: null,\n              matchesPosition: null,\n              matchesCount: null,\n            }, false);\n            \n            // 执行搜索\n            findController.start({\n              forceRevealReplace: false,\n              seedSearchStringFromSelection: false,\n              seedSearchStringFromGlobalClipboard: false,\n              shouldFocus: 0,\n              shouldAnimate: true,\n              updateSearchScope: false,\n              loop: true\n            });\n          } catch (e) {\n            console.error('Error in custom search:', e);\n            // 回退到基本搜索方法\n            editor.trigger('keyboard', 'actions.find', {});\n          }\n        } else {\n          // 回退到基本搜索方法\n          editor.trigger('keyboard', 'actions.find', {});\n        }\n      }\n    }\n  };\n\n  // 使用Monaco编辑器的替换功能，但通过自定义搜索面板控制\n  const handleReplace = (searchQuery: string, replaceText: string, options: any) => {\n    if (editorRef.current && searchQuery.trim()) {\n      const editor = editorRef.current.getEditor();\n      if (editor) {\n        // 获取Monaco的搜索控制器\n        const findController = editor.getContribution('editor.contrib.findController') as any;\n        if (findController && typeof findController.getState === 'function') {\n          try {\n            // 设置搜索和替换选项\n            const findState = findController.getState();\n            findState.change({\n              searchString: searchQuery,\n              replaceString: replaceText,\n              isRegex: options.useRegex,\n              matchCase: options.caseSensitive,\n              wholeWord: options.wholeWord,\n              searchScope: null,\n              matchesPosition: null,\n              matchesCount: null,\n            }, false);\n            \n            // 执行替换\n            findController.replace && findController.replace();\n          } catch (e) {\n            console.error('Error in custom replace:', e);\n            // 回退到基本替换方法\n            editor.trigger('keyboard', 'editor.action.startFindReplaceAction', {});\n          }\n        } else {\n          // 回退到基本替换方法\n          editor.trigger('keyboard', 'editor.action.startFindReplaceAction', {});\n        }\n      }\n    }\n  };\n\n  const handleReplaceAll = (searchQuery: string, replaceText: string, options: any) => {\n    if (editorRef.current && searchQuery.trim()) {\n      const editor = editorRef.current.getEditor();\n      if (editor) {\n        // 获取Monaco的搜索控制器\n        const findController = editor.getContribution('editor.contrib.findController') as any;\n        if (findController && typeof findController.getState === 'function') {\n          try {\n            // 设置搜索和替换选项\n            const findState = findController.getState();\n            findState.change({\n              searchString: searchQuery,\n              replaceString: replaceText,\n              isRegex: options.useRegex,\n              matchCase: options.caseSensitive,\n              wholeWord: options.wholeWord,\n              searchScope: null,\n              matchesPosition: null,\n              matchesCount: null,\n            }, false);\n            \n            // 执行全部替换\n            findController.replaceAll && findController.replaceAll();\n          } catch (e) {\n            console.error('Error in custom replace all:', e);\n            // 回退到基本替换方法\n            editor.trigger('keyboard', 'editor.action.startFindReplaceAction', {});\n          }\n        } else {\n          // 回退到基本替换方法\n          editor.trigger('keyboard', 'editor.action.startFindReplaceAction', {});\n        }\n      }\n    }\n  };\n\n  const handleFindNext = () => {\n    // 使用Monaco编辑器内置的查找下一个功能\n    if (editorRef.current) {\n      const editor = editorRef.current.getEditor();\n      if (editor) {\n        editor.trigger('keyboard', 'editor.action.nextMatchFindAction', {});\n      }\n    }\n  };\n\n  const handleFindPrevious = () => {\n    // 使用Monaco编辑器内置的查找上一个功能\n    if (editorRef.current) {\n      const editor = editorRef.current.getEditor();\n      if (editor) {\n        editor.trigger('keyboard', 'editor.action.previousMatchFindAction', {});\n      }\n    }\n  };\n\n  // Define keyboard shortcuts\n  const shortcuts = [\n    {\n      key: 'n',\n      ctrlKey: true,\n      action: handleFileNew,\n      description: 'Create new file'\n    },\n    {\n      key: 'o',\n      ctrlKey: true,\n      action: () => {\n        // Trigger file input click\n        const fileInput = document.querySelector('input[type=\"file\"]') as HTMLInputElement;\n        fileInput?.click();\n      },\n      description: 'Open file'\n    },\n    {\n      key: 's',\n      ctrlKey: true,\n      action: handleFileSave,\n      description: 'Save file'\n    },\n    {\n      key: 'f',\n      ctrlKey: true,\n      action: toggleSearch,\n      description: 'Find/Search'\n    },\n    {\n      key: 'h',\n      ctrlKey: true,\n      action: toggleReplace,\n      description: 'Find and Replace'\n    },\n    {\n      key: ',',\n      ctrlKey: true,\n      action: toggleSettings,\n      description: 'Open settings'\n    },\n    {\n      key: 'Enter',\n      ctrlKey: true,\n      shiftKey: true,\n      action: handleFormat,\n      description: 'Format JSON'\n    },\n    {\n      key: 'Enter',\n      ctrlKey: true,\n      altKey: true,\n      action: handleMinify,\n      description: 'Minify JSON'\n    },\n    {\n      key: 'Enter',\n      ctrlKey: true,\n      action: handleValidate,\n      description: 'Validate JSON'\n    },\n    {\n      key: 'd',\n      ctrlKey: true,\n      action: toggleTheme,\n      description: 'Toggle dark/light theme'\n    }\n  ];\n\n  // Initialize keyboard shortcuts\n  useKeyboardShortcuts(shortcuts);\n\n  return (\n    <ErrorBoundary>\n      <div className=\"h-screen flex flex-col bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100\">\n      {/* Header */}\n      <header className=\"h-12 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center px-4 flex-shrink-0\">\n        <h1 className=\"text-lg font-semibold\">PDX JSON 编辑器</h1>\n        <div className=\"ml-auto flex items-center space-x-2\">\n          <button className=\"btn-secondary text-sm\" onClick={toggleTheme}>\n            {theme === 'light' ? '深色' : '浅色'}\n          </button>\n        </div>\n      </header>\n\n      {/* Toolbar */}\n      <div className=\"h-12 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center px-4 flex-shrink-0 relative\">\n        <div className=\"flex items-center space-x-2\">\n          <FileOperations\n            onOpen={handleFileOpen}\n            onSave={handleFileSave}\n            onNew={handleFileNew}\n            isDirty={isDirty}\n            currentFile={currentFile}\n            theme={theme}\n          />\n          <div className=\"w-px h-6 bg-gray-300 dark:bg-gray-600\"></div>\n          <button className=\"btn-secondary text-sm\" onClick={handleFormat}>格式化</button>\n          <button className=\"btn-secondary text-sm\" onClick={handleMinify}>压缩</button>\n          <button className=\"btn-secondary text-sm\" onClick={handleValidate}>验证</button>\n          <div className=\"w-px h-6 bg-gray-300 dark:bg-gray-600\"></div>\n          <button className=\"btn-secondary text-sm\" onClick={toggleSettings}>设置</button>\n        </div>\n        \n        {/* 固定在工具栏最右侧的搜索面板 */}\n        <div className=\"ml-auto\">\n          <SearchPanel\n            isVisible={true}\n            onClose={() => {}}\n            onSearch={handleSearch}\n            onReplace={handleReplace}\n            onReplaceAll={handleReplaceAll}\n            onFindNext={handleFindNext}\n            onFindPrevious={handleFindPrevious}\n            searchResults={[]}\n            currentResultIndex={0}\n            theme={theme}\n          />\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <main className=\"flex-1 flex overflow-hidden relative\">\n        {/* Editor Area with File Drop Zone */}\n        <div className=\"flex-1 p-4\">\n          <FileDropZone\n            onFileDrop={handleFileOpen}\n            onError={handleFileError}\n            theme={theme}\n          >\n            <div className=\"editor-container h-full\">\n              <JsonEditor\n                ref={editorRef}\n                value={content}\n                onChange={handleContentChange}\n                onValidationChange={handleValidationChange}\n                onCursorPositionChange={handleCursorPositionChange}\n                onSelectionChange={handleSelectionChange}\n                theme={theme}\n                settings={settings}\n              />\n            </div>\n          </FileDropZone>\n        </div>\n      </main>\n\n      {/* Status Bar */}\n      <footer className=\"h-6 bg-gray-100 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex items-center px-4 text-xs text-gray-600 dark:text-gray-400 flex-shrink-0\">\n        <span>\n          {errors.length === 0 ? (\n            <span className=\"text-green-600 dark:text-green-400\">✓ JSON 有效</span>\n          ) : (\n            <span className=\"text-red-600 dark:text-red-400\">\n              ✗ {errors.length} 个错误\n            </span>\n          )}\n        </span>\n        <span className=\"ml-4\">\n          行 {cursorPosition.line}, 列 {cursorPosition.column}\n        </span>\n        {selection.startLine !== selection.endLine || selection.startColumn !== selection.endColumn ? (\n          <span className=\"ml-4\">\n            (已选择 {Math.abs(selection.endLine - selection.startLine) + 1} 行, {\n              selection.startLine === selection.endLine \n                ? Math.abs(selection.endColumn - selection.startColumn)\n                : '多个'\n            } 字符)\n          </span>\n        ) : null}\n        <span className=\"ml-auto\">字符数: {content.length}</span>\n      </footer>\n\n      {/* Settings Panel */}\n      <SettingsPanel\n        isOpen={showSettings}\n        onClose={() => setShowSettings(false)}\n        settings={settings}\n        onSettingsChange={handleSettingsChange}\n        theme={theme}\n        onThemeChange={setTheme}\n      />\n\n      {/* Toast Notifications */}\n      <ToastContainer\n        toasts={toasts}\n        onRemoveToast={removeToast}\n        position=\"top-right\"\n      />\n      \n      {/* Modal Dialog */}\n      <Modal\n        isOpen={isOpen}\n        onClose={closeModal}\n        title={options.title}\n        type={options.type}\n        actions={\n          options.showCancel ? (\n            <>\n              <button\n                type=\"button\"\n                className=\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm\"\n                onClick={() => {\n                  options.onConfirm?.();\n                  closeModal();\n                }}\n              >\n                {options.confirmText || '确定'}\n              </button>\n              <button\n                type=\"button\"\n                className=\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600\"\n                onClick={() => {\n                  options.onCancel?.();\n                  closeModal();\n                }}\n              >\n                {options.cancelText || '取消'}\n              </button>\n            </>\n          ) : (\n            <button\n              type=\"button\"\n              className=\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm\"\n              onClick={() => {\n                options.onConfirm?.();\n                closeModal();\n              }}\n            >\n              {options.confirmText || '确定'}\n            </button>\n          )\n        }\n      >\n        <p className=\"text-gray-700 dark:text-gray-300\">{options.message}</p>\n      </Modal>\n    </div>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;","import { useState, useCallback } from 'react';\r\nimport type { ToastMessage, ToastType } from '../components/UI';\r\n\r\nconst useToast = () => {\r\n  const [toasts, setToasts] = useState<ToastMessage[]>([]);\r\n\r\n  const addToast = useCallback((\r\n    type: ToastType,\r\n    title: string,\r\n    message?: string,\r\n    options?: {\r\n      duration?: number;\r\n      action?: {\r\n        label: string;\r\n        onClick: () => void;\r\n      };\r\n    }\r\n  ) => {\r\n    const id = Date.now().toString() + Math.random().toString(36).substr(2, 9);\r\n    const toast: ToastMessage = {\r\n      id,\r\n      type,\r\n      title,\r\n      message,\r\n      duration: options?.duration ?? (type === 'error' ? 0 : 5000), // Errors stay until dismissed\r\n      action: options?.action\r\n    };\r\n\r\n    setToasts(prev => [...prev, toast]);\r\n    return id;\r\n  }, []);\r\n\r\n  const removeToast = useCallback((id: string) => {\r\n    setToasts(prev => prev.filter(toast => toast.id !== id));\r\n  }, []);\r\n\r\n  const clearAllToasts = useCallback(() => {\r\n    setToasts([]);\r\n  }, []);\r\n\r\n  // Convenience methods\r\n  const showSuccess = useCallback((title: string, message?: string, options?: { duration?: number }) => {\r\n    return addToast('success', title, message, options);\r\n  }, [addToast]);\r\n\r\n  const showError = useCallback((title: string, message?: string, options?: { action?: { label: string; onClick: () => void } }) => {\r\n    return addToast('error', title, message, { duration: 0, ...options });\r\n  }, [addToast]);\r\n\r\n  const showWarning = useCallback((title: string, message?: string, options?: { duration?: number }) => {\r\n    return addToast('warning', title, message, options);\r\n  }, [addToast]);\r\n\r\n  const showInfo = useCallback((title: string, message?: string, options?: { duration?: number }) => {\r\n    return addToast('info', title, message, options);\r\n  }, [addToast]);\r\n\r\n  return {\r\n    toasts,\r\n    addToast,\r\n    removeToast,\r\n    clearAllToasts,\r\n    showSuccess,\r\n    showError,\r\n    showWarning,\r\n    showInfo\r\n  };\r\n};\r\n\r\nexport default useToast;","import { useState, useCallback } from 'react';\r\n\r\nexport type ModalType = 'success' | 'error' | 'warning' | 'info';\r\n\r\nexport interface ModalOptions {\r\n  title: string;\r\n  message: string;\r\n  type?: ModalType;\r\n  onConfirm?: () => void;\r\n  onCancel?: () => void;\r\n  confirmText?: string;\r\n  cancelText?: string;\r\n  showCancel?: boolean;\r\n}\r\n\r\nconst useModal = () => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [options, setOptions] = useState<ModalOptions>({\r\n    title: '',\r\n    message: '',\r\n    type: 'info',\r\n    confirmText: '确定',\r\n    cancelText: '取消',\r\n    showCancel: false\r\n  });\r\n\r\n  const openModal = useCallback((newOptions: ModalOptions) => {\r\n    setOptions(prevOptions => ({\r\n      ...prevOptions,\r\n      ...newOptions\r\n    }));\r\n    setIsOpen(true);\r\n  }, []);\r\n\r\n  const closeModal = useCallback(() => {\r\n    setIsOpen(false);\r\n  }, []);\r\n\r\n  const showSuccess = useCallback((title: string, message: string, onConfirm?: () => void) => {\r\n    openModal({\r\n      title,\r\n      message,\r\n      type: 'success',\r\n      onConfirm,\r\n      showCancel: false\r\n    });\r\n  }, [openModal]);\r\n\r\n  const showError = useCallback((title: string, message: string, onConfirm?: () => void) => {\r\n    openModal({\r\n      title,\r\n      message,\r\n      type: 'error',\r\n      onConfirm,\r\n      showCancel: false\r\n    });\r\n  }, [openModal]);\r\n\r\n  const showWarning = useCallback((title: string, message: string, onConfirm?: () => void, onCancel?: () => void) => {\r\n    openModal({\r\n      title,\r\n      message,\r\n      type: 'warning',\r\n      onConfirm,\r\n      onCancel,\r\n      showCancel: true\r\n    });\r\n  }, [openModal]);\r\n\r\n  const showConfirm = useCallback((title: string, message: string, onConfirm?: () => void, onCancel?: () => void) => {\r\n    openModal({\r\n      title,\r\n      message,\r\n      type: 'info',\r\n      onConfirm,\r\n      onCancel,\r\n      showCancel: true\r\n    });\r\n  }, [openModal]);\r\n\r\n  return {\r\n    isOpen,\r\n    options,\r\n    openModal,\r\n    closeModal,\r\n    showSuccess,\r\n    showError,\r\n    showWarning,\r\n    showConfirm\r\n  };\r\n};\r\n\r\nexport default useModal;","import { useEffect, useCallback, useRef } from 'react';\r\n\r\ninterface KeyboardShortcut {\r\n  key: string;\r\n  ctrlKey?: boolean;\r\n  shiftKey?: boolean;\r\n  altKey?: boolean;\r\n  metaKey?: boolean;\r\n  action: () => void;\r\n  description: string;\r\n  preventDefault?: boolean;\r\n}\r\n\r\ninterface UseKeyboardShortcutsOptions {\r\n  enabled?: boolean;\r\n  target?: HTMLElement | Document;\r\n}\r\n\r\nconst useKeyboardShortcuts = (\r\n  shortcuts: KeyboardShortcut[],\r\n  options: UseKeyboardShortcutsOptions = {}\r\n) => {\r\n  const { enabled = true, target = document } = options;\r\n  const shortcutsRef = useRef(shortcuts);\r\n\r\n  // Update shortcuts ref when shortcuts change\r\n  useEffect(() => {\r\n    shortcutsRef.current = shortcuts;\r\n  }, [shortcuts]);\r\n\r\n  const handleKeyDown = useCallback((event: Event) => {\r\n    const keyboardEvent = event as KeyboardEvent;\r\n    if (!enabled) return;\r\n\r\n    const matchingShortcut = shortcutsRef.current.find(shortcut => {\r\n      const keyMatch = shortcut.key.toLowerCase() === keyboardEvent.key.toLowerCase() ||\r\n                     shortcut.key.toLowerCase() === keyboardEvent.code.toLowerCase();\r\n      \r\n      const ctrlMatch = (shortcut.ctrlKey ?? false) === keyboardEvent.ctrlKey;\r\n      const shiftMatch = (shortcut.shiftKey ?? false) === keyboardEvent.shiftKey;\r\n      const altMatch = (shortcut.altKey ?? false) === keyboardEvent.altKey;\r\n      const metaMatch = (shortcut.metaKey ?? false) === keyboardEvent.metaKey;\r\n\r\n      return keyMatch && ctrlMatch && shiftMatch && altMatch && metaMatch;\r\n    });\r\n\r\n    if (matchingShortcut) {\r\n      if (matchingShortcut.preventDefault !== false) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n      }\r\n      matchingShortcut.action();\r\n    }\r\n  }, [enabled]);\r\n\r\n  useEffect(() => {\r\n    if (!enabled) return;\r\n\r\n    const targetElement = target as EventTarget;\r\n    targetElement.addEventListener('keydown', handleKeyDown);\r\n\r\n    return () => {\r\n      targetElement.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [handleKeyDown, enabled, target]);\r\n\r\n  const getShortcutsList = useCallback(() => {\r\n    return shortcuts.map(shortcut => ({\r\n      keys: [\r\n        shortcut.ctrlKey && 'Ctrl',\r\n        shortcut.metaKey && 'Cmd',\r\n        shortcut.shiftKey && 'Shift',\r\n        shortcut.altKey && 'Alt',\r\n        shortcut.key\r\n      ].filter(Boolean).join(' + '),\r\n      description: shortcut.description\r\n    }));\r\n  }, [shortcuts]);\r\n\r\n  return {\r\n    getShortcutsList\r\n  };\r\n};\r\n\r\nexport default useKeyboardShortcuts;"],"names":["JsonEditor","forwardRef","value","onChange","onValidationChange","onCursorPositionChange","onSelectionChange","theme","settings","ref","editorRef","useRef","monacoRef","formatDocument","useCallback","current","trigger","undo","redo","selectAll","find","focus","editor","monaco","e","actions","findAction1","getAction","findAction2","push","findAction","a","id","toLowerCase","includes","run","KeyMod","CtrlCmd","KeyCode","KeyF","window","error","replace","replaceAction1","replaceAction2","replaceAction","KeyH","gotoLine","line","column","revealLineInCenter","setPosition","lineNumber","getSelection","getSelectedText","selection","model","getModel","getValueInRange","insertText","text","range","Range","executeEdits","forceMoveMarkers","canUndo","canRedo","useImperativeHandle","getEditor","getMonaco","useEffect","updateOptions","tabSize","indentSize","insertSpaces","indentType","wordWrap","lineNumbers","minimap","enabled","editorOptions","language","automaticLayout","fontSize","fontFamily","scrollBeyondLastLine","renderWhitespace","bracketPairColorization","matchBrackets","showFoldingControls","foldingStrategy","foldingHighlight","autoClosingBrackets","autoClosingQuotes","autoClosingDelete","autoClosingOvertype","autoSurround","autoIndent","formatOnPaste","formatOnType","suggest","showKeywords","showSnippets","showFunctions","showConstructors","showFields","showVariables","showClasses","showStructs","showInterfaces","showModules","showProperties","showEvents","showOperators","showUnits","showValues","showConstants","showEnums","showEnumMembers","showColors","showFiles","showReferences","showFolders","showTypeParameters","showIssues","showUsers","insertMode","filterGraceful","snippetsPreventQuickSuggestions","quickSuggestions","other","comments","strings","multiCursorModifier","multiCursorMergeOverlapping","multiCursorPaste","addExtraSpaceOnTop","autoFindInSelection","seedSearchStringFromSelection","loop","renderValidationDecorations","renderLineHighlight","renderLineHighlightOnlyWhenFocus","undoStopOnWordBoundary","largeFileOptimizations","accessibilitySupport","ariaLabel","cursorBlinking","cursorSmoothCaretAnimation","cursorStyle","cursorWidth","smoothScrolling","mouseWheelScrollSensitivity","fastScrollSensitivity","jsx","className","children","Editor","onMount","languages","json","jsonDefaults","setDiagnosticsOptions","validate","allowComments","schemas","enableSchemaRequest","schemaValidation","schemaRequest","setLanguageConfiguration","brackets","autoClosingPairs","open","close","notIn","surroundingPairs","findController","getContribution","getState","onDidBlurEditorWidget","setTimeout","state","isRevealed","addCommand","markersDisposable","onDidChangeMarkers","uris","editorUri","uri","toString","errors","getModelMarkers","resource","map","marker","startLineNumber","startColumn","message","severity","MarkerSeverity","Error","cursorDisposable","onDidChangeCursorPosition","position","selectionDisposable","onDidChangeCursorSelection","startLine","endLine","endLineNumber","endColumn","contentDisposable","onDidChangeContent","KeyD","Shift","KeyK","Slash","dispose","options","loading","ThemeSelector","onThemeChange","disabled","buttonClass","switchClass","jsxs","title","type","onClick","role","Z_INDEX","SettingsPanel","isOpen","onClose","onSettingsChange","localSettings","setLocalSettings","useState","modalRef","handleSettingChange","key","newSettings","handleEscKey","event","document","addEventListener","body","style","overflow","removeEventListener","top","left","right","bottom","backgroundColor","display","alignItems","justifyContent","zIndex","tabIndex","borderRadius","padding","boxShadow","maxHeight","overflowY","width","maxWidth","Number","target","name","checked","defaultSettings","FileOperations","onOpen","onSave","onNew","isDirty","currentFile","fileInputRef","readFileContent","file","Promise","resolve","reject","reader","FileReader","onload","result","onerror","readAsText","buttonBaseClass","primaryButtonClass","accept","async","files","content","fileInfo","size","lastModified","Date","click","formatFileSize","bytes","toFixed","FileDropZone","onFileDrop","onError","isDragOver","setIsDragOver","dragCounter","setDragCounter","handleFile","some","ext","endsWith","validateFile","handleDragEnter","preventDefault","stopPropagation","prev","dataTransfer","items","length","handleDragLeave","newCounter","handleDragOver","dropEffect","handleDrop","Array","from","overlayClass","dropMessageClass","onDragEnter","onDragLeave","onDragOver","onDrop","SearchPanel","isVisible","onSearch","onReplace","onReplaceAll","onFindNext","onFindPrevious","searchQuery","setSearchQuery","replaceText","setReplaceText","showReplace","setShowReplace","setOptions","caseSensitive","useRegex","wholeWord","searchInputRef","trim","toggleOption","option","inputClass","optionButtonClass","active","borderLeft","color","height","onKeyDown","shiftKey","placeholder","Fragment","ErrorBoundary","Component","constructor","props","super","this","hasError","getDerivedStateFromError","componentDidCatch","errorInfo","setState","handleRetry","handleReload","location","reload","render","fallback","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","Toast","toast","setIsVisible","isLeaving","setIsLeaving","timer","clearTimeout","duration","handleClose","baseStyles","getToastStyles","fillRule","clipRule","getIcon","action","label","ToastContainer","toasts","onRemoveToast","getPositionStyles","Modal","requestAnimationFrame","opacity","transition","margin","transform","getIconByType","marginLeft","fontWeight","marginTop","marginBottom","borderTop","border","cursor","App","setContent","setErrors","setTheme","cursorPosition","setCursorPosition","setSelection","showSettings","setShowSettings","showSearch","setShowSearch","setCurrentFile","setIsDirty","originalContent","setOriginalContent","removeToast","setToasts","addToast","now","Math","random","substr","filter","clearAllToasts","showSuccess","showError","showWarning","showInfo","useToast","closeModal","showModalSuccess","showConfirm","setIsOpen","confirmText","cancelText","showCancel","openModal","newOptions","prevOptions","onConfirm","onCancel","useModal","setSettings","toggleTheme","toggleSettings","handleFileOpen","handleFileSave","filename","blob","Blob","url","URL","createObjectURL","createElement","href","download","appendChild","removeChild","revokeObjectURL","handleFileNew","newContent","handleContentChangeWithDirty","handleFormat","parsed","JSON","parse","formatted","stringify","handleMinify","minified","handleValidate","shortcuts","shortcutsRef","handleKeyDown","keyboardEvent","matchingShortcut","shortcut","keyMatch","code","ctrlMatch","ctrlKey","shiftMatch","altMatch","altKey","metaMatch","metaKey","targetElement","keys","Boolean","join","description","useKeyboardShortcuts","fileInput","querySelector","query","change","searchString","isRegex","matchCase","searchScope","matchesPosition","matchesCount","start","forceRevealReplace","seedSearchStringFromGlobalClipboard","shouldFocus","shouldAnimate","updateSearchScope","replaceString","replaceAll","searchResults","currentResultIndex","validationErrors","sel","abs"],"mappings":"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"}