import{j as e}from"./index.B2LzDnqf.js";import{r as t,F as r}from"./ui.BbRMDCnW.js";import"./monaco.fvmTPtOA.js";import"./react.BI3NJeJA.js";const n=t.forwardRef(({value:n,onChange:s,onValidationChange:a,onCursorPositionChange:o,onSelectionChange:l,theme:i,settings:c},d)=>{const u=t.useRef(null),m=t.useRef(null),g=t.useCallback(()=>{u.current&&u.current.trigger("editor","editor.action.formatDocument",{})},[]),h=t.useCallback(()=>{u.current&&u.current.trigger("editor","undo",{})},[]),x=t.useCallback(()=>{u.current&&u.current.trigger("editor","redo",{})},[]),p=t.useCallback(()=>{u.current&&u.current.trigger("editor","editor.action.selectAll",{})},[]),b=t.useCallback(()=>{u.current&&u.current.trigger("editor","actions.find",{})},[]),y=t.useCallback(()=>{u.current&&u.current.trigger("editor","editor.action.startFindReplaceAction",{})},[]),f=t.useCallback((e,t)=>{u.current&&(u.current.revealLineInCenter(e),u.current.setPosition({lineNumber:e,column:t||1}),u.current.focus())},[]),v=t.useCallback(()=>u.current?u.current.getSelection():null,[]),k=t.useCallback(()=>{if(u.current){const e=u.current.getSelection(),t=u.current.getModel();if(e&&t)return t.getValueInRange(e)}return""},[]),j=t.useCallback(e=>{if(u.current){const t=u.current.getSelection()||new m.current.Range(1,1,1,1);u.current.executeEdits("insert-text",[{range:t,text:e,forceMoveMarkers:!0}])}},[]),N=t.useCallback(()=>{if(u.current){const e=u.current.getModel();return!!e&&e.canUndo()}return!1},[]),w=t.useCallback(()=>{if(u.current){const e=u.current.getModel();return!!e&&e.canRedo()}return!1},[]);t.useImperativeHandle(d,()=>({formatDocument:g,undo:h,redo:x,selectAll:p,find:b,replace:y,gotoLine:f,getSelection:v,getSelectedText:k,insertText:j,canUndo:N,canRedo:w,focus:()=>u.current?.focus(),getEditor:()=>u.current,getMonaco:()=>m.current}),[g,h,x,p,b,y,f,v,k,j,N,w]);t.useEffect(()=>{u.current&&u.current.updateOptions({tabSize:c.indentSize,insertSpaces:"spaces"===c.indentType,wordWrap:c.wordWrap?"on":"off",lineNumbers:c.lineNumbers?"on":"off",minimap:{enabled:c.minimap}})},[c]);const C={language:"json",theme:"dark"===i?"vs-dark":"vs",automaticLayout:!0,fontSize:14,fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',tabSize:c.indentSize,insertSpaces:"spaces"===c.indentType,wordWrap:c.wordWrap?"on":"off",lineNumbers:c.lineNumbers?"on":"off",minimap:{enabled:c.minimap},scrollBeyondLastLine:!1,renderWhitespace:"selection",bracketPairColorization:{enabled:!0},matchBrackets:"always",showFoldingControls:"always",foldingStrategy:"indentation",foldingHighlight:!0,autoClosingBrackets:"always",autoClosingQuotes:"always",autoClosingDelete:"always",autoClosingOvertype:"always",autoSurround:"languageDefined",autoIndent:"full",formatOnPaste:!0,formatOnType:!0,suggest:{showKeywords:!0,showSnippets:!0,showFunctions:!0,showConstructors:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showIssues:!0,showUsers:!0,insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1},quickSuggestions:{other:!0,comments:!1,strings:!0},multiCursorModifier:"ctrlCmd",multiCursorMergeOverlapping:!0,multiCursorPaste:"spread",find:{addExtraSpaceOnTop:!0,autoFindInSelection:"never",seedSearchStringFromSelection:"always"},renderValidationDecorations:"on",renderLineHighlight:"all",renderLineHighlightOnlyWhenFocus:!1,undoStopOnWordBoundary:!0,largeFileOptimizations:!0,accessibilitySupport:"auto",ariaLabel:"JSON Editor",cursorBlinking:"blink",cursorSmoothCaretAnimation:"on",cursorStyle:"line",cursorWidth:2,smoothScrolling:!0,mouseWheelScrollSensitivity:1,fastScrollSensitivity:5};return e.jsx("div",{className:"w-full h-full",children:e.jsx(r,{value:n,onChange:e=>{void 0!==e&&s(e)},onMount:(e,t)=>{u.current=e,m.current=t,t.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,allowComments:!1,schemas:[],enableSchemaRequest:!1,schemaValidation:"error",schemaRequest:"error"}),t.languages.setLanguageConfiguration("json",{brackets:[["{","}"],["[","]"],['"','"']],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:'"',close:'"',notIn:["string"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:'"',close:'"'}]});const r=e.getModel();if(r){const n=t.editor.onDidChangeMarkers(e=>{const n=r.uri;if(e.find(e=>e.toString()===n.toString())){const e=t.editor.getModelMarkers({resource:n}).map(e=>({line:e.startLineNumber,column:e.startColumn,message:e.message,severity:e.severity===t.MarkerSeverity.Error?"error":"warning"}));a(e)}}),s=e.onDidChangeCursorPosition(e=>{o&&o({line:e.position.lineNumber,column:e.position.column})}),i=e.onDidChangeCursorSelection(e=>{l&&l({startLine:e.selection.startLineNumber,startColumn:e.selection.startColumn,endLine:e.selection.endLineNumber,endColumn:e.selection.endColumn})}),c=r.onDidChangeContent(()=>{});return e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyD,()=>{e.trigger("keyboard","editor.action.copyLinesDownAction",{})}),e.addCommand(t.KeyMod.CtrlCmd|t.KeyMod.Shift|t.KeyCode.KeyK,()=>{e.trigger("keyboard","editor.action.deleteLines",{})}),e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.Slash,()=>{e.trigger("keyboard","editor.action.commentLine",{})}),()=>{n.dispose(),s.dispose(),i.dispose(),c.dispose()}}},options:C,loading:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"text-gray-500",children:"Loading editor..."})})})})}),s=({theme:t,onThemeChange:r,disabled:n=!1})=>{const s=`\n    relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ease-in-out\n    ${n?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n    ${"dark"===t?"bg-blue-600":"bg-gray-200"}\n    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\n  `,a=`\n    inline-block h-4 w-4 transform rounded-full bg-white transition duration-200 ease-in-out\n    ${"dark"===t?"translate-x-6":"translate-x-1"}\n  `;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm "+("light"===t?"text-yellow-500":"text-gray-400"),title:"Light theme",children:"☀️"}),e.jsx("button",{type:"button",className:s,onClick:()=>{n||r("light"===t?"dark":"light")},disabled:n,role:"switch","aria-checked":"dark"===t,"aria-label":`Switch to ${"light"===t?"dark":"light"} theme`,children:e.jsx("span",{className:a})}),e.jsx("span",{className:"text-sm "+("dark"===t?"text-blue-400":"text-gray-400"),title:"Dark theme",children:"🌙"}),e.jsx("span",{className:"text-sm font-medium "+("dark"===t?"text-gray-200":"text-gray-700"),children:"light"===t?"Light":"Dark"})]})},a=({isOpen:r,onClose:n,settings:a,onSettingsChange:o,theme:l,onThemeChange:i})=>{const[c,d]=t.useState(a);t.useEffect(()=>{d(a)},[a]);const u=(e,t)=>{const r={...c,[e]:t};d(r),o({[e]:t})};return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e=>{e.target===e.currentTarget&&n()},children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg w-96 max-h-[80vh] overflow-y-auto shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Editor Settings"}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl font-bold w-8 h-8 flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Close settings",children:"✕"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Appearance"}),e.jsx("div",{className:"pl-4",children:e.jsx(s,{theme:l,onThemeChange:i})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Editor"}),e.jsxs("div",{className:"space-y-4 pl-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Indent Size"}),e.jsxs("select",{value:c.indentSize,onChange:e=>u("indentSize",Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:2,children:"2 spaces"}),e.jsx("option",{value:4,children:"4 spaces"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Indent Type"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"indentType",value:"spaces",checked:"spaces"===c.indentType,onChange:e=>u("indentType",e.target.value),className:"mr-2 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Spaces"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"indentType",value:"tabs",checked:"tabs"===c.indentType,onChange:e=>u("indentType",e.target.value),className:"mr-2 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Tabs"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.wordWrap,onChange:e=>u("wordWrap",e.target.checked),className:"mr-3 text-blue-600 focus:ring-blue-500 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Word Wrap"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6",children:"Wrap long lines to fit in the editor"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.lineNumbers,onChange:e=>u("lineNumbers",e.target.checked),className:"mr-3 text-blue-600 focus:ring-blue-500 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Line Numbers"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6",children:"Show line numbers in the editor"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.minimap,onChange:e=>u("minimap",e.target.checked),className:"mr-3 text-blue-600 focus:ring-blue-500 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Minimap"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6",children:"Show minimap overview of the document"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-8 pt-4 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("button",{onClick:()=>{const e={indentSize:2,indentType:"spaces",wordWrap:!1,lineNumbers:!0,minimap:!0};d(e),o(e)},className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:"Reset to Defaults"}),e.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Done"})]})]})}):null},o=({onOpen:r,onSave:n,onNew:s,isDirty:a,currentFile:o,theme:i,disabled:c=!1})=>{const d=t.useRef(null),u=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=e=>t(e.target?.result),n.onerror=()=>r(new Error("Failed to read file")),n.readAsText(e)}),m=`\n    px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 flex items-center space-x-2\n    ${"dark"===i?"text-gray-300 hover:text-white hover:bg-gray-700 border-gray-600":"text-gray-700 hover:text-gray-900 hover:bg-gray-50 border-gray-300"}\n    ${c?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n    border\n  `,g=`\n    px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 flex items-center space-x-2\n    bg-blue-600 hover:bg-blue-700 text-white\n    ${c?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n  `;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{ref:d,type:"file",accept:".json,.txt",onChange:async e=>{const t=e.target.files?.[0];if(t){try{const e=await u(t),n={name:t.name,size:t.size,lastModified:new Date(t.lastModified),content:e};r(n)}catch(n){}d.current&&(d.current.value="")}},className:"hidden","aria-label":"Select JSON file"}),e.jsxs("button",{onClick:()=>{c||s()},className:m,disabled:c,title:"Create new file (Ctrl+N)",children:[e.jsx("span",{children:"📄"}),e.jsx("span",{children:"New"})]}),e.jsxs("button",{onClick:()=>{c||d.current?.click()},className:m,disabled:c,title:"Open file (Ctrl+O)",children:[e.jsx("span",{children:"📁"}),e.jsx("span",{children:"Open"})]}),e.jsxs("button",{onClick:()=>{c||n()},className:a?g:m,disabled:c,title:"Save file (Ctrl+S)",children:[e.jsx("span",{children:"💾"}),e.jsx("span",{children:"Save"}),a&&e.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full ml-1",title:"Unsaved changes"})]}),o&&e.jsx("div",{className:`\n          px-3 py-2 text-sm rounded-md border\n          ${"dark"===i?"bg-gray-800 border-gray-600 text-gray-300":"bg-gray-50 border-gray-300 text-gray-600"}\n        `,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:o.name}),e.jsxs("span",{className:"text-xs opacity-75",children:["(",l(o.size),")"]}),a&&e.jsx("span",{className:"text-orange-500 text-xs",children:"●"})]})})]})},l=e=>e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(1)} MB`,i=({onFileDrop:r,onError:n,theme:s,disabled:a=!1,children:o})=>{const[l,i]=t.useState(!1),[c,d]=t.useState(0),u=async e=>{if((e=>["application/json","text/plain"].includes(e.type)||[".json",".txt"].some(t=>e.name.toLowerCase().endsWith(t))?!(e.size>10485760&&(n("File size must be less than 10MB"),1)):(n("Please select a JSON or text file"),!1))(e))try{const t=await(e=>new Promise((t,r)=>{const n=new FileReader;n.onload=e=>t(e.target?.result),n.onerror=()=>r(new Error("Failed to read file")),n.readAsText(e)}))(e),n={name:e.name,size:e.size,lastModified:new Date(e.lastModified),content:t};r(n)}catch(t){n("Failed to read file content")}},m=t.useCallback(e=>{e.preventDefault(),e.stopPropagation(),a||(d(e=>e+1),e.dataTransfer.items&&e.dataTransfer.items.length>0&&i(!0))},[a]),g=t.useCallback(e=>{e.preventDefault(),e.stopPropagation(),a||d(e=>{const t=e-1;return 0===t&&i(!1),t})},[a]),h=t.useCallback(e=>{e.preventDefault(),e.stopPropagation(),a||(e.dataTransfer.dropEffect="copy")},[a]),x=t.useCallback(async e=>{if(e.preventDefault(),e.stopPropagation(),a)return;i(!1),d(0);const t=Array.from(e.dataTransfer.files);0!==t.length?t.length>1?n("Please drop only one file at a time"):await u(t[0]):n("No files were dropped")},[a,n]),p=`\n    absolute inset-0 z-10 flex items-center justify-center\n    ${"dark"===s?"bg-gray-900/80 border-blue-400":"bg-white/80 border-blue-500"}\n    border-2 border-dashed rounded-lg transition-all duration-200\n    ${l?"opacity-100":"opacity-0 pointer-events-none"}\n  `,b=`\n    px-6 py-4 rounded-lg text-center\n    ${"dark"===s?"bg-gray-800 text-gray-200 border-gray-600":"bg-white text-gray-700 border-gray-300"}\n    border shadow-lg\n  `;return e.jsxs("div",{className:"relative w-full h-full",onDragEnter:m,onDragLeave:g,onDragOver:h,onDrop:x,children:[o,e.jsx("div",{className:p,children:e.jsxs("div",{className:b,children:[e.jsx("div",{className:"text-2xl mb-2",children:"📁"}),e.jsx("div",{className:"text-lg font-medium mb-1",children:"Drop your JSON file here"}),e.jsx("div",{className:"text-sm opacity-75",children:"Supports .json and .txt files (max 10MB)"})]})})]})},c=({isVisible:r,onClose:n,onSearch:s,onReplace:a,onReplaceAll:o,onFindNext:l,onFindPrevious:i,searchResults:c,currentResultIndex:d,theme:u})=>{const[m,g]=t.useState(""),[h,x]=t.useState(""),[p,b]=t.useState(!1),[y,f]=t.useState({caseSensitive:!1,useRegex:!1,wholeWord:!1});t.useEffect(()=>{m.trim()&&s(m,y)},[m,y,s]);const v=t.useCallback(e=>{g(e.target.value)},[]),k=t.useCallback(e=>{x(e.target.value)},[]),j=t.useCallback(e=>{f(t=>({...t,[e]:!t[e]}))},[]),N=t.useCallback(()=>{m.trim()&&void 0!==h&&a(m,h,y)},[m,h,y,a]),w=t.useCallback(()=>{m.trim()&&void 0!==h&&o(m,h,y)},[m,h,y,o]),C=t.useCallback(e=>{"Enter"===e.key?e.shiftKey?i():l():"Escape"===e.key&&n()},[l,i,n]);if(!r)return null;const S=`\n    absolute top-0 right-0 z-20 w-80 p-4 shadow-lg border-l\n    ${"dark"===u?"bg-gray-800 border-gray-700 text-gray-100":"bg-white border-gray-200 text-gray-900"}\n  `,R=`\n    w-full px-3 py-2 text-sm border rounded-md transition-colors\n    ${"dark"===u?"bg-gray-700 border-gray-600 text-gray-100 placeholder-gray-400 focus:border-blue-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:border-blue-500"}\n    focus:outline-none focus:ring-1 focus:ring-blue-500\n  `,L=`\n    px-3 py-1.5 text-sm font-medium rounded-md transition-colors\n    ${"dark"===u?"bg-gray-700 hover:bg-gray-600 text-gray-200 border-gray-600":"bg-gray-100 hover:bg-gray-200 text-gray-700 border-gray-300"}\n    border\n  `,E="\n    px-3 py-1.5 text-sm font-medium rounded-md transition-colors\n    bg-blue-600 hover:bg-blue-700 text-white\n  ",M=e=>`\n    px-2 py-1 text-xs font-medium rounded transition-colors\n    ${e?"bg-blue-600 text-white":"dark"===u?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"}\n  `;return e.jsxs("div",{className:S,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:p?"Find & Replace":"Find"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>b(!p),className:L,title:"Toggle replace mode",children:p?"🔍":"🔄"}),e.jsx("button",{onClick:n,className:L,title:"Close search panel",children:"×"})]})]}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",placeholder:"Search...",value:m,onChange:v,onKeyDown:C,className:R,autoFocus:!0})}),p&&e.jsx("div",{className:"mb-3",children:e.jsx("input",{type:"text",placeholder:"Replace with...",value:h,onChange:k,onKeyDown:C,className:R})}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>j("caseSensitive"),className:M(y.caseSensitive),title:"Match case",children:"Aa"}),e.jsx("button",{onClick:()=>j("wholeWord"),className:M(y.wholeWord),title:"Match whole word",children:"Ab"}),e.jsx("button",{onClick:()=>j("useRegex"),className:M(y.useRegex),title:"Use regular expression",children:".*"})]})}),m&&e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:`\n            text-sm px-2 py-1 rounded\n            ${"dark"===u?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}\n          `,children:c.length>0?`${d+1} of ${c.length} results`:"No results found"})}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:i,disabled:0===c.length,className:`${L} ${0===c.length?"opacity-50 cursor-not-allowed":""}`,title:"Find previous (Shift+Enter)",children:"↑"}),e.jsx("button",{onClick:l,disabled:0===c.length,className:`${L} ${0===c.length?"opacity-50 cursor-not-allowed":""}`,title:"Find next (Enter)",children:"↓"})]})}),p&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:N,disabled:0===c.length,className:`w-full ${0===c.length?L+" opacity-50 cursor-not-allowed":E}`,title:"Replace current match",children:"Replace"}),e.jsxs("button",{onClick:w,disabled:0===c.length,className:`w-full ${0===c.length?L+" opacity-50 cursor-not-allowed":E}`,title:"Replace all matches",children:["Replace All (",c.length,")"]})]}),e.jsxs("div",{className:`\n        mt-4 pt-3 border-t text-xs\n        ${"dark"===u?"border-gray-700 text-gray-400":"border-gray-200 text-gray-500"}\n      `,children:[e.jsx("div",{children:"Enter: Find next"}),e.jsx("div",{children:"Shift+Enter: Find previous"}),e.jsx("div",{children:"Escape: Close panel"})]})]})};class d extends t.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t)}handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-8 w-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Something went wrong"})})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"The JSON Editor encountered an unexpected error. You can try to recover by clicking the buttons below."})}),!1,e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:this.handleRetry,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Try Again"}),e.jsx("button",{onClick:this.handleReload,className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Reload Page"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If the problem persists, please refresh the page or contact support."})})]})}):this.props.children}}const u=({toast:r,onClose:n})=>{const[s,a]=t.useState(!1),[o,l]=t.useState(!1);t.useEffect(()=>{const e=setTimeout(()=>a(!0),10);return()=>clearTimeout(e)},[]),t.useEffect(()=>{const e=r.duration??5e3;if(e>0){const t=setTimeout(()=>{i()},e);return()=>clearTimeout(t)}},[r.duration]);const i=()=>{l(!0),setTimeout(()=>{n(r.id)},300)};return e.jsxs("div",{className:(()=>{const e=`\n      relative flex items-start p-4 mb-3 rounded-lg shadow-lg border-l-4 transition-all duration-300 ease-in-out\n      ${s&&!o?"translate-x-0 opacity-100":"translate-x-full opacity-0"}\n    `;switch(r.type){case"success":return`${e} bg-green-50 dark:bg-green-900/20 border-green-500 text-green-800 dark:text-green-200`;case"error":return`${e} bg-red-50 dark:bg-red-900/20 border-red-500 text-red-800 dark:text-red-200`;case"warning":return`${e} bg-yellow-50 dark:bg-yellow-900/20 border-yellow-500 text-yellow-800 dark:text-yellow-200`;case"info":return`${e} bg-blue-50 dark:bg-blue-900/20 border-blue-500 text-blue-800 dark:text-blue-200`;default:return`${e} bg-gray-50 dark:bg-gray-800 border-gray-500 text-gray-800 dark:text-gray-200`}})(),children:[e.jsx("div",{className:"flex-shrink-0 mr-3",children:(()=>{switch(r.type){case"success":return e.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});case"error":return e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})});case"warning":return e.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"info":return e.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})});default:return null}})()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium",children:r.title}),r.message&&e.jsx("p",{className:"mt-1 text-sm opacity-90",children:r.message}),r.action&&e.jsx("div",{className:"mt-2",children:e.jsx("button",{onClick:r.action.onClick,className:"text-sm font-medium underline hover:no-underline focus:outline-none",children:r.action.label})})]}),e.jsx("button",{onClick:i,className:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})},m=({toasts:t,onRemoveToast:r,position:n="top-right"})=>0===t.length?null:e.jsx("div",{className:(()=>{const e="fixed z-50 max-w-sm w-full";switch(n){case"top-right":default:return`${e} top-4 right-4`;case"top-left":return`${e} top-4 left-4`;case"bottom-right":return`${e} bottom-4 right-4`;case"bottom-left":return`${e} bottom-4 left-4`;case"top-center":return`${e} top-4 left-1/2 transform -translate-x-1/2`;case"bottom-center":return`${e} bottom-4 left-1/2 transform -translate-x-1/2`}})(),children:t.map(t=>e.jsx(u,{toast:t,onClose:r},t.id))});function g(){const[r,s]=t.useState('{\n  "example": "JSON content",\n  "number": 42,\n  "boolean": true\n}'),[l,u]=t.useState([]),[g,h]=t.useState("light"),[x,p]=t.useState({line:1,column:1}),[b,y]=t.useState({startLine:1,startColumn:1,endLine:1,endColumn:1}),[f,v]=t.useState(!1),[k,j]=t.useState(!1),[N,w]=t.useState(null),[C,S]=t.useState(!1),[R,L]=t.useState('{\n  "example": "JSON content",\n  "number": 42,\n  "boolean": true\n}'),[E,M]=t.useState([]),[O,F]=t.useState(0),T=t.useRef(null),{toasts:D,removeToast:$,showSuccess:K,showError:z}=(()=>{const[e,r]=t.useState([]),n=t.useCallback((e,t,n,s)=>{const a=Date.now().toString()+Math.random().toString(36).substr(2,9),o={id:a,type:e,title:t,message:n,duration:s?.duration??("error"===e?0:5e3),action:s?.action};return r(e=>[...e,o]),a},[]),s=t.useCallback(e=>{r(t=>t.filter(t=>t.id!==e))},[]),a=t.useCallback(()=>{r([])},[]),o=t.useCallback((e,t,r)=>n("success",e,t,r),[n]),l=t.useCallback((e,t,r)=>n("error",e,t,{duration:0,...r}),[n]),i=t.useCallback((e,t,r)=>n("warning",e,t,r),[n]),c=t.useCallback((e,t,r)=>n("info",e,t,r),[n]);return{toasts:e,addToast:n,removeToast:s,clearAllToasts:a,showSuccess:o,showError:l,showWarning:i,showInfo:c}})(),[J,P]=t.useState({indentSize:2,indentType:"spaces",wordWrap:!1,lineNumbers:!0,minimap:!0}),A=()=>{h(e=>"light"===e?"dark":"light")},W=()=>{v(e=>!e)},B=e=>{if(C){if(!window.confirm("You have unsaved changes. Do you want to discard them?"))return}w(e),s(e.content),L(e.content),S(!1)},I=()=>{const e=N?.name||"untitled.json",t=new Blob([r],{type:"application/json"}),n=URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n),L(r),S(!1),K("File Saved",`Successfully saved ${e}`)},V=()=>{if(C){if(!window.confirm("You have unsaved changes. Do you want to discard them?"))return}const e="{\n  \n}";w(null),s(e),L(e),S(!1)},U=e=>{s(e),S(e!==R)},H=()=>{try{const e=JSON.parse(r),t=JSON.stringify(e,null,J.indentSize);s(t),S(t!==R),K("JSON Formatted","Your JSON has been formatted successfully")}catch(e){z("Format Error","Cannot format invalid JSON. Please fix syntax errors first.")}},Y=()=>{try{const e=JSON.parse(r),t=JSON.stringify(e);s(t),S(t!==R),K("JSON Minified","Your JSON has been minified successfully")}catch(e){z("Minify Error","Cannot minify invalid JSON. Please fix syntax errors first.")}},q=()=>{try{JSON.parse(r),K("JSON Valid","Your JSON syntax is valid!")}catch(e){z("JSON Invalid",`JSON syntax error: ${e.message}`)}},Q=()=>{j(e=>!e)};return((e,r={})=>{const{enabled:n=!0,target:s=document}=r,a=t.useRef(e);t.useEffect(()=>{a.current=e},[e]);const o=t.useCallback(e=>{const t=e;if(!n)return;const r=a.current.find(e=>{const r=e.key.toLowerCase()===t.key.toLowerCase()||e.key.toLowerCase()===t.code.toLowerCase(),n=(e.ctrlKey??!1)===t.ctrlKey,s=(e.shiftKey??!1)===t.shiftKey,a=(e.altKey??!1)===t.altKey,o=(e.metaKey??!1)===t.metaKey;return r&&n&&s&&a&&o});r&&(!1!==r.preventDefault&&(e.preventDefault(),e.stopPropagation()),r.action())},[n]);t.useEffect(()=>{if(!n)return;const e=s;return e.addEventListener("keydown",o),()=>{e.removeEventListener("keydown",o)}},[o,n,s]),t.useCallback(()=>e.map(e=>({keys:[e.ctrlKey&&"Ctrl",e.metaKey&&"Cmd",e.shiftKey&&"Shift",e.altKey&&"Alt",e.key].filter(Boolean).join(" + "),description:e.description})),[e])})([{key:"n",ctrlKey:!0,action:V,description:"Create new file"},{key:"o",ctrlKey:!0,action:()=>{const e=document.querySelector('input[type="file"]');e?.click()},description:"Open file"},{key:"s",ctrlKey:!0,action:I,description:"Save file"},{key:"f",ctrlKey:!0,action:Q,description:"Find/Search"},{key:",",ctrlKey:!0,action:W,description:"Open settings"},{key:"Enter",ctrlKey:!0,shiftKey:!0,action:H,description:"Format JSON"},{key:"Enter",ctrlKey:!0,altKey:!0,action:Y,description:"Minify JSON"},{key:"Enter",ctrlKey:!0,action:q,description:"Validate JSON"},{key:"d",ctrlKey:!0,action:A,description:"Toggle dark/light theme"}]),e.jsx(d,{children:e.jsxs("div",{className:"h-screen flex flex-col bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[e.jsxs("header",{className:"h-12 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center px-4 flex-shrink-0",children:[e.jsx("h1",{className:"text-lg font-semibold",children:"JSON Editor"}),e.jsx("div",{className:"ml-auto flex items-center space-x-2",children:e.jsx("button",{className:"btn-secondary text-sm",onClick:A,children:"light"===g?"Dark":"Light"})})]}),e.jsxs("div",{className:"h-12 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center px-4 space-x-2 flex-shrink-0",children:[e.jsx(o,{onOpen:B,onSave:I,onNew:V,isDirty:C,currentFile:N,theme:g}),e.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600"}),e.jsx("button",{className:"btn-secondary text-sm",onClick:H,children:"Format"}),e.jsx("button",{className:"btn-secondary text-sm",onClick:Y,children:"Minify"}),e.jsx("button",{className:"btn-secondary text-sm",onClick:q,children:"Validate"}),e.jsx("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600"}),e.jsx("button",{className:"btn-secondary text-sm",onClick:Q,children:"Search"}),e.jsx("button",{className:"btn-secondary text-sm",onClick:W,children:"Settings"})]}),e.jsxs("main",{className:"flex-1 flex overflow-hidden relative",children:[e.jsx("div",{className:"flex-1 p-4",children:e.jsx(i,{onFileDrop:B,onError:e=>{z("File Error",e)},theme:g,children:e.jsx("div",{className:"editor-container h-full",children:e.jsx(n,{ref:T,value:r,onChange:e=>{U(e)},onValidationChange:e=>{u(e)},onCursorPositionChange:e=>{p(e)},onSelectionChange:e=>{y(e)},theme:g,settings:J})})})}),e.jsx(c,{isVisible:k,onClose:()=>j(!1),onSearch:(e,t)=>{if(!T.current)return;const r=T.current.getEditor();r&&r.trigger("search","actions.find",{})},onReplace:(e,t,r)=>{if(!T.current)return;const n=T.current.getEditor();n&&n.trigger("replace","editor.action.startFindReplaceAction",{})},onReplaceAll:(e,t,r)=>{if(!T.current)return;const n=T.current.getEditor();n&&n.trigger("replaceAll","editor.action.startFindReplaceAction",{})},onFindNext:()=>{if(!T.current)return;const e=T.current.getEditor();e&&e.trigger("findNext","editor.action.nextMatchFindAction",{})},onFindPrevious:()=>{if(!T.current)return;const e=T.current.getEditor();e&&e.trigger("findPrevious","editor.action.previousMatchFindAction",{})},searchResults:E,currentResultIndex:O,theme:g})]}),e.jsxs("footer",{className:"h-6 bg-gray-100 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex items-center px-4 text-xs text-gray-600 dark:text-gray-400 flex-shrink-0",children:[e.jsx("span",{children:0===l.length?e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"✓ Valid JSON"}):e.jsxs("span",{className:"text-red-600 dark:text-red-400",children:["✗ ",l.length," error",l.length>1?"s":""]})}),e.jsxs("span",{className:"ml-4",children:["Ln ",x.line,", Col ",x.column]}),b.startLine!==b.endLine||b.startColumn!==b.endColumn?e.jsxs("span",{className:"ml-4",children:["(",Math.abs(b.endLine-b.startLine)+1," lines, ",b.startLine===b.endLine?Math.abs(b.endColumn-b.startColumn):"multiple"," chars selected)"]}):null,e.jsxs("span",{className:"ml-auto",children:["Characters: ",r.length]})]}),e.jsx(a,{isOpen:f,onClose:()=>v(!1),settings:J,onSettingsChange:e=>{P(t=>({...t,...e}))},theme:g,onThemeChange:h}),e.jsx(m,{toasts:D,onRemoveToast:$,position:"top-right"})]})})}export{g as default};
//# sourceMappingURL=App.D6vviOmJ.js.map
