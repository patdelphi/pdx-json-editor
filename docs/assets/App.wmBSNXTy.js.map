{"version":3,"file":"App.wmBSNXTy.js","sources":["../../src/components/Editor/JsonEditor.tsx","../../src/components/Settings/ThemeSelector.tsx","../../src/constants/zIndex.ts","../../src/components/Settings/SettingsPanel.tsx","../../src/components/FileManager/FileOperations.tsx","../../src/components/FileManager/FileDropZone.tsx","../../src/components/SearchReplace/SearchPanel.tsx","../../src/components/UI/ErrorBoundary.tsx","../../src/components/UI/Toast.tsx","../../src/components/UI/ToastContainer.tsx","../../src/components/UI/Modal.tsx","../../src/App.tsx","../../src/hooks/useToast.ts","../../src/hooks/useModal.ts","../../src/hooks/useKeyboardShortcuts.ts"],"sourcesContent":["import {\r\n  useRef,\r\n  useEffect,\r\n  useImperativeHandle,\r\n  forwardRef,\r\n  useCallback,\r\n} from 'react';\r\nimport Editor, { type OnMount, type OnChange } from '@monaco-editor/react';\r\nimport type {\r\n  MonacoEditorProps,\r\n  EditorMethods,\r\n} from '../../types/editor.types';\r\n\r\nconst JsonEditor = forwardRef<EditorMethods, MonacoEditorProps>(\r\n  (\r\n    {\r\n      value,\r\n      onChange,\r\n      onValidationChange,\r\n      onCursorPositionChange,\r\n      onSelectionChange,\r\n      theme,\r\n      settings,\r\n    },\r\n    ref\r\n  ) => {\r\n    const editorRef = useRef<any>(null);\r\n    const monacoRef = useRef<any>(null);\r\n\r\n    // Editor methods that can be called from parent components\r\n    const formatDocument = useCallback(() => {\r\n      if (editorRef.current) {\r\n        editorRef.current.trigger('editor', 'editor.action.formatDocument', {});\r\n      }\r\n    }, []);\r\n\r\n    const undo = useCallback(() => {\r\n      if (editorRef.current) {\r\n        editorRef.current.trigger('editor', 'undo', {});\r\n      }\r\n    }, []);\r\n\r\n    const redo = useCallback(() => {\r\n      if (editorRef.current) {\r\n        editorRef.current.trigger('editor', 'redo', {});\r\n      }\r\n    }, []);\r\n\r\n    const selectAll = useCallback(() => {\r\n      if (editorRef.current) {\r\n        editorRef.current.trigger('editor', 'editor.action.selectAll', {});\r\n      }\r\n    }, []);\r\n\r\n    const find = useCallback(() => {\r\n      if (editorRef.current) {\r\n        try {\r\n          // 确保编辑器获得焦点\r\n          editorRef.current.focus();\r\n\r\n          // 使用Monaco编辑器的内置命令\r\n          const editor = editorRef.current;\r\n          const monaco = monacoRef.current;\r\n\r\n          // 方法1: 使用actions.find命令ID (这是Monaco推荐的方式)\r\n          try {\r\n            editor.trigger('keyboard', 'actions.find', null);\r\n            return;\r\n          } catch (e) {\r\n            console.log('Method 1 failed:', e);\r\n          }\r\n\r\n          // 方法2: 使用editor.action.startFindAction命令ID (备用方式)\r\n          try {\r\n            editor.trigger('keyboard', 'editor.action.startFindAction', null);\r\n            return;\r\n          } catch (e) {\r\n            console.log('Method 2 failed:', e);\r\n          }\r\n\r\n          // 方法3: 使用编辑器的内置操作\r\n          try {\r\n            // Use getAction for specific actions instead of getActions\r\n            const actions = [];\r\n            const findAction1 = (editor as any).getAction('actions.find');\r\n            const findAction2 = (editor as any).getAction(\r\n              'editor.action.startFindAction'\r\n            );\r\n            if (findAction1) actions.push(findAction1);\r\n            if (findAction2) actions.push(findAction2);\r\n\r\n            // Try to find any action with 'find' in its ID\r\n            const findAction = actions.find(\r\n              (a: { id: string; run: () => void }) =>\r\n                a.id === 'actions.find' ||\r\n                a.id === 'editor.action.startFindAction' ||\r\n                a.id.toLowerCase().includes('find')\r\n            );\r\n            if (findAction) {\r\n              findAction.run();\r\n              return;\r\n            }\r\n          } catch (e) {\r\n            console.log('Method 3 failed:', e);\r\n          }\r\n\r\n          // 方法4: 使用Monaco的键盘命令\r\n          try {\r\n            if (monaco) {\r\n              editor.trigger(\r\n                'keyboard',\r\n                monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyF,\r\n                null\r\n              );\r\n              return;\r\n            }\r\n          } catch (e) {\r\n            console.log('Method 4 failed:', e);\r\n          }\r\n\r\n          // 方法5: 使用浏览器的原生搜索 (最后的备选方案)\r\n          try {\r\n            // Use window.find as a fallback, but need to declare it properly for TypeScript\r\n            (window as any).find();\r\n          } catch (e) {\r\n            console.log('Method 5 failed:', e);\r\n          }\r\n        } catch (error) {\r\n          console.error('Error in find function:', error);\r\n        }\r\n      }\r\n    }, []);\r\n\r\n    const replace = useCallback(() => {\r\n      if (editorRef.current) {\r\n        try {\r\n          // 确保编辑器获得焦点\r\n          editorRef.current.focus();\r\n\r\n          // 使用Monaco编辑器的内置命令\r\n          const editor = editorRef.current;\r\n          const monaco = monacoRef.current;\r\n\r\n          // 方法1: 使用editor.action.startFindReplaceAction命令ID (主要方式)\r\n          try {\r\n            editor.trigger(\r\n              'keyboard',\r\n              'editor.action.startFindReplaceAction',\r\n              null\r\n            );\r\n            return;\r\n          } catch (e) {\r\n            console.log('Method 1 failed:', e);\r\n          }\r\n\r\n          // 方法2: 使用actions.findWithReplace命令ID (备用方式)\r\n          try {\r\n            editor.trigger('keyboard', 'actions.findWithReplace', null);\r\n            return;\r\n          } catch (e) {\r\n            console.log('Method 2 failed:', e);\r\n          }\r\n\r\n          // 方法3: 使用编辑器的内置操作\r\n          try {\r\n            // Use getAction for specific actions instead of getActions\r\n            const actions = [];\r\n            const replaceAction1 = (editor as any).getAction(\r\n              'editor.action.startFindReplaceAction'\r\n            );\r\n            const replaceAction2 = (editor as any).getAction(\r\n              'actions.findWithReplace'\r\n            );\r\n            if (replaceAction1) actions.push(replaceAction1);\r\n            if (replaceAction2) actions.push(replaceAction2);\r\n\r\n            // Try to find any action with 'replace' in its ID\r\n            const replaceAction = actions.find(\r\n              (a: { id: string; run: () => void }) =>\r\n                a.id === 'editor.action.startFindReplaceAction' ||\r\n                a.id === 'actions.findWithReplace' ||\r\n                a.id.toLowerCase().includes('replace')\r\n            );\r\n            if (replaceAction) {\r\n              replaceAction.run();\r\n              return;\r\n            }\r\n          } catch (e) {\r\n            console.log('Method 3 failed:', e);\r\n          }\r\n\r\n          // 方法4: 使用Monaco的键盘命令\r\n          try {\r\n            if (monaco) {\r\n              editor.trigger(\r\n                'keyboard',\r\n                monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyH,\r\n                null\r\n              );\r\n              return;\r\n            }\r\n          } catch (e) {\r\n            console.log('Method 4 failed:', e);\r\n          }\r\n        } catch (error) {\r\n          console.error('Error in replace function:', error);\r\n        }\r\n      }\r\n    }, []);\r\n\r\n    const gotoLine = useCallback((line: number, column?: number) => {\r\n      if (editorRef.current) {\r\n        editorRef.current.revealLineInCenter(line);\r\n        editorRef.current.setPosition({\r\n          lineNumber: line,\r\n          column: column || 1,\r\n        });\r\n        editorRef.current.focus();\r\n      }\r\n    }, []);\r\n\r\n    const getSelection = useCallback(() => {\r\n      if (editorRef.current) {\r\n        return editorRef.current.getSelection();\r\n      }\r\n      return null;\r\n    }, []);\r\n\r\n    const getSelectedText = useCallback(() => {\r\n      if (editorRef.current) {\r\n        const selection = editorRef.current.getSelection();\r\n        const model = editorRef.current.getModel();\r\n        if (selection && model) {\r\n          return model.getValueInRange(selection);\r\n        }\r\n      }\r\n      return '';\r\n    }, []);\r\n\r\n    const insertText = useCallback((text: string) => {\r\n      if (editorRef.current) {\r\n        const selection = editorRef.current.getSelection();\r\n        const range = selection || new monacoRef.current.Range(1, 1, 1, 1);\r\n        editorRef.current.executeEdits('insert-text', [\r\n          {\r\n            range,\r\n            text,\r\n            forceMoveMarkers: true,\r\n          },\r\n        ]);\r\n      }\r\n    }, []);\r\n\r\n    const canUndo = useCallback(() => {\r\n      if (editorRef.current) {\r\n        const model = editorRef.current.getModel();\r\n        return model ? model.canUndo() : false;\r\n      }\r\n      return false;\r\n    }, []);\r\n\r\n    const canRedo = useCallback(() => {\r\n      if (editorRef.current) {\r\n        const model = editorRef.current.getModel();\r\n        return model ? model.canRedo() : false;\r\n      }\r\n      return false;\r\n    }, []);\r\n\r\n    // Expose methods to parent components\r\n    useImperativeHandle(\r\n      ref,\r\n      () => ({\r\n        formatDocument,\r\n        undo,\r\n        redo,\r\n        selectAll,\r\n        find,\r\n        replace,\r\n        gotoLine,\r\n        getSelection,\r\n        getSelectedText,\r\n        insertText,\r\n        canUndo,\r\n        canRedo,\r\n        focus: () => editorRef.current?.focus(),\r\n        getEditor: () => editorRef.current,\r\n        getMonaco: () => monacoRef.current,\r\n      }),\r\n      [\r\n        formatDocument,\r\n        undo,\r\n        redo,\r\n        selectAll,\r\n        find,\r\n        replace,\r\n        gotoLine,\r\n        getSelection,\r\n        getSelectedText,\r\n        insertText,\r\n        canUndo,\r\n        canRedo,\r\n      ]\r\n    );\r\n\r\n    const handleEditorDidMount: OnMount = (editor, monaco) => {\r\n      editorRef.current = editor;\r\n      monacoRef.current = monaco;\r\n\r\n      // 配置搜索控件，防止自动关闭\r\n      editor.updateOptions({\r\n        find: {\r\n          addExtraSpaceOnTop: true,\r\n          autoFindInSelection: 'never',\r\n          seedSearchStringFromSelection: 'always',\r\n          loop: true,\r\n          // Removed closeOnFocusLost as it's not in IEditorFindOptions\r\n        },\r\n      });\r\n\r\n      // Configure JSON language settings with enhanced validation\r\n      monaco.languages.json.jsonDefaults.setDiagnosticsOptions({\r\n        validate: true,\r\n        allowComments: false,\r\n        schemas: [],\r\n        enableSchemaRequest: false,\r\n        schemaValidation: 'error',\r\n        schemaRequest: 'error',\r\n      });\r\n\r\n      // Enhanced bracket matching configuration\r\n      monaco.languages.setLanguageConfiguration('json', {\r\n        brackets: [\r\n          ['{', '}'],\r\n          ['[', ']'],\r\n          ['\"', '\"'],\r\n        ],\r\n        autoClosingPairs: [\r\n          { open: '{', close: '}' },\r\n          { open: '[', close: ']' },\r\n          { open: '\"', close: '\"', notIn: ['string'] },\r\n        ],\r\n        surroundingPairs: [\r\n          { open: '{', close: '}' },\r\n          { open: '[', close: ']' },\r\n          { open: '\"', close: '\"' },\r\n        ],\r\n      });\r\n\r\n      // 添加搜索窗口状态监听器\r\n      const findController = editor.getContribution(\r\n        'editor.contrib.findController'\r\n      ) as any;\r\n      if (findController && typeof findController.getState === 'function') {\r\n        // 监听搜索控制器状态变化\r\n        editor.onDidBlurEditorWidget(() => {\r\n          // 当编辑器失去焦点时，尝试保持搜索窗口打开\r\n          setTimeout(() => {\r\n            try {\r\n              const state = findController.getState();\r\n              if (state && state.isRevealed) {\r\n                // 如果搜索窗口已经打开，尝试保持它打开\r\n                findController.focus && findController.focus();\r\n              }\r\n            } catch (e) {\r\n              console.log('Error keeping find widget open:', e);\r\n            }\r\n          }, 100);\r\n        });\r\n      }\r\n\r\n      // Add keyboard shortcut for search (Ctrl+F)\r\n      editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyF, () => {\r\n        // This will open the search widget\r\n        // Use getAction for each action ID instead of getActions\r\n        const actions = [];\r\n        const findAction1 = editor.getAction('actions.find');\r\n        const findAction2 = editor.getAction('editor.action.startFindAction');\r\n        if (findAction1) actions.push(findAction1);\r\n        if (findAction2) actions.push(findAction2);\r\n\r\n        // Try to find the search action\r\n        const findAction = actions.find(\r\n          (a: { id: string; run: () => void }) =>\r\n            a.id === 'actions.find' || a.id === 'editor.action.startFindAction'\r\n        );\r\n\r\n        if (findAction) {\r\n          findAction.run();\r\n        } else {\r\n          // Fallback to trigger method\r\n          editor.trigger('keyboard', 'actions.find', null);\r\n        }\r\n      });\r\n\r\n      // Add keyboard shortcut for replace (Ctrl+H)\r\n      editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyH, () => {\r\n        // This will open the replace widget\r\n        // Use getAction for each action ID instead of getActions\r\n        const actions = [];\r\n        const replaceAction1 = editor.getAction(\r\n          'editor.action.startFindReplaceAction'\r\n        );\r\n        const replaceAction2 = editor.getAction('actions.findWithReplace');\r\n        if (replaceAction1) actions.push(replaceAction1);\r\n        if (replaceAction2) actions.push(replaceAction2);\r\n\r\n        // Try to find the replace action\r\n        const replaceAction = actions.find(\r\n          (a: { id: string; run: () => void }) =>\r\n            a.id === 'editor.action.startFindReplaceAction'\r\n        );\r\n\r\n        if (replaceAction) {\r\n          replaceAction.run();\r\n        } else {\r\n          // Fallback to trigger method\r\n          editor.trigger(\r\n            'keyboard',\r\n            'editor.action.startFindReplaceAction',\r\n            null\r\n          );\r\n        }\r\n      });\r\n\r\n      const model = editor.getModel();\r\n      if (model) {\r\n        // Set up validation change listener with enhanced error reporting\r\n        const markersDisposable = monaco.editor.onDidChangeMarkers((uris) => {\r\n          const editorUri = model.uri;\r\n          if (uris.find((uri) => uri.toString() === editorUri.toString())) {\r\n            const markers = monaco.editor.getModelMarkers({\r\n              resource: editorUri,\r\n            });\r\n            const errors = markers.map((marker) => ({\r\n              line: marker.startLineNumber,\r\n              column: marker.startColumn,\r\n              message: marker.message,\r\n              severity:\r\n                marker.severity === monaco.MarkerSeverity.Error\r\n                  ? ('error' as const)\r\n                  : ('warning' as const),\r\n            }));\r\n            onValidationChange(errors);\r\n          }\r\n        });\r\n\r\n        // Set up cursor position change listener\r\n        const cursorDisposable = editor.onDidChangeCursorPosition((e) => {\r\n          if (onCursorPositionChange) {\r\n            onCursorPositionChange({\r\n              line: e.position.lineNumber,\r\n              column: e.position.column,\r\n            });\r\n          }\r\n        });\r\n\r\n        // Set up selection change listener\r\n        const selectionDisposable = editor.onDidChangeCursorSelection((e) => {\r\n          if (onSelectionChange) {\r\n            onSelectionChange({\r\n              startLine: e.selection.startLineNumber,\r\n              startColumn: e.selection.startColumn,\r\n              endLine: e.selection.endLineNumber,\r\n              endColumn: e.selection.endColumn,\r\n            });\r\n          }\r\n        });\r\n\r\n        // Set up content change listener for undo/redo state\r\n        const contentDisposable = model.onDidChangeContent(() => {\r\n          // This will trigger validation automatically\r\n          // Additional logic can be added here for undo/redo state tracking\r\n        });\r\n\r\n        // Enhanced keyboard shortcuts\r\n        editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyD, () => {\r\n          // Duplicate line\r\n          editor.trigger('keyboard', 'editor.action.copyLinesDownAction', {});\r\n        });\r\n\r\n        editor.addCommand(\r\n          monaco.KeyMod.CtrlCmd | monaco.KeyMod.Shift | monaco.KeyCode.KeyK,\r\n          () => {\r\n            // Delete line\r\n            editor.trigger('keyboard', 'editor.action.deleteLines', {});\r\n          }\r\n        );\r\n\r\n        editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.Slash, () => {\r\n          // Toggle line comment (though JSON doesn't support comments, this is for future extensibility)\r\n          editor.trigger('keyboard', 'editor.action.commentLine', {});\r\n        });\r\n\r\n        // Clean up on unmount\r\n        return () => {\r\n          markersDisposable.dispose();\r\n          cursorDisposable.dispose();\r\n          selectionDisposable.dispose();\r\n          contentDisposable.dispose();\r\n        };\r\n      }\r\n    };\r\n\r\n    const handleEditorChange: OnChange = (value) => {\r\n      if (value !== undefined) {\r\n        onChange(value);\r\n      }\r\n    };\r\n\r\n    // Update editor options when settings change\r\n    useEffect(() => {\r\n      if (editorRef.current) {\r\n        editorRef.current.updateOptions({\r\n          tabSize: settings.indentSize,\r\n          insertSpaces: settings.indentType === 'spaces',\r\n          wordWrap: settings.wordWrap ? 'on' : 'off',\r\n          lineNumbers: settings.lineNumbers ? 'on' : 'off',\r\n          minimap: { enabled: settings.minimap },\r\n        });\r\n      }\r\n    }, [settings]);\r\n\r\n    const editorOptions: any = {\r\n      language: 'json',\r\n      theme: theme === 'dark' ? 'vs-dark' : 'vs',\r\n      automaticLayout: true,\r\n      fontSize: 14,\r\n      fontFamily: 'Monaco, Menlo, \"Ubuntu Mono\", monospace',\r\n      tabSize: settings.indentSize,\r\n      insertSpaces: settings.indentType === 'spaces',\r\n      wordWrap: settings.wordWrap ? 'on' : 'off',\r\n      lineNumbers: settings.lineNumbers ? 'on' : 'off',\r\n      minimap: { enabled: settings.minimap },\r\n      scrollBeyondLastLine: false,\r\n      renderWhitespace: 'selection',\r\n\r\n      // Enhanced bracket and matching features\r\n      bracketPairColorization: { enabled: true },\r\n      matchBrackets: 'always',\r\n      showFoldingControls: 'always',\r\n      foldingStrategy: 'indentation',\r\n      foldingHighlight: true,\r\n\r\n      // Enhanced auto-completion and suggestions\r\n      autoClosingBrackets: 'always',\r\n      autoClosingQuotes: 'always',\r\n      autoClosingDelete: 'always',\r\n      autoClosingOvertype: 'always',\r\n      autoSurround: 'languageDefined',\r\n      autoIndent: 'full',\r\n      formatOnPaste: true,\r\n      formatOnType: true,\r\n\r\n      // Enhanced IntelliSense\r\n      suggest: {\r\n        showKeywords: true,\r\n        showSnippets: true,\r\n        showFunctions: true,\r\n        showConstructors: true,\r\n        showFields: true,\r\n        showVariables: true,\r\n        showClasses: true,\r\n        showStructs: true,\r\n        showInterfaces: true,\r\n        showModules: true,\r\n        showProperties: true,\r\n        showEvents: true,\r\n        showOperators: true,\r\n        showUnits: true,\r\n        showValues: true,\r\n        showConstants: true,\r\n        showEnums: true,\r\n        showEnumMembers: true,\r\n        showColors: true,\r\n        showFiles: true,\r\n        showReferences: true,\r\n        showFolders: true,\r\n        showTypeParameters: true,\r\n        showIssues: true,\r\n        showUsers: true,\r\n        insertMode: 'insert',\r\n        filterGraceful: true,\r\n        snippetsPreventQuickSuggestions: false,\r\n      },\r\n\r\n      quickSuggestions: {\r\n        other: true,\r\n        comments: false,\r\n        strings: true,\r\n      },\r\n\r\n      // Enhanced editing features\r\n      multiCursorModifier: 'ctrlCmd',\r\n      multiCursorMergeOverlapping: true,\r\n      multiCursorPaste: 'spread',\r\n\r\n      // Find and replace enhancements\r\n      find: {\r\n        addExtraSpaceOnTop: true,\r\n        autoFindInSelection: 'never',\r\n        seedSearchStringFromSelection: 'always',\r\n        loop: true,\r\n        // Removed closeOnFocusLost as it's not in IEditorFindOptions\r\n      },\r\n\r\n      // Enhanced error and warning display\r\n      renderValidationDecorations: 'on',\r\n      renderLineHighlight: 'all',\r\n      renderLineHighlightOnlyWhenFocus: false,\r\n\r\n      // Undo/Redo enhancements\r\n      undoStopOnWordBoundary: true,\r\n\r\n      // Performance optimizations\r\n      largeFileOptimizations: true,\r\n\r\n      // Accessibility features\r\n      accessibilitySupport: 'auto',\r\n      ariaLabel: 'PDX JSON Editor',\r\n\r\n      // Selection and cursor enhancements\r\n      cursorBlinking: 'blink',\r\n      cursorSmoothCaretAnimation: 'on',\r\n      cursorStyle: 'line',\r\n      cursorWidth: 2,\r\n\r\n      // Scrolling enhancements\r\n      smoothScrolling: true,\r\n      mouseWheelScrollSensitivity: 1,\r\n      fastScrollSensitivity: 5,\r\n    };\r\n\r\n    return (\r\n      <div className=\"w-full h-full\">\r\n        <Editor\r\n          value={value}\r\n          onChange={handleEditorChange}\r\n          onMount={handleEditorDidMount}\r\n          options={editorOptions}\r\n          loading={\r\n            <div className=\"flex items-center justify-center h-full\">\r\n              <div className=\"text-gray-500\">Loading editor...</div>\r\n            </div>\r\n          }\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default JsonEditor;\r\n","import React from 'react';\r\n\r\ninterface ThemeSelectorProps {\r\n  theme: 'light' | 'dark';\r\n  onThemeChange: (theme: 'light' | 'dark') => void;\r\n  disabled?: boolean;\r\n}\r\n\r\nconst ThemeSelector: React.FC<ThemeSelectorProps> = ({\r\n  theme,\r\n  onThemeChange,\r\n  disabled = false,\r\n}) => {\r\n  const handleToggle = () => {\r\n    if (disabled) return;\r\n    onThemeChange(theme === 'light' ? 'dark' : 'light');\r\n  };\r\n\r\n  const buttonClass = `\r\n    relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ease-in-out\r\n    ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\r\n    ${theme === 'dark' ? 'bg-blue-600' : 'bg-gray-200'}\r\n    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\r\n  `;\r\n\r\n  const switchClass = `\r\n    inline-block h-4 w-4 transform rounded-full bg-white transition duration-200 ease-in-out\r\n    ${theme === 'dark' ? 'translate-x-6' : 'translate-x-1'}\r\n  `;\r\n\r\n  return (\r\n    <div className=\"flex items-center space-x-3\">\r\n      {/* Light theme icon */}\r\n      <span\r\n        className={`text-sm ${theme === 'light' ? 'text-yellow-500' : 'text-gray-400'}`}\r\n        title=\"Light theme\"\r\n      >\r\n        ☀️\r\n      </span>\r\n\r\n      {/* Toggle switch */}\r\n      <button\r\n        type=\"button\"\r\n        className={buttonClass}\r\n        onClick={handleToggle}\r\n        disabled={disabled}\r\n        role=\"switch\"\r\n        aria-checked={theme === 'dark'}\r\n        aria-label={`Switch to ${theme === 'light' ? 'dark' : 'light'} theme`}\r\n      >\r\n        <span className={switchClass} />\r\n      </button>\r\n\r\n      {/* Dark theme icon */}\r\n      <span\r\n        className={`text-sm ${theme === 'dark' ? 'text-blue-400' : 'text-gray-400'}`}\r\n        title=\"Dark theme\"\r\n      >\r\n        🌙\r\n      </span>\r\n\r\n      {/* Theme label */}\r\n      <span\r\n        className={`text-sm font-medium ${\r\n          theme === 'dark' ? 'text-gray-200' : 'text-gray-700'\r\n        }`}\r\n      >\r\n        {theme === 'light' ? 'Light' : 'Dark'}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ThemeSelector;\r\n","/**\r\n * Z-Index常量\r\n *\r\n * 这个文件定义了应用程序中使用的所有z-index值，\r\n * 以确保组件之间的层叠顺序一致。\r\n */\r\n\r\nconst Z_INDEX = {\r\n  // 基础层级\r\n  BASE: 1,\r\n\r\n  // 下拉菜单和工具提示\r\n  DROPDOWN: 10,\r\n  TOOLTIP: 20,\r\n\r\n  // 编辑器组件\r\n  EDITOR_GUTTER: 30,\r\n  EDITOR_CONTENT: 40,\r\n\r\n  // 面板组件\r\n  SEARCH_PANEL: 100,\r\n\r\n  // 模态窗口组件\r\n  MODAL_OVERLAY: 9000,\r\n  MODAL_CONTENT: 9100,\r\n\r\n  // 顶层组件（通知、警告等）\r\n  TOAST: 9500,\r\n};\r\n\r\nexport default Z_INDEX;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport type { EditorSettings } from '../../types/editor.types';\r\nimport { ThemeSelector } from './index';\r\nimport Z_INDEX from '../../constants/zIndex';\r\n\r\ninterface SettingsPanelProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  settings: EditorSettings;\r\n  onSettingsChange: (settings: Partial<EditorSettings>) => void;\r\n  theme: 'light' | 'dark';\r\n  onThemeChange: (theme: 'light' | 'dark') => void;\r\n}\r\n\r\nconst SettingsPanel: React.FC<SettingsPanelProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  settings,\r\n  onSettingsChange,\r\n  theme,\r\n  onThemeChange,\r\n}) => {\r\n  const [localSettings, setLocalSettings] = useState<EditorSettings>(settings);\r\n  const modalRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Update local settings when props change\r\n  useEffect(() => {\r\n    setLocalSettings(settings);\r\n  }, [settings]);\r\n\r\n  // Handle settings changes\r\n  const handleSettingChange = <K extends keyof EditorSettings>(\r\n    key: K,\r\n    value: EditorSettings[K]\r\n  ) => {\r\n    const newSettings = { ...localSettings, [key]: value };\r\n    setLocalSettings(newSettings);\r\n    onSettingsChange({ [key]: value });\r\n  };\r\n\r\n  // Reset settings to defaults\r\n  const handleReset = () => {\r\n    const defaultSettings: EditorSettings = {\r\n      indentSize: 2,\r\n      indentType: 'spaces',\r\n      wordWrap: false,\r\n      lineNumbers: true,\r\n      minimap: true,\r\n    };\r\n    setLocalSettings(defaultSettings);\r\n    onSettingsChange(defaultSettings);\r\n  };\r\n\r\n  // Handle ESC key press to close modal\r\n  useEffect(() => {\r\n    const handleEscKey = (event: KeyboardEvent) => {\r\n      if (event.key === 'Escape' && isOpen) {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscKey);\r\n      document.body.style.overflow = 'hidden'; // Prevent background scrolling\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscKey);\r\n      document.body.style.overflow = ''; // Restore scrolling\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  // Focus trap inside modal\r\n  useEffect(() => {\r\n    if (isOpen && modalRef.current) {\r\n      modalRef.current.focus();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: Z_INDEX.MODAL_OVERLAY,\r\n      }}\r\n    >\r\n      <div\r\n        ref={modalRef}\r\n        tabIndex={-1}\r\n        style={{\r\n          backgroundColor: theme === 'dark' ? '#1f2937' : 'white',\r\n          color: theme === 'dark' ? '#f9fafb' : '#111827',\r\n          borderRadius: '0.5rem',\r\n          padding: '1.5rem',\r\n          boxShadow:\r\n            '0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08)',\r\n          maxHeight: '80vh',\r\n          overflowY: 'auto',\r\n          width: '95%',\r\n          maxWidth: '450px',\r\n          position: 'relative',\r\n          zIndex: Z_INDEX.MODAL_CONTENT,\r\n        }}\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <h2 \r\n            className=\"text-xl font-semibold\"\r\n            style={{ color: theme === 'dark' ? '#f9fafb' : '#111827' }}\r\n          >\r\n            编辑器设置\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl font-bold w-8 h-8 flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n            aria-label=\"关闭设置\"\r\n          >\r\n            ✕\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"space-y-6\">\r\n          {/* Theme Settings */}\r\n          <div>\r\n            <h3 className=\"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3\">\r\n              外观\r\n            </h3>\r\n            <div className=\"pl-4\">\r\n              <ThemeSelector theme={theme} onThemeChange={onThemeChange} />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Editor Settings */}\r\n          <div>\r\n            <h3 className=\"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3\">\r\n              编辑器\r\n            </h3>\r\n            <div className=\"space-y-4 pl-4\">\r\n              {/* Indent Size */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  缩进大小\r\n                </label>\r\n                <select\r\n                  value={localSettings.indentSize}\r\n                  onChange={(e) =>\r\n                    handleSettingChange(\r\n                      'indentSize',\r\n                      Number(e.target.value) as 2 | 4\r\n                    )\r\n                  }\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                >\r\n                  <option value={2} className=\"dark:bg-gray-700 dark:text-white\">2 个空格</option>\r\n                  <option value={4} className=\"dark:bg-gray-700 dark:text-white\">4 个空格</option>\r\n                </select>\r\n              </div>\r\n\r\n              {/* Indent Type */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  缩进类型\r\n                </label>\r\n                <div className=\"flex space-x-4\">\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"indentType\"\r\n                      value=\"spaces\"\r\n                      checked={localSettings.indentType === 'spaces'}\r\n                      onChange={(e) =>\r\n                        handleSettingChange(\r\n                          'indentType',\r\n                          e.target.value as 'spaces' | 'tabs'\r\n                        )\r\n                      }\r\n                      className=\"mr-2 text-blue-600 focus:ring-blue-500\"\r\n                    />\r\n                    <span className=\"text-sm text-gray-700 dark:text-white\">\r\n                      空格\r\n                    </span>\r\n                  </label>\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      name=\"indentType\"\r\n                      value=\"tabs\"\r\n                      checked={localSettings.indentType === 'tabs'}\r\n                      onChange={(e) =>\r\n                        handleSettingChange(\r\n                          'indentType',\r\n                          e.target.value as 'spaces' | 'tabs'\r\n                        )\r\n                      }\r\n                      className=\"mr-2 text-blue-600 focus:ring-blue-500\"\r\n                    />\r\n                    <span className=\"text-sm text-gray-700 dark:text-white\">\r\n                      制表符\r\n                    </span>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Word Wrap */}\r\n              <div>\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={localSettings.wordWrap}\r\n                    onChange={(e) =>\r\n                      handleSettingChange('wordWrap', e.target.checked)\r\n                    }\r\n                    className=\"mr-3 text-blue-600 focus:ring-blue-500 rounded\"\r\n                  />\r\n                  <span className=\"text-sm font-medium text-gray-700 dark:text-white\">\r\n                    自动换行\r\n                  </span>\r\n                </label>\r\n                <p className=\"text-xs text-gray-500 dark:text-gray-300 mt-1 ml-6\">\r\n                  将长行自动换行以适应编辑器宽度\r\n                </p>\r\n              </div>\r\n\r\n              {/* Line Numbers */}\r\n              <div>\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={localSettings.lineNumbers}\r\n                    onChange={(e) =>\r\n                      handleSettingChange('lineNumbers', e.target.checked)\r\n                    }\r\n                    className=\"mr-3 text-blue-600 focus:ring-blue-500 rounded\"\r\n                  />\r\n                  <span className=\"text-sm font-medium text-gray-700 dark:text-white\">\r\n                    行号\r\n                  </span>\r\n                </label>\r\n                <p className=\"text-xs text-gray-500 dark:text-gray-300 mt-1 ml-6\">\r\n                  在编辑器中显示行号\r\n                </p>\r\n              </div>\r\n\r\n              {/* Minimap */}\r\n              <div>\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={localSettings.minimap}\r\n                    onChange={(e) =>\r\n                      handleSettingChange('minimap', e.target.checked)\r\n                    }\r\n                    className=\"mr-3 text-blue-600 focus:ring-blue-500 rounded\"\r\n                  />\r\n                  <span className=\"text-sm font-medium text-gray-700 dark:text-white\">\r\n                    缩略图\r\n                  </span>\r\n                </label>\r\n                <p className=\"text-xs text-gray-500 dark:text-gray-300 mt-1 ml-6\">\r\n                  显示文档的缩略图概览\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex justify-between items-center mt-8 pt-4 border-t border-gray-200 dark:border-gray-600\">\r\n          <button\r\n            onClick={handleReset}\r\n            className=\"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors\"\r\n          >\r\n            重置为默认值\r\n          </button>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors\"\r\n          >\r\n            完成\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SettingsPanel;\r\n","import React, { useRef } from 'react';\r\nimport type { FileInfo } from '../../types/editor.types';\r\n\r\ninterface FileOperationsProps {\r\n  onOpen: (file: FileInfo) => void;\r\n  onSave: () => void;\r\n  onNew: () => void;\r\n  isDirty: boolean;\r\n  currentFile: FileInfo | null;\r\n  theme: 'light' | 'dark';\r\n  disabled?: boolean;\r\n}\r\n\r\nconst FileOperations: React.FC<FileOperationsProps> = ({\r\n  onOpen,\r\n  onSave,\r\n  onNew,\r\n  isDirty,\r\n  currentFile,\r\n  theme,\r\n  disabled = false,\r\n}) => {\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleFileSelect = async (\r\n    event: React.ChangeEvent<HTMLInputElement>\r\n  ) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    try {\r\n      const content = await readFileContent(file);\r\n      const fileInfo: FileInfo = {\r\n        name: file.name,\r\n        size: file.size,\r\n        lastModified: new Date(file.lastModified),\r\n        content,\r\n      };\r\n      onOpen(fileInfo);\r\n    } catch (error) {\r\n      console.error('Error reading file:', error);\r\n      // TODO: Show error toast\r\n    }\r\n\r\n    // Reset input value to allow selecting the same file again\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  const readFileContent = (file: File): Promise<string> => {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => resolve(e.target?.result as string);\r\n      reader.onerror = () => reject(new Error('Failed to read file'));\r\n      reader.readAsText(file);\r\n    });\r\n  };\r\n\r\n  const handleOpenClick = () => {\r\n    if (disabled) return;\r\n    fileInputRef.current?.click();\r\n  };\r\n\r\n  const handleSaveClick = () => {\r\n    if (disabled) return;\r\n    onSave();\r\n  };\r\n\r\n  const handleNewClick = () => {\r\n    if (disabled) return;\r\n    onNew();\r\n  };\r\n\r\n  const buttonBaseClass = `\r\n    px-4 py-2.5 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2\r\n    ${\r\n      theme === 'dark'\r\n        ? 'bg-gray-800/50 hover:bg-gray-700/60 text-gray-300 hover:text-white border-gray-600/50 hover:border-gray-500'\r\n        : 'bg-white/80 hover:bg-gray-50 text-gray-700 hover:text-gray-900 border-gray-200 hover:border-gray-300'\r\n    }\r\n    ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer hover:shadow-md hover:scale-105'}\r\n    border backdrop-blur-sm\r\n  `;\r\n\r\n  const primaryButtonClass = `\r\n    px-4 py-2.5 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2\r\n    ${\r\n      theme === 'dark'\r\n        ? 'bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white border-blue-500'\r\n        : 'bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white border-blue-500'\r\n    }\r\n    ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer hover:shadow-lg hover:scale-105'}\r\n    border shadow-md\r\n  `;\r\n\r\n  const dangerButtonClass = `\r\n    px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 flex items-center space-x-2\r\n    ${\r\n      theme === 'dark'\r\n        ? 'bg-red-600 hover:bg-red-700 text-white'\r\n        : 'bg-red-600 hover:bg-red-700 text-white'\r\n    }\r\n    ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\r\n  `;\r\n\r\n  return (\r\n    <div className=\"flex items-center space-x-2\">\r\n      {/* Hidden file input */}\r\n      <input\r\n        ref={fileInputRef}\r\n        type=\"file\"\r\n        accept=\".json,.txt\"\r\n        onChange={handleFileSelect}\r\n        className=\"hidden\"\r\n        aria-label=\"Select JSON file\"\r\n      />\r\n\r\n      {/* New File Button */}\r\n      <button\r\n        onClick={handleNewClick}\r\n        className={buttonBaseClass}\r\n        disabled={disabled}\r\n        title=\"创建新文件 (Ctrl+N)\"\r\n      >\r\n        <span>📄</span>\r\n        <span>新建</span>\r\n      </button>\r\n\r\n      {/* Open File Button */}\r\n      <button\r\n        onClick={handleOpenClick}\r\n        className={buttonBaseClass}\r\n        disabled={disabled}\r\n        title=\"打开文件 (Ctrl+O)\"\r\n      >\r\n        <span>📁</span>\r\n        <span>打开</span>\r\n      </button>\r\n\r\n      {/* Save File Button */}\r\n      <button\r\n        onClick={handleSaveClick}\r\n        className={isDirty ? primaryButtonClass : buttonBaseClass}\r\n        disabled={disabled}\r\n        title=\"保存文件 (Ctrl+S)\"\r\n      >\r\n        <span>💾</span>\r\n        <span>保存</span>\r\n        {isDirty && (\r\n          <span\r\n            className=\"w-2 h-2 bg-orange-500 rounded-full ml-1\"\r\n            title=\"未保存的更改\"\r\n          />\r\n        )}\r\n      </button>\r\n\r\n      {/* File Info */}\r\n      {currentFile && (\r\n        <div\r\n          className={`\r\n          px-4 py-2.5 text-sm rounded-lg border backdrop-blur-sm\r\n          ${\r\n            theme === 'dark'\r\n              ? 'bg-gray-800/60 border-gray-600/50 text-gray-300'\r\n              : 'bg-white/80 border-gray-200 text-gray-600'\r\n          }\r\n        `}\r\n        >\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <span className=\"text-blue-500\">📄</span>\r\n              <span className=\"font-medium\">{currentFile.name}</span>\r\n            </div>\r\n            <span className=\"text-xs opacity-75 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-md\">\r\n              {formatFileSize(currentFile.size)}\r\n            </span>\r\n            {isDirty && (\r\n              <div className=\"flex items-center space-x-1\">\r\n                <span className=\"w-2 h-2 bg-orange-500 rounded-full animate-pulse\"></span>\r\n                <span className=\"text-orange-500 text-xs font-medium\">未保存</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst formatFileSize = (bytes: number): string => {\r\n  if (bytes < 1024) return `${bytes} B`;\r\n  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\r\n  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\r\n};\r\n\r\nexport default FileOperations;\r\n","import React, { useState, useCallback } from 'react';\r\nimport type { FileInfo } from '../../types/editor.types';\r\n\r\ninterface FileDropZoneProps {\r\n  onFileDrop: (file: FileInfo) => void;\r\n  onError: (error: string) => void;\r\n  theme: 'light' | 'dark';\r\n  disabled?: boolean;\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst FileDropZone: React.FC<FileDropZoneProps> = ({\r\n  onFileDrop,\r\n  onError,\r\n  theme,\r\n  disabled = false,\r\n  children,\r\n}) => {\r\n  const [isDragOver, setIsDragOver] = useState(false);\r\n  const [dragCounter, setDragCounter] = useState(0);\r\n\r\n  const validateFile = (file: File): boolean => {\r\n    // Check file type\r\n    const validTypes = ['application/json', 'text/plain'];\r\n    const validExtensions = ['.json', '.txt'];\r\n\r\n    const isValidType =\r\n      validTypes.includes(file.type) ||\r\n      validExtensions.some((ext) => file.name.toLowerCase().endsWith(ext));\r\n\r\n    if (!isValidType) {\r\n      onError('Please select a JSON or text file');\r\n      return false;\r\n    }\r\n\r\n    // Check file size (max 10MB)\r\n    const maxSize = 10 * 1024 * 1024; // 10MB\r\n    if (file.size > maxSize) {\r\n      onError('File size must be less than 10MB');\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const readFileContent = (file: File): Promise<string> => {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => resolve(e.target?.result as string);\r\n      reader.onerror = () => reject(new Error('Failed to read file'));\r\n      reader.readAsText(file);\r\n    });\r\n  };\r\n\r\n  const handleFile = async (file: File) => {\r\n    if (!validateFile(file)) return;\r\n\r\n    try {\r\n      const content = await readFileContent(file);\r\n      const fileInfo: FileInfo = {\r\n        name: file.name,\r\n        size: file.size,\r\n        lastModified: new Date(file.lastModified),\r\n        content,\r\n      };\r\n      onFileDrop(fileInfo);\r\n    } catch (error) {\r\n      onError('Failed to read file content');\r\n    }\r\n  };\r\n\r\n  const handleDragEnter = useCallback(\r\n    (e: React.DragEvent) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      if (disabled) return;\r\n\r\n      setDragCounter((prev) => prev + 1);\r\n\r\n      if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {\r\n        setIsDragOver(true);\r\n      }\r\n    },\r\n    [disabled]\r\n  );\r\n\r\n  const handleDragLeave = useCallback(\r\n    (e: React.DragEvent) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      if (disabled) return;\r\n\r\n      setDragCounter((prev) => {\r\n        const newCounter = prev - 1;\r\n        if (newCounter === 0) {\r\n          setIsDragOver(false);\r\n        }\r\n        return newCounter;\r\n      });\r\n    },\r\n    [disabled]\r\n  );\r\n\r\n  const handleDragOver = useCallback(\r\n    (e: React.DragEvent) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      if (disabled) return;\r\n\r\n      // Set the dropEffect to indicate this is a copy operation\r\n      e.dataTransfer.dropEffect = 'copy';\r\n    },\r\n    [disabled]\r\n  );\r\n\r\n  const handleDrop = useCallback(\r\n    async (e: React.DragEvent) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      if (disabled) return;\r\n\r\n      setIsDragOver(false);\r\n      setDragCounter(0);\r\n\r\n      const files = Array.from(e.dataTransfer.files);\r\n\r\n      if (files.length === 0) {\r\n        onError('No files were dropped');\r\n        return;\r\n      }\r\n\r\n      if (files.length > 1) {\r\n        onError('Please drop only one file at a time');\r\n        return;\r\n      }\r\n\r\n      await handleFile(files[0]);\r\n    },\r\n    [disabled, onError]\r\n  );\r\n\r\n  const overlayClass = `\r\n    absolute inset-0 z-10 flex items-center justify-center\r\n    ${\r\n      theme === 'dark'\r\n        ? 'bg-gray-900/80 border-blue-400'\r\n        : 'bg-white/80 border-blue-500'\r\n    }\r\n    border-2 border-dashed rounded-lg transition-all duration-200\r\n    ${isDragOver ? 'opacity-100' : 'opacity-0 pointer-events-none'}\r\n  `;\r\n\r\n  const dropMessageClass = `\r\n    px-6 py-4 rounded-lg text-center\r\n    ${\r\n      theme === 'dark'\r\n        ? 'bg-gray-800 text-gray-200 border-gray-600'\r\n        : 'bg-white text-gray-700 border-gray-300'\r\n    }\r\n    border shadow-lg\r\n  `;\r\n\r\n  return (\r\n    <div\r\n      className=\"relative w-full h-full\"\r\n      onDragEnter={handleDragEnter}\r\n      onDragLeave={handleDragLeave}\r\n      onDragOver={handleDragOver}\r\n      onDrop={handleDrop}\r\n    >\r\n      {children}\r\n\r\n      {/* Drag overlay */}\r\n      <div className={overlayClass}>\r\n        <div className={dropMessageClass}>\r\n          <div className=\"text-2xl mb-2\">📁</div>\r\n          <div className=\"text-lg font-medium mb-1\">\r\n            Drop your JSON file here\r\n          </div>\r\n          <div className=\"text-sm opacity-75\">\r\n            Supports .json and .txt files (max 10MB)\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FileDropZone;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport Z_INDEX from '../../constants/zIndex';\r\n\r\ninterface SearchPanelProps {\r\n  isVisible: boolean;\r\n  onClose: () => void;\r\n  onSearch: (query: string, options: SearchOptions) => void;\r\n  onReplace: (\r\n    searchQuery: string,\r\n    replaceText: string,\r\n    options: SearchOptions\r\n  ) => void;\r\n  onReplaceAll: (\r\n    searchQuery: string,\r\n    replaceText: string,\r\n    options: SearchOptions\r\n  ) => void;\r\n  onFindNext: () => void;\r\n  onFindPrevious: () => void;\r\n  searchResults: SearchResult[];\r\n  currentResultIndex: number;\r\n  theme: 'light' | 'dark';\r\n}\r\n\r\ninterface SearchOptions {\r\n  caseSensitive: boolean;\r\n  useRegex: boolean;\r\n  wholeWord: boolean;\r\n}\r\n\r\ninterface SearchResult {\r\n  line: number;\r\n  column: number;\r\n  length: number;\r\n  text: string;\r\n}\r\n\r\n/**\r\n * 自定义搜索面板，固定在菜单行右侧\r\n */\r\nconst SearchPanel: React.FC<SearchPanelProps> = ({\r\n  isVisible,\r\n  onSearch,\r\n  onReplace,\r\n  onReplaceAll,\r\n  onFindNext,\r\n  onFindPrevious,\r\n  theme,\r\n}) => {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [replaceText, setReplaceText] = useState('');\r\n  const [showReplace, setShowReplace] = useState(false);\r\n  const [options, setOptions] = useState<SearchOptions>({\r\n    caseSensitive: false,\r\n    useRegex: false,\r\n    wholeWord: false,\r\n  });\r\n\r\n  const searchInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // 当面板变为可见时，聚焦搜索输入框\r\n  useEffect(() => {\r\n    if (isVisible && searchInputRef.current) {\r\n      searchInputRef.current.focus();\r\n    }\r\n  }, [isVisible]);\r\n\r\n  // 处理搜索 - 当输入框内容变化时自动触发搜索\r\n  useEffect(() => {\r\n    if (searchQuery.trim()) {\r\n      onSearch(searchQuery, options);\r\n    }\r\n  }, [searchQuery, options, onSearch]);\r\n\r\n  // 处理替换\r\n  const handleReplace = () => {\r\n    if (searchQuery.trim()) {\r\n      onReplace(searchQuery, replaceText, options);\r\n    }\r\n  };\r\n\r\n  // 处理全部替换\r\n  const handleReplaceAll = () => {\r\n    if (searchQuery.trim()) {\r\n      onReplaceAll(searchQuery, replaceText, options);\r\n    }\r\n  };\r\n\r\n  // 处理按键事件\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter') {\r\n      if (e.shiftKey) {\r\n        onFindPrevious();\r\n      } else {\r\n        onFindNext();\r\n      }\r\n      e.preventDefault();\r\n    }\r\n  };\r\n\r\n  // 切换选项\r\n  const toggleOption = (option: keyof SearchOptions) => {\r\n    setOptions((prev) => ({\r\n      ...prev,\r\n      [option]: !prev[option],\r\n    }));\r\n  };\r\n\r\n  const inputClass = `\r\n    w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all duration-200 backdrop-blur-sm\r\n    ${\r\n      theme === 'dark'\r\n        ? 'bg-gray-800/80 text-gray-200 border-gray-600/50 focus:border-blue-500/50 placeholder-gray-400'\r\n        : 'bg-white/90 text-gray-700 border-gray-300/50 focus:border-blue-500/50 placeholder-gray-500'\r\n    }\r\n  `;\r\n\r\n  const buttonClass = `\r\n    px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 backdrop-blur-sm\r\n    ${\r\n      theme === 'dark'\r\n        ? 'bg-gray-700/60 hover:bg-gray-600/70 text-gray-200 border-gray-600/50 hover:border-gray-500'\r\n        : 'bg-white/80 hover:bg-gray-50 text-gray-700 border-gray-300/50 hover:border-gray-400'\r\n    }\r\n    border hover:shadow-md hover:scale-105\r\n  `;\r\n\r\n  const optionButtonClass = (active: boolean) => `\r\n    px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 border backdrop-blur-sm\r\n    ${\r\n      theme === 'dark'\r\n        ? active\r\n          ? 'bg-gradient-to-r from-blue-600 to-blue-700 text-white border-blue-500 shadow-lg'\r\n          : 'bg-gray-700/60 text-gray-300 border-gray-600/50 hover:bg-gray-600/70 hover:border-gray-500'\r\n        : active\r\n          ? 'bg-gradient-to-r from-blue-500 to-blue-600 text-white border-blue-400 shadow-lg'\r\n          : 'bg-white/80 text-gray-700 border-gray-300/50 hover:bg-gray-50 hover:border-gray-400'\r\n    }\r\n    ${active ? '' : 'hover:shadow-md hover:scale-105'}\r\n  `;\r\n\r\n  return (\r\n    <div\r\n      className={`flex-shrink-0 ${!isVisible ? 'hidden' : ''}`}\r\n      style={{\r\n        backgroundColor: theme === 'dark' ? 'rgba(31, 41, 55, 0.8)' : 'rgba(255, 255, 255, 0.9)',\r\n        borderLeft: `1px solid ${theme === 'dark' ? 'rgba(55, 65, 81, 0.5)' : 'rgba(229, 231, 235, 0.5)'}`,\r\n        color: theme === 'dark' ? '#f3f4f6' : '#111827',\r\n        padding: '0.75rem 1rem',\r\n        zIndex: Z_INDEX.SEARCH_PANEL,\r\n        height: '100%',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        position: 'absolute',\r\n        right: 0,\r\n        top: 0,\r\n        backdropFilter: 'blur(8px)',\r\n        borderRadius: '0 0 0 12px',\r\n        boxShadow: theme === 'dark' \r\n          ? '0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2)' \r\n          : '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',\r\n      }}\r\n    >\r\n      <div className=\"flex items-center space-x-2\">\r\n        {/* 搜索输入框 */}\r\n        <div className=\"relative\">\r\n          <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n            <span className=\"text-gray-400 text-sm\">🔍</span>\r\n          </div>\r\n          <input\r\n            ref={searchInputRef}\r\n            type=\"text\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder=\"搜索...\"\r\n            className={`${inputClass} pl-10`}\r\n            style={{ width: '180px' }}\r\n          />\r\n        </div>\r\n\r\n        {/* 搜索选项按钮 */}\r\n        <div className=\"flex items-center space-x-1\">\r\n          <button\r\n            className={optionButtonClass(options.caseSensitive)}\r\n            onClick={() => toggleOption('caseSensitive')}\r\n            title=\"区分大小写\"\r\n          >\r\n            <span className=\"font-mono\">Aa</span>\r\n          </button>\r\n          <button\r\n            className={optionButtonClass(options.wholeWord)}\r\n            onClick={() => toggleOption('wholeWord')}\r\n            title=\"全字匹配\"\r\n          >\r\n            <span className=\"font-mono\">W</span>\r\n          </button>\r\n          <button\r\n            className={optionButtonClass(options.useRegex)}\r\n            onClick={() => toggleOption('useRegex')}\r\n            title=\"使用正则表达式\"\r\n          >\r\n            <span className=\"font-mono\">.*</span>\r\n          </button>\r\n        </div>\r\n\r\n        {/* 导航按钮 */}\r\n        <div className=\"flex items-center space-x-1\">\r\n          <button\r\n            className={buttonClass}\r\n            onClick={onFindPrevious}\r\n            title=\"查找上一个 (Shift+Enter)\"\r\n          >\r\n            <span className=\"text-lg\">⬆️</span>\r\n          </button>\r\n          <button\r\n            className={buttonClass}\r\n            onClick={onFindNext}\r\n            title=\"查找下一个 (Enter)\"\r\n          >\r\n            <span className=\"text-lg\">⬇️</span>\r\n          </button>\r\n        </div>\r\n\r\n        {/* 替换切换按钮 */}\r\n        <button\r\n          className={`${buttonClass} ${showReplace ? 'bg-orange-100 dark:bg-orange-900/30 border-orange-300 dark:border-orange-700' : ''}`}\r\n          onClick={() => setShowReplace(!showReplace)}\r\n          title={showReplace ? '隐藏替换' : '显示替换'}\r\n        >\r\n          <span className=\"flex items-center space-x-1\">\r\n            <span>{showReplace ? '🔽' : '🔄'}</span>\r\n            <span className=\"text-xs\">{showReplace ? '隐藏' : '替换'}</span>\r\n          </span>\r\n        </button>\r\n\r\n        {/* 替换输入框和按钮 */}\r\n        {showReplace && (\r\n          <div className=\"flex items-center space-x-2 ml-2 pl-2 border-l border-gray-300 dark:border-gray-600\">\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                <span className=\"text-gray-400 text-sm\">🔄</span>\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                value={replaceText}\r\n                onChange={(e) => setReplaceText(e.target.value)}\r\n                placeholder=\"替换为...\"\r\n                className={`${inputClass} pl-10`}\r\n                style={{ width: '140px' }}\r\n              />\r\n            </div>\r\n            <div className=\"flex items-center space-x-1\">\r\n              <button\r\n                className={`${buttonClass} bg-green-50 dark:bg-green-900/30 border-green-300 dark:border-green-700 text-green-700 dark:text-green-300`}\r\n                onClick={handleReplace}\r\n                title=\"替换当前\"\r\n              >\r\n                <span className=\"flex items-center space-x-1\">\r\n                  <span>🎯</span>\r\n                  <span className=\"text-xs\">替换</span>\r\n                </span>\r\n              </button>\r\n              <button\r\n                className={`${buttonClass} bg-red-50 dark:bg-red-900/30 border-red-300 dark:border-red-700 text-red-700 dark:text-red-300`}\r\n                onClick={handleReplaceAll}\r\n                title=\"全部替换\"\r\n              >\r\n                <span className=\"flex items-center space-x-1\">\r\n                  <span>🎯</span>\r\n                  <span className=\"text-xs\">全部</span>\r\n                </span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchPanel;\r\n","import React, { Component, ErrorInfo, ReactNode } from 'react';\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n  fallback?: ReactNode;\r\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\r\n}\r\n\r\ninterface State {\r\n  hasError: boolean;\r\n  error?: Error;\r\n  errorInfo?: ErrorInfo;\r\n}\r\n\r\nclass ErrorBoundary extends Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): State {\r\n    // Update state so the next render will show the fallback UI\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n    // Log error details\r\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\r\n\r\n    // Update state with error info\r\n    this.setState({\r\n      error,\r\n      errorInfo,\r\n    });\r\n\r\n    // Call optional error handler\r\n    if (this.props.onError) {\r\n      this.props.onError(error, errorInfo);\r\n    }\r\n\r\n    // TODO: Send error to logging service\r\n    // logErrorToService(error, errorInfo);\r\n  }\r\n\r\n  handleRetry = () => {\r\n    this.setState({ hasError: false, error: undefined, errorInfo: undefined });\r\n  };\r\n\r\n  handleReload = () => {\r\n    window.location.reload();\r\n  };\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // Custom fallback UI\r\n      if (this.props.fallback) {\r\n        return this.props.fallback;\r\n      }\r\n\r\n      // Default error UI\r\n      return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\r\n          <div className=\"max-w-md w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6\">\r\n            <div className=\"flex items-center mb-4\">\r\n              <div className=\"flex-shrink-0\">\r\n                <svg\r\n                  className=\"h-8 w-8 text-red-500\"\r\n                  fill=\"none\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  stroke=\"currentColor\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n              <div className=\"ml-3\">\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100\">\r\n                  Something went wrong\r\n                </h3>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mb-4\">\r\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                The JSON Editor encountered an unexpected error. You can try to\r\n                recover by clicking the buttons below.\r\n              </p>\r\n            </div>\r\n\r\n            {/* Error details (only in development) */}\r\n            {import.meta.env.DEV && this.state.error && (\r\n              <div className=\"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded\">\r\n                <h4 className=\"text-sm font-medium text-red-800 dark:text-red-200 mb-2\">\r\n                  Error Details:\r\n                </h4>\r\n                <pre className=\"text-xs text-red-700 dark:text-red-300 whitespace-pre-wrap overflow-auto max-h-32\">\r\n                  {this.state.error.message}\r\n                  {this.state.errorInfo?.componentStack && (\r\n                    <>\r\n                      {'\\n\\nComponent Stack:'}\r\n                      {this.state.errorInfo.componentStack}\r\n                    </>\r\n                  )}\r\n                </pre>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"flex space-x-3\">\r\n              <button\r\n                onClick={this.handleRetry}\r\n                className=\"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors\"\r\n              >\r\n                Try Again\r\n              </button>\r\n              <button\r\n                onClick={this.handleReload}\r\n                className=\"flex-1 bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors\"\r\n              >\r\n                Reload Page\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"mt-4 text-center\">\r\n              <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                If the problem persists, please refresh the page or contact\r\n                support.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary;\r\n","import React, { useEffect, useState } from 'react';\r\nimport type { ToastData, ToastProps } from '../../types/editor.types';\r\n\r\n// Keep backward compatibility\r\nexport type ToastType = 'success' | 'error' | 'warning' | 'info';\r\nexport interface ToastMessage extends ToastData {\r\n  action?: {\r\n    label: string;\r\n    onClick: () => void;\r\n  };\r\n}\r\n\r\ninterface ExtendedToastProps {\r\n  toast: ToastMessage;\r\n  onClose: (id: string) => void;\r\n}\r\n\r\nconst Toast: React.FC<ExtendedToastProps> = ({ toast, onClose }) => {\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const [isLeaving, setIsLeaving] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Trigger entrance animation\r\n    const timer = setTimeout(() => setIsVisible(true), 10);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const duration = toast.duration ?? 5000; // Default 5 seconds\r\n    if (duration > 0) {\r\n      const timer = setTimeout(() => {\r\n        handleClose();\r\n      }, duration);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [toast.duration]);\r\n\r\n  const handleClose = () => {\r\n    setIsLeaving(true);\r\n    setTimeout(() => {\r\n      onClose(toast.id);\r\n    }, 300); // Match animation duration\r\n  };\r\n\r\n  const getToastStyles = () => {\r\n    const baseStyles = `\r\n      relative flex items-start p-4 mb-3 rounded-lg shadow-lg border-l-4 transition-all duration-300 ease-in-out\r\n      ${isVisible && !isLeaving ? 'translate-x-0 opacity-100' : 'translate-x-full opacity-0'}\r\n    `;\r\n\r\n    switch (toast.type) {\r\n      case 'success':\r\n        return `${baseStyles} bg-green-50 dark:bg-green-900/20 border-green-500 text-green-800 dark:text-green-200`;\r\n      case 'error':\r\n        return `${baseStyles} bg-red-50 dark:bg-red-900/20 border-red-500 text-red-800 dark:text-red-200`;\r\n      case 'warning':\r\n        return `${baseStyles} bg-yellow-50 dark:bg-yellow-900/20 border-yellow-500 text-yellow-800 dark:text-yellow-200`;\r\n      case 'info':\r\n        return `${baseStyles} bg-blue-50 dark:bg-blue-900/20 border-blue-500 text-blue-800 dark:text-blue-200`;\r\n      default:\r\n        return `${baseStyles} bg-gray-50 dark:bg-gray-800 border-gray-500 text-gray-800 dark:text-gray-200`;\r\n    }\r\n  };\r\n\r\n  const getIcon = () => {\r\n    switch (toast.type) {\r\n      case 'success':\r\n        return (\r\n          <svg\r\n            className=\"w-5 h-5 text-green-500\"\r\n            fill=\"currentColor\"\r\n            viewBox=\"0 0 20 20\"\r\n          >\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\r\n              clipRule=\"evenodd\"\r\n            />\r\n          </svg>\r\n        );\r\n      case 'error':\r\n        return (\r\n          <svg\r\n            className=\"w-5 h-5 text-red-500\"\r\n            fill=\"currentColor\"\r\n            viewBox=\"0 0 20 20\"\r\n          >\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\"\r\n              clipRule=\"evenodd\"\r\n            />\r\n          </svg>\r\n        );\r\n      case 'warning':\r\n        return (\r\n          <svg\r\n            className=\"w-5 h-5 text-yellow-500\"\r\n            fill=\"currentColor\"\r\n            viewBox=\"0 0 20 20\"\r\n          >\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\"\r\n              clipRule=\"evenodd\"\r\n            />\r\n          </svg>\r\n        );\r\n      case 'info':\r\n        return (\r\n          <svg\r\n            className=\"w-5 h-5 text-blue-500\"\r\n            fill=\"currentColor\"\r\n            viewBox=\"0 0 20 20\"\r\n          >\r\n            <path\r\n              fillRule=\"evenodd\"\r\n              d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\"\r\n              clipRule=\"evenodd\"\r\n            />\r\n          </svg>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={getToastStyles()}>\r\n      {/* Icon */}\r\n      <div className=\"flex-shrink-0 mr-3\">{getIcon()}</div>\r\n\r\n      {/* Content */}\r\n      <div className=\"flex-1 min-w-0\">\r\n        <h4 className=\"text-sm font-medium\">{toast.title}</h4>\r\n        {toast.message && (\r\n          <p className=\"mt-1 text-sm opacity-90\">{toast.message}</p>\r\n        )}\r\n        {toast.action && (\r\n          <div className=\"mt-2\">\r\n            <button\r\n              onClick={toast.action.onClick}\r\n              className=\"text-sm font-medium underline hover:no-underline focus:outline-none\"\r\n            >\r\n              {toast.action.label}\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Close Button */}\r\n      <button\r\n        onClick={handleClose}\r\n        className=\"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none\"\r\n      >\r\n        <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n          <path\r\n            fillRule=\"evenodd\"\r\n            d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\"\r\n            clipRule=\"evenodd\"\r\n          />\r\n        </svg>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Toast;\r\n","import React from 'react';\r\nimport Toast, { ToastMessage } from './Toast';\r\n\r\ninterface ToastContainerProps {\r\n  toasts: ToastMessage[];\r\n  onRemoveToast: (id: string) => void;\r\n  position?:\r\n    | 'top-right'\r\n    | 'top-left'\r\n    | 'bottom-right'\r\n    | 'bottom-left'\r\n    | 'top-center'\r\n    | 'bottom-center';\r\n}\r\n\r\nconst ToastContainer: React.FC<ToastContainerProps> = ({\r\n  toasts,\r\n  onRemoveToast,\r\n  position = 'top-right',\r\n}) => {\r\n  const getPositionStyles = () => {\r\n    const baseStyles = 'fixed z-50 max-w-sm w-full';\r\n\r\n    switch (position) {\r\n      case 'top-right':\r\n        return `${baseStyles} top-4 right-4`;\r\n      case 'top-left':\r\n        return `${baseStyles} top-4 left-4`;\r\n      case 'bottom-right':\r\n        return `${baseStyles} bottom-4 right-4`;\r\n      case 'bottom-left':\r\n        return `${baseStyles} bottom-4 left-4`;\r\n      case 'top-center':\r\n        return `${baseStyles} top-4 left-1/2 transform -translate-x-1/2`;\r\n      case 'bottom-center':\r\n        return `${baseStyles} bottom-4 left-1/2 transform -translate-x-1/2`;\r\n      default:\r\n        return `${baseStyles} top-4 right-4`;\r\n    }\r\n  };\r\n\r\n  if (toasts.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={getPositionStyles()}>\r\n      {toasts.map((toast) => (\r\n        <Toast key={toast.id} toast={toast} onClose={onRemoveToast} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ToastContainer;\r\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport Z_INDEX from '../../constants/zIndex';\r\n\r\ninterface ModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  children: React.ReactNode;\r\n  type?: 'success' | 'error' | 'warning' | 'info';\r\n  actions?: React.ReactNode;\r\n}\r\n\r\nconst Modal: React.FC<ModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  children,\r\n  type = 'info',\r\n  actions,\r\n}) => {\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const modalRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Handle ESC key press to close modal\r\n  useEffect(() => {\r\n    const handleEscKey = (event: KeyboardEvent) => {\r\n      if (event.key === 'Escape' && isOpen) {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscKey);\r\n      document.body.style.overflow = 'hidden'; // Prevent background scrolling\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscKey);\r\n      document.body.style.overflow = ''; // Restore scrolling\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  // Animation handling\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      // Ensure DOM is updated before animation\r\n      requestAnimationFrame(() => {\r\n        requestAnimationFrame(() => {\r\n          setIsVisible(true);\r\n        });\r\n      });\r\n    } else {\r\n      setIsVisible(false);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // Focus trap inside modal\r\n  useEffect(() => {\r\n    if (isOpen && modalRef.current) {\r\n      modalRef.current.focus();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const getIconByType = () => {\r\n    switch (type) {\r\n      case 'success':\r\n        return (\r\n          <div className=\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30\">\r\n            <svg\r\n              className=\"h-6 w-6 text-green-600 dark:text-green-300\"\r\n              fill=\"none\"\r\n              viewBox=\"0 0 24 24\"\r\n              stroke=\"currentColor\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth=\"2\"\r\n                d=\"M5 13l4 4L19 7\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        );\r\n      case 'error':\r\n        return (\r\n          <div className=\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30\">\r\n            <svg\r\n              className=\"h-6 w-6 text-red-600 dark:text-red-300\"\r\n              fill=\"none\"\r\n              viewBox=\"0 0 24 24\"\r\n              stroke=\"currentColor\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth=\"2\"\r\n                d=\"M6 18L18 6M6 6l12 12\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        );\r\n      case 'warning':\r\n        return (\r\n          <div className=\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30\">\r\n            <svg\r\n              className=\"h-6 w-6 text-yellow-600 dark:text-yellow-300\"\r\n              fill=\"none\"\r\n              viewBox=\"0 0 24 24\"\r\n              stroke=\"currentColor\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth=\"2\"\r\n                d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        );\r\n      case 'info':\r\n      default:\r\n        return (\r\n          <div className=\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 dark:bg-blue-900/30\">\r\n            <svg\r\n              className=\"h-6 w-6 text-blue-600 dark:text-blue-300\"\r\n              fill=\"none\"\r\n              viewBox=\"0 0 24 24\"\r\n              stroke=\"currentColor\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth=\"2\"\r\n                d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 overflow-y-auto\"\r\n      style={{\r\n        zIndex: Z_INDEX.MODAL_OVERLAY,\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n      }}\r\n      aria-labelledby=\"modal-title\"\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n    >\r\n      {/* 背景遮罩 */}\r\n      <div\r\n        style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n          opacity: isVisible ? 1 : 0,\r\n          transition: 'opacity 0.2s ease-in-out',\r\n        }}\r\n        aria-hidden=\"true\"\r\n        onClick={onClose}\r\n      ></div>\r\n\r\n      {/* 模态框面板 */}\r\n      <div\r\n        ref={modalRef}\r\n        tabIndex={-1}\r\n        style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.5rem',\r\n          boxShadow:\r\n            '0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08)',\r\n          width: '100%',\r\n          maxWidth: '500px',\r\n          margin: '0 1rem',\r\n          opacity: isVisible ? 1 : 0,\r\n          transform: isVisible ? 'scale(1)' : 'scale(0.95)',\r\n          transition: 'opacity 0.2s ease-in-out, transform 0.2s ease-in-out',\r\n          zIndex: Z_INDEX.MODAL_CONTENT,\r\n          position: 'relative',\r\n          overflow: 'hidden',\r\n        }}\r\n        onClick={(e) => e.stopPropagation()} // 防止点击事件冒泡到背景层\r\n      >\r\n        <div style={{ padding: '1.5rem 1.5rem 1rem' }}>\r\n          <div style={{ display: 'flex', alignItems: 'flex-start' }}>\r\n            {getIconByType()}\r\n            <div style={{ marginLeft: '1rem', width: '100%' }}>\r\n              <h3\r\n                style={{\r\n                  fontSize: '1.125rem',\r\n                  fontWeight: 600,\r\n                  marginTop: 0,\r\n                  marginBottom: '0.5rem',\r\n                  color: '#111827',\r\n                }}\r\n                id=\"modal-title\"\r\n              >\r\n                {title}\r\n              </h3>\r\n              <div style={{ fontSize: '0.875rem', color: '#4B5563' }}>\r\n                {children}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div\r\n          style={{\r\n            backgroundColor: '#F9FAFB',\r\n            padding: '0.75rem 1.5rem',\r\n            display: 'flex',\r\n            justifyContent: 'flex-end',\r\n            borderTop: '1px solid #E5E7EB',\r\n          }}\r\n        >\r\n          {actions || (\r\n            <button\r\n              type=\"button\"\r\n              style={{\r\n                backgroundColor: '#3B82F6',\r\n                color: 'white',\r\n                fontWeight: 500,\r\n                padding: '0.5rem 1rem',\r\n                borderRadius: '0.375rem',\r\n                border: 'none',\r\n                cursor: 'pointer',\r\n              }}\r\n              onClick={onClose}\r\n            >\r\n              确定\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import { useState, useRef } from 'react';\r\nimport './App.css';\r\nimport JsonEditor from './components/Editor/JsonEditor';\r\nimport { SettingsPanel } from './components/Settings';\r\nimport { FileOperations, FileDropZone } from './components/FileManager';\r\nimport { SearchPanel } from './components/SearchReplace';\r\nimport { ErrorBoundary, ToastContainer, Modal } from './components/UI';\r\n// import { ErrorService } from './services/errorService';\r\nimport useToast from './hooks/useToast';\r\nimport useModal from './hooks/useModal';\r\nimport useKeyboardShortcuts from './hooks/useKeyboardShortcuts';\r\nimport type {\r\n  EditorSettings,\r\n  JsonError,\r\n  FileInfo,\r\n  EditorMethods,\r\n} from './types/editor.types';\r\n\r\n// 开发环境下加载测试脚本\r\nif (process.env.NODE_ENV === 'development') {\r\n  // Use a more direct approach to avoid TypeScript errors with dynamic imports\r\n  const importModalTest = async () => {\r\n    try {\r\n      // @ts-ignore - Ignore TypeScript error for this development-only import\r\n      await import('./test/modalTest');\r\n    } catch (error) {\r\n      console.error('Error loading modalTest:', error);\r\n    }\r\n  };\r\n  importModalTest();\r\n}\r\n\r\nfunction App() {\r\n  const [content, setContent] = useState(\r\n    '{\\n  \"example\": \"JSON content\",\\n  \"number\": 42,\\n  \"boolean\": true\\n}'\r\n  );\r\n  const [errors, setErrors] = useState<JsonError[]>([]);\r\n  const [theme, setTheme] = useState<'light' | 'dark'>('light');\r\n  const [cursorPosition, setCursorPosition] = useState({ line: 1, column: 1 });\r\n  const [selection, setSelection] = useState({\r\n    startLine: 1,\r\n    startColumn: 1,\r\n    endLine: 1,\r\n    endColumn: 1,\r\n  });\r\n  const [showSettings, setShowSettings] = useState(false);\r\n  // We still keep this state for the fallback search panel, but it's rarely used now\r\n  // const [showSearch, setShowSearch] = useState(false);\r\n  const [currentFile, setCurrentFile] = useState<FileInfo | null>(null);\r\n  const [isDirty, setIsDirty] = useState(false);\r\n  const [originalContent, setOriginalContent] = useState(\r\n    '{\\n  \"example\": \"JSON content\",\\n  \"number\": 42,\\n  \"boolean\": true\\n}'\r\n  );\r\n  // 移除自定义搜索状态，使用Monaco内置搜索功能\r\n\r\n  const editorRef = useRef<EditorMethods>(null);\r\n  const { toasts, removeToast } = useToast();\r\n  const {\r\n    isOpen,\r\n    options,\r\n    closeModal,\r\n    showError,\r\n    showSuccess: showModalSuccess,\r\n    showWarning,\r\n    showConfirm,\r\n  } = useModal();\r\n\r\n  // 移除useEffect，改为直接在导航函数中处理\r\n\r\n  const [settings, setSettings] = useState<EditorSettings>({\r\n    indentSize: 2,\r\n    indentType: 'spaces',\r\n    wordWrap: false,\r\n    lineNumbers: true,\r\n    minimap: true,\r\n  });\r\n\r\n  const handleContentChange = (value: string) => {\r\n    handleContentChangeWithDirty(value);\r\n  };\r\n\r\n  const handleValidationChange = (validationErrors: JsonError[]) => {\r\n    setErrors(validationErrors);\r\n  };\r\n\r\n  const handleCursorPositionChange = (position: {\r\n    line: number;\r\n    column: number;\r\n  }) => {\r\n    setCursorPosition(position);\r\n  };\r\n\r\n  const handleSelectionChange = (sel: {\r\n    startLine: number;\r\n    startColumn: number;\r\n    endLine: number;\r\n    endColumn: number;\r\n  }) => {\r\n    setSelection(sel);\r\n  };\r\n\r\n  const toggleTheme = () => {\r\n    setTheme((prev) => (prev === 'light' ? 'dark' : 'light'));\r\n  };\r\n\r\n  const handleSettingsChange = (newSettings: Partial<EditorSettings>) => {\r\n    setSettings((prev) => ({ ...prev, ...newSettings }));\r\n  };\r\n\r\n  const toggleSettings = () => {\r\n    setShowSettings((prev) => !prev);\r\n  };\r\n\r\n  // File operations handlers\r\n  const handleFileOpen = (file: FileInfo) => {\r\n    if (isDirty) {\r\n      showConfirm(\r\n        '未保存的更改',\r\n        '您有未保存的更改。是否要放弃这些更改？',\r\n        () => {\r\n          setCurrentFile(file);\r\n          setContent(file.content);\r\n          setOriginalContent(file.content);\r\n          setIsDirty(false);\r\n        }\r\n      );\r\n      return;\r\n    }\r\n\r\n    setCurrentFile(file);\r\n    setContent(file.content);\r\n    setOriginalContent(file.content);\r\n    setIsDirty(false);\r\n  };\r\n\r\n  const handleFileSave = () => {\r\n    const filename = currentFile?.name || 'untitled.json';\r\n    const blob = new Blob([content], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = filename;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n\r\n    setOriginalContent(content);\r\n    setIsDirty(false);\r\n    showModalSuccess('文件已保存', `成功保存文件 ${filename}`);\r\n  };\r\n\r\n  const handleFileNew = () => {\r\n    if (isDirty) {\r\n      showConfirm(\r\n        '未保存的更改',\r\n        '您有未保存的更改。是否要放弃这些更改？',\r\n        () => {\r\n          const newContent = '{\\n  \\n}';\r\n          setCurrentFile(null);\r\n          setContent(newContent);\r\n          setOriginalContent(newContent);\r\n          setIsDirty(false);\r\n        }\r\n      );\r\n      return;\r\n    }\r\n\r\n    const newContent = '{\\n  \\n}';\r\n    setCurrentFile(null);\r\n    setContent(newContent);\r\n    setOriginalContent(newContent);\r\n    setIsDirty(false);\r\n  };\r\n\r\n  const handleFileError = (error: string) => {\r\n    showError('文件错误', error);\r\n  };\r\n\r\n  // Track content changes for dirty state\r\n  const handleContentChangeWithDirty = (value: string) => {\r\n    setContent(value);\r\n    setIsDirty(value !== originalContent);\r\n  };\r\n\r\n  // Format and minify handlers\r\n  const handleFormat = () => {\r\n    try {\r\n      const parsed = JSON.parse(content);\r\n      const formatted = JSON.stringify(parsed, null, settings.indentSize);\r\n      setContent(formatted);\r\n      setIsDirty(formatted !== originalContent);\r\n      showModalSuccess('JSON 格式化成功', '您的 JSON 已成功格式化。');\r\n    } catch (error) {\r\n      showError('格式化错误', '无法格式化无效的 JSON。请先修复语法错误。');\r\n    }\r\n  };\r\n\r\n  const handleMinify = () => {\r\n    try {\r\n      const parsed = JSON.parse(content);\r\n      const minified = JSON.stringify(parsed);\r\n      setContent(minified);\r\n      setIsDirty(minified !== originalContent);\r\n      showModalSuccess('JSON 压缩成功', '您的 JSON 已成功压缩。');\r\n    } catch (error) {\r\n      showError('压缩错误', '无法压缩无效的 JSON。请先修复语法错误。');\r\n    }\r\n  };\r\n\r\n  const handleValidate = () => {\r\n    try {\r\n      JSON.parse(content);\r\n      showModalSuccess('JSON 验证通过', '您的 JSON 语法有效！');\r\n    } catch (error) {\r\n      showError('JSON 验证失败', `JSON 语法错误: ${(error as Error).message}`);\r\n    }\r\n  };\r\n\r\n  // 不再需要自定义装饰器处理，使用Monaco内置的搜索高亮\r\n\r\n  // Search and replace handlers\r\n  const toggleSearch = () => {\r\n    // 使用Monaco编辑器内置的搜索功能\r\n    if (editorRef.current) {\r\n      try {\r\n        // 确保编辑器获得焦点\r\n        editorRef.current.focus && editorRef.current.focus();\r\n\r\n        // 直接调用编辑器的find方法\r\n        // 确保编辑器已经完全初始化\r\n        setTimeout(() => {\r\n          editorRef.current?.find();\r\n        }, 0);\r\n\r\n        return;\r\n      } catch (error) {\r\n        console.error('Error triggering search:', error);\r\n      }\r\n    }\r\n\r\n    // 如果Monaco编辑器不可用，回退到原来的搜索面板\r\n    // setShowSearch((prev) => !prev);\r\n  };\r\n\r\n  // 添加替换功能触发器\r\n  const toggleReplace = () => {\r\n    if (editorRef.current) {\r\n      try {\r\n        // 确保编辑器获得焦点\r\n        editorRef.current.focus && editorRef.current.focus();\r\n\r\n        // 直接调用JsonEditor组件中的replace方法\r\n        // 确保编辑器已经完全初始化\r\n        setTimeout(() => {\r\n          editorRef.current?.replace();\r\n        }, 0);\r\n      } catch (error) {\r\n        console.error('Error triggering replace:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  // 使用Monaco编辑器的搜索功能，但通过自定义搜索面板控制\r\n  const handleSearch = (query: string, options: any) => {\r\n    if (editorRef.current && query.trim()) {\r\n      const editor = editorRef.current.getEditor();\r\n      if (editor) {\r\n        // 获取Monaco的搜索控制器\r\n        const findController = editor.getContribution(\r\n          'editor.contrib.findController'\r\n        ) as any;\r\n        if (findController && typeof findController.getState === 'function') {\r\n          try {\r\n            // 设置搜索选项\r\n            const findState = findController.getState();\r\n            findState.change(\r\n              {\r\n                searchString: query,\r\n                isRegex: options.useRegex,\r\n                matchCase: options.caseSensitive,\r\n                wholeWord: options.wholeWord,\r\n                searchScope: null,\r\n                matchesPosition: null,\r\n                matchesCount: null,\r\n              },\r\n              false\r\n            );\r\n\r\n            // 执行搜索\r\n            findController.start({\r\n              forceRevealReplace: false,\r\n              seedSearchStringFromSelection: false,\r\n              seedSearchStringFromGlobalClipboard: false,\r\n              shouldFocus: 0,\r\n              shouldAnimate: true,\r\n              updateSearchScope: false,\r\n              loop: true,\r\n            });\r\n          } catch (e) {\r\n            console.error('Error in custom search:', e);\r\n            // 回退到基本搜索方法\r\n            editor.trigger('keyboard', 'actions.find', {});\r\n          }\r\n        } else {\r\n          // 回退到基本搜索方法\r\n          editor.trigger('keyboard', 'actions.find', {});\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // 使用Monaco编辑器的替换功能，但通过自定义搜索面板控制\r\n  const handleReplace = (\r\n    searchQuery: string,\r\n    replaceText: string,\r\n    options: any\r\n  ) => {\r\n    if (editorRef.current && searchQuery.trim()) {\r\n      const editor = editorRef.current.getEditor();\r\n      if (editor) {\r\n        // 获取Monaco的搜索控制器\r\n        const findController = editor.getContribution(\r\n          'editor.contrib.findController'\r\n        ) as any;\r\n        if (findController && typeof findController.getState === 'function') {\r\n          try {\r\n            // 设置搜索和替换选项\r\n            const findState = findController.getState();\r\n            findState.change(\r\n              {\r\n                searchString: searchQuery,\r\n                replaceString: replaceText,\r\n                isRegex: options.useRegex,\r\n                matchCase: options.caseSensitive,\r\n                wholeWord: options.wholeWord,\r\n                searchScope: null,\r\n                matchesPosition: null,\r\n                matchesCount: null,\r\n              },\r\n              false\r\n            );\r\n\r\n            // 执行替换\r\n            findController.replace && findController.replace();\r\n          } catch (e) {\r\n            console.error('Error in custom replace:', e);\r\n            // 回退到基本替换方法\r\n            editor.trigger(\r\n              'keyboard',\r\n              'editor.action.startFindReplaceAction',\r\n              {}\r\n            );\r\n          }\r\n        } else {\r\n          // 回退到基本替换方法\r\n          editor.trigger(\r\n            'keyboard',\r\n            'editor.action.startFindReplaceAction',\r\n            {}\r\n          );\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleReplaceAll = (\r\n    searchQuery: string,\r\n    replaceText: string,\r\n    options: any\r\n  ) => {\r\n    if (editorRef.current && searchQuery.trim()) {\r\n      const editor = editorRef.current.getEditor();\r\n      if (editor) {\r\n        // 获取Monaco的搜索控制器\r\n        const findController = editor.getContribution(\r\n          'editor.contrib.findController'\r\n        ) as any;\r\n        if (findController && typeof findController.getState === 'function') {\r\n          try {\r\n            // 设置搜索和替换选项\r\n            const findState = findController.getState();\r\n            findState.change(\r\n              {\r\n                searchString: searchQuery,\r\n                replaceString: replaceText,\r\n                isRegex: options.useRegex,\r\n                matchCase: options.caseSensitive,\r\n                wholeWord: options.wholeWord,\r\n                searchScope: null,\r\n                matchesPosition: null,\r\n                matchesCount: null,\r\n              },\r\n              false\r\n            );\r\n\r\n            // 执行全部替换\r\n            findController.replaceAll && findController.replaceAll();\r\n          } catch (e) {\r\n            console.error('Error in custom replace all:', e);\r\n            // 回退到基本替换方法\r\n            editor.trigger(\r\n              'keyboard',\r\n              'editor.action.startFindReplaceAction',\r\n              {}\r\n            );\r\n          }\r\n        } else {\r\n          // 回退到基本替换方法\r\n          editor.trigger(\r\n            'keyboard',\r\n            'editor.action.startFindReplaceAction',\r\n            {}\r\n          );\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleFindNext = () => {\r\n    // 使用Monaco编辑器内置的查找下一个功能\r\n    if (editorRef.current) {\r\n      const editor = editorRef.current.getEditor();\r\n      if (editor) {\r\n        editor.trigger('keyboard', 'editor.action.nextMatchFindAction', {});\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleFindPrevious = () => {\r\n    // 使用Monaco编辑器内置的查找上一个功能\r\n    if (editorRef.current) {\r\n      const editor = editorRef.current.getEditor();\r\n      if (editor) {\r\n        editor.trigger('keyboard', 'editor.action.previousMatchFindAction', {});\r\n      }\r\n    }\r\n  };\r\n\r\n  // Define keyboard shortcuts\r\n  const shortcuts = [\r\n    {\r\n      key: 'n',\r\n      ctrlKey: true,\r\n      action: handleFileNew,\r\n      description: 'Create new file',\r\n    },\r\n    {\r\n      key: 'o',\r\n      ctrlKey: true,\r\n      action: () => {\r\n        // Trigger file input click\r\n        const fileInput = document.querySelector(\r\n          'input[type=\"file\"]'\r\n        ) as HTMLInputElement;\r\n        fileInput?.click();\r\n      },\r\n      description: 'Open file',\r\n    },\r\n    {\r\n      key: 's',\r\n      ctrlKey: true,\r\n      action: handleFileSave,\r\n      description: 'Save file',\r\n    },\r\n    {\r\n      key: 'f',\r\n      ctrlKey: true,\r\n      action: toggleSearch,\r\n      description: 'Find/Search',\r\n    },\r\n    {\r\n      key: 'h',\r\n      ctrlKey: true,\r\n      action: toggleReplace,\r\n      description: 'Find and Replace',\r\n    },\r\n    {\r\n      key: ',',\r\n      ctrlKey: true,\r\n      action: toggleSettings,\r\n      description: 'Open settings',\r\n    },\r\n    {\r\n      key: 'Enter',\r\n      ctrlKey: true,\r\n      shiftKey: true,\r\n      action: handleFormat,\r\n      description: 'Format JSON',\r\n    },\r\n    {\r\n      key: 'Enter',\r\n      ctrlKey: true,\r\n      altKey: true,\r\n      action: handleMinify,\r\n      description: 'Minify JSON',\r\n    },\r\n    {\r\n      key: 'Enter',\r\n      ctrlKey: true,\r\n      action: handleValidate,\r\n      description: 'Validate JSON',\r\n    },\r\n    {\r\n      key: 'd',\r\n      ctrlKey: true,\r\n      action: toggleTheme,\r\n      description: 'Toggle dark/light theme',\r\n    },\r\n  ];\r\n\r\n  // Initialize keyboard shortcuts\r\n  useKeyboardShortcuts(shortcuts);\r\n\r\n  return (\r\n    <ErrorBoundary>\r\n      <div className=\"h-screen flex flex-col bg-gradient-to-br from-slate-50 to-gray-100 dark:from-gray-900 dark:to-slate-900 text-gray-900 dark:text-gray-100\">\r\n        {/* Header */}\r\n        <header className=\"h-14 bg-gray-800 dark:bg-gray-900 backdrop-blur-sm border-b border-gray-700/50 dark:border-gray-600/50 flex items-center px-6 flex-shrink-0 shadow-lg\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-md\">\r\n              <span className=\"text-white text-sm font-bold\">J</span>\r\n            </div>\r\n            <h1 className=\"text-xl font-bold text-white\">\r\n              PDX JSON 编辑器\r\n            </h1>\r\n          </div>\r\n          <div className=\"ml-auto flex items-center space-x-3\">\r\n            <button \r\n              className=\"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-200 hover:text-white border border-gray-600 hover:border-gray-500 hover:shadow-md\" \r\n              onClick={toggleTheme}\r\n            >\r\n              <span className=\"flex items-center space-x-2\">\r\n                <span>{theme === 'light' ? '🌙' : '☀️'}</span>\r\n                <span>{theme === 'light' ? '深色' : '浅色'}</span>\r\n              </span>\r\n            </button>\r\n          </div>\r\n        </header>\r\n\r\n        {/* Toolbar */}\r\n        <div className=\"h-14 bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm border-b border-gray-200/30 dark:border-gray-700/30 flex items-center px-6 flex-shrink-0 relative shadow-sm\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <FileOperations\r\n              onOpen={handleFileOpen}\r\n              onSave={handleFileSave}\r\n              onNew={handleFileNew}\r\n              isDirty={isDirty}\r\n              currentFile={currentFile}\r\n              theme={theme}\r\n            />\r\n            <div className=\"w-px h-8 bg-gradient-to-b from-transparent via-gray-300 to-transparent dark:via-gray-600\"></div>\r\n            <button \r\n              className=\"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 bg-gradient-to-r from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 dark:hover:from-blue-800/30 dark:hover:to-indigo-800/30 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-700/50 hover:shadow-md hover:scale-105\" \r\n              onClick={handleFormat}\r\n            >\r\n              <span className=\"flex items-center space-x-2\">\r\n                <span>✨</span>\r\n                <span>格式化</span>\r\n              </span>\r\n            </button>\r\n            <button \r\n              className=\"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 bg-gradient-to-r from-green-50 to-emerald-50 hover:from-green-100 hover:to-emerald-100 dark:from-green-900/20 dark:to-emerald-900/20 dark:hover:from-green-800/30 dark:hover:to-emerald-800/30 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-700/50 hover:shadow-md hover:scale-105\" \r\n              onClick={handleMinify}\r\n            >\r\n              <span className=\"flex items-center space-x-2\">\r\n                <span>🗜️</span>\r\n                <span>压缩</span>\r\n              </span>\r\n            </button>\r\n            <button \r\n              className=\"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 bg-gradient-to-r from-purple-50 to-pink-50 hover:from-purple-100 hover:to-pink-100 dark:from-purple-900/20 dark:to-pink-900/20 dark:hover:from-purple-800/30 dark:hover:to-pink-800/30 text-purple-700 dark:text-purple-300 border border-purple-200 dark:border-purple-700/50 hover:shadow-md hover:scale-105\" \r\n              onClick={handleValidate}\r\n            >\r\n              <span className=\"flex items-center space-x-2\">\r\n                <span>✅</span>\r\n                <span>验证</span>\r\n              </span>\r\n            </button>\r\n            <div className=\"w-px h-8 bg-gradient-to-b from-transparent via-gray-300 to-transparent dark:via-gray-600\"></div>\r\n            <button \r\n              className=\"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 bg-gradient-to-r from-gray-50 to-slate-50 hover:from-gray-100 hover:to-slate-100 dark:from-gray-800/50 dark:to-slate-800/50 dark:hover:from-gray-700/60 dark:hover:to-slate-700/60 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600/50 hover:shadow-md hover:scale-105\" \r\n              onClick={toggleSettings}\r\n            >\r\n              <span className=\"flex items-center space-x-2\">\r\n                <span>⚙️</span>\r\n                <span>设置</span>\r\n              </span>\r\n            </button>\r\n          </div>\r\n\r\n          {/* 固定在工具栏最右侧的搜索面板 */}\r\n          <div className=\"ml-auto\">\r\n            <SearchPanel\r\n              isVisible={true}\r\n              onClose={() => {}}\r\n              onSearch={handleSearch}\r\n              onReplace={handleReplace}\r\n              onReplaceAll={handleReplaceAll}\r\n              onFindNext={handleFindNext}\r\n              onFindPrevious={handleFindPrevious}\r\n              searchResults={[]}\r\n              currentResultIndex={0}\r\n              theme={theme}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main Content */}\r\n        <main className=\"flex-1 flex overflow-hidden relative bg-gradient-to-br from-white/50 to-gray-50/50 dark:from-gray-900/50 dark:to-slate-900/50\">\r\n          {/* Editor Area with File Drop Zone */}\r\n          <div className=\"flex-1 p-6\">\r\n            <FileDropZone\r\n              onFileDrop={handleFileOpen}\r\n              onError={handleFileError}\r\n              theme={theme}\r\n            >\r\n              <div className=\"editor-container h-full\">\r\n                <JsonEditor\r\n                  ref={editorRef}\r\n                  value={content}\r\n                  onChange={handleContentChange}\r\n                  onValidationChange={handleValidationChange}\r\n                  onCursorPositionChange={handleCursorPositionChange}\r\n                  onSelectionChange={handleSelectionChange}\r\n                  theme={theme}\r\n                  settings={settings}\r\n                />\r\n              </div>\r\n            </FileDropZone>\r\n          </div>\r\n        </main>\r\n\r\n        {/* Status Bar */}\r\n        <footer className=\"h-8 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-t border-gray-200/50 dark:border-gray-700/50 flex items-center px-6 text-sm text-gray-600 dark:text-gray-400 flex-shrink-0 shadow-sm\">\r\n          <div className=\"flex items-center space-x-1\">\r\n            {errors.length === 0 ? (\r\n              <div className=\"flex items-center space-x-2 px-3 py-1 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded-full border border-green-200 dark:border-green-700/50\">\r\n                <span className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></span>\r\n                <span className=\"font-medium\">JSON 有效</span>\r\n              </div>\r\n            ) : (\r\n              <div className=\"flex items-center space-x-2 px-3 py-1 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-full border border-red-200 dark:border-red-700/50\">\r\n                <span className=\"w-2 h-2 bg-red-500 rounded-full animate-pulse\"></span>\r\n                <span className=\"font-medium\">{errors.length} 个错误</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"flex items-center space-x-4 ml-6\">\r\n            <div className=\"flex items-center space-x-1 px-2 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-md\">\r\n              <span className=\"text-xs\">📍</span>\r\n              <span>行 {cursorPosition.line}, 列 {cursorPosition.column}</span>\r\n            </div>\r\n            {selection.startLine !== selection.endLine ||\r\n            selection.startColumn !== selection.endColumn ? (\r\n              <div className=\"flex items-center space-x-1 px-2 py-1 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-md\">\r\n                <span className=\"text-xs\">🎯</span>\r\n                <span>\r\n                  已选择 {Math.abs(selection.endLine - selection.startLine) + 1}{' '}\r\n                  行,{' '}\r\n                  {selection.startLine === selection.endLine\r\n                    ? Math.abs(selection.endColumn - selection.startColumn)\r\n                    : '多个'}{' '}\r\n                  字符\r\n                </span>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          <div className=\"ml-auto flex items-center space-x-1 px-2 py-1 bg-gray-50 dark:bg-gray-800/50 text-gray-600 dark:text-gray-400 rounded-md\">\r\n            <span className=\"text-xs\">📝</span>\r\n            <span>字符数: {content.length.toLocaleString()}</span>\r\n          </div>\r\n        </footer>\r\n\r\n        {/* Settings Panel */}\r\n        <SettingsPanel\r\n          isOpen={showSettings}\r\n          onClose={() => setShowSettings(false)}\r\n          settings={settings}\r\n          onSettingsChange={handleSettingsChange}\r\n          theme={theme}\r\n          onThemeChange={setTheme}\r\n        />\r\n\r\n        {/* Toast Notifications */}\r\n        <ToastContainer\r\n          toasts={toasts}\r\n          onRemoveToast={removeToast}\r\n          position=\"top-right\"\r\n        />\r\n\r\n        {/* Modal Dialog */}\r\n        <Modal\r\n          isOpen={isOpen}\r\n          onClose={closeModal}\r\n          title={options.title}\r\n          type={options.type}\r\n          actions={\r\n            options.showCancel ? (\r\n              <>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm\"\r\n                  onClick={() => {\r\n                    options.onConfirm?.();\r\n                    closeModal();\r\n                  }}\r\n                >\r\n                  {options.confirmText || '确定'}\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600\"\r\n                  onClick={() => {\r\n                    options.onCancel?.();\r\n                    closeModal();\r\n                  }}\r\n                >\r\n                  {options.cancelText || '取消'}\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <button\r\n                type=\"button\"\r\n                className=\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm\"\r\n                onClick={() => {\r\n                  options.onConfirm?.();\r\n                  closeModal();\r\n                }}\r\n              >\r\n                {options.confirmText || '确定'}\r\n              </button>\r\n            )\r\n          }\r\n        >\r\n          <p className=\"text-gray-700 dark:text-gray-300\">{options.message}</p>\r\n        </Modal>\r\n      </div>\r\n    </ErrorBoundary>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { useState, useCallback } from 'react';\r\nimport type { ToastMessage, ToastType } from '../components/UI';\r\n\r\nconst useToast = () => {\r\n  const [toasts, setToasts] = useState<ToastMessage[]>([]);\r\n\r\n  const addToast = useCallback(\r\n    (\r\n      type: ToastType,\r\n      title: string,\r\n      message?: string,\r\n      options?: {\r\n        duration?: number;\r\n        action?: {\r\n          label: string;\r\n          onClick: () => void;\r\n        };\r\n      }\r\n    ) => {\r\n      const id =\r\n        Date.now().toString() + Math.random().toString(36).substr(2, 9);\r\n      const toast: ToastMessage = {\r\n        id,\r\n        type,\r\n        title,\r\n        message,\r\n        duration: options?.duration ?? (type === 'error' ? 0 : 5000), // Errors stay until dismissed\r\n        action: options?.action,\r\n      };\r\n\r\n      setToasts((prev) => [...prev, toast]);\r\n      return id;\r\n    },\r\n    []\r\n  );\r\n\r\n  const removeToast = useCallback((id: string) => {\r\n    setToasts((prev) => prev.filter((toast) => toast.id !== id));\r\n  }, []);\r\n\r\n  const clearAllToasts = useCallback(() => {\r\n    setToasts([]);\r\n  }, []);\r\n\r\n  // Convenience methods\r\n  const showSuccess = useCallback(\r\n    (title: string, message?: string, options?: { duration?: number }) => {\r\n      return addToast('success', title, message, options);\r\n    },\r\n    [addToast]\r\n  );\r\n\r\n  const showError = useCallback(\r\n    (\r\n      title: string,\r\n      message?: string,\r\n      options?: { action?: { label: string; onClick: () => void } }\r\n    ) => {\r\n      return addToast('error', title, message, { duration: 0, ...options });\r\n    },\r\n    [addToast]\r\n  );\r\n\r\n  const showWarning = useCallback(\r\n    (title: string, message?: string, options?: { duration?: number }) => {\r\n      return addToast('warning', title, message, options);\r\n    },\r\n    [addToast]\r\n  );\r\n\r\n  const showInfo = useCallback(\r\n    (title: string, message?: string, options?: { duration?: number }) => {\r\n      return addToast('info', title, message, options);\r\n    },\r\n    [addToast]\r\n  );\r\n\r\n  return {\r\n    toasts,\r\n    addToast,\r\n    removeToast,\r\n    clearAllToasts,\r\n    showSuccess,\r\n    showError,\r\n    showWarning,\r\n    showInfo,\r\n  };\r\n};\r\n\r\nexport default useToast;\r\n","import { useState, useCallback } from 'react';\r\n\r\nexport type ModalType = 'success' | 'error' | 'warning' | 'info';\r\n\r\nexport interface ModalOptions {\r\n  title: string;\r\n  message: string;\r\n  type?: ModalType;\r\n  onConfirm?: () => void;\r\n  onCancel?: () => void;\r\n  confirmText?: string;\r\n  cancelText?: string;\r\n  showCancel?: boolean;\r\n}\r\n\r\nconst useModal = () => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [options, setOptions] = useState<ModalOptions>({\r\n    title: '',\r\n    message: '',\r\n    type: 'info',\r\n    confirmText: '确定',\r\n    cancelText: '取消',\r\n    showCancel: false,\r\n  });\r\n\r\n  const openModal = useCallback((newOptions: ModalOptions) => {\r\n    setOptions((prevOptions) => ({\r\n      ...prevOptions,\r\n      ...newOptions,\r\n    }));\r\n    setIsOpen(true);\r\n  }, []);\r\n\r\n  const closeModal = useCallback(() => {\r\n    setIsOpen(false);\r\n  }, []);\r\n\r\n  const showSuccess = useCallback(\r\n    (title: string, message: string, onConfirm?: () => void) => {\r\n      openModal({\r\n        title,\r\n        message,\r\n        type: 'success',\r\n        onConfirm,\r\n        showCancel: false,\r\n      });\r\n    },\r\n    [openModal]\r\n  );\r\n\r\n  const showError = useCallback(\r\n    (title: string, message: string, onConfirm?: () => void) => {\r\n      openModal({\r\n        title,\r\n        message,\r\n        type: 'error',\r\n        onConfirm,\r\n        showCancel: false,\r\n      });\r\n    },\r\n    [openModal]\r\n  );\r\n\r\n  const showWarning = useCallback(\r\n    (\r\n      title: string,\r\n      message: string,\r\n      onConfirm?: () => void,\r\n      onCancel?: () => void\r\n    ) => {\r\n      openModal({\r\n        title,\r\n        message,\r\n        type: 'warning',\r\n        onConfirm,\r\n        onCancel,\r\n        showCancel: true,\r\n      });\r\n    },\r\n    [openModal]\r\n  );\r\n\r\n  const showConfirm = useCallback(\r\n    (\r\n      title: string,\r\n      message: string,\r\n      onConfirm?: () => void,\r\n      onCancel?: () => void\r\n    ) => {\r\n      openModal({\r\n        title,\r\n        message,\r\n        type: 'info',\r\n        onConfirm,\r\n        onCancel,\r\n        showCancel: true,\r\n      });\r\n    },\r\n    [openModal]\r\n  );\r\n\r\n  return {\r\n    isOpen,\r\n    options,\r\n    openModal,\r\n    closeModal,\r\n    showSuccess,\r\n    showError,\r\n    showWarning,\r\n    showConfirm,\r\n  };\r\n};\r\n\r\nexport default useModal;\r\n","import { useEffect, useCallback, useRef } from 'react';\r\n\r\ninterface KeyboardShortcut {\r\n  key: string;\r\n  ctrlKey?: boolean;\r\n  shiftKey?: boolean;\r\n  altKey?: boolean;\r\n  metaKey?: boolean;\r\n  action: () => void;\r\n  description: string;\r\n  preventDefault?: boolean;\r\n}\r\n\r\ninterface UseKeyboardShortcutsOptions {\r\n  enabled?: boolean;\r\n  target?: HTMLElement | Document;\r\n}\r\n\r\nconst useKeyboardShortcuts = (\r\n  shortcuts: KeyboardShortcut[],\r\n  options: UseKeyboardShortcutsOptions = {}\r\n) => {\r\n  const { enabled = true, target = document } = options;\r\n  const shortcutsRef = useRef(shortcuts);\r\n\r\n  // Update shortcuts ref when shortcuts change\r\n  useEffect(() => {\r\n    shortcutsRef.current = shortcuts;\r\n  }, [shortcuts]);\r\n\r\n  const handleKeyDown = useCallback(\r\n    (event: Event) => {\r\n      const keyboardEvent = event as KeyboardEvent;\r\n      if (!enabled) return;\r\n\r\n      const matchingShortcut = shortcutsRef.current.find((shortcut) => {\r\n        const keyMatch =\r\n          shortcut.key.toLowerCase() === keyboardEvent.key.toLowerCase() ||\r\n          shortcut.key.toLowerCase() === keyboardEvent.code.toLowerCase();\r\n\r\n        const ctrlMatch = (shortcut.ctrlKey ?? false) === keyboardEvent.ctrlKey;\r\n        const shiftMatch =\r\n          (shortcut.shiftKey ?? false) === keyboardEvent.shiftKey;\r\n        const altMatch = (shortcut.altKey ?? false) === keyboardEvent.altKey;\r\n        const metaMatch = (shortcut.metaKey ?? false) === keyboardEvent.metaKey;\r\n\r\n        return keyMatch && ctrlMatch && shiftMatch && altMatch && metaMatch;\r\n      });\r\n\r\n      if (matchingShortcut) {\r\n        if (matchingShortcut.preventDefault !== false) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n        }\r\n        matchingShortcut.action();\r\n      }\r\n    },\r\n    [enabled]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!enabled) return;\r\n\r\n    const targetElement = target as EventTarget;\r\n    targetElement.addEventListener('keydown', handleKeyDown);\r\n\r\n    return () => {\r\n      targetElement.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [handleKeyDown, enabled, target]);\r\n\r\n  const getShortcutsList = useCallback(() => {\r\n    return shortcuts.map((shortcut) => ({\r\n      keys: [\r\n        shortcut.ctrlKey && 'Ctrl',\r\n        shortcut.metaKey && 'Cmd',\r\n        shortcut.shiftKey && 'Shift',\r\n        shortcut.altKey && 'Alt',\r\n        shortcut.key,\r\n      ]\r\n        .filter(Boolean)\r\n        .join(' + '),\r\n      description: shortcut.description,\r\n    }));\r\n  }, [shortcuts]);\r\n\r\n  return {\r\n    getShortcutsList,\r\n  };\r\n};\r\n\r\nexport default useKeyboardShortcuts;\r\n"],"names":["JsonEditor","forwardRef","value","onChange","onValidationChange","onCursorPositionChange","onSelectionChange","theme","settings","ref","editorRef","useRef","monacoRef","formatDocument","useCallback","current","trigger","undo","redo","selectAll","find","focus","editor","monaco","e","actions","findAction1","getAction","findAction2","push","findAction","a","id","toLowerCase","includes","run","KeyMod","CtrlCmd","KeyCode","KeyF","window","error","replace","replaceAction1","replaceAction2","replaceAction","KeyH","gotoLine","line","column","revealLineInCenter","setPosition","lineNumber","getSelection","getSelectedText","selection","model","getModel","getValueInRange","insertText","text","range","Range","executeEdits","forceMoveMarkers","canUndo","canRedo","useImperativeHandle","getEditor","getMonaco","useEffect","updateOptions","tabSize","indentSize","insertSpaces","indentType","wordWrap","lineNumbers","minimap","enabled","editorOptions","language","automaticLayout","fontSize","fontFamily","scrollBeyondLastLine","renderWhitespace","bracketPairColorization","matchBrackets","showFoldingControls","foldingStrategy","foldingHighlight","autoClosingBrackets","autoClosingQuotes","autoClosingDelete","autoClosingOvertype","autoSurround","autoIndent","formatOnPaste","formatOnType","suggest","showKeywords","showSnippets","showFunctions","showConstructors","showFields","showVariables","showClasses","showStructs","showInterfaces","showModules","showProperties","showEvents","showOperators","showUnits","showValues","showConstants","showEnums","showEnumMembers","showColors","showFiles","showReferences","showFolders","showTypeParameters","showIssues","showUsers","insertMode","filterGraceful","snippetsPreventQuickSuggestions","quickSuggestions","other","comments","strings","multiCursorModifier","multiCursorMergeOverlapping","multiCursorPaste","addExtraSpaceOnTop","autoFindInSelection","seedSearchStringFromSelection","loop","renderValidationDecorations","renderLineHighlight","renderLineHighlightOnlyWhenFocus","undoStopOnWordBoundary","largeFileOptimizations","accessibilitySupport","ariaLabel","cursorBlinking","cursorSmoothCaretAnimation","cursorStyle","cursorWidth","smoothScrolling","mouseWheelScrollSensitivity","fastScrollSensitivity","jsx","className","children","Editor","onMount","languages","json","jsonDefaults","setDiagnosticsOptions","validate","allowComments","schemas","enableSchemaRequest","schemaValidation","schemaRequest","setLanguageConfiguration","brackets","autoClosingPairs","open","close","notIn","surroundingPairs","findController","getContribution","getState","onDidBlurEditorWidget","setTimeout","state","isRevealed","addCommand","markersDisposable","onDidChangeMarkers","uris","editorUri","uri","toString","errors","getModelMarkers","resource","map","marker","startLineNumber","startColumn","message","severity","MarkerSeverity","Error","cursorDisposable","onDidChangeCursorPosition","position","selectionDisposable","onDidChangeCursorSelection","startLine","endLine","endLineNumber","endColumn","contentDisposable","onDidChangeContent","KeyD","Shift","KeyK","Slash","dispose","options","loading","ThemeSelector","onThemeChange","disabled","buttonClass","switchClass","jsxs","title","type","onClick","role","Z_INDEX","SettingsPanel","isOpen","onClose","onSettingsChange","localSettings","setLocalSettings","useState","modalRef","handleSettingChange","key","newSettings","handleEscKey","event","document","addEventListener","body","style","overflow","removeEventListener","top","left","right","bottom","backgroundColor","display","alignItems","justifyContent","zIndex","tabIndex","color","borderRadius","padding","boxShadow","maxHeight","overflowY","width","maxWidth","Number","target","name","checked","defaultSettings","FileOperations","onOpen","onSave","onNew","isDirty","currentFile","fileInputRef","readFileContent","file","Promise","resolve","reject","reader","FileReader","onload","result","onerror","readAsText","buttonBaseClass","primaryButtonClass","accept","async","files","content","fileInfo","size","lastModified","Date","click","formatFileSize","bytes","toFixed","FileDropZone","onFileDrop","onError","isDragOver","setIsDragOver","dragCounter","setDragCounter","handleFile","some","ext","endsWith","validateFile","handleDragEnter","preventDefault","stopPropagation","prev","dataTransfer","items","length","handleDragLeave","newCounter","handleDragOver","dropEffect","handleDrop","Array","from","overlayClass","dropMessageClass","onDragEnter","onDragLeave","onDragOver","onDrop","SearchPanel","isVisible","onSearch","onReplace","onReplaceAll","onFindNext","onFindPrevious","searchQuery","setSearchQuery","replaceText","setReplaceText","showReplace","setShowReplace","setOptions","caseSensitive","useRegex","wholeWord","searchInputRef","trim","toggleOption","option","inputClass","optionButtonClass","active","borderLeft","height","backdropFilter","onKeyDown","shiftKey","placeholder","ErrorBoundary","Component","constructor","props","super","this","hasError","getDerivedStateFromError","componentDidCatch","errorInfo","setState","handleRetry","handleReload","location","reload","render","fallback","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","Toast","toast","setIsVisible","isLeaving","setIsLeaving","timer","clearTimeout","duration","handleClose","baseStyles","getToastStyles","fillRule","clipRule","getIcon","action","label","ToastContainer","toasts","onRemoveToast","getPositionStyles","Modal","requestAnimationFrame","opacity","transition","margin","transform","getIconByType","marginLeft","fontWeight","marginTop","marginBottom","borderTop","border","cursor","App","setContent","setErrors","setTheme","cursorPosition","setCursorPosition","setSelection","showSettings","setShowSettings","setCurrentFile","setIsDirty","originalContent","setOriginalContent","removeToast","setToasts","addToast","now","Math","random","substr","filter","clearAllToasts","showSuccess","showError","showWarning","showInfo","useToast","closeModal","showModalSuccess","showConfirm","setIsOpen","confirmText","cancelText","showCancel","openModal","newOptions","prevOptions","onConfirm","onCancel","useModal","setSettings","toggleTheme","toggleSettings","handleFileOpen","handleFileSave","filename","blob","Blob","url","URL","createObjectURL","createElement","href","download","appendChild","removeChild","revokeObjectURL","handleFileNew","newContent","handleContentChangeWithDirty","handleFormat","parsed","JSON","parse","formatted","stringify","handleMinify","minified","handleValidate","shortcuts","shortcutsRef","handleKeyDown","keyboardEvent","matchingShortcut","shortcut","keyMatch","code","ctrlMatch","ctrlKey","shiftMatch","altMatch","altKey","metaMatch","metaKey","targetElement","keys","Boolean","join","description","useKeyboardShortcuts","fileInput","querySelector","query","change","searchString","isRegex","matchCase","searchScope","matchesPosition","matchesCount","start","forceRevealReplace","seedSearchStringFromGlobalClipboard","shouldFocus","shouldAnimate","updateSearchScope","replaceString","replaceAll","searchResults","currentResultIndex","validationErrors","sel","abs","toLocaleString","Fragment"],"mappings":"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"}