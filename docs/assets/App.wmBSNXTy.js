import{j as e}from"./index.BdDALyts.js";import{r as t,F as r}from"./ui.BbRMDCnW.js";import"./monaco.fvmTPtOA.js";import"./react.BI3NJeJA.js";const n=t.forwardRef(({value:n,onChange:s,onValidationChange:a,onCursorPositionChange:o,onSelectionChange:i,theme:l,settings:c},d)=>{const u=t.useRef(null),m=t.useRef(null),x=t.useCallback(()=>{u.current&&u.current.trigger("editor","editor.action.formatDocument",{})},[]),h=t.useCallback(()=>{u.current&&u.current.trigger("editor","undo",{})},[]),g=t.useCallback(()=>{u.current&&u.current.trigger("editor","redo",{})},[]),p=t.useCallback(()=>{u.current&&u.current.trigger("editor","editor.action.selectAll",{})},[]),f=t.useCallback(()=>{if(u.current)try{u.current.focus();const t=u.current,r=m.current;try{return void t.trigger("keyboard","actions.find",null)}catch(e){}try{return void t.trigger("keyboard","editor.action.startFindAction",null)}catch(e){}try{const e=[],r=t.getAction("actions.find"),n=t.getAction("editor.action.startFindAction");r&&e.push(r),n&&e.push(n);const s=e.find(e=>"actions.find"===e.id||"editor.action.startFindAction"===e.id||e.id.toLowerCase().includes("find"));if(s)return void s.run()}catch(e){}try{if(r)return void t.trigger("keyboard",r.KeyMod.CtrlCmd|r.KeyCode.KeyF,null)}catch(e){}try{window.find()}catch(e){}}catch(t){}},[]),b=t.useCallback(()=>{if(u.current)try{u.current.focus();const t=u.current,r=m.current;try{return void t.trigger("keyboard","editor.action.startFindReplaceAction",null)}catch(e){}try{return void t.trigger("keyboard","actions.findWithReplace",null)}catch(e){}try{const e=[],r=t.getAction("editor.action.startFindReplaceAction"),n=t.getAction("actions.findWithReplace");r&&e.push(r),n&&e.push(n);const s=e.find(e=>"editor.action.startFindReplaceAction"===e.id||"actions.findWithReplace"===e.id||e.id.toLowerCase().includes("replace"));if(s)return void s.run()}catch(e){}try{if(r)return void t.trigger("keyboard",r.KeyMod.CtrlCmd|r.KeyCode.KeyH,null)}catch(e){}}catch(t){}},[]),y=t.useCallback((e,t)=>{u.current&&(u.current.revealLineInCenter(e),u.current.setPosition({lineNumber:e,column:t||1}),u.current.focus())},[]),k=t.useCallback(()=>u.current?u.current.getSelection():null,[]),v=t.useCallback(()=>{if(u.current){const e=u.current.getSelection(),t=u.current.getModel();if(e&&t)return t.getValueInRange(e)}return""},[]),j=t.useCallback(e=>{if(u.current){const t=u.current.getSelection()||new m.current.Range(1,1,1,1);u.current.executeEdits("insert-text",[{range:t,text:e,forceMoveMarkers:!0}])}},[]),w=t.useCallback(()=>{if(u.current){const e=u.current.getModel();return!!e&&e.canUndo()}return!1},[]),C=t.useCallback(()=>{if(u.current){const e=u.current.getModel();return!!e&&e.canRedo()}return!1},[]);t.useImperativeHandle(d,()=>({formatDocument:x,undo:h,redo:g,selectAll:p,find:f,replace:b,gotoLine:y,getSelection:k,getSelectedText:v,insertText:j,canUndo:w,canRedo:C,focus:()=>u.current?.focus(),getEditor:()=>u.current,getMonaco:()=>m.current}),[x,h,g,p,f,b,y,k,v,j,w,C]);t.useEffect(()=>{u.current&&u.current.updateOptions({tabSize:c.indentSize,insertSpaces:"spaces"===c.indentType,wordWrap:c.wordWrap?"on":"off",lineNumbers:c.lineNumbers?"on":"off",minimap:{enabled:c.minimap}})},[c]);const N={language:"json",theme:"dark"===l?"vs-dark":"vs",automaticLayout:!0,fontSize:14,fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',tabSize:c.indentSize,insertSpaces:"spaces"===c.indentType,wordWrap:c.wordWrap?"on":"off",lineNumbers:c.lineNumbers?"on":"off",minimap:{enabled:c.minimap},scrollBeyondLastLine:!1,renderWhitespace:"selection",bracketPairColorization:{enabled:!0},matchBrackets:"always",showFoldingControls:"always",foldingStrategy:"indentation",foldingHighlight:!0,autoClosingBrackets:"always",autoClosingQuotes:"always",autoClosingDelete:"always",autoClosingOvertype:"always",autoSurround:"languageDefined",autoIndent:"full",formatOnPaste:!0,formatOnType:!0,suggest:{showKeywords:!0,showSnippets:!0,showFunctions:!0,showConstructors:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showIssues:!0,showUsers:!0,insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1},quickSuggestions:{other:!0,comments:!1,strings:!0},multiCursorModifier:"ctrlCmd",multiCursorMergeOverlapping:!0,multiCursorPaste:"spread",find:{addExtraSpaceOnTop:!0,autoFindInSelection:"never",seedSearchStringFromSelection:"always",loop:!0},renderValidationDecorations:"on",renderLineHighlight:"all",renderLineHighlightOnlyWhenFocus:!1,undoStopOnWordBoundary:!0,largeFileOptimizations:!0,accessibilitySupport:"auto",ariaLabel:"PDX JSON Editor",cursorBlinking:"blink",cursorSmoothCaretAnimation:"on",cursorStyle:"line",cursorWidth:2,smoothScrolling:!0,mouseWheelScrollSensitivity:1,fastScrollSensitivity:5};return e.jsx("div",{className:"w-full h-full",children:e.jsx(r,{value:n,onChange:e=>{void 0!==e&&s(e)},onMount:(e,t)=>{u.current=e,m.current=t,e.updateOptions({find:{addExtraSpaceOnTop:!0,autoFindInSelection:"never",seedSearchStringFromSelection:"always",loop:!0}}),t.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,allowComments:!1,schemas:[],enableSchemaRequest:!1,schemaValidation:"error",schemaRequest:"error"}),t.languages.setLanguageConfiguration("json",{brackets:[["{","}"],["[","]"],['"','"']],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:'"',close:'"',notIn:["string"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:'"',close:'"'}]});const r=e.getContribution("editor.contrib.findController");r&&"function"==typeof r.getState&&e.onDidBlurEditorWidget(()=>{setTimeout(()=>{try{const e=r.getState();e&&e.isRevealed&&r.focus&&r.focus()}catch(e){}},100)}),e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyF,()=>{const t=[],r=e.getAction("actions.find"),n=e.getAction("editor.action.startFindAction");r&&t.push(r),n&&t.push(n);const s=t.find(e=>"actions.find"===e.id||"editor.action.startFindAction"===e.id);s?s.run():e.trigger("keyboard","actions.find",null)}),e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyH,()=>{const t=[],r=e.getAction("editor.action.startFindReplaceAction"),n=e.getAction("actions.findWithReplace");r&&t.push(r),n&&t.push(n);const s=t.find(e=>"editor.action.startFindReplaceAction"===e.id);s?s.run():e.trigger("keyboard","editor.action.startFindReplaceAction",null)});const n=e.getModel();if(n){const r=t.editor.onDidChangeMarkers(e=>{const r=n.uri;if(e.find(e=>e.toString()===r.toString())){const e=t.editor.getModelMarkers({resource:r}).map(e=>({line:e.startLineNumber,column:e.startColumn,message:e.message,severity:e.severity===t.MarkerSeverity.Error?"error":"warning"}));a(e)}}),s=e.onDidChangeCursorPosition(e=>{o&&o({line:e.position.lineNumber,column:e.position.column})}),l=e.onDidChangeCursorSelection(e=>{i&&i({startLine:e.selection.startLineNumber,startColumn:e.selection.startColumn,endLine:e.selection.endLineNumber,endColumn:e.selection.endColumn})}),c=n.onDidChangeContent(()=>{});return e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyD,()=>{e.trigger("keyboard","editor.action.copyLinesDownAction",{})}),e.addCommand(t.KeyMod.CtrlCmd|t.KeyMod.Shift|t.KeyCode.KeyK,()=>{e.trigger("keyboard","editor.action.deleteLines",{})}),e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.Slash,()=>{e.trigger("keyboard","editor.action.commentLine",{})}),()=>{r.dispose(),s.dispose(),l.dispose(),c.dispose()}}},options:N,loading:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"text-gray-500",children:"Loading editor..."})})})})}),s=({theme:t,onThemeChange:r,disabled:n=!1})=>{const s=`\n    relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ease-in-out\n    ${n?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n    ${"dark"===t?"bg-blue-600":"bg-gray-200"}\n    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\n  `,a=`\n    inline-block h-4 w-4 transform rounded-full bg-white transition duration-200 ease-in-out\n    ${"dark"===t?"translate-x-6":"translate-x-1"}\n  `;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm "+("light"===t?"text-yellow-500":"text-gray-400"),title:"Light theme",children:"☀️"}),e.jsx("button",{type:"button",className:s,onClick:()=>{n||r("light"===t?"dark":"light")},disabled:n,role:"switch","aria-checked":"dark"===t,"aria-label":`Switch to ${"light"===t?"dark":"light"} theme`,children:e.jsx("span",{className:a})}),e.jsx("span",{className:"text-sm "+("dark"===t?"text-blue-400":"text-gray-400"),title:"Dark theme",children:"🌙"}),e.jsx("span",{className:"text-sm font-medium "+("dark"===t?"text-gray-200":"text-gray-700"),children:"light"===t?"Light":"Dark"})]})},a=100,o=9e3,i=9100,l=({isOpen:r,onClose:n,settings:a,onSettingsChange:l,theme:c,onThemeChange:d})=>{const[u,m]=t.useState(a),x=t.useRef(null);t.useEffect(()=>{m(a)},[a]);const h=(e,t)=>{const r={...u,[e]:t};m(r),l({[e]:t})};return t.useEffect(()=>{const e=e=>{"Escape"===e.key&&r&&n()};return r&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[r,n]),t.useEffect(()=>{r&&x.current&&x.current.focus()},[r]),r?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:o},children:e.jsxs("div",{ref:x,tabIndex:-1,style:{backgroundColor:"dark"===c?"#1f2937":"white",color:"dark"===c?"#f9fafb":"#111827",borderRadius:"0.5rem",padding:"1.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08)",maxHeight:"80vh",overflowY:"auto",width:"95%",maxWidth:"450px",position:"relative",zIndex:i},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:"dark"===c?"#f9fafb":"#111827"},children:"编辑器设置"}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl font-bold w-8 h-8 flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"关闭设置",children:"✕"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"外观"}),e.jsx("div",{className:"pl-4",children:e.jsx(s,{theme:c,onThemeChange:d})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"编辑器"}),e.jsxs("div",{className:"space-y-4 pl-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"缩进大小"}),e.jsxs("select",{value:u.indentSize,onChange:e=>h("indentSize",Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:2,className:"dark:bg-gray-700 dark:text-white",children:"2 个空格"}),e.jsx("option",{value:4,className:"dark:bg-gray-700 dark:text-white",children:"4 个空格"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"缩进类型"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"indentType",value:"spaces",checked:"spaces"===u.indentType,onChange:e=>h("indentType",e.target.value),className:"mr-2 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-white",children:"空格"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"indentType",value:"tabs",checked:"tabs"===u.indentType,onChange:e=>h("indentType",e.target.value),className:"mr-2 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-white",children:"制表符"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.wordWrap,onChange:e=>h("wordWrap",e.target.checked),className:"mr-3 text-blue-600 focus:ring-blue-500 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-white",children:"自动换行"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300 mt-1 ml-6",children:"将长行自动换行以适应编辑器宽度"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.lineNumbers,onChange:e=>h("lineNumbers",e.target.checked),className:"mr-3 text-blue-600 focus:ring-blue-500 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-white",children:"行号"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300 mt-1 ml-6",children:"在编辑器中显示行号"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.minimap,onChange:e=>h("minimap",e.target.checked),className:"mr-3 text-blue-600 focus:ring-blue-500 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-white",children:"缩略图"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300 mt-1 ml-6",children:"显示文档的缩略图概览"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-8 pt-4 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("button",{onClick:()=>{const e={indentSize:2,indentType:"spaces",wordWrap:!1,lineNumbers:!0,minimap:!0};m(e),l(e)},className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:"重置为默认值"}),e.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"完成"})]})]})}):null},c=({onOpen:r,onSave:n,onNew:s,isDirty:a,currentFile:o,theme:i,disabled:l=!1})=>{const c=t.useRef(null),u=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=e=>t(e.target?.result),n.onerror=()=>r(new Error("Failed to read file")),n.readAsText(e)}),m=`\n    px-4 py-2.5 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2\n    ${"dark"===i?"bg-gray-800/50 hover:bg-gray-700/60 text-gray-300 hover:text-white border-gray-600/50 hover:border-gray-500":"bg-white/80 hover:bg-gray-50 text-gray-700 hover:text-gray-900 border-gray-200 hover:border-gray-300"}\n    ${l?"opacity-50 cursor-not-allowed":"cursor-pointer hover:shadow-md hover:scale-105"}\n    border backdrop-blur-sm\n  `,x=`\n    px-4 py-2.5 text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2\n    bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white border-blue-500\n    ${l?"opacity-50 cursor-not-allowed":"cursor-pointer hover:shadow-lg hover:scale-105"}\n    border shadow-md\n  `;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{ref:c,type:"file",accept:".json,.txt",onChange:async e=>{const t=e.target.files?.[0];if(t){try{const e=await u(t),n={name:t.name,size:t.size,lastModified:new Date(t.lastModified),content:e};r(n)}catch(n){}c.current&&(c.current.value="")}},className:"hidden","aria-label":"Select JSON file"}),e.jsxs("button",{onClick:()=>{l||s()},className:m,disabled:l,title:"创建新文件 (Ctrl+N)",children:[e.jsx("span",{children:"📄"}),e.jsx("span",{children:"新建"})]}),e.jsxs("button",{onClick:()=>{l||c.current?.click()},className:m,disabled:l,title:"打开文件 (Ctrl+O)",children:[e.jsx("span",{children:"📁"}),e.jsx("span",{children:"打开"})]}),e.jsxs("button",{onClick:()=>{l||n()},className:a?x:m,disabled:l,title:"保存文件 (Ctrl+S)",children:[e.jsx("span",{children:"💾"}),e.jsx("span",{children:"保存"}),a&&e.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full ml-1",title:"未保存的更改"})]}),o&&e.jsx("div",{className:`\n          px-4 py-2.5 text-sm rounded-lg border backdrop-blur-sm\n          ${"dark"===i?"bg-gray-800/60 border-gray-600/50 text-gray-300":"bg-white/80 border-gray-200 text-gray-600"}\n        `,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-blue-500",children:"📄"}),e.jsx("span",{className:"font-medium",children:o.name})]}),e.jsx("span",{className:"text-xs opacity-75 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-md",children:d(o.size)}),a&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-orange-500 text-xs font-medium",children:"未保存"})]})]})})]})},d=e=>e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(1)} MB`,u=({onFileDrop:r,onError:n,theme:s,disabled:a=!1,children:o})=>{const[i,l]=t.useState(!1),[c,d]=t.useState(0),u=async e=>{if((e=>["application/json","text/plain"].includes(e.type)||[".json",".txt"].some(t=>e.name.toLowerCase().endsWith(t))?!(e.size>10485760&&(n("File size must be less than 10MB"),1)):(n("Please select a JSON or text file"),!1))(e))try{const t=await(e=>new Promise((t,r)=>{const n=new FileReader;n.onload=e=>t(e.target?.result),n.onerror=()=>r(new Error("Failed to read file")),n.readAsText(e)}))(e),n={name:e.name,size:e.size,lastModified:new Date(e.lastModified),content:t};r(n)}catch(t){n("Failed to read file content")}},m=t.useCallback(e=>{e.preventDefault(),e.stopPropagation(),a||(d(e=>e+1),e.dataTransfer.items&&e.dataTransfer.items.length>0&&l(!0))},[a]),x=t.useCallback(e=>{e.preventDefault(),e.stopPropagation(),a||d(e=>{const t=e-1;return 0===t&&l(!1),t})},[a]),h=t.useCallback(e=>{e.preventDefault(),e.stopPropagation(),a||(e.dataTransfer.dropEffect="copy")},[a]),g=t.useCallback(async e=>{if(e.preventDefault(),e.stopPropagation(),a)return;l(!1),d(0);const t=Array.from(e.dataTransfer.files);0!==t.length?t.length>1?n("Please drop only one file at a time"):await u(t[0]):n("No files were dropped")},[a,n]),p=`\n    absolute inset-0 z-10 flex items-center justify-center\n    ${"dark"===s?"bg-gray-900/80 border-blue-400":"bg-white/80 border-blue-500"}\n    border-2 border-dashed rounded-lg transition-all duration-200\n    ${i?"opacity-100":"opacity-0 pointer-events-none"}\n  `,f=`\n    px-6 py-4 rounded-lg text-center\n    ${"dark"===s?"bg-gray-800 text-gray-200 border-gray-600":"bg-white text-gray-700 border-gray-300"}\n    border shadow-lg\n  `;return e.jsxs("div",{className:"relative w-full h-full",onDragEnter:m,onDragLeave:x,onDragOver:h,onDrop:g,children:[o,e.jsx("div",{className:p,children:e.jsxs("div",{className:f,children:[e.jsx("div",{className:"text-2xl mb-2",children:"📁"}),e.jsx("div",{className:"text-lg font-medium mb-1",children:"Drop your JSON file here"}),e.jsx("div",{className:"text-sm opacity-75",children:"Supports .json and .txt files (max 10MB)"})]})})]})},m=({isVisible:r,onSearch:n,onReplace:s,onReplaceAll:o,onFindNext:i,onFindPrevious:l,theme:c})=>{const[d,u]=t.useState(""),[m,x]=t.useState(""),[h,g]=t.useState(!1),[p,f]=t.useState({caseSensitive:!1,useRegex:!1,wholeWord:!1}),b=t.useRef(null);t.useEffect(()=>{r&&b.current&&b.current.focus()},[r]),t.useEffect(()=>{d.trim()&&n(d,p)},[d,p,n]);const y=e=>{f(t=>({...t,[e]:!t[e]}))},k=`\n    w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all duration-200 backdrop-blur-sm\n    ${"dark"===c?"bg-gray-800/80 text-gray-200 border-gray-600/50 focus:border-blue-500/50 placeholder-gray-400":"bg-white/90 text-gray-700 border-gray-300/50 focus:border-blue-500/50 placeholder-gray-500"}\n  `,v=`\n    px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 backdrop-blur-sm\n    ${"dark"===c?"bg-gray-700/60 hover:bg-gray-600/70 text-gray-200 border-gray-600/50 hover:border-gray-500":"bg-white/80 hover:bg-gray-50 text-gray-700 border-gray-300/50 hover:border-gray-400"}\n    border hover:shadow-md hover:scale-105\n  `,j=e=>`\n    px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 border backdrop-blur-sm\n    ${"dark"===c?e?"bg-gradient-to-r from-blue-600 to-blue-700 text-white border-blue-500 shadow-lg":"bg-gray-700/60 text-gray-300 border-gray-600/50 hover:bg-gray-600/70 hover:border-gray-500":e?"bg-gradient-to-r from-blue-500 to-blue-600 text-white border-blue-400 shadow-lg":"bg-white/80 text-gray-700 border-gray-300/50 hover:bg-gray-50 hover:border-gray-400"}\n    ${e?"":"hover:shadow-md hover:scale-105"}\n  `;return e.jsx("div",{className:"flex-shrink-0 "+(r?"":"hidden"),style:{backgroundColor:"dark"===c?"rgba(31, 41, 55, 0.8)":"rgba(255, 255, 255, 0.9)",borderLeft:"1px solid "+("dark"===c?"rgba(55, 65, 81, 0.5)":"rgba(229, 231, 235, 0.5)"),color:"dark"===c?"#f3f4f6":"#111827",padding:"0.75rem 1rem",zIndex:a,height:"100%",display:"flex",alignItems:"center",position:"absolute",right:0,top:0,backdropFilter:"blur(8px)",borderRadius:"0 0 0 12px",boxShadow:"dark"===c?"0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2)":"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-400 text-sm",children:"🔍"})}),e.jsx("input",{ref:b,type:"text",value:d,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.shiftKey?l():i(),e.preventDefault())},placeholder:"搜索...",className:`${k} pl-10`,style:{width:"180px"}})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{className:j(p.caseSensitive),onClick:()=>y("caseSensitive"),title:"区分大小写",children:e.jsx("span",{className:"font-mono",children:"Aa"})}),e.jsx("button",{className:j(p.wholeWord),onClick:()=>y("wholeWord"),title:"全字匹配",children:e.jsx("span",{className:"font-mono",children:"W"})}),e.jsx("button",{className:j(p.useRegex),onClick:()=>y("useRegex"),title:"使用正则表达式",children:e.jsx("span",{className:"font-mono",children:".*"})})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{className:v,onClick:l,title:"查找上一个 (Shift+Enter)",children:e.jsx("span",{className:"text-lg",children:"⬆️"})}),e.jsx("button",{className:v,onClick:i,title:"查找下一个 (Enter)",children:e.jsx("span",{className:"text-lg",children:"⬇️"})})]}),e.jsx("button",{className:`${v} ${h?"bg-orange-100 dark:bg-orange-900/30 border-orange-300 dark:border-orange-700":""}`,onClick:()=>g(!h),title:h?"隐藏替换":"显示替换",children:e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:h?"🔽":"🔄"}),e.jsx("span",{className:"text-xs",children:h?"隐藏":"替换"})]})}),h&&e.jsxs("div",{className:"flex items-center space-x-2 ml-2 pl-2 border-l border-gray-300 dark:border-gray-600",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-400 text-sm",children:"🔄"})}),e.jsx("input",{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:"替换为...",className:`${k} pl-10`,style:{width:"140px"}})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{className:`${v} bg-green-50 dark:bg-green-900/30 border-green-300 dark:border-green-700 text-green-700 dark:text-green-300`,onClick:()=>{d.trim()&&s(d,m,p)},title:"替换当前",children:e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"🎯"}),e.jsx("span",{className:"text-xs",children:"替换"})]})}),e.jsx("button",{className:`${v} bg-red-50 dark:bg-red-900/30 border-red-300 dark:border-red-700 text-red-700 dark:text-red-300`,onClick:()=>{d.trim()&&o(d,m,p)},title:"全部替换",children:e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"🎯"}),e.jsx("span",{className:"text-xs",children:"全部"})]})})]})]})]})})};class x extends t.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t)}handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-8 w-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Something went wrong"})})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"The JSON Editor encountered an unexpected error. You can try to recover by clicking the buttons below."})}),!1,e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:this.handleRetry,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Try Again"}),e.jsx("button",{onClick:this.handleReload,className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Reload Page"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"If the problem persists, please refresh the page or contact support."})})]})}):this.props.children}}const h=({toast:r,onClose:n})=>{const[s,a]=t.useState(!1),[o,i]=t.useState(!1);t.useEffect(()=>{const e=setTimeout(()=>a(!0),10);return()=>clearTimeout(e)},[]),t.useEffect(()=>{const e=r.duration??5e3;if(e>0){const t=setTimeout(()=>{l()},e);return()=>clearTimeout(t)}},[r.duration]);const l=()=>{i(!0),setTimeout(()=>{n(r.id)},300)};return e.jsxs("div",{className:(()=>{const e=`\n      relative flex items-start p-4 mb-3 rounded-lg shadow-lg border-l-4 transition-all duration-300 ease-in-out\n      ${s&&!o?"translate-x-0 opacity-100":"translate-x-full opacity-0"}\n    `;switch(r.type){case"success":return`${e} bg-green-50 dark:bg-green-900/20 border-green-500 text-green-800 dark:text-green-200`;case"error":return`${e} bg-red-50 dark:bg-red-900/20 border-red-500 text-red-800 dark:text-red-200`;case"warning":return`${e} bg-yellow-50 dark:bg-yellow-900/20 border-yellow-500 text-yellow-800 dark:text-yellow-200`;case"info":return`${e} bg-blue-50 dark:bg-blue-900/20 border-blue-500 text-blue-800 dark:text-blue-200`;default:return`${e} bg-gray-50 dark:bg-gray-800 border-gray-500 text-gray-800 dark:text-gray-200`}})(),children:[e.jsx("div",{className:"flex-shrink-0 mr-3",children:(()=>{switch(r.type){case"success":return e.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});case"error":return e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})});case"warning":return e.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"info":return e.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})});default:return null}})()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium",children:r.title}),r.message&&e.jsx("p",{className:"mt-1 text-sm opacity-90",children:r.message}),r.action&&e.jsx("div",{className:"mt-2",children:e.jsx("button",{onClick:r.action.onClick,className:"text-sm font-medium underline hover:no-underline focus:outline-none",children:r.action.label})})]}),e.jsx("button",{onClick:l,className:"flex-shrink-0 ml-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})},g=({toasts:t,onRemoveToast:r,position:n="top-right"})=>0===t.length?null:e.jsx("div",{className:(()=>{const e="fixed z-50 max-w-sm w-full";switch(n){case"top-right":default:return`${e} top-4 right-4`;case"top-left":return`${e} top-4 left-4`;case"bottom-right":return`${e} bottom-4 right-4`;case"bottom-left":return`${e} bottom-4 left-4`;case"top-center":return`${e} top-4 left-1/2 transform -translate-x-1/2`;case"bottom-center":return`${e} bottom-4 left-1/2 transform -translate-x-1/2`}})(),children:t.map(t=>e.jsx(h,{toast:t,onClose:r},t.id))}),p=({isOpen:r,onClose:n,title:s,children:a,type:l="info",actions:c})=>{const[d,u]=t.useState(!1),m=t.useRef(null);if(t.useEffect(()=>{const e=e=>{"Escape"===e.key&&r&&n()};return r&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}},[r,n]),t.useEffect(()=>{r?requestAnimationFrame(()=>{requestAnimationFrame(()=>{u(!0)})}):u(!1)},[r]),t.useEffect(()=>{r&&m.current&&m.current.focus()},[r]),!r)return null;return e.jsxs("div",{className:"fixed inset-0 overflow-y-auto",style:{zIndex:o,position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},"aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",opacity:d?1:0,transition:"opacity 0.2s ease-in-out"},"aria-hidden":"true",onClick:n}),e.jsxs("div",{ref:m,tabIndex:-1,style:{backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08)",width:"100%",maxWidth:"500px",margin:"0 1rem",opacity:d?1:0,transform:d?"scale(1)":"scale(0.95)",transition:"opacity 0.2s ease-in-out, transform 0.2s ease-in-out",zIndex:i,position:"relative",overflow:"hidden"},onClick:e=>e.stopPropagation(),children:[e.jsx("div",{style:{padding:"1.5rem 1.5rem 1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start"},children:[(()=>{switch(l){case"success":return e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:e.jsx("svg",{className:"h-6 w-6 text-green-600 dark:text-green-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})});case"error":return e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30",children:e.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})});case"warning":return e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30",children:e.jsx("svg",{className:"h-6 w-6 text-yellow-600 dark:text-yellow-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})});default:return e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 dark:bg-blue-900/30",children:e.jsx("svg",{className:"h-6 w-6 text-blue-600 dark:text-blue-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}})(),e.jsxs("div",{style:{marginLeft:"1rem",width:"100%"},children:[e.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:600,marginTop:0,marginBottom:"0.5rem",color:"#111827"},id:"modal-title",children:s}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#4B5563"},children:a})]})]})}),e.jsx("div",{style:{backgroundColor:"#F9FAFB",padding:"0.75rem 1.5rem",display:"flex",justifyContent:"flex-end",borderTop:"1px solid #E5E7EB"},children:c||e.jsx("button",{type:"button",style:{backgroundColor:"#3B82F6",color:"white",fontWeight:500,padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"none",cursor:"pointer"},onClick:n,children:"确定"})})]})]})};function f(){const[r,s]=t.useState('{\n  "example": "JSON content",\n  "number": 42,\n  "boolean": true\n}'),[a,o]=t.useState([]),[i,d]=t.useState("light"),[h,f]=t.useState({line:1,column:1}),[b,y]=t.useState({startLine:1,startColumn:1,endLine:1,endColumn:1}),[k,v]=t.useState(!1),[j,w]=t.useState(null),[C,N]=t.useState(!1),[S,R]=t.useState('{\n  "example": "JSON content",\n  "number": 42,\n  "boolean": true\n}'),L=t.useRef(null),{toasts:E,removeToast:F}=(()=>{const[e,r]=t.useState([]),n=t.useCallback((e,t,n,s)=>{const a=Date.now().toString()+Math.random().toString(36).substr(2,9),o={id:a,type:e,title:t,message:n,duration:s?.duration??("error"===e?0:5e3),action:s?.action};return r(e=>[...e,o]),a},[]),s=t.useCallback(e=>{r(t=>t.filter(t=>t.id!==e))},[]),a=t.useCallback(()=>{r([])},[]),o=t.useCallback((e,t,r)=>n("success",e,t,r),[n]),i=t.useCallback((e,t,r)=>n("error",e,t,{duration:0,...r}),[n]),l=t.useCallback((e,t,r)=>n("warning",e,t,r),[n]),c=t.useCallback((e,t,r)=>n("info",e,t,r),[n]);return{toasts:e,addToast:n,removeToast:s,clearAllToasts:a,showSuccess:o,showError:i,showWarning:l,showInfo:c}})(),{isOpen:M,options:O,closeModal:K,showError:T,showSuccess:A,showConfirm:z}=(()=>{const[e,r]=t.useState(!1),[n,s]=t.useState({title:"",message:"",type:"info",confirmText:"确定",cancelText:"取消",showCancel:!1}),a=t.useCallback(e=>{s(t=>({...t,...e})),r(!0)},[]),o=t.useCallback(()=>{r(!1)},[]),i=t.useCallback((e,t,r)=>{a({title:e,message:t,type:"success",onConfirm:r,showCancel:!1})},[a]),l=t.useCallback((e,t,r)=>{a({title:e,message:t,type:"error",onConfirm:r,showCancel:!1})},[a]),c=t.useCallback((e,t,r,n)=>{a({title:e,message:t,type:"warning",onConfirm:r,onCancel:n,showCancel:!0})},[a]),d=t.useCallback((e,t,r,n)=>{a({title:e,message:t,type:"info",onConfirm:r,onCancel:n,showCancel:!0})},[a]);return{isOpen:e,options:n,openModal:a,closeModal:o,showSuccess:i,showError:l,showWarning:c,showConfirm:d}})(),[D,W]=t.useState({indentSize:2,indentType:"spaces",wordWrap:!1,lineNumbers:!0,minimap:!0}),$=()=>{d(e=>"light"===e?"dark":"light")},P=()=>{v(e=>!e)},B=e=>{C?z("未保存的更改","您有未保存的更改。是否要放弃这些更改？",()=>{w(e),s(e.content),R(e.content),N(!1)}):(w(e),s(e.content),R(e.content),N(!1))},J=()=>{const e=j?.name||"untitled.json",t=new Blob([r],{type:"application/json"}),n=URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n),R(r),N(!1),A("文件已保存",`成功保存文件 ${e}`)},I=()=>{if(C)return void z("未保存的更改","您有未保存的更改。是否要放弃这些更改？",()=>{const e="{\n  \n}";w(null),s(e),R(e),N(!1)});const e="{\n  \n}";w(null),s(e),R(e),N(!1)},V=e=>{s(e),N(e!==S)},H=()=>{try{const e=JSON.parse(r),t=JSON.stringify(e,null,D.indentSize);s(t),N(t!==S),A("JSON 格式化成功","您的 JSON 已成功格式化。")}catch(e){T("格式化错误","无法格式化无效的 JSON。请先修复语法错误。")}},U=()=>{try{const e=JSON.parse(r),t=JSON.stringify(e);s(t),N(t!==S),A("JSON 压缩成功","您的 JSON 已成功压缩。")}catch(e){T("压缩错误","无法压缩无效的 JSON。请先修复语法错误。")}},q=()=>{try{JSON.parse(r),A("JSON 验证通过","您的 JSON 语法有效！")}catch(e){T("JSON 验证失败",`JSON 语法错误: ${e.message}`)}};return((e,r={})=>{const{enabled:n=!0,target:s=document}=r,a=t.useRef(e);t.useEffect(()=>{a.current=e},[e]);const o=t.useCallback(e=>{const t=e;if(!n)return;const r=a.current.find(e=>{const r=e.key.toLowerCase()===t.key.toLowerCase()||e.key.toLowerCase()===t.code.toLowerCase(),n=(e.ctrlKey??!1)===t.ctrlKey,s=(e.shiftKey??!1)===t.shiftKey,a=(e.altKey??!1)===t.altKey,o=(e.metaKey??!1)===t.metaKey;return r&&n&&s&&a&&o});r&&(!1!==r.preventDefault&&(e.preventDefault(),e.stopPropagation()),r.action())},[n]);t.useEffect(()=>{if(!n)return;const e=s;return e.addEventListener("keydown",o),()=>{e.removeEventListener("keydown",o)}},[o,n,s]),t.useCallback(()=>e.map(e=>({keys:[e.ctrlKey&&"Ctrl",e.metaKey&&"Cmd",e.shiftKey&&"Shift",e.altKey&&"Alt",e.key].filter(Boolean).join(" + "),description:e.description})),[e])})([{key:"n",ctrlKey:!0,action:I,description:"Create new file"},{key:"o",ctrlKey:!0,action:()=>{const e=document.querySelector('input[type="file"]');e?.click()},description:"Open file"},{key:"s",ctrlKey:!0,action:J,description:"Save file"},{key:"f",ctrlKey:!0,action:()=>{if(L.current)try{return L.current.focus&&L.current.focus(),void setTimeout(()=>{L.current?.find()},0)}catch(e){}},description:"Find/Search"},{key:"h",ctrlKey:!0,action:()=>{if(L.current)try{L.current.focus&&L.current.focus(),setTimeout(()=>{L.current?.replace()},0)}catch(e){}},description:"Find and Replace"},{key:",",ctrlKey:!0,action:P,description:"Open settings"},{key:"Enter",ctrlKey:!0,shiftKey:!0,action:H,description:"Format JSON"},{key:"Enter",ctrlKey:!0,altKey:!0,action:U,description:"Minify JSON"},{key:"Enter",ctrlKey:!0,action:q,description:"Validate JSON"},{key:"d",ctrlKey:!0,action:$,description:"Toggle dark/light theme"}]),e.jsx(x,{children:e.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-slate-50 to-gray-100 dark:from-gray-900 dark:to-slate-900 text-gray-900 dark:text-gray-100",children:[e.jsxs("header",{className:"h-14 bg-gray-800 dark:bg-gray-900 backdrop-blur-sm border-b border-gray-700/50 dark:border-gray-600/50 flex items-center px-6 flex-shrink-0 shadow-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"J"})}),e.jsx("h1",{className:"text-xl font-bold text-white",children:"PDX JSON 编辑器"})]}),e.jsx("div",{className:"ml-auto flex items-center space-x-3",children:e.jsx("button",{className:"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 bg-gray-700 hover:bg-gray-600 text-gray-200 hover:text-white border border-gray-600 hover:border-gray-500 hover:shadow-md",onClick:$,children:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"light"===i?"🌙":"☀️"}),e.jsx("span",{children:"light"===i?"深色":"浅色"})]})})})]}),e.jsxs("div",{className:"h-14 bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm border-b border-gray-200/30 dark:border-gray-700/30 flex items-center px-6 flex-shrink-0 relative shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{onOpen:B,onSave:J,onNew:I,isDirty:C,currentFile:j,theme:i}),e.jsx("div",{className:"w-px h-8 bg-gradient-to-b from-transparent via-gray-300 to-transparent dark:via-gray-600"}),e.jsx("button",{className:"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 bg-gradient-to-r from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 dark:hover:from-blue-800/30 dark:hover:to-indigo-800/30 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-700/50 hover:shadow-md hover:scale-105",onClick:H,children:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"✨"}),e.jsx("span",{children:"格式化"})]})}),e.jsx("button",{className:"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 bg-gradient-to-r from-green-50 to-emerald-50 hover:from-green-100 hover:to-emerald-100 dark:from-green-900/20 dark:to-emerald-900/20 dark:hover:from-green-800/30 dark:hover:to-emerald-800/30 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-700/50 hover:shadow-md hover:scale-105",onClick:U,children:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"🗜️"}),e.jsx("span",{children:"压缩"})]})}),e.jsx("button",{className:"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 bg-gradient-to-r from-purple-50 to-pink-50 hover:from-purple-100 hover:to-pink-100 dark:from-purple-900/20 dark:to-pink-900/20 dark:hover:from-purple-800/30 dark:hover:to-pink-800/30 text-purple-700 dark:text-purple-300 border border-purple-200 dark:border-purple-700/50 hover:shadow-md hover:scale-105",onClick:q,children:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"✅"}),e.jsx("span",{children:"验证"})]})}),e.jsx("div",{className:"w-px h-8 bg-gradient-to-b from-transparent via-gray-300 to-transparent dark:via-gray-600"}),e.jsx("button",{className:"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 bg-gradient-to-r from-gray-50 to-slate-50 hover:from-gray-100 hover:to-slate-100 dark:from-gray-800/50 dark:to-slate-800/50 dark:hover:from-gray-700/60 dark:hover:to-slate-700/60 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600/50 hover:shadow-md hover:scale-105",onClick:P,children:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"⚙️"}),e.jsx("span",{children:"设置"})]})})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(m,{isVisible:!0,onClose:()=>{},onSearch:(e,t)=>{if(L.current&&e.trim()){const n=L.current.getEditor();if(n){const s=n.getContribution("editor.contrib.findController");if(s&&"function"==typeof s.getState)try{s.getState().change({searchString:e,isRegex:t.useRegex,matchCase:t.caseSensitive,wholeWord:t.wholeWord,searchScope:null,matchesPosition:null,matchesCount:null},!1),s.start({forceRevealReplace:!1,seedSearchStringFromSelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:!0})}catch(r){n.trigger("keyboard","actions.find",{})}else n.trigger("keyboard","actions.find",{})}}},onReplace:(e,t,r)=>{if(L.current&&e.trim()){const s=L.current.getEditor();if(s){const a=s.getContribution("editor.contrib.findController");if(a&&"function"==typeof a.getState)try{a.getState().change({searchString:e,replaceString:t,isRegex:r.useRegex,matchCase:r.caseSensitive,wholeWord:r.wholeWord,searchScope:null,matchesPosition:null,matchesCount:null},!1),a.replace&&a.replace()}catch(n){s.trigger("keyboard","editor.action.startFindReplaceAction",{})}else s.trigger("keyboard","editor.action.startFindReplaceAction",{})}}},onReplaceAll:(e,t,r)=>{if(L.current&&e.trim()){const s=L.current.getEditor();if(s){const a=s.getContribution("editor.contrib.findController");if(a&&"function"==typeof a.getState)try{a.getState().change({searchString:e,replaceString:t,isRegex:r.useRegex,matchCase:r.caseSensitive,wholeWord:r.wholeWord,searchScope:null,matchesPosition:null,matchesCount:null},!1),a.replaceAll&&a.replaceAll()}catch(n){s.trigger("keyboard","editor.action.startFindReplaceAction",{})}else s.trigger("keyboard","editor.action.startFindReplaceAction",{})}}},onFindNext:()=>{if(L.current){const e=L.current.getEditor();e&&e.trigger("keyboard","editor.action.nextMatchFindAction",{})}},onFindPrevious:()=>{if(L.current){const e=L.current.getEditor();e&&e.trigger("keyboard","editor.action.previousMatchFindAction",{})}},searchResults:[],currentResultIndex:0,theme:i})})]}),e.jsx("main",{className:"flex-1 flex overflow-hidden relative bg-gradient-to-br from-white/50 to-gray-50/50 dark:from-gray-900/50 dark:to-slate-900/50",children:e.jsx("div",{className:"flex-1 p-6",children:e.jsx(u,{onFileDrop:B,onError:e=>{T("文件错误",e)},theme:i,children:e.jsx("div",{className:"editor-container h-full",children:e.jsx(n,{ref:L,value:r,onChange:e=>{V(e)},onValidationChange:e=>{o(e)},onCursorPositionChange:e=>{f(e)},onSelectionChange:e=>{y(e)},theme:i,settings:D})})})})}),e.jsxs("footer",{className:"h-8 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-t border-gray-200/50 dark:border-gray-700/50 flex items-center px-6 text-sm text-gray-600 dark:text-gray-400 flex-shrink-0 shadow-sm",children:[e.jsx("div",{className:"flex items-center space-x-1",children:0===a.length?e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded-full border border-green-200 dark:border-green-700/50",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"font-medium",children:"JSON 有效"})]}):e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-full border border-red-200 dark:border-red-700/50",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"font-medium",children:[a.length," 个错误"]})]})}),e.jsxs("div",{className:"flex items-center space-x-4 ml-6",children:[e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-md",children:[e.jsx("span",{className:"text-xs",children:"📍"}),e.jsxs("span",{children:["行 ",h.line,", 列 ",h.column]})]}),b.startLine!==b.endLine||b.startColumn!==b.endColumn?e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-md",children:[e.jsx("span",{className:"text-xs",children:"🎯"}),e.jsxs("span",{children:["已选择 ",Math.abs(b.endLine-b.startLine)+1," ","行,"," ",b.startLine===b.endLine?Math.abs(b.endColumn-b.startColumn):"多个"," ","字符"]})]}):null]}),e.jsxs("div",{className:"ml-auto flex items-center space-x-1 px-2 py-1 bg-gray-50 dark:bg-gray-800/50 text-gray-600 dark:text-gray-400 rounded-md",children:[e.jsx("span",{className:"text-xs",children:"📝"}),e.jsxs("span",{children:["字符数: ",r.length.toLocaleString()]})]})]}),e.jsx(l,{isOpen:k,onClose:()=>v(!1),settings:D,onSettingsChange:e=>{W(t=>({...t,...e}))},theme:i,onThemeChange:d}),e.jsx(g,{toasts:E,onRemoveToast:F,position:"top-right"}),e.jsx(p,{isOpen:M,onClose:K,title:O.title,type:O.type,actions:O.showCancel?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:()=>{O.onConfirm?.(),K()},children:O.confirmText||"确定"}),e.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600",onClick:()=>{O.onCancel?.(),K()},children:O.cancelText||"取消"})]}):e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:()=>{O.onConfirm?.(),K()},children:O.confirmText||"确定"}),children:e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:O.message})})]})})}export{f as default};
//# sourceMappingURL=App.wmBSNXTy.js.map
