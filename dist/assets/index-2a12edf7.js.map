{"version":3,"file":"index-2a12edf7.js","sources":["../../src/theme/designSystem.js","../../src/theme/themeConfig.js","../../src/theme/themeUtils.js","../../src/services/errorService.js","../../src/services/persistenceService.js","../../src/theme/ThemeContext.jsx","../../src/components/ThemeProvider.jsx","../../node_modules/@mui/icons-material/utils/createSvgIcon.js","../../node_modules/@mui/icons-material/Menu.js","../../node_modules/@mui/icons-material/CreateNewFolder.js","../../node_modules/@mui/icons-material/FolderOpen.js","../../node_modules/@mui/icons-material/Save.js","../../node_modules/@mui/icons-material/Error.js","../../node_modules/@mui/icons-material/BrightnessMedium.js","../../node_modules/@mui/icons-material/LightMode.js","../../node_modules/@mui/icons-material/DarkMode.js","../../node_modules/@mui/icons-material/Contrast.js","../../node_modules/@mui/icons-material/Palette.js","../../node_modules/@mui/icons-material/Settings.js","../../node_modules/@mui/icons-material/Computer.js","../../src/components/ThemeSelector.jsx","../../src/utils/accessibilityUtils.js","../../src/components/Header.jsx","../../node_modules/@monaco-editor/loader/lib/es/_virtual/_rollupPluginBabelHelpers.js","../../node_modules/state-local/lib/es/state-local.js","../../node_modules/@monaco-editor/loader/lib/es/validators/index.js","../../node_modules/@monaco-editor/loader/lib/es/utils/curry.js","../../node_modules/@monaco-editor/loader/lib/es/utils/isObject.js","../../node_modules/@monaco-editor/loader/lib/es/utils/deepMerge.js","../../node_modules/@monaco-editor/loader/lib/es/utils/makeCancelable.js","../../node_modules/@monaco-editor/loader/lib/es/loader/index.js","../../node_modules/@monaco-editor/loader/lib/es/config/index.js","../../node_modules/@monaco-editor/loader/lib/es/utils/compose.js","../../node_modules/@monaco-editor/react/dist/index.mjs","../../node_modules/@mui/icons-material/ZoomIn.js","../../node_modules/@mui/icons-material/ZoomOut.js","../../src/services/monacoService.js","../../src/services/validationService.js","../../src/hooks/useJsonValidation.js","../../src/hooks/useJsonEditor.js","../../src/services/jsonService.js","../../src/services/schemaService.js","../../src/hooks/useJsonSchema.js","../../src/hooks/useResponsive.js","../../src/hooks/useKeyboardShortcuts.js","../../node_modules/@mui/icons-material/Add.js","../../node_modules/@mui/icons-material/AutoFixHigh.js","../../node_modules/@mui/icons-material/Delete.js","../../node_modules/@mui/icons-material/Edit.js","../../node_modules/@mui/icons-material/HelpOutline.js","../../src/components/SchemaSelector.jsx","../../src/components/EditorToolbar.jsx","../../node_modules/@mui/icons-material/FormatIndentIncrease.js","../../node_modules/@mui/icons-material/CompressOutlined.js","../../node_modules/@mui/icons-material/Healing.js","../../node_modules/@mui/icons-material/Search.js","../../node_modules/@mui/icons-material/UnfoldLess.js","../../node_modules/@mui/icons-material/UnfoldMore.js","../../node_modules/@mui/icons-material/MoreVert.js","../../node_modules/@mui/icons-material/Schema.js","../../node_modules/@mui/icons-material/Keyboard.js","../../node_modules/@mui/icons-material/Undo.js","../../node_modules/@mui/icons-material/Redo.js","../../src/components/MobileEditorToolbar.jsx","../../src/components/KeyboardShortcutsDialog.jsx","../../src/components/StatusBar.jsx","../../src/components/TouchEnabledJsonEditor.jsx","../../src/hooks/useGestures.js","../../node_modules/@mui/icons-material/CloudUpload.js","../../node_modules/file-saver/dist/FileSaver.min.js","../../src/services/fileService.js","../../src/components/FileDropZone.jsx","../../src/components/UnsavedChangesDialog.jsx","../../node_modules/@mui/icons-material/WarningAmber.js","../../src/components/LargeFileWarning.jsx","../../node_modules/@mui/icons-material/Close.js","../../node_modules/@mui/icons-material/SaveAs.js","../../src/components/MobileHeader.jsx","../../src/layouts/ResponsiveLayout.jsx","../../src/hooks/useFileOperations.js","../../src/layouts/MainLayout.jsx","../../src/hooks/useBeforeUnload.js","../../src/components/SettingsDialog.jsx","../../node_modules/@mui/icons-material/Warning.js","../../node_modules/@mui/icons-material/Info.js","../../node_modules/@mui/icons-material/ExpandMore.js","../../node_modules/@mui/icons-material/ExpandLess.js","../../node_modules/@mui/icons-material/Refresh.js","../../src/components/ErrorDisplay.jsx","../../node_modules/@mui/icons-material/VerticalSplit.js","../../node_modules/@mui/icons-material/HorizontalSplit.js","../../node_modules/@mui/icons-material/CompareArrows.js","../../node_modules/@mui/icons-material/ContentCopy.js","../../src/components/design/Button.jsx","../../src/components/design/Alert.jsx","../../src/components/design/Transitions.jsx","../../src/components/DiffViewer.jsx","../../src/utils/animationUtils.js","../../node_modules/@mui/icons-material/BugReport.js","../../src/components/ErrorBoundary.jsx","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["/**\r\n * 设计系统\r\n * 定义应用程序的设计系统，包括颜色、排版、间距等\r\n */\r\n\r\n// 颜色系统\r\nexport const colors = {\r\n  // 主色系\r\n  primary: {\r\n    main: '#3B82F6', // 蓝色\r\n    light: '#93C5FD',\r\n    dark: '#1D4ED8',\r\n    contrastText: '#FFFFFF'\r\n  },\r\n  \r\n  // 辅助色系\r\n  secondary: {\r\n    main: '#10B981', // 绿色\r\n    light: '#6EE7B7',\r\n    dark: '#059669',\r\n    contrastText: '#FFFFFF'\r\n  },\r\n  \r\n  // 功能色系\r\n  success: {\r\n    main: '#10B981', // 绿色\r\n    light: '#6EE7B7',\r\n    dark: '#059669',\r\n    contrastText: '#FFFFFF'\r\n  },\r\n  warning: {\r\n    main: '#F59E0B', // 橙色\r\n    light: '#FCD34D',\r\n    dark: '#D97706',\r\n    contrastText: '#FFFFFF'\r\n  },\r\n  error: {\r\n    main: '#EF4444', // 红色\r\n    light: '#FCA5A5',\r\n    dark: '#B91C1C',\r\n    contrastText: '#FFFFFF'\r\n  },\r\n  info: {\r\n    main: '#3B82F6', // 蓝色\r\n    light: '#93C5FD',\r\n    dark: '#1D4ED8',\r\n    contrastText: '#FFFFFF'\r\n  },\r\n  \r\n  // 中性色系 - 浅色模式\r\n  light: {\r\n    background: {\r\n      default: '#FFFFFF',\r\n      paper: '#F9FAFB',\r\n      secondary: '#F3F4F6'\r\n    },\r\n    text: {\r\n      primary: '#111827',\r\n      secondary: '#6B7280',\r\n      disabled: '#9CA3AF'\r\n    },\r\n    divider: '#E5E7EB',\r\n    border: '#D1D5DB'\r\n  },\r\n  \r\n  // 中性色系 - 深色模式\r\n  dark: {\r\n    background: {\r\n      default: '#1F2937',\r\n      paper: '#111827',\r\n      secondary: '#374151'\r\n    },\r\n    text: {\r\n      primary: '#F9FAFB',\r\n      secondary: '#9CA3AF',\r\n      disabled: '#6B7280'\r\n    },\r\n    divider: '#374151',\r\n    border: '#4B5563'\r\n  },\r\n  \r\n  // 中性色系 - 高对比度模式\r\n  highContrast: {\r\n    background: {\r\n      default: '#000000',\r\n      paper: '#121212',\r\n      secondary: '#1E1E1E'\r\n    },\r\n    text: {\r\n      primary: '#FFFFFF',\r\n      secondary: '#CCCCCC',\r\n      disabled: '#999999'\r\n    },\r\n    divider: '#444444',\r\n    border: '#666666'\r\n  }\r\n};\r\n\r\n// 排版系统\r\nexport const typography = {\r\n  // 字体家族\r\n  fontFamily: [\r\n    'Inter',\r\n    'Roboto',\r\n    '-apple-system',\r\n    'BlinkMacSystemFont',\r\n    '\"Segoe UI\"',\r\n    '\"Helvetica Neue\"',\r\n    'Arial',\r\n    'sans-serif',\r\n    '\"Apple Color Emoji\"',\r\n    '\"Segoe UI Emoji\"',\r\n    '\"Segoe UI Symbol\"'\r\n  ].join(','),\r\n  \r\n  // 字号层级\r\n  fontSize: 16, // 基准字号\r\n  \r\n  // 标题\r\n  h1: {\r\n    fontSize: '2.5rem', // 40px\r\n    fontWeight: 600,\r\n    lineHeight: 1.2,\r\n    letterSpacing: '-0.01em'\r\n  },\r\n  h2: {\r\n    fontSize: '2rem', // 32px\r\n    fontWeight: 600,\r\n    lineHeight: 1.3,\r\n    letterSpacing: '-0.01em'\r\n  },\r\n  h3: {\r\n    fontSize: '1.5rem', // 24px\r\n    fontWeight: 600,\r\n    lineHeight: 1.4,\r\n    letterSpacing: '-0.01em'\r\n  },\r\n  h4: {\r\n    fontSize: '1.25rem', // 20px\r\n    fontWeight: 600,\r\n    lineHeight: 1.4,\r\n    letterSpacing: '-0.01em'\r\n  },\r\n  h5: {\r\n    fontSize: '1.125rem', // 18px\r\n    fontWeight: 600,\r\n    lineHeight: 1.5,\r\n    letterSpacing: '-0.01em'\r\n  },\r\n  h6: {\r\n    fontSize: '1rem', // 16px\r\n    fontWeight: 600,\r\n    lineHeight: 1.5,\r\n    letterSpacing: '-0.01em'\r\n  },\r\n  \r\n  // 正文\r\n  body1: {\r\n    fontSize: '1rem', // 16px\r\n    fontWeight: 400,\r\n    lineHeight: 1.5,\r\n    letterSpacing: '0.00938em'\r\n  },\r\n  body2: {\r\n    fontSize: '0.875rem', // 14px\r\n    fontWeight: 400,\r\n    lineHeight: 1.5,\r\n    letterSpacing: '0.00938em'\r\n  },\r\n  \r\n  // 辅助文字\r\n  caption: {\r\n    fontSize: '0.75rem', // 12px\r\n    fontWeight: 400,\r\n    lineHeight: 1.5,\r\n    letterSpacing: '0.00938em'\r\n  },\r\n  \r\n  // 按钮文字\r\n  button: {\r\n    fontSize: '0.875rem', // 14px\r\n    fontWeight: 500,\r\n    lineHeight: 1.5,\r\n    letterSpacing: '0.02857em',\r\n    textTransform: 'none'\r\n  },\r\n  \r\n  // 字重\r\n  fontWeightLight: 300,\r\n  fontWeightRegular: 400,\r\n  fontWeightMedium: 500,\r\n  fontWeightSemiBold: 600,\r\n  fontWeightBold: 700\r\n};\r\n\r\n// 间距系统（基于8px网格系统）\r\nexport const spacing = (factor) => `${8 * factor}px`;\r\n\r\n// 圆角系统\r\nexport const shape = {\r\n  borderRadius: {\r\n    small: '4px',\r\n    medium: '8px',\r\n    large: '12px',\r\n    xl: '16px',\r\n    circle: '50%'\r\n  }\r\n};\r\n\r\n// 阴影系统\r\nexport const shadows = {\r\n  sm: '0 1px 2px 0 rgba(0, 0, 0, 0.05)',\r\n  md: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',\r\n  lg: '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',\r\n  xl: '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',\r\n  '2xl': '0 25px 50px -12px rgba(0, 0, 0, 0.25)',\r\n  inner: 'inset 0 2px 4px 0 rgba(0, 0, 0, 0.06)',\r\n  none: 'none'\r\n};\r\n\r\n// 过渡系统\r\nexport const transitions = {\r\n  easing: {\r\n    easeInOut: 'cubic-bezier(0.4, 0, 0.2, 1)',\r\n    easeOut: 'cubic-bezier(0.0, 0, 0.2, 1)',\r\n    easeIn: 'cubic-bezier(0.4, 0, 1, 1)',\r\n    sharp: 'cubic-bezier(0.4, 0, 0.6, 1)'\r\n  },\r\n  duration: {\r\n    shortest: 150,\r\n    shorter: 200,\r\n    short: 250,\r\n    standard: 300,\r\n    complex: 375,\r\n    enteringScreen: 225,\r\n    leavingScreen: 195\r\n  }\r\n};\r\n\r\n// 断点系统\r\nexport const breakpoints = {\r\n  values: {\r\n    xs: 0,\r\n    sm: 600,\r\n    md: 960,\r\n    lg: 1280,\r\n    xl: 1920\r\n  }\r\n};\r\n\r\n// Z轴系统\r\nexport const zIndex = {\r\n  mobileStepper: 1000,\r\n  speedDial: 1050,\r\n  appBar: 1100,\r\n  drawer: 1200,\r\n  modal: 1300,\r\n  snackbar: 1400,\r\n  tooltip: 1500,\r\n  fab: 1600\r\n};\r\n\r\n// 组件变体\r\nexport const components = {\r\n  // 按钮变体\r\n  MuiButton: {\r\n    styleOverrides: {\r\n      root: {\r\n        borderRadius: shape.borderRadius.medium,\r\n        padding: '8px 16px',\r\n        textTransform: 'none',\r\n        fontWeight: typography.fontWeightMedium,\r\n        boxShadow: 'none',\r\n        '&:hover': {\r\n          boxShadow: shadows.sm\r\n        }\r\n      },\r\n      sizeSmall: {\r\n        padding: '6px 12px',\r\n        fontSize: '0.8125rem'\r\n      },\r\n      sizeLarge: {\r\n        padding: '10px 20px',\r\n        fontSize: '0.9375rem'\r\n      },\r\n      contained: {\r\n        '&:hover': {\r\n          boxShadow: shadows.md\r\n        }\r\n      },\r\n      outlined: {\r\n        borderWidth: '1px',\r\n        '&:hover': {\r\n          borderWidth: '1px'\r\n        }\r\n      },\r\n      text: {\r\n        padding: '8px 12px'\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 卡片变体\r\n  MuiCard: {\r\n    styleOverrides: {\r\n      root: {\r\n        borderRadius: shape.borderRadius.medium,\r\n        boxShadow: shadows.md,\r\n        overflow: 'hidden'\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 纸张变体\r\n  MuiPaper: {\r\n    styleOverrides: {\r\n      root: {\r\n        borderRadius: shape.borderRadius.medium\r\n      },\r\n      elevation1: {\r\n        boxShadow: shadows.sm\r\n      },\r\n      elevation2: {\r\n        boxShadow: shadows.md\r\n      },\r\n      elevation3: {\r\n        boxShadow: shadows.lg\r\n      },\r\n      elevation4: {\r\n        boxShadow: shadows.xl\r\n      },\r\n      elevation5: {\r\n        boxShadow: shadows['2xl']\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 输入框变体\r\n  MuiTextField: {\r\n    styleOverrides: {\r\n      root: {\r\n        '& .MuiOutlinedInput-root': {\r\n          borderRadius: shape.borderRadius.medium\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 对话框变体\r\n  MuiDialog: {\r\n    styleOverrides: {\r\n      paper: {\r\n        borderRadius: shape.borderRadius.large\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 抽屉变体\r\n  MuiDrawer: {\r\n    styleOverrides: {\r\n      paper: {\r\n        borderRadius: 0\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 应用栏变体\r\n  MuiAppBar: {\r\n    styleOverrides: {\r\n      root: {\r\n        boxShadow: shadows.sm\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 图标按钮变体\r\n  MuiIconButton: {\r\n    styleOverrides: {\r\n      root: {\r\n        borderRadius: shape.borderRadius.medium\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 徽章变体\r\n  MuiBadge: {\r\n    styleOverrides: {\r\n      badge: {\r\n        fontWeight: typography.fontWeightMedium,\r\n        fontSize: '0.65rem'\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 提示变体\r\n  MuiTooltip: {\r\n    styleOverrides: {\r\n      tooltip: {\r\n        borderRadius: shape.borderRadius.small,\r\n        fontSize: '0.75rem',\r\n        padding: '6px 12px'\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 标签变体\r\n  MuiChip: {\r\n    styleOverrides: {\r\n      root: {\r\n        borderRadius: shape.borderRadius.medium\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 列表项变体\r\n  MuiListItem: {\r\n    styleOverrides: {\r\n      root: {\r\n        borderRadius: shape.borderRadius.small\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 菜单项变体\r\n  MuiMenuItem: {\r\n    styleOverrides: {\r\n      root: {\r\n        borderRadius: shape.borderRadius.small\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 表格变体\r\n  MuiTableCell: {\r\n    styleOverrides: {\r\n      root: {\r\n        padding: '12px 16px'\r\n      },\r\n      head: {\r\n        fontWeight: typography.fontWeightMedium\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 分割线变体\r\n  MuiDivider: {\r\n    styleOverrides: {\r\n      root: {\r\n        margin: '16px 0'\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 开关变体\r\n  MuiSwitch: {\r\n    styleOverrides: {\r\n      root: {\r\n        padding: 8\r\n      },\r\n      thumb: {\r\n        boxShadow: shadows.sm\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 复选框变体\r\n  MuiCheckbox: {\r\n    styleOverrides: {\r\n      root: {\r\n        padding: 8\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 单选框变体\r\n  MuiRadio: {\r\n    styleOverrides: {\r\n      root: {\r\n        padding: 8\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 标签页变体\r\n  MuiTab: {\r\n    styleOverrides: {\r\n      root: {\r\n        textTransform: 'none',\r\n        fontWeight: typography.fontWeightMedium,\r\n        minWidth: 'auto',\r\n        padding: '12px 16px'\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 警告提示变体\r\n  MuiAlert: {\r\n    styleOverrides: {\r\n      root: {\r\n        borderRadius: shape.borderRadius.medium\r\n      },\r\n      standardSuccess: {\r\n        backgroundColor: 'rgba(16, 185, 129, 0.1)',\r\n        color: colors.success.dark\r\n      },\r\n      standardWarning: {\r\n        backgroundColor: 'rgba(245, 158, 11, 0.1)',\r\n        color: colors.warning.dark\r\n      },\r\n      standardError: {\r\n        backgroundColor: 'rgba(239, 68, 68, 0.1)',\r\n        color: colors.error.dark\r\n      },\r\n      standardInfo: {\r\n        backgroundColor: 'rgba(59, 130, 246, 0.1)',\r\n        color: colors.info.dark\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 进度条变体\r\n  MuiLinearProgress: {\r\n    styleOverrides: {\r\n      root: {\r\n        borderRadius: shape.borderRadius.small,\r\n        height: 6\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 圆形进度条变体\r\n  MuiCircularProgress: {\r\n    styleOverrides: {\r\n      circle: {\r\n        strokeLinecap: 'round'\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 浮动按钮变体\r\n  MuiFab: {\r\n    styleOverrides: {\r\n      root: {\r\n        boxShadow: shadows.md,\r\n        '&:hover': {\r\n          boxShadow: shadows.lg\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \r\n  // 滑块变体\r\n  MuiSlider: {\r\n    styleOverrides: {\r\n      thumb: {\r\n        boxShadow: shadows.sm\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n// 创建设计系统\r\nexport const designSystem = {\r\n  colors,\r\n  typography,\r\n  spacing,\r\n  shape,\r\n  shadows,\r\n  transitions,\r\n  breakpoints,\r\n  zIndex,\r\n  components\r\n};","/**\r\n * 主题配置\r\n * 定义应用程序的主题配置和Monaco编辑器主题\r\n */\r\n\r\nimport { \r\n  typography, \r\n  spacing, \r\n  shape, \r\n  shadows, \r\n  transitions, \r\n  breakpoints, \r\n  zIndex, \r\n  components \r\n} from './designSystem';\r\n\r\n// 基础主题配置\r\nconst baseTheme = {\r\n  typography,\r\n  shape,\r\n  spacing,\r\n  shadows,\r\n  transitions,\r\n  breakpoints: breakpoints.values,\r\n  zIndex,\r\n  components\r\n};\r\n\r\n// 导入颜色系统\r\nimport { colors } from './designSystem';\r\n\r\n// 浅色主题\r\nexport const lightTheme = {\r\n  ...baseTheme,\r\n  palette: {\r\n    mode: 'light',\r\n    primary: colors.primary,\r\n    secondary: colors.secondary,\r\n    error: colors.error,\r\n    warning: colors.warning,\r\n    info: colors.info,\r\n    success: colors.success,\r\n    background: colors.light.background,\r\n    text: colors.light.text,\r\n    divider: colors.light.divider,\r\n    action: {\r\n      active: colors.light.text.secondary,\r\n      hover: 'rgba(107, 114, 128, 0.08)',\r\n      selected: 'rgba(107, 114, 128, 0.16)',\r\n      disabled: 'rgba(107, 114, 128, 0.38)',\r\n      disabledBackground: 'rgba(107, 114, 128, 0.12)',\r\n    },\r\n  },\r\n};\r\n\r\n// 深色主题\r\nexport const darkTheme = {\r\n  ...baseTheme,\r\n  palette: {\r\n    mode: 'dark',\r\n    primary: {\r\n      ...colors.primary,\r\n      main: '#60A5FA', // 深色模式下主色稍微亮一点\r\n    },\r\n    secondary: colors.secondary,\r\n    error: colors.error,\r\n    warning: colors.warning,\r\n    info: {\r\n      ...colors.info,\r\n      main: '#60A5FA', // 深色模式下信息色稍微亮一点\r\n    },\r\n    success: colors.success,\r\n    background: colors.dark.background,\r\n    text: colors.dark.text,\r\n    divider: colors.dark.divider,\r\n    action: {\r\n      active: colors.dark.text.secondary,\r\n      hover: 'rgba(156, 163, 175, 0.08)',\r\n      selected: 'rgba(156, 163, 175, 0.16)',\r\n      disabled: 'rgba(156, 163, 175, 0.38)',\r\n      disabledBackground: 'rgba(156, 163, 175, 0.12)',\r\n    },\r\n  },\r\n};\r\n\r\n// 高对比度主题\r\nexport const highContrastTheme = {\r\n  ...baseTheme,\r\n  palette: {\r\n    mode: 'dark',\r\n    primary: {\r\n      main: '#FFFFFF',\r\n      light: '#FFFFFF',\r\n      dark: '#FFFFFF',\r\n      contrastText: '#000000',\r\n    },\r\n    secondary: {\r\n      main: '#FFFF00',\r\n      contrastText: '#000000',\r\n    },\r\n    error: {\r\n      main: '#FF0000',\r\n      contrastText: '#FFFFFF',\r\n    },\r\n    warning: {\r\n      main: '#FFFF00',\r\n      contrastText: '#000000',\r\n    },\r\n    info: {\r\n      main: '#00FFFF',\r\n      contrastText: '#000000',\r\n    },\r\n    success: {\r\n      main: '#00FF00',\r\n      contrastText: '#000000',\r\n    },\r\n    background: colors.highContrast.background,\r\n    text: colors.highContrast.text,\r\n    divider: colors.highContrast.divider,\r\n    action: {\r\n      active: '#FFFFFF',\r\n      hover: 'rgba(255, 255, 255, 0.2)',\r\n      selected: 'rgba(255, 255, 255, 0.4)',\r\n      disabled: 'rgba(255, 255, 255, 0.5)',\r\n      disabledBackground: 'rgba(255, 255, 255, 0.12)',\r\n    },\r\n  },\r\n};\r\n\r\n// 柔和主题\r\nexport const softTheme = {\r\n  ...baseTheme,\r\n  palette: {\r\n    mode: 'light',\r\n    primary: {\r\n      main: '#7C3AED',\r\n      light: '#A78BFA',\r\n      dark: '#5B21B6',\r\n      contrastText: '#FFFFFF',\r\n    },\r\n    secondary: {\r\n      main: '#EC4899',\r\n      light: '#F9A8D4',\r\n      dark: '#BE185D',\r\n      contrastText: '#FFFFFF',\r\n    },\r\n    error: colors.error,\r\n    warning: colors.warning,\r\n    info: colors.info,\r\n    success: colors.success,\r\n    background: {\r\n      default: '#F5F3FF',\r\n      paper: '#FFFFFF',\r\n      secondary: '#F3F4F6',\r\n    },\r\n    text: {\r\n      primary: '#1F2937',\r\n      secondary: '#6B7280',\r\n      disabled: '#9CA3AF',\r\n    },\r\n    divider: '#E5E7EB',\r\n    action: {\r\n      active: '#6B7280',\r\n      hover: 'rgba(107, 114, 128, 0.08)',\r\n      selected: 'rgba(107, 114, 128, 0.16)',\r\n      disabled: 'rgba(107, 114, 128, 0.38)',\r\n      disabledBackground: 'rgba(107, 114, 128, 0.12)',\r\n    },\r\n  },\r\n};\r\n\r\n// 主题列表\r\nexport const themes = {\r\n  light: {\r\n    id: 'light',\r\n    name: '浅色',\r\n    theme: lightTheme,\r\n    monacoTheme: 'vs-light',\r\n  },\r\n  dark: {\r\n    id: 'dark',\r\n    name: '深色',\r\n    theme: darkTheme,\r\n    monacoTheme: 'vs-dark',\r\n  },\r\n  highContrast: {\r\n    id: 'highContrast',\r\n    name: '高对比度',\r\n    theme: highContrastTheme,\r\n    monacoTheme: 'hc-black',\r\n  },\r\n  soft: {\r\n    id: 'soft',\r\n    name: '柔和',\r\n    theme: softTheme,\r\n    monacoTheme: 'vs-light',\r\n  },\r\n};\r\n\r\n// 获取系统首选主题\r\nexport const getPreferredTheme = () => {\r\n  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\r\n    return 'dark';\r\n  }\r\n  return 'light';\r\n};\r\n\r\n// 获取Monaco编辑器主题\r\nexport const getMonacoTheme = (themeId) => {\r\n  return themes[themeId]?.monacoTheme || 'vs-light';\r\n};","/**\r\n * 主题工具函数\r\n * 提供主题相关的工具函数\r\n */\r\n\r\n/**\r\n * 获取系统首选主题\r\n * @returns {string} - 主题ID\r\n */\r\nexport const getSystemPreferredTheme = () => {\r\n  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\r\n    return 'dark';\r\n  }\r\n  return 'light';\r\n};\r\n\r\n/**\r\n * 监听系统主题变化\r\n * @param {Function} callback - 主题变化回调函数\r\n * @returns {Function} - 取消监听函数\r\n */\r\nexport const watchSystemThemeChanges = (callback) => {\r\n  if (!window.matchMedia) return () => {};\r\n  \r\n  const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\r\n  \r\n  const handleChange = (e) => {\r\n    const newTheme = e.matches ? 'dark' : 'light';\r\n    callback(newTheme);\r\n  };\r\n  \r\n  // 添加监听器\r\n  if (mediaQuery.addEventListener) {\r\n    mediaQuery.addEventListener('change', handleChange);\r\n  } else if (mediaQuery.addListener) {\r\n    // 兼容旧版浏览器\r\n    mediaQuery.addListener(handleChange);\r\n  }\r\n  \r\n  // 返回取消监听函数\r\n  return () => {\r\n    if (mediaQuery.removeEventListener) {\r\n      mediaQuery.removeEventListener('change', handleChange);\r\n    } else if (mediaQuery.removeListener) {\r\n      mediaQuery.removeListener(handleChange);\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * 应用CSS变量主题\r\n * @param {string} themeId - 主题ID\r\n */\r\nexport const applyCssVariables = (themeId) => {\r\n  // 添加过渡效果，避免主题切换时的闪烁\r\n  document.documentElement.style.transition = 'background-color 0.3s ease, color 0.3s ease';\r\n  document.body.style.transition = 'background-color 0.3s ease, color 0.3s ease';\r\n  \r\n  // 设置文档根元素的数据属性\r\n  document.documentElement.setAttribute('data-theme', themeId);\r\n  \r\n  // 根据主题ID应用不同的CSS变量\r\n  switch (themeId) {\r\n    case 'dark':\r\n      document.documentElement.style.setProperty('--background-color', '#1F2937');\r\n      document.documentElement.style.setProperty('--text-color', '#F9FAFB');\r\n      document.documentElement.style.setProperty('--primary-color', '#60A5FA');\r\n      document.documentElement.style.setProperty('--secondary-color', '#10B981');\r\n      document.documentElement.style.setProperty('--border-color', '#374151');\r\n      break;\r\n    case 'highContrast':\r\n      document.documentElement.style.setProperty('--background-color', '#000000');\r\n      document.documentElement.style.setProperty('--text-color', '#FFFFFF');\r\n      document.documentElement.style.setProperty('--primary-color', '#FFFFFF');\r\n      document.documentElement.style.setProperty('--secondary-color', '#FFFF00');\r\n      document.documentElement.style.setProperty('--border-color', '#FFFFFF');\r\n      break;\r\n    case 'soft':\r\n      document.documentElement.style.setProperty('--background-color', '#F5F3FF');\r\n      document.documentElement.style.setProperty('--text-color', '#1F2937');\r\n      document.documentElement.style.setProperty('--primary-color', '#7C3AED');\r\n      document.documentElement.style.setProperty('--secondary-color', '#EC4899');\r\n      document.documentElement.style.setProperty('--border-color', '#E5E7EB');\r\n      break;\r\n    default: // light\r\n      document.documentElement.style.setProperty('--background-color', '#FFFFFF');\r\n      document.documentElement.style.setProperty('--text-color', '#111827');\r\n      document.documentElement.style.setProperty('--primary-color', '#3B82F6');\r\n      document.documentElement.style.setProperty('--secondary-color', '#10B981');\r\n      document.documentElement.style.setProperty('--border-color', '#E5E7EB');\r\n      break;\r\n  }\r\n  \r\n  // 300ms后移除过渡效果，避免影响其他操作\r\n  setTimeout(() => {\r\n    document.documentElement.style.transition = '';\r\n    document.body.style.transition = '';\r\n  }, 300);\r\n};","/**\r\n * 错误处理服务\r\n * 提供全局错误捕获和处理功能\r\n */\r\n\r\n// 错误类型枚举\r\nexport const ErrorType = {\r\n  JSON_PARSE: 'JSON_PARSE',\r\n  JSON_VALIDATION: 'JSON_VALIDATION',\r\n  FILE_OPERATION: 'FILE_OPERATION',\r\n  NETWORK: 'NETWORK',\r\n  EDITOR: 'EDITOR',\r\n  SCHEMA: 'SCHEMA',\r\n  UNKNOWN: 'UNKNOWN'\r\n};\r\n\r\n// 错误严重程度枚举\r\nexport const ErrorSeverity = {\r\n  INFO: 'info',\r\n  WARNING: 'warning',\r\n  ERROR: 'error',\r\n  FATAL: 'fatal'\r\n};\r\n\r\n/**\r\n * 应用错误类\r\n */\r\nexport class AppError extends Error {\r\n  /**\r\n   * 构造函数\r\n   * @param {string} message - 错误消息\r\n   * @param {string} type - 错误类型\r\n   * @param {string} severity - 错误严重程度\r\n   * @param {Error} originalError - 原始错误\r\n   */\r\n  constructor(message, type = ErrorType.UNKNOWN, severity = ErrorSeverity.ERROR, originalError = null) {\r\n    super(message);\r\n    this.name = 'AppError';\r\n    this.type = type;\r\n    this.severity = severity;\r\n    this.originalError = originalError;\r\n    this.timestamp = new Date();\r\n    this.handled = false;\r\n  }\r\n}\r\n\r\n/**\r\n * JSON解析错误\r\n */\r\nexport class JsonParseError extends AppError {\r\n  /**\r\n   * 构造函数\r\n   * @param {string} message - 错误消息\r\n   * @param {Error} originalError - 原始错误\r\n   * @param {number} line - 行号\r\n   * @param {number} column - 列号\r\n   */\r\n  constructor(message, originalError = null, line = null, column = null) {\r\n    super(message, ErrorType.JSON_PARSE, ErrorSeverity.ERROR, originalError);\r\n    this.name = 'JsonParseError';\r\n    this.line = line;\r\n    this.column = column;\r\n  }\r\n}\r\n\r\n/**\r\n * 文件操作错误\r\n */\r\nexport class FileOperationError extends AppError {\r\n  /**\r\n   * 构造函数\r\n   * @param {string} message - 错误消息\r\n   * @param {string} operation - 操作类型（read, write, delete等）\r\n   * @param {string} fileName - 文件名\r\n   * @param {Error} originalError - 原始错误\r\n   */\r\n  constructor(message, operation, fileName = null, originalError = null) {\r\n    super(message, ErrorType.FILE_OPERATION, ErrorSeverity.ERROR, originalError);\r\n    this.name = 'FileOperationError';\r\n    this.operation = operation;\r\n    this.fileName = fileName;\r\n  }\r\n}\r\n\r\n/**\r\n * Schema错误\r\n */\r\nexport class SchemaError extends AppError {\r\n  /**\r\n   * 构造函数\r\n   * @param {string} message - 错误消息\r\n   * @param {string} schemaId - Schema ID\r\n   * @param {Error} originalError - 原始错误\r\n   */\r\n  constructor(message, schemaId = null, originalError = null) {\r\n    super(message, ErrorType.SCHEMA, ErrorSeverity.WARNING, originalError);\r\n    this.name = 'SchemaError';\r\n    this.schemaId = schemaId;\r\n  }\r\n}\r\n\r\n/**\r\n * 错误处理服务\r\n */\r\nexport class ErrorService {\r\n  constructor() {\r\n    this.listeners = [];\r\n    this.errorHistory = [];\r\n    this.maxHistorySize = 50;\r\n    \r\n    // 绑定方法\r\n    this.handleError = this.handleError.bind(this);\r\n    this.addListener = this.addListener.bind(this);\r\n    this.removeListener = this.removeListener.bind(this);\r\n    this.getErrorHistory = this.getErrorHistory.bind(this);\r\n    this.clearErrorHistory = this.clearErrorHistory.bind(this);\r\n    \r\n    // 设置全局错误处理\r\n    this.setupGlobalHandlers();\r\n  }\r\n  \r\n  /**\r\n   * 设置全局错误处理器\r\n   */\r\n  setupGlobalHandlers() {\r\n    // 处理未捕获的Promise错误\r\n    window.addEventListener('unhandledrejection', (event) => {\r\n      const error = event.reason;\r\n      this.handleError(\r\n        new AppError(\r\n          `未处理的Promise错误: ${error.message || '未知错误'}`,\r\n          ErrorType.UNKNOWN,\r\n          ErrorSeverity.ERROR,\r\n          error\r\n        )\r\n      );\r\n    });\r\n    \r\n    // 处理全局错误\r\n    window.addEventListener('error', (event) => {\r\n      // 忽略资源加载错误\r\n      if (event.error) {\r\n        this.handleError(\r\n          new AppError(\r\n            `全局错误: ${event.error.message || '未知错误'}`,\r\n            ErrorType.UNKNOWN,\r\n            ErrorSeverity.ERROR,\r\n            event.error\r\n          )\r\n        );\r\n      }\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * 处理错误\r\n   * @param {Error|AppError} error - 错误对象\r\n   * @returns {AppError} - 处理后的错误对象\r\n   */\r\n  handleError(error) {\r\n    // 如果不是AppError，转换为AppError\r\n    if (!(error instanceof AppError)) {\r\n      if (error instanceof SyntaxError && error.message.includes('JSON')) {\r\n        error = new JsonParseError(error.message, error);\r\n      } else {\r\n        error = new AppError(error.message, ErrorType.UNKNOWN, ErrorSeverity.ERROR, error);\r\n      }\r\n    }\r\n    \r\n    // 标记为已处理\r\n    error.handled = true;\r\n    \r\n    // 添加到历史记录\r\n    this.addToHistory(error);\r\n    \r\n    // 通知监听器\r\n    this.notifyListeners(error);\r\n    \r\n    // 记录到控制台\r\n    this.logError(error);\r\n    \r\n    return error;\r\n  }\r\n  \r\n  /**\r\n   * 添加错误到历史记录\r\n   * @param {AppError} error - 错误对象\r\n   */\r\n  addToHistory(error) {\r\n    this.errorHistory.unshift(error);\r\n    \r\n    // 限制历史记录大小\r\n    if (this.errorHistory.length > this.maxHistorySize) {\r\n      this.errorHistory.pop();\r\n    }\r\n    \r\n    // 尝试保存到本地存储\r\n    try {\r\n      const serializedErrors = this.errorHistory.map(err => ({\r\n        message: err.message,\r\n        type: err.type,\r\n        severity: err.severity,\r\n        timestamp: err.timestamp.toISOString(),\r\n        name: err.name\r\n      }));\r\n      \r\n      localStorage.setItem('pdx-json-editor-errors', JSON.stringify(serializedErrors));\r\n    } catch (e) {\r\n      console.error('保存错误历史失败:', e);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 获取错误历史记录\r\n   * @returns {AppError[]} - 错误历史记录\r\n   */\r\n  getErrorHistory() {\r\n    return [...this.errorHistory];\r\n  }\r\n  \r\n  /**\r\n   * 清除错误历史记录\r\n   */\r\n  clearErrorHistory() {\r\n    this.errorHistory = [];\r\n    \r\n    try {\r\n      localStorage.removeItem('pdx-json-editor-errors');\r\n    } catch (e) {\r\n      console.error('清除错误历史失败:', e);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 添加错误监听器\r\n   * @param {Function} listener - 监听器函数\r\n   */\r\n  addListener(listener) {\r\n    if (typeof listener === 'function' && !this.listeners.includes(listener)) {\r\n      this.listeners.push(listener);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 移除错误监听器\r\n   * @param {Function} listener - 监听器函数\r\n   */\r\n  removeListener(listener) {\r\n    const index = this.listeners.indexOf(listener);\r\n    if (index !== -1) {\r\n      this.listeners.splice(index, 1);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 通知所有监听器\r\n   * @param {AppError} error - 错误对象\r\n   */\r\n  notifyListeners(error) {\r\n    this.listeners.forEach(listener => {\r\n      try {\r\n        listener(error);\r\n      } catch (e) {\r\n        console.error('错误监听器执行失败:', e);\r\n      }\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * 记录错误到控制台\r\n   * @param {AppError} error - 错误对象\r\n   */\r\n  logError(error) {\r\n    const logMethod = error.severity === ErrorSeverity.FATAL || error.severity === ErrorSeverity.ERROR\r\n      ? console.error\r\n      : error.severity === ErrorSeverity.WARNING\r\n        ? console.warn\r\n        : console.info;\r\n    \r\n    logMethod(\r\n      `[${error.timestamp.toLocaleTimeString()}] ${error.name}: ${error.message}`,\r\n      error.originalError || ''\r\n    );\r\n  }\r\n  \r\n  /**\r\n   * 从JSON解析错误中提取行号和列号\r\n   * @param {Error} error - 原始错误\r\n   * @returns {{line: number, column: number}|null} - 行号和列号\r\n   */\r\n  static extractPositionFromJsonError(error) {\r\n    if (!error || !error.message) return null;\r\n    \r\n    // 尝试从错误消息中提取位置信息\r\n    const positionMatch = error.message.match(/at position (\\d+)/i);\r\n    if (positionMatch && positionMatch[1]) {\r\n      const position = parseInt(positionMatch[1], 10);\r\n      \r\n      // 计算行号和列号\r\n      // 这需要原始JSON文本，但我们可能没有\r\n      // 返回一个近似值\r\n      return {\r\n        position,\r\n        line: null,\r\n        column: null\r\n      };\r\n    }\r\n    \r\n    // 尝试从错误消息中提取行号和列号\r\n    const lineColMatch = error.message.match(/at line (\\d+) column (\\d+)/i);\r\n    if (lineColMatch && lineColMatch[1] && lineColMatch[2]) {\r\n      return {\r\n        line: parseInt(lineColMatch[1], 10),\r\n        column: parseInt(lineColMatch[2], 10)\r\n      };\r\n    }\r\n    \r\n    return null;\r\n  }\r\n  \r\n  /**\r\n   * 计算JSON文本中位置对应的行号和列号\r\n   * @param {string} jsonText - JSON文本\r\n   * @param {number} position - 位置\r\n   * @returns {{line: number, column: number}} - 行号和列号\r\n   */\r\n  static calculateLineAndColumn(jsonText, position) {\r\n    if (!jsonText || position === undefined || position === null) {\r\n      return { line: null, column: null };\r\n    }\r\n    \r\n    const lines = jsonText.substring(0, position).split('\\n');\r\n    const line = lines.length;\r\n    const column = lines[lines.length - 1].length + 1;\r\n    \r\n    return { line, column };\r\n  }\r\n  \r\n  /**\r\n   * 从错误中提取用户友好的消息\r\n   * @param {Error|AppError} error - 错误对象\r\n   * @returns {string} - 用户友好的错误消息\r\n   */\r\n  static getFriendlyMessage(error) {\r\n    if (!error) return '发生未知错误';\r\n    \r\n    // 如果是AppError，直接返回消息\r\n    if (error instanceof AppError) {\r\n      return error.message;\r\n    }\r\n    \r\n    // 处理常见错误类型\r\n    if (error instanceof SyntaxError && error.message.includes('JSON')) {\r\n      return `JSON语法错误: ${error.message}`;\r\n    }\r\n    \r\n    if (error instanceof TypeError) {\r\n      return `类型错误: ${error.message}`;\r\n    }\r\n    \r\n    if (error instanceof ReferenceError) {\r\n      return `引用错误: ${error.message}`;\r\n    }\r\n    \r\n    // 默认消息\r\n    return error.message || '发生未知错误';\r\n  }\r\n}\r\n\r\n// 创建单例实例\r\nconst errorService = new ErrorService();\r\n\r\nexport default errorService;","/**\r\n * 持久化服务\r\n * 提供编辑状态持久化功能\r\n */\r\n\r\nimport errorService, { FileOperationError } from './errorService';\r\n\r\n// 本地存储键\r\nconst STORAGE_KEYS = {\r\n  EDITOR_CONTENT: 'pdx-json-editor-content',\r\n  EDITOR_FILE: 'pdx-json-editor-file',\r\n  EDITOR_SETTINGS: 'pdx-json-editor-settings',\r\n  EDITOR_HISTORY: 'pdx-json-editor-recent-files', // Changed to match StateService\r\n  EDITOR_THEME: 'pdx-json-editor-theme',\r\n  EDITOR_SCHEMAS: 'pdx-json-editor-schemas'\r\n};\r\n\r\n// 最大历史记录数量\r\nconst MAX_HISTORY_SIZE = 10;\r\n\r\n/**\r\n * 持久化服务\r\n */\r\nexport class PersistenceService {\r\n  /**\r\n   * 保存编辑器内容\r\n   * @param {string} content - 编辑器内容\r\n   * @param {Object} fileInfo - 文件信息\r\n   * @returns {boolean} - 是否保存成功\r\n   */\r\n  static saveEditorContent(content, fileInfo = null) {\r\n    try {\r\n      // 检查内容大小\r\n      const contentSize = new Blob([content]).size;\r\n      if (contentSize > 5 * 1024 * 1024) { // 5MB\r\n        throw new Error('内容过大，无法保存到本地存储');\r\n      }\r\n      \r\n      // 保存内容\r\n      localStorage.setItem(STORAGE_KEYS.EDITOR_CONTENT, content);\r\n      \r\n      // 保存文件信息\r\n      if (fileInfo) {\r\n        const fileData = {\r\n          name: fileInfo.name,\r\n          lastModified: fileInfo.lastModified,\r\n          size: fileInfo.size,\r\n          type: fileInfo.type,\r\n          path: fileInfo.path\r\n        };\r\n        \r\n        localStorage.setItem(STORAGE_KEYS.EDITOR_FILE, JSON.stringify(fileData));\r\n      }\r\n      \r\n      return true;\r\n    } catch (error) {\r\n      // 检查是否是配额错误\r\n      const isQuotaError = error.name === 'QuotaExceededError' || \r\n                           error.message.includes('quota') ||\r\n                           error.message.includes('storage');\r\n      \r\n      errorService.handleError(\r\n        new FileOperationError(\r\n          isQuotaError ? '文件过大，超出本地存储限制' : '保存编辑器内容到本地存储失败',\r\n          'write',\r\n          null,\r\n          error\r\n        )\r\n      );\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 加载编辑器内容\r\n   * @returns {Object|null} - 编辑器内容和文件信息\r\n   */\r\n  static loadEditorContent() {\r\n    try {\r\n      const content = localStorage.getItem(STORAGE_KEYS.EDITOR_CONTENT);\r\n      const fileInfoStr = localStorage.getItem(STORAGE_KEYS.EDITOR_FILE);\r\n      \r\n      if (!content) {\r\n        return null;\r\n      }\r\n      \r\n      const fileInfo = fileInfoStr ? JSON.parse(fileInfoStr) : null;\r\n      \r\n      return { content, fileInfo };\r\n    } catch (error) {\r\n      errorService.handleError(\r\n        new FileOperationError(\r\n          '从本地存储加载编辑器内容失败',\r\n          'read',\r\n          null,\r\n          error\r\n        )\r\n      );\r\n      return null;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 清除编辑器内容\r\n   * @returns {boolean} - 是否清除成功\r\n   */\r\n  static clearEditorContent() {\r\n    try {\r\n      localStorage.removeItem(STORAGE_KEYS.EDITOR_CONTENT);\r\n      localStorage.removeItem(STORAGE_KEYS.EDITOR_FILE);\r\n      return true;\r\n    } catch (error) {\r\n      errorService.handleError(\r\n        new FileOperationError(\r\n          '清除编辑器内容失败',\r\n          'delete',\r\n          null,\r\n          error\r\n        )\r\n      );\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 保存编辑器设置\r\n   * @param {Object} settings - 编辑器设置\r\n   * @returns {boolean} - 是否保存成功\r\n   */\r\n  static saveEditorSettings(settings) {\r\n    try {\r\n      localStorage.setItem(STORAGE_KEYS.EDITOR_SETTINGS, JSON.stringify(settings));\r\n      return true;\r\n    } catch (error) {\r\n      errorService.handleError(\r\n        new FileOperationError(\r\n          '保存编辑器设置失败',\r\n          'write',\r\n          null,\r\n          error\r\n        )\r\n      );\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 加载编辑器设置\r\n   * @returns {Object|null} - 编辑器设置\r\n   */\r\n  static loadEditorSettings() {\r\n    try {\r\n      const settingsStr = localStorage.getItem(STORAGE_KEYS.EDITOR_SETTINGS);\r\n      return settingsStr ? JSON.parse(settingsStr) : null;\r\n    } catch (error) {\r\n      errorService.handleError(\r\n        new FileOperationError(\r\n          '加载编辑器设置失败',\r\n          'read',\r\n          null,\r\n          error\r\n        )\r\n      );\r\n      return null;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 保存主题设置\r\n   * @param {string} theme - 主题ID\r\n   * @returns {boolean} - 是否保存成功\r\n   */\r\n  static saveTheme(theme) {\r\n    try {\r\n      localStorage.setItem(STORAGE_KEYS.EDITOR_THEME, theme);\r\n      return true;\r\n    } catch (error) {\r\n      errorService.handleError(\r\n        new FileOperationError(\r\n          '保存主题设置失败',\r\n          'write',\r\n          null,\r\n          error\r\n        )\r\n      );\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 加载主题设置\r\n   * @returns {string|null} - 主题ID\r\n   */\r\n  static loadTheme() {\r\n    try {\r\n      return localStorage.getItem(STORAGE_KEYS.EDITOR_THEME);\r\n    } catch (error) {\r\n      errorService.handleError(\r\n        new FileOperationError(\r\n          '加载主题设置失败',\r\n          'read',\r\n          null,\r\n          error\r\n        )\r\n      );\r\n      return null;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 添加文件到历史记录\r\n   * @param {Object} fileInfo - 文件信息\r\n   * @returns {boolean} - 是否添加成功\r\n   */\r\n  static addFileToHistory(fileInfo) {\r\n    try {\r\n      if (!fileInfo || !fileInfo.name) {\r\n        console.warn('添加文件到历史记录失败: 无效的文件信息');\r\n        return false;\r\n      }\r\n      \r\n      console.log('添加文件到历史记录:', fileInfo.name);\r\n      \r\n      // 加载现有历史记录\r\n      const historyStr = localStorage.getItem(STORAGE_KEYS.EDITOR_HISTORY);\r\n      let history = [];\r\n      \r\n      try {\r\n        if (historyStr) {\r\n          history = JSON.parse(historyStr);\r\n          if (!Array.isArray(history)) {\r\n            console.warn('历史记录格式不正确，重置为空数组');\r\n            history = [];\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.error('解析历史记录失败:', e);\r\n        history = [];\r\n      }\r\n      \r\n      // 创建文件记录\r\n      const fileRecord = {\r\n        name: fileInfo.name,\r\n        path: fileInfo.path || '',\r\n        lastModified: fileInfo.lastModified || Date.now(),\r\n        size: fileInfo.size || 0,\r\n        timestamp: Date.now()\r\n      };\r\n      \r\n      // 对于小文件（小于500KB），保存内容以便直接打开\r\n      if (fileInfo.content && fileInfo.size && fileInfo.size < 500 * 1024) {\r\n        fileRecord.content = fileInfo.content;\r\n      }\r\n      \r\n      // 检查是否已存在\r\n      const existingIndex = history.findIndex(item => \r\n        item.name === fileRecord.name && item.path === fileRecord.path\r\n      );\r\n      \r\n      if (existingIndex !== -1) {\r\n        // 更新现有记录\r\n        history[existingIndex] = fileRecord;\r\n        console.log('更新现有记录:', fileRecord.name);\r\n      } else {\r\n        // 添加新记录\r\n        history.unshift(fileRecord);\r\n        console.log('添加新记录:', fileRecord.name);\r\n        \r\n        // 限制历史记录大小\r\n        if (history.length > MAX_HISTORY_SIZE) {\r\n          history.pop();\r\n        }\r\n      }\r\n      \r\n      // 保存历史记录\r\n      const historyJson = JSON.stringify(history);\r\n      localStorage.setItem(STORAGE_KEYS.EDITOR_HISTORY, historyJson);\r\n      console.log('保存历史记录成功, 当前记录数:', history.length);\r\n      \r\n      // 触发存储事件，以便其他组件可以更新\r\n      window.dispatchEvent(new StorageEvent('storage', {\r\n        key: STORAGE_KEYS.EDITOR_HISTORY,\r\n        newValue: historyJson\r\n      }));\r\n      \r\n      return true;\r\n    } catch (error) {\r\n      console.error('添加文件到历史记录失败:', error);\r\n      errorService.handleError(\r\n        new FileOperationError(\r\n          '添加文件到历史记录失败',\r\n          'write',\r\n          fileInfo?.name,\r\n          error\r\n        )\r\n      );\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 获取文件历史记录\r\n   * @returns {Array} - 文件历史记录\r\n   */\r\n  static getFileHistory() {\r\n    try {\r\n      console.log('获取文件历史记录');\r\n      const historyStr = localStorage.getItem(STORAGE_KEYS.EDITOR_HISTORY);\r\n      console.log('历史记录原始数据:', historyStr);\r\n      \r\n      if (!historyStr) {\r\n        console.log('没有找到历史记录');\r\n        return [];\r\n      }\r\n      \r\n      try {\r\n        const history = JSON.parse(historyStr);\r\n        if (!Array.isArray(history)) {\r\n          console.warn('历史记录格式不正确，应为数组');\r\n          return [];\r\n        }\r\n        console.log('历史记录解析成功, 记录数:', history.length);\r\n        return history;\r\n      } catch (parseError) {\r\n        console.error('解析历史记录失败:', parseError);\r\n        return [];\r\n      }\r\n    } catch (error) {\r\n      console.error('获取文件历史记录失败:', error);\r\n      errorService.handleError(\r\n        new FileOperationError(\r\n          '获取文件历史记录失败',\r\n          'read',\r\n          null,\r\n          error\r\n        )\r\n      );\r\n      return [];\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 清除文件历史记录\r\n   * @returns {boolean} - 是否清除成功\r\n   */\r\n  static clearFileHistory() {\r\n    try {\r\n      localStorage.removeItem(STORAGE_KEYS.EDITOR_HISTORY);\r\n      return true;\r\n    } catch (error) {\r\n      errorService.handleError(\r\n        new FileOperationError(\r\n          '清除文件历史记录失败',\r\n          'delete',\r\n          null,\r\n          error\r\n        )\r\n      );\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 保存JSON Schema\r\n   * @param {Array} schemas - JSON Schema列表\r\n   * @returns {boolean} - 是否保存成功\r\n   */\r\n  static saveSchemas(schemas) {\r\n    try {\r\n      localStorage.setItem(STORAGE_KEYS.EDITOR_SCHEMAS, JSON.stringify(schemas));\r\n      return true;\r\n    } catch (error) {\r\n      errorService.handleError(\r\n        new FileOperationError(\r\n          '保存JSON Schema失败',\r\n          'write',\r\n          null,\r\n          error\r\n        )\r\n      );\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 加载JSON Schema\r\n   * @returns {Array|null} - JSON Schema列表\r\n   */\r\n  static loadSchemas() {\r\n    try {\r\n      const schemasStr = localStorage.getItem(STORAGE_KEYS.EDITOR_SCHEMAS);\r\n      return schemasStr ? JSON.parse(schemasStr) : null;\r\n    } catch (error) {\r\n      errorService.handleError(\r\n        new FileOperationError(\r\n          '加载JSON Schema失败',\r\n          'read',\r\n          null,\r\n          error\r\n        )\r\n      );\r\n      return null;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * 检查本地存储是否可用\r\n   * @returns {boolean} - 本地存储是否可用\r\n   */\r\n  static isStorageAvailable() {\r\n    try {\r\n      const testKey = '__storage_test__';\r\n      localStorage.setItem(testKey, testKey);\r\n      localStorage.removeItem(testKey);\r\n      return true;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\n// 导出单例实例\r\nexport default PersistenceService;","/**\r\n * 主题上下文\r\n * 提供主题状态和切换功能\r\n */\r\n\r\nimport { createContext } from 'preact';\r\nimport { useState, useEffect, useContext } from 'preact/hooks';\r\nimport { createTheme } from '@mui/material/styles';\r\nimport { themes } from './themeConfig';\r\nimport { getSystemPreferredTheme, watchSystemThemeChanges, applyCssVariables } from './themeUtils';\r\nimport PersistenceService from '../services/persistenceService';\r\nimport errorService from '../services/errorService';\r\n\r\n// 创建主题上下文\r\nexport const ThemeContext = createContext({\r\n  themeId: 'light',\r\n  theme: createTheme(themes.light.theme),\r\n  monacoTheme: 'vs-light',\r\n  setThemeId: () => {},\r\n  toggleTheme: () => {},\r\n  availableThemes: themes,\r\n});\r\n\r\n// 主题提供者组件\r\nexport const ThemeContextProvider = ({ children }) => {\r\n  const [themeId, setThemeId] = useState('light');\r\n  \r\n  // 从本地存储加载主题\r\n  useEffect(() => {\r\n    try {\r\n      const savedThemeId = PersistenceService.loadTheme();\r\n      const savedThemeMode = localStorage.getItem('pdx-json-editor-theme-mode');\r\n      \r\n      if (savedThemeMode === 'system') {\r\n        // 如果设置为跟随系统，则使用系统主题\r\n        const systemTheme = getSystemPreferredTheme();\r\n        setThemeId(systemTheme);\r\n      } else if (savedThemeId && themes[savedThemeId]) {\r\n        // 如果有保存的主题，则使用保存的主题\r\n        setThemeId(savedThemeId);\r\n      } else {\r\n        // 默认使用系统主题\r\n        const systemTheme = getSystemPreferredTheme();\r\n        setThemeId(systemTheme);\r\n      }\r\n    } catch (error) {\r\n      errorService.handleError(error);\r\n      \r\n      // 出错时使用系统主题\r\n      const systemTheme = getSystemPreferredTheme();\r\n      setThemeId(systemTheme);\r\n    }\r\n  }, []);\r\n  \r\n  // 保存主题到本地存储\r\n  useEffect(() => {\r\n    try {\r\n      PersistenceService.saveTheme(themeId);\r\n      \r\n      // 应用CSS变量\r\n      applyCssVariables(themeId);\r\n    } catch (error) {\r\n      errorService.handleError(error);\r\n    }\r\n  }, [themeId]);\r\n  \r\n  // 监听系统主题变化\r\n  useEffect(() => {\r\n    const themeMode = localStorage.getItem('pdx-json-editor-theme-mode');\r\n    \r\n    // 只有在设置为跟随系统时才监听系统主题变化\r\n    if (themeMode === 'system') {\r\n      const unwatch = watchSystemThemeChanges((newTheme) => {\r\n        setThemeId(newTheme);\r\n      });\r\n      \r\n      return unwatch;\r\n    }\r\n  }, []);\r\n  \r\n  // 切换主题\r\n  const toggleTheme = () => {\r\n    setThemeId(prevThemeId => {\r\n      if (prevThemeId === 'light') return 'dark';\r\n      if (prevThemeId === 'dark') return 'light';\r\n      return 'light';\r\n    });\r\n    \r\n    // 设置为手动模式\r\n    localStorage.setItem('pdx-json-editor-theme-mode', 'manual');\r\n  };\r\n  \r\n  // 设置主题模式（手动或跟随系统）\r\n  const setThemeMode = (mode) => {\r\n    if (mode === 'system') {\r\n      // 设置为跟随系统\r\n      localStorage.setItem('pdx-json-editor-theme-mode', 'system');\r\n      \r\n      // 立即应用系统主题\r\n      const systemTheme = getSystemPreferredTheme();\r\n      setThemeId(systemTheme);\r\n    } else {\r\n      // 设置为手动模式\r\n      localStorage.setItem('pdx-json-editor-theme-mode', 'manual');\r\n    }\r\n  };\r\n  \r\n  // 创建MUI主题\r\n  const theme = createTheme(themes[themeId]?.theme || themes.light.theme);\r\n  \r\n  // 获取Monaco编辑器主题\r\n  const monacoTheme = themes[themeId]?.monacoTheme || 'vs-light';\r\n  \r\n  // 上下文值\r\n  const contextValue = {\r\n    themeId,\r\n    theme,\r\n    monacoTheme,\r\n    setThemeId,\r\n    toggleTheme,\r\n    setThemeMode,\r\n    availableThemes: themes,\r\n  };\r\n  \r\n  return (\r\n    <ThemeContext.Provider value={contextValue}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n};\r\n\r\n// 使用主题的Hook\r\nexport const useTheme = () => useContext(ThemeContext);","import { ThemeProvider as MuiThemeProvider } from '@mui/material/styles';\r\nimport { ThemeContextProvider, useTheme } from '../theme/ThemeContext.jsx';\r\n\r\n/**\r\n * 主题提供者组件\r\n * 提供主题状态和MUI主题提供者\r\n */\r\nexport function ThemeProvider({ children }) {\r\n  return (\r\n    <ThemeContextProvider>\r\n      <ThemedContent>\r\n        {children}\r\n      </ThemedContent>\r\n    </ThemeContextProvider>\r\n  );\r\n}\r\n\r\n/**\r\n * 主题内容组件\r\n * 使用主题上下文提供MUI主题\r\n */\r\nfunction ThemedContent({ children }) {\r\n  const { theme } = useTheme();\r\n  \r\n  return (\r\n    <MuiThemeProvider theme={theme}>\r\n      {children}\r\n    </MuiThemeProvider>\r\n  );\r\n}","\"use strict\";\n'use client';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function () {\n    return _utils.createSvgIcon;\n  }\n});\nvar _utils = require(\"@mui/material/utils\");","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z\"\n}), 'Menu');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2m-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3z\"\n}), 'CreateNewFolder');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z\"\n}), 'FolderOpen');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z\"\n}), 'Save');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z\"\n}), 'Error');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6\"\n}), 'BrightnessMedium');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z\"\n}), 'LightMode');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1\"\n}), 'DarkMode');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 22c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10m1-17.93c3.94.49 7 3.85 7 7.93s-3.05 7.44-7 7.93z\"\n}), 'Contrast');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5\"\n}), 'Palette');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6\"\n}), 'Settings');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2zM4 6h16v10H4z\"\n}), 'Computer');","import { useState, useEffect } from 'preact/hooks';\r\nimport { \r\n  IconButton, \r\n  Menu, \r\n  MenuItem, \r\n  ListItemIcon, \r\n  ListItemText, \r\n  Tooltip,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  FormControl,\r\n  FormLabel,\r\n  RadioGroup,\r\n  FormControlLabel,\r\n  Radio,\r\n  Divider,\r\n  Typography,\r\n  Box,\r\n  Switch\r\n} from '@mui/material';\r\nimport BrightnessMediumIcon from '@mui/icons-material/BrightnessMedium';\r\nimport LightModeIcon from '@mui/icons-material/LightMode';\r\nimport DarkModeIcon from '@mui/icons-material/DarkMode';\r\nimport ContrastIcon from '@mui/icons-material/Contrast';\r\nimport PaletteIcon from '@mui/icons-material/Palette';\r\nimport SettingsIcon from '@mui/icons-material/Settings';\r\nimport ComputerIcon from '@mui/icons-material/Computer';\r\nimport { useTheme } from '../theme/ThemeContext';\r\n\r\n/**\r\n * 主题选择器组件\r\n * 提供主题切换功能\r\n */\r\nexport function ThemeSelector() {\r\n  const { themeId, setThemeId, toggleTheme, setThemeMode, availableThemes } = useTheme();\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [followSystem, setFollowSystem] = useState(false);\r\n  \r\n  // 从本地存储加载主题模式\r\n  useEffect(() => {\r\n    const themeMode = localStorage.getItem('pdx-json-editor-theme-mode');\r\n    setFollowSystem(themeMode === 'system');\r\n  }, []);\r\n  \r\n  // 打开菜单\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  \r\n  // 关闭菜单\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  \r\n  // 切换主题\r\n  const handleToggleTheme = () => {\r\n    toggleTheme();\r\n    handleClose();\r\n  };\r\n  \r\n  // 打开主题设置对话框\r\n  const handleOpenSettings = () => {\r\n    setDialogOpen(true);\r\n    handleClose();\r\n  };\r\n  \r\n  // 关闭主题设置对话框\r\n  const handleCloseSettings = () => {\r\n    setDialogOpen(false);\r\n  };\r\n  \r\n  // 选择主题\r\n  const handleThemeChange = (event) => {\r\n    setThemeId(event.target.value);\r\n    \r\n    // 如果手动选择主题，则关闭跟随系统\r\n    if (followSystem) {\r\n      setFollowSystem(false);\r\n      setThemeMode('manual');\r\n    }\r\n  };\r\n  \r\n  // 切换跟随系统\r\n  const handleFollowSystemChange = (event) => {\r\n    const newValue = event.target.checked;\r\n    setFollowSystem(newValue);\r\n    \r\n    // 设置主题模式\r\n    setThemeMode(newValue ? 'system' : 'manual');\r\n  };\r\n  \r\n  // 获取主题图标\r\n  const getThemeIcon = (id) => {\r\n    switch (id) {\r\n      case 'light':\r\n        return <LightModeIcon />;\r\n      case 'dark':\r\n        return <DarkModeIcon />;\r\n      case 'highContrast':\r\n        return <ContrastIcon />;\r\n      case 'soft':\r\n        return <PaletteIcon />;\r\n      default:\r\n        return <BrightnessMediumIcon />;\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <>\r\n      <Tooltip title=\"主题设置\">\r\n        <IconButton\r\n          color=\"inherit\"\r\n          onClick={handleClick}\r\n          aria-controls=\"theme-menu\"\r\n          aria-haspopup=\"true\"\r\n        >\r\n          {getThemeIcon(themeId)}\r\n        </IconButton>\r\n      </Tooltip>\r\n      \r\n      <Menu\r\n        id=\"theme-menu\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}\r\n      >\r\n        <MenuItem onClick={handleToggleTheme}>\r\n          <ListItemIcon>\r\n            {themeId === 'light' ? <DarkModeIcon /> : <LightModeIcon />}\r\n          </ListItemIcon>\r\n          <ListItemText primary={themeId === 'light' ? '切换到深色模式' : '切换到浅色模式'} />\r\n        </MenuItem>\r\n        \r\n        <MenuItem onClick={() => {\r\n          handleFollowSystemChange({ target: { checked: !followSystem } });\r\n          handleClose();\r\n        }}>\r\n          <ListItemIcon>\r\n            <ComputerIcon />\r\n          </ListItemIcon>\r\n          <ListItemText primary={followSystem ? '停止跟随系统' : '跟随系统主题'} />\r\n        </MenuItem>\r\n        \r\n        <Divider />\r\n        \r\n        <MenuItem onClick={handleOpenSettings}>\r\n          <ListItemIcon>\r\n            <SettingsIcon />\r\n          </ListItemIcon>\r\n          <ListItemText primary=\"主题设置\" />\r\n        </MenuItem>\r\n      </Menu>\r\n      \r\n      <Dialog open={dialogOpen} onClose={handleCloseSettings}>\r\n        <DialogTitle>主题设置</DialogTitle>\r\n        <DialogContent>\r\n          <Box sx={{ mb: 3 }}>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={followSystem}\r\n                  onChange={handleFollowSystemChange}\r\n                  color=\"primary\"\r\n                />\r\n              }\r\n              label=\"跟随系统主题\"\r\n            />\r\n            <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block', mt: 0.5 }}>\r\n              启用后，主题将自动跟随系统设置变化\r\n            </Typography>\r\n          </Box>\r\n          \r\n          <Divider sx={{ my: 2 }} />\r\n          \r\n          <FormControl component=\"fieldset\" disabled={followSystem}>\r\n            <FormLabel component=\"legend\">选择主题</FormLabel>\r\n            <RadioGroup\r\n              aria-label=\"theme\"\r\n              name=\"theme\"\r\n              value={themeId}\r\n              onChange={handleThemeChange}\r\n            >\r\n              {Object.values(availableThemes).map((theme) => (\r\n                <FormControlLabel\r\n                  key={theme.id}\r\n                  value={theme.id}\r\n                  control={<Radio />}\r\n                  label={theme.name}\r\n                />\r\n              ))}\r\n            </RadioGroup>\r\n            {followSystem && (\r\n              <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 1 }}>\r\n                跟随系统主题已启用，手动选择主题将被覆盖\r\n              </Typography>\r\n            )}\r\n          </FormControl>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseSettings}>关闭</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}","/**\r\n * 无障碍工具函数\r\n * 提供无障碍相关的辅助功能\r\n */\r\n\r\n/**\r\n * 生成ARIA属性对象\r\n * @param {Object} options - 选项\r\n * @param {string} options.id - 元素ID\r\n * @param {string} options.role - ARIA角色\r\n * @param {string} options.label - ARIA标签\r\n * @param {string} options.description - ARIA描述\r\n * @param {boolean} options.hidden - 是否对屏幕阅读器隐藏\r\n * @param {string} options.live - ARIA实时区域（off, polite, assertive）\r\n * @param {boolean} options.required - 是否必填\r\n * @param {boolean} options.expanded - 是否展开\r\n * @param {boolean} options.checked - 是否选中\r\n * @param {boolean} options.selected - 是否被选择\r\n * @param {boolean} options.disabled - 是否禁用\r\n * @param {boolean} options.invalid - 是否无效\r\n * @param {string} options.errorMessage - 错误消息\r\n * @param {string} options.controls - 控制的元素ID\r\n * @param {string} options.labelledBy - 标签元素ID\r\n * @param {string} options.describedBy - 描述元素ID\r\n * @param {string} options.flowTo - 流向元素ID\r\n * @param {string} options.owns - 拥有的元素ID\r\n * @returns {Object} - ARIA属性对象\r\n */\r\nexport const ariaAttributes = ({\r\n  id,\r\n  role,\r\n  label,\r\n  description,\r\n  hidden,\r\n  live,\r\n  required,\r\n  expanded,\r\n  checked,\r\n  selected,\r\n  disabled,\r\n  invalid,\r\n  errorMessage,\r\n  controls,\r\n  labelledBy,\r\n  describedBy,\r\n  flowTo,\r\n  owns\r\n} = {}) => {\r\n  const attrs = {};\r\n  \r\n  // 添加ID\r\n  if (id) attrs.id = id;\r\n  \r\n  // 添加ARIA角色\r\n  if (role) attrs['aria-role'] = role;\r\n  \r\n  // 添加ARIA标签\r\n  if (label) attrs['aria-label'] = label;\r\n  \r\n  // 添加ARIA描述\r\n  if (description) attrs['aria-description'] = description;\r\n  \r\n  // 添加ARIA隐藏\r\n  if (hidden !== undefined) attrs['aria-hidden'] = hidden.toString();\r\n  \r\n  // 添加ARIA实时区域\r\n  if (live) attrs['aria-live'] = live;\r\n  \r\n  // 添加ARIA必填\r\n  if (required !== undefined) attrs['aria-required'] = required.toString();\r\n  \r\n  // 添加ARIA展开\r\n  if (expanded !== undefined) attrs['aria-expanded'] = expanded.toString();\r\n  \r\n  // 添加ARIA选中\r\n  if (checked !== undefined) attrs['aria-checked'] = checked.toString();\r\n  \r\n  // 添加ARIA被选择\r\n  if (selected !== undefined) attrs['aria-selected'] = selected.toString();\r\n  \r\n  // 添加ARIA禁用\r\n  if (disabled !== undefined) attrs['aria-disabled'] = disabled.toString();\r\n  \r\n  // 添加ARIA无效\r\n  if (invalid !== undefined) {\r\n    attrs['aria-invalid'] = invalid.toString();\r\n    \r\n    // 如果有错误消息，添加ARIA错误消息\r\n    if (invalid && errorMessage) {\r\n      attrs['aria-errormessage'] = errorMessage;\r\n    }\r\n  }\r\n  \r\n  // 添加ARIA控制\r\n  if (controls) attrs['aria-controls'] = controls;\r\n  \r\n  // 添加ARIA标签元素\r\n  if (labelledBy) attrs['aria-labelledby'] = labelledBy;\r\n  \r\n  // 添加ARIA描述元素\r\n  if (describedBy) attrs['aria-describedby'] = describedBy;\r\n  \r\n  // 添加ARIA流向元素\r\n  if (flowTo) attrs['aria-flowto'] = flowTo;\r\n  \r\n  // 添加ARIA拥有元素\r\n  if (owns) attrs['aria-owns'] = owns;\r\n  \r\n  return attrs;\r\n};\r\n\r\n/**\r\n * 创建唯一ID\r\n * @param {string} prefix - ID前缀\r\n * @returns {string} - 唯一ID\r\n */\r\nexport const createUniqueId = (prefix = 'aria') => {\r\n  return `${prefix}-${Math.random().toString(36).substring(2, 11)}`;\r\n};\r\n\r\n/**\r\n * 创建ARIA标签ID\r\n * @param {string} id - 元素ID\r\n * @returns {string} - 标签ID\r\n */\r\nexport const createLabelId = (id) => {\r\n  return `${id}-label`;\r\n};\r\n\r\n/**\r\n * 创建ARIA描述ID\r\n * @param {string} id - 元素ID\r\n * @returns {string} - 描述ID\r\n */\r\nexport const createDescriptionId = (id) => {\r\n  return `${id}-description`;\r\n};\r\n\r\n/**\r\n * 创建ARIA错误ID\r\n * @param {string} id - 元素ID\r\n * @returns {string} - 错误ID\r\n */\r\nexport const createErrorId = (id) => {\r\n  return `${id}-error`;\r\n};\r\n\r\n/**\r\n * 创建键盘导航处理函数\r\n * @param {Object} options - 选项\r\n * @param {Function} options.onEnter - 回车键处理函数\r\n * @param {Function} options.onSpace - 空格键处理函数\r\n * @param {Function} options.onEscape - ESC键处理函数\r\n * @param {Function} options.onArrowUp - 上箭头键处理函数\r\n * @param {Function} options.onArrowDown - 下箭头键处理函数\r\n * @param {Function} options.onArrowLeft - 左箭头键处理函数\r\n * @param {Function} options.onArrowRight - 右箭头键处理函数\r\n * @param {Function} options.onTab - Tab键处理函数\r\n * @param {Function} options.onShiftTab - Shift+Tab键处理函数\r\n * @param {Function} options.onHome - Home键处理函数\r\n * @param {Function} options.onEnd - End键处理函数\r\n * @param {Function} options.onPageUp - PageUp键处理函数\r\n * @param {Function} options.onPageDown - PageDown键处理函数\r\n * @returns {Function} - 键盘事件处理函数\r\n */\r\nexport const createKeyboardHandler = ({\r\n  onEnter,\r\n  onSpace,\r\n  onEscape,\r\n  onArrowUp,\r\n  onArrowDown,\r\n  onArrowLeft,\r\n  onArrowRight,\r\n  onTab,\r\n  onShiftTab,\r\n  onHome,\r\n  onEnd,\r\n  onPageUp,\r\n  onPageDown\r\n} = {}) => {\r\n  return (event) => {\r\n    // 检查修饰键\r\n    const hasModifier = event.altKey || event.ctrlKey || event.metaKey;\r\n    \r\n    // 如果有修饰键（除了Shift），不处理\r\n    if (hasModifier && !event.shiftKey) return;\r\n    \r\n    switch (event.key) {\r\n      case 'Enter':\r\n        if (onEnter) {\r\n          event.preventDefault();\r\n          onEnter(event);\r\n        }\r\n        break;\r\n      case ' ':\r\n        if (onSpace) {\r\n          event.preventDefault();\r\n          onSpace(event);\r\n        }\r\n        break;\r\n      case 'Escape':\r\n        if (onEscape) {\r\n          event.preventDefault();\r\n          onEscape(event);\r\n        }\r\n        break;\r\n      case 'ArrowUp':\r\n        if (onArrowUp) {\r\n          event.preventDefault();\r\n          onArrowUp(event);\r\n        }\r\n        break;\r\n      case 'ArrowDown':\r\n        if (onArrowDown) {\r\n          event.preventDefault();\r\n          onArrowDown(event);\r\n        }\r\n        break;\r\n      case 'ArrowLeft':\r\n        if (onArrowLeft) {\r\n          event.preventDefault();\r\n          onArrowLeft(event);\r\n        }\r\n        break;\r\n      case 'ArrowRight':\r\n        if (onArrowRight) {\r\n          event.preventDefault();\r\n          onArrowRight(event);\r\n        }\r\n        break;\r\n      case 'Tab':\r\n        if (event.shiftKey && onShiftTab) {\r\n          event.preventDefault();\r\n          onShiftTab(event);\r\n        } else if (!event.shiftKey && onTab) {\r\n          event.preventDefault();\r\n          onTab(event);\r\n        }\r\n        break;\r\n      case 'Home':\r\n        if (onHome) {\r\n          event.preventDefault();\r\n          onHome(event);\r\n        }\r\n        break;\r\n      case 'End':\r\n        if (onEnd) {\r\n          event.preventDefault();\r\n          onEnd(event);\r\n        }\r\n        break;\r\n      case 'PageUp':\r\n        if (onPageUp) {\r\n          event.preventDefault();\r\n          onPageUp(event);\r\n        }\r\n        break;\r\n      case 'PageDown':\r\n        if (onPageDown) {\r\n          event.preventDefault();\r\n          onPageDown(event);\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * 创建可聚焦元素的Tab索引\r\n * @param {boolean} focusable - 是否可聚焦\r\n * @returns {number} - Tab索引\r\n */\r\nexport const createTabIndex = (focusable) => {\r\n  return focusable ? 0 : -1;\r\n};\r\n\r\n/**\r\n * 创建ARIA实时区域属性\r\n * @param {string} level - 实时级别（off, polite, assertive）\r\n * @returns {Object} - ARIA实时区域属性\r\n */\r\nexport const createLiveRegion = (level = 'polite') => {\r\n  return {\r\n    'aria-live': level,\r\n    'aria-atomic': 'true'\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA进度条属性\r\n * @param {number} value - 当前值\r\n * @param {number} min - 最小值\r\n * @param {number} max - 最大值\r\n * @param {string} valueText - 值文本\r\n * @returns {Object} - ARIA进度条属性\r\n */\r\nexport const createProgressBar = (value, min = 0, max = 100, valueText = null) => {\r\n  const attrs = {\r\n    role: 'progressbar',\r\n    'aria-valuenow': value.toString(),\r\n    'aria-valuemin': min.toString(),\r\n    'aria-valuemax': max.toString()\r\n  };\r\n  \r\n  if (valueText) {\r\n    attrs['aria-valuetext'] = valueText;\r\n  }\r\n  \r\n  return attrs;\r\n};\r\n\r\n/**\r\n * 创建ARIA对话框属性\r\n * @param {string} title - 对话框标题\r\n * @param {string} description - 对话框描述\r\n * @returns {Object} - ARIA对话框属性\r\n */\r\nexport const createDialog = (title, description = null) => {\r\n  const id = createUniqueId('dialog');\r\n  const titleId = createLabelId(id);\r\n  const descriptionId = description ? createDescriptionId(id) : null;\r\n  \r\n  const attrs = {\r\n    id,\r\n    role: 'dialog',\r\n    'aria-modal': 'true',\r\n    'aria-labelledby': titleId\r\n  };\r\n  \r\n  if (descriptionId) {\r\n    attrs['aria-describedby'] = descriptionId;\r\n  }\r\n  \r\n  return {\r\n    dialog: attrs,\r\n    title: { id: titleId },\r\n    description: description ? { id: descriptionId } : null\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA菜单属性\r\n * @param {string} label - 菜单标签\r\n * @returns {Object} - ARIA菜单属性\r\n */\r\nexport const createMenu = (label) => {\r\n  const id = createUniqueId('menu');\r\n  \r\n  return {\r\n    menu: {\r\n      id,\r\n      role: 'menu',\r\n      'aria-label': label\r\n    },\r\n    item: {\r\n      role: 'menuitem',\r\n      tabIndex: -1\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA选项卡属性\r\n * @param {string} label - 选项卡标签\r\n * @returns {Object} - ARIA选项卡属性\r\n */\r\nexport const createTabs = (label) => {\r\n  const id = createUniqueId('tabs');\r\n  \r\n  return {\r\n    tablist: {\r\n      id,\r\n      role: 'tablist',\r\n      'aria-label': label\r\n    },\r\n    tab: (selected) => ({\r\n      role: 'tab',\r\n      tabIndex: selected ? 0 : -1,\r\n      'aria-selected': selected.toString()\r\n    }),\r\n    tabpanel: (labelId) => ({\r\n      role: 'tabpanel',\r\n      'aria-labelledby': labelId\r\n    })\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA树属性\r\n * @param {string} label - 树标签\r\n * @returns {Object} - ARIA树属性\r\n */\r\nexport const createTree = (label) => {\r\n  const id = createUniqueId('tree');\r\n  \r\n  return {\r\n    tree: {\r\n      id,\r\n      role: 'tree',\r\n      'aria-label': label\r\n    },\r\n    treeitem: (expanded, selected) => ({\r\n      role: 'treeitem',\r\n      'aria-expanded': expanded ? expanded.toString() : undefined,\r\n      'aria-selected': selected ? selected.toString() : undefined\r\n    })\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA列表属性\r\n * @param {string} label - 列表标签\r\n * @returns {Object} - ARIA列表属性\r\n */\r\nexport const createList = (label) => {\r\n  const id = createUniqueId('list');\r\n  \r\n  return {\r\n    list: {\r\n      id,\r\n      role: 'list',\r\n      'aria-label': label\r\n    },\r\n    listitem: {\r\n      role: 'listitem'\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA表格属性\r\n * @param {string} caption - 表格标题\r\n * @returns {Object} - ARIA表格属性\r\n */\r\nexport const createTable = (caption) => {\r\n  const id = createUniqueId('table');\r\n  \r\n  return {\r\n    table: {\r\n      id,\r\n      role: 'table',\r\n      'aria-label': caption\r\n    },\r\n    row: {\r\n      role: 'row'\r\n    },\r\n    cell: {\r\n      role: 'cell'\r\n    },\r\n    headerCell: {\r\n      role: 'columnheader'\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA工具提示属性\r\n * @param {string} id - 元素ID\r\n * @param {string} tooltipId - 工具提示ID\r\n * @returns {Object} - ARIA工具提示属性\r\n */\r\nexport const createTooltip = (id, tooltipId) => {\r\n  return {\r\n    trigger: {\r\n      id,\r\n      'aria-describedby': tooltipId\r\n    },\r\n    tooltip: {\r\n      id: tooltipId,\r\n      role: 'tooltip'\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA警告属性\r\n * @param {string} message - 警告消息\r\n * @param {string} level - 警告级别（error, warning, info）\r\n * @returns {Object} - ARIA警告属性\r\n */\r\nexport const createAlert = (message, level = 'info') => {\r\n  const id = createUniqueId('alert');\r\n  \r\n  return {\r\n    id,\r\n    role: 'alert',\r\n    'aria-live': level === 'error' ? 'assertive' : 'polite'\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA状态属性\r\n * @param {string} message - 状态消息\r\n * @returns {Object} - ARIA状态属性\r\n */\r\nexport const createStatus = (message) => {\r\n  const id = createUniqueId('status');\r\n  \r\n  return {\r\n    id,\r\n    role: 'status',\r\n    'aria-live': 'polite'\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA搜索框属性\r\n * @param {string} label - 搜索框标签\r\n * @returns {Object} - ARIA搜索框属性\r\n */\r\nexport const createSearchbox = (label) => {\r\n  const id = createUniqueId('searchbox');\r\n  \r\n  return {\r\n    id,\r\n    role: 'searchbox',\r\n    'aria-label': label\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA复选框属性\r\n * @param {boolean} checked - 是否选中\r\n * @param {string} label - 复选框标签\r\n * @returns {Object} - ARIA复选框属性\r\n */\r\nexport const createCheckbox = (checked, label) => {\r\n  const id = createUniqueId('checkbox');\r\n  \r\n  return {\r\n    id,\r\n    role: 'checkbox',\r\n    'aria-checked': checked.toString(),\r\n    'aria-label': label\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA开关属性\r\n * @param {boolean} checked - 是否选中\r\n * @param {string} label - 开关标签\r\n * @returns {Object} - ARIA开关属性\r\n */\r\nexport const createSwitch = (checked, label) => {\r\n  const id = createUniqueId('switch');\r\n  \r\n  return {\r\n    id,\r\n    role: 'switch',\r\n    'aria-checked': checked.toString(),\r\n    'aria-label': label\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA滑块属性\r\n * @param {number} value - 当前值\r\n * @param {number} min - 最小值\r\n * @param {number} max - 最大值\r\n * @param {string} label - 滑块标签\r\n * @returns {Object} - ARIA滑块属性\r\n */\r\nexport const createSlider = (value, min, max, label) => {\r\n  const id = createUniqueId('slider');\r\n  \r\n  return {\r\n    id,\r\n    role: 'slider',\r\n    'aria-valuenow': value.toString(),\r\n    'aria-valuemin': min.toString(),\r\n    'aria-valuemax': max.toString(),\r\n    'aria-label': label\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA按钮属性\r\n * @param {string} label - 按钮标签\r\n * @param {boolean} pressed - 是否按下（切换按钮）\r\n * @returns {Object} - ARIA按钮属性\r\n */\r\nexport const createButton = (label, pressed = null) => {\r\n  const id = createUniqueId('button');\r\n  \r\n  const attrs = {\r\n    id,\r\n    role: 'button',\r\n    'aria-label': label\r\n  };\r\n  \r\n  if (pressed !== null) {\r\n    attrs['aria-pressed'] = pressed.toString();\r\n  }\r\n  \r\n  return attrs;\r\n};\r\n\r\n/**\r\n * 创建ARIA链接属性\r\n * @param {string} label - 链接标签\r\n * @returns {Object} - ARIA链接属性\r\n */\r\nexport const createLink = (label) => {\r\n  const id = createUniqueId('link');\r\n  \r\n  return {\r\n    id,\r\n    role: 'link',\r\n    'aria-label': label\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA图像属性\r\n * @param {string} alt - 图像替代文本\r\n * @returns {Object} - ARIA图像属性\r\n */\r\nexport const createImage = (alt) => {\r\n  const id = createUniqueId('img');\r\n  \r\n  return {\r\n    id,\r\n    role: 'img',\r\n    'aria-label': alt\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA分隔线属性\r\n * @returns {Object} - ARIA分隔线属性\r\n */\r\nexport const createSeparator = () => {\r\n  const id = createUniqueId('separator');\r\n  \r\n  return {\r\n    id,\r\n    role: 'separator'\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA区域属性\r\n * @param {string} label - 区域标签\r\n * @returns {Object} - ARIA区域属性\r\n */\r\nexport const createRegion = (label) => {\r\n  const id = createUniqueId('region');\r\n  \r\n  return {\r\n    id,\r\n    role: 'region',\r\n    'aria-label': label\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA标记属性\r\n * @param {string} label - 标记标签\r\n * @returns {Object} - ARIA标记属性\r\n */\r\nexport const createLandmark = (label) => {\r\n  const id = createUniqueId('landmark');\r\n  \r\n  return {\r\n    id,\r\n    role: 'landmark',\r\n    'aria-label': label\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA导航属性\r\n * @param {string} label - 导航标签\r\n * @returns {Object} - ARIA导航属性\r\n */\r\nexport const createNavigation = (label) => {\r\n  const id = createUniqueId('nav');\r\n  \r\n  return {\r\n    id,\r\n    role: 'navigation',\r\n    'aria-label': label\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA主要内容属性\r\n * @returns {Object} - ARIA主要内容属性\r\n */\r\nexport const createMain = () => {\r\n  const id = createUniqueId('main');\r\n  \r\n  return {\r\n    id,\r\n    role: 'main'\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA页脚属性\r\n * @returns {Object} - ARIA页脚属性\r\n */\r\nexport const createContentinfo = () => {\r\n  const id = createUniqueId('contentinfo');\r\n  \r\n  return {\r\n    id,\r\n    role: 'contentinfo'\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA页眉属性\r\n * @returns {Object} - ARIA页眉属性\r\n */\r\nexport const createBanner = () => {\r\n  const id = createUniqueId('banner');\r\n  \r\n  return {\r\n    id,\r\n    role: 'banner'\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA侧边栏属性\r\n * @param {string} label - 侧边栏标签\r\n * @returns {Object} - ARIA侧边栏属性\r\n */\r\nexport const createComplementary = (label) => {\r\n  const id = createUniqueId('complementary');\r\n  \r\n  return {\r\n    id,\r\n    role: 'complementary',\r\n    'aria-label': label\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA表单属性\r\n * @param {string} label - 表单标签\r\n * @returns {Object} - ARIA表单属性\r\n */\r\nexport const createForm = (label) => {\r\n  const id = createUniqueId('form');\r\n  \r\n  return {\r\n    id,\r\n    role: 'form',\r\n    'aria-label': label\r\n  };\r\n};\r\n\r\n/**\r\n * 创建ARIA搜索属性\r\n * @param {string} label - 搜索标签\r\n * @returns {Object} - ARIA搜索属性\r\n */\r\nexport const createSearch = (label) => {\r\n  const id = createUniqueId('search');\r\n  \r\n  return {\r\n    id,\r\n    role: 'search',\r\n    'aria-label': label\r\n  };\r\n};","import { AppBar, Toolbar, Typography, IconButton, Button, Box, useTheme as useMuiTheme, useMediaQuery, Badge, Tooltip } from '@mui/material';\r\nimport MenuIcon from '@mui/icons-material/Menu';\r\nimport CreateNewFolderIcon from '@mui/icons-material/CreateNewFolder';\r\nimport FolderOpenIcon from '@mui/icons-material/FolderOpen';\r\nimport SaveIcon from '@mui/icons-material/Save';\r\nimport ErrorIcon from '@mui/icons-material/Error';\r\nimport { ThemeSelector } from './ThemeSelector';\r\nimport errorService from '../services/errorService';\r\nimport { ariaAttributes, createNavigation } from '../utils/accessibilityUtils';\r\n\r\nexport function Header({ \r\n  onMenuClick,\r\n  onNewFile,\r\n  onOpenFile,\r\n  onSaveFile,\r\n  onSaveAsFile,\r\n  onErrorClick,\r\n  currentFileName,\r\n  isDirty\r\n}) {\r\n  const theme = useMuiTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\r\n\r\n  // 创建导航ARIA属性\r\n  const navAttrs = createNavigation('主导航');\r\n  \r\n  return (\r\n    <AppBar position=\"static\" color=\"default\" elevation={1} {...navAttrs}>\r\n      <Toolbar>\r\n        {isMobile && (\r\n          <IconButton\r\n            color=\"inherit\"\r\n            aria-label=\"打开侧边栏\"\r\n            aria-haspopup=\"true\"\r\n            aria-expanded=\"false\"\r\n            edge=\"start\"\r\n            onClick={onMenuClick}\r\n            sx={{ mr: 2 }}\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n        )}\r\n        \r\n        <Typography \r\n          variant=\"h6\" \r\n          component=\"div\" \r\n          sx={{ flexGrow: 0, mr: 4 }}\r\n          {...ariaAttributes({ role: 'heading', label: 'PDX JSON 编辑器' })}\r\n        >\r\n          PDX JSON 编辑器\r\n        </Typography>\r\n        \r\n        <Box sx={{ display: 'flex', gap: 1, flexGrow: 1 }}>\r\n          <Button \r\n            startIcon={<CreateNewFolderIcon />} \r\n            size=\"small\" \r\n            variant=\"outlined\"\r\n            onClick={onNewFile}\r\n            sx={{ display: { xs: 'none', sm: 'flex' } }}\r\n            aria-label=\"新建文件\"\r\n          >\r\n            新建\r\n          </Button>\r\n          <Button \r\n            startIcon={<FolderOpenIcon />} \r\n            size=\"small\" \r\n            variant=\"outlined\"\r\n            onClick={onOpenFile}\r\n            sx={{ display: { xs: 'none', sm: 'flex' } }}\r\n            aria-label=\"打开文件\"\r\n          >\r\n            打开\r\n          </Button>\r\n          <Button \r\n            startIcon={<SaveIcon />} \r\n            size=\"small\" \r\n            variant=\"outlined\"\r\n            onClick={onSaveFile}\r\n            disabled={!isDirty}\r\n            sx={{ display: { xs: 'none', sm: 'flex' } }}\r\n            aria-label={`保存文件${isDirty ? '（有未保存的更改）' : ''}`}\r\n          >\r\n            保存{isDirty ? ' *' : ''}\r\n          </Button>\r\n          \r\n          <Typography \r\n            variant=\"body2\" \r\n            sx={{ \r\n              ml: 2, \r\n              alignSelf: 'center',\r\n              color: isDirty ? 'warning.main' : 'text.secondary',\r\n              display: { xs: 'none', md: 'block' }\r\n            }}\r\n            aria-live=\"polite\"\r\n            role=\"status\"\r\n          >\r\n            {currentFileName || '未命名'}\r\n            {isDirty ? ' (未保存)' : ''}\r\n          </Typography>\r\n        </Box>\r\n        \r\n        {/* 错误按钮 */}\r\n        {onErrorClick && (\r\n          <Tooltip title=\"错误历史\">\r\n            <IconButton \r\n              color=\"inherit\" \r\n              onClick={onErrorClick} \r\n              sx={{ mr: 1 }}\r\n              aria-label={`查看错误历史（${errorService.getErrorHistory().length}个错误）`}\r\n            >\r\n              <Badge badgeContent={errorService.getErrorHistory().length} color=\"error\">\r\n                <ErrorIcon />\r\n              </Badge>\r\n            </IconButton>\r\n          </Tooltip>\r\n        )}\r\n        \r\n        <ThemeSelector />\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nexport { _arrayLikeToArray as arrayLikeToArray, _arrayWithHoles as arrayWithHoles, _defineProperty as defineProperty, _iterableToArrayLimit as iterableToArrayLimit, _nonIterableRest as nonIterableRest, _objectSpread2 as objectSpread2, _objectWithoutProperties as objectWithoutProperties, _objectWithoutPropertiesLoose as objectWithoutPropertiesLoose, _slicedToArray as slicedToArray, _unsupportedIterableToArray as unsupportedIterableToArray };\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction compose() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function (x) {\n    return fns.reduceRight(function (y, f) {\n      return f(y);\n    }, x);\n  };\n}\n\nfunction curry(fn) {\n  return function curried() {\n    var _this = this;\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return args.length >= fn.length ? fn.apply(this, args) : function () {\n      for (var _len3 = arguments.length, nextArgs = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        nextArgs[_key3] = arguments[_key3];\n      }\n\n      return curried.apply(_this, [].concat(args, nextArgs));\n    };\n  };\n}\n\nfunction isObject(value) {\n  return {}.toString.call(value).includes('Object');\n}\n\nfunction isEmpty(obj) {\n  return !Object.keys(obj).length;\n}\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nfunction hasOwnProperty(object, property) {\n  return Object.prototype.hasOwnProperty.call(object, property);\n}\n\nfunction validateChanges(initial, changes) {\n  if (!isObject(changes)) errorHandler('changeType');\n  if (Object.keys(changes).some(function (field) {\n    return !hasOwnProperty(initial, field);\n  })) errorHandler('changeField');\n  return changes;\n}\n\nfunction validateSelector(selector) {\n  if (!isFunction(selector)) errorHandler('selectorType');\n}\n\nfunction validateHandler(handler) {\n  if (!(isFunction(handler) || isObject(handler))) errorHandler('handlerType');\n  if (isObject(handler) && Object.values(handler).some(function (_handler) {\n    return !isFunction(_handler);\n  })) errorHandler('handlersType');\n}\n\nfunction validateInitial(initial) {\n  if (!initial) errorHandler('initialIsRequired');\n  if (!isObject(initial)) errorHandler('initialType');\n  if (isEmpty(initial)) errorHandler('initialContent');\n}\n\nfunction throwError(errorMessages, type) {\n  throw new Error(errorMessages[type] || errorMessages[\"default\"]);\n}\n\nvar errorMessages = {\n  initialIsRequired: 'initial state is required',\n  initialType: 'initial state should be an object',\n  initialContent: 'initial state shouldn\\'t be an empty object',\n  handlerType: 'handler should be an object or a function',\n  handlersType: 'all handlers should be a functions',\n  selectorType: 'selector should be a function',\n  changeType: 'provided value of changes should be an object',\n  changeField: 'it seams you want to change a field in the state which is not specified in the \"initial\" state',\n  \"default\": 'an unknown error accured in `state-local` package'\n};\nvar errorHandler = curry(throwError)(errorMessages);\nvar validators = {\n  changes: validateChanges,\n  selector: validateSelector,\n  handler: validateHandler,\n  initial: validateInitial\n};\n\nfunction create(initial) {\n  var handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  validators.initial(initial);\n  validators.handler(handler);\n  var state = {\n    current: initial\n  };\n  var didUpdate = curry(didStateUpdate)(state, handler);\n  var update = curry(updateState)(state);\n  var validate = curry(validators.changes)(initial);\n  var getChanges = curry(extractChanges)(state);\n\n  function getState() {\n    var selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function (state) {\n      return state;\n    };\n    validators.selector(selector);\n    return selector(state.current);\n  }\n\n  function setState(causedChanges) {\n    compose(didUpdate, update, validate, getChanges)(causedChanges);\n  }\n\n  return [getState, setState];\n}\n\nfunction extractChanges(state, causedChanges) {\n  return isFunction(causedChanges) ? causedChanges(state.current) : causedChanges;\n}\n\nfunction updateState(state, changes) {\n  state.current = _objectSpread2(_objectSpread2({}, state.current), changes);\n  return changes;\n}\n\nfunction didStateUpdate(state, handler, changes) {\n  isFunction(handler) ? handler(state.current) : Object.keys(changes).forEach(function (field) {\n    var _handler$field;\n\n    return (_handler$field = handler[field]) === null || _handler$field === void 0 ? void 0 : _handler$field.call(handler, state.current[field]);\n  });\n  return changes;\n}\n\nvar index = {\n  create: create\n};\n\nexport default index;\n","import curry from '../utils/curry.js';\nimport isObject from '../utils/isObject.js';\n\n/**\n * validates the configuration object and informs about deprecation\n * @param {Object} config - the configuration object \n * @return {Object} config - the validated configuration object\n */\n\nfunction validateConfig(config) {\n  if (!config) errorHandler('configIsRequired');\n  if (!isObject(config)) errorHandler('configType');\n\n  if (config.urls) {\n    informAboutDeprecation();\n    return {\n      paths: {\n        vs: config.urls.monacoBase\n      }\n    };\n  }\n\n  return config;\n}\n/**\n * logs deprecation message\n */\n\n\nfunction informAboutDeprecation() {\n  console.warn(errorMessages.deprecation);\n}\n\nfunction throwError(errorMessages, type) {\n  throw new Error(errorMessages[type] || errorMessages[\"default\"]);\n}\n\nvar errorMessages = {\n  configIsRequired: 'the configuration object is required',\n  configType: 'the configuration object should be an object',\n  \"default\": 'an unknown error accured in `@monaco-editor/loader` package',\n  deprecation: \"Deprecation warning!\\n    You are using deprecated way of configuration.\\n\\n    Instead of using\\n      monaco.config({ urls: { monacoBase: '...' } })\\n    use\\n      monaco.config({ paths: { vs: '...' } })\\n\\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\\n  \"\n};\nvar errorHandler = curry(throwError)(errorMessages);\nvar validators = {\n  config: validateConfig\n};\n\nexport default validators;\nexport { errorHandler, errorMessages };\n","function curry(fn) {\n  return function curried() {\n    var _this = this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return args.length >= fn.length ? fn.apply(this, args) : function () {\n      for (var _len2 = arguments.length, nextArgs = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        nextArgs[_key2] = arguments[_key2];\n      }\n\n      return curried.apply(_this, [].concat(args, nextArgs));\n    };\n  };\n}\n\nexport default curry;\n","function isObject(value) {\n  return {}.toString.call(value).includes('Object');\n}\n\nexport default isObject;\n","import { objectSpread2 as _objectSpread2 } from '../_virtual/_rollupPluginBabelHelpers.js';\n\nfunction merge(target, source) {\n  Object.keys(source).forEach(function (key) {\n    if (source[key] instanceof Object) {\n      if (target[key]) {\n        Object.assign(source[key], merge(target[key], source[key]));\n      }\n    }\n  });\n  return _objectSpread2(_objectSpread2({}, target), source);\n}\n\nexport default merge;\n","// The source (has been changed) is https://github.com/facebook/react/issues/5465#issuecomment-157888325\nvar CANCELATION_MESSAGE = {\n  type: 'cancelation',\n  msg: 'operation is manually canceled'\n};\n\nfunction makeCancelable(promise) {\n  var hasCanceled_ = false;\n  var wrappedPromise = new Promise(function (resolve, reject) {\n    promise.then(function (val) {\n      return hasCanceled_ ? reject(CANCELATION_MESSAGE) : resolve(val);\n    });\n    promise[\"catch\"](reject);\n  });\n  return wrappedPromise.cancel = function () {\n    return hasCanceled_ = true;\n  }, wrappedPromise;\n}\n\nexport default makeCancelable;\nexport { CANCELATION_MESSAGE };\n","import { slicedToArray as _slicedToArray, objectWithoutProperties as _objectWithoutProperties } from '../_virtual/_rollupPluginBabelHelpers.js';\nimport state from 'state-local';\nimport config$1 from '../config/index.js';\nimport validators from '../validators/index.js';\nimport compose from '../utils/compose.js';\nimport merge from '../utils/deepMerge.js';\nimport makeCancelable from '../utils/makeCancelable.js';\n\n/** the local state of the module */\n\nvar _state$create = state.create({\n  config: config$1,\n  isInitialized: false,\n  resolve: null,\n  reject: null,\n  monaco: null\n}),\n    _state$create2 = _slicedToArray(_state$create, 2),\n    getState = _state$create2[0],\n    setState = _state$create2[1];\n/**\n * set the loader configuration\n * @param {Object} config - the configuration object\n */\n\n\nfunction config(globalConfig) {\n  var _validators$config = validators.config(globalConfig),\n      monaco = _validators$config.monaco,\n      config = _objectWithoutProperties(_validators$config, [\"monaco\"]);\n\n  setState(function (state) {\n    return {\n      config: merge(state.config, config),\n      monaco: monaco\n    };\n  });\n}\n/**\n * handles the initialization of the monaco-editor\n * @return {Promise} - returns an instance of monaco (with a cancelable promise)\n */\n\n\nfunction init() {\n  var state = getState(function (_ref) {\n    var monaco = _ref.monaco,\n        isInitialized = _ref.isInitialized,\n        resolve = _ref.resolve;\n    return {\n      monaco: monaco,\n      isInitialized: isInitialized,\n      resolve: resolve\n    };\n  });\n\n  if (!state.isInitialized) {\n    setState({\n      isInitialized: true\n    });\n\n    if (state.monaco) {\n      state.resolve(state.monaco);\n      return makeCancelable(wrapperPromise);\n    }\n\n    if (window.monaco && window.monaco.editor) {\n      storeMonacoInstance(window.monaco);\n      state.resolve(window.monaco);\n      return makeCancelable(wrapperPromise);\n    }\n\n    compose(injectScripts, getMonacoLoaderScript)(configureLoader);\n  }\n\n  return makeCancelable(wrapperPromise);\n}\n/**\n * injects provided scripts into the document.body\n * @param {Object} script - an HTML script element\n * @return {Object} - the injected HTML script element\n */\n\n\nfunction injectScripts(script) {\n  return document.body.appendChild(script);\n}\n/**\n * creates an HTML script element with/without provided src\n * @param {string} [src] - the source path of the script\n * @return {Object} - the created HTML script element\n */\n\n\nfunction createScript(src) {\n  var script = document.createElement('script');\n  return src && (script.src = src), script;\n}\n/**\n * creates an HTML script element with the monaco loader src\n * @return {Object} - the created HTML script element\n */\n\n\nfunction getMonacoLoaderScript(configureLoader) {\n  var state = getState(function (_ref2) {\n    var config = _ref2.config,\n        reject = _ref2.reject;\n    return {\n      config: config,\n      reject: reject\n    };\n  });\n  var loaderScript = createScript(\"\".concat(state.config.paths.vs, \"/loader.js\"));\n\n  loaderScript.onload = function () {\n    return configureLoader();\n  };\n\n  loaderScript.onerror = state.reject;\n  return loaderScript;\n}\n/**\n * configures the monaco loader\n */\n\n\nfunction configureLoader() {\n  var state = getState(function (_ref3) {\n    var config = _ref3.config,\n        resolve = _ref3.resolve,\n        reject = _ref3.reject;\n    return {\n      config: config,\n      resolve: resolve,\n      reject: reject\n    };\n  });\n  var require = window.require;\n\n  require.config(state.config);\n\n  require(['vs/editor/editor.main'], function (monaco) {\n    storeMonacoInstance(monaco);\n    state.resolve(monaco);\n  }, function (error) {\n    state.reject(error);\n  });\n}\n/**\n * store monaco instance in local state\n */\n\n\nfunction storeMonacoInstance(monaco) {\n  if (!getState().monaco) {\n    setState({\n      monaco: monaco\n    });\n  }\n}\n/**\n * internal helper function\n * extracts stored monaco instance\n * @return {Object|null} - the monaco instance\n */\n\n\nfunction __getMonacoInstance() {\n  return getState(function (_ref4) {\n    var monaco = _ref4.monaco;\n    return monaco;\n  });\n}\n\nvar wrapperPromise = new Promise(function (resolve, reject) {\n  return setState({\n    resolve: resolve,\n    reject: reject\n  });\n});\nvar loader = {\n  config: config,\n  init: init,\n  __getMonacoInstance: __getMonacoInstance\n};\n\nexport default loader;\n","var config = {\n  paths: {\n    vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs'\n  }\n};\n\nexport default config;\n","var compose = function compose() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function (x) {\n    return fns.reduceRight(function (y, f) {\n      return f(y);\n    }, x);\n  };\n};\n\nexport default compose;\n","import _t from\"@monaco-editor/loader\";import{memo as Te}from\"react\";import ke,{useState as re,useRef as S,useCallback as oe,useEffect as ne}from\"react\";import Se from\"@monaco-editor/loader\";import{memo as ye}from\"react\";import K from\"react\";var le={wrapper:{display:\"flex\",position:\"relative\",textAlign:\"initial\"},fullWidth:{width:\"100%\"},hide:{display:\"none\"}},v=le;import me from\"react\";var ae={container:{display:\"flex\",height:\"100%\",width:\"100%\",justifyContent:\"center\",alignItems:\"center\"}},Y=ae;function Me({children:e}){return me.createElement(\"div\",{style:Y.container},e)}var Z=Me;var $=Z;function Ee({width:e,height:r,isEditorReady:n,loading:t,_ref:a,className:m,wrapperProps:E}){return K.createElement(\"section\",{style:{...v.wrapper,width:e,height:r},...E},!n&&K.createElement($,null,t),K.createElement(\"div\",{ref:a,style:{...v.fullWidth,...!n&&v.hide},className:m}))}var ee=Ee;var H=ye(ee);import{useEffect as xe}from\"react\";function Ce(e){xe(e,[])}var k=Ce;import{useEffect as ge,useRef as Re}from\"react\";function he(e,r,n=!0){let t=Re(!0);ge(t.current||!n?()=>{t.current=!1}:e,r)}var l=he;function D(){}function h(e,r,n,t){return De(e,t)||be(e,r,n,t)}function De(e,r){return e.editor.getModel(te(e,r))}function be(e,r,n,t){return e.editor.createModel(r,n,t?te(e,t):void 0)}function te(e,r){return e.Uri.parse(r)}function Oe({original:e,modified:r,language:n,originalLanguage:t,modifiedLanguage:a,originalModelPath:m,modifiedModelPath:E,keepCurrentOriginalModel:g=!1,keepCurrentModifiedModel:N=!1,theme:x=\"light\",loading:P=\"Loading...\",options:y={},height:V=\"100%\",width:z=\"100%\",className:F,wrapperProps:j={},beforeMount:A=D,onMount:q=D}){let[M,O]=re(!1),[T,s]=re(!0),u=S(null),c=S(null),w=S(null),d=S(q),o=S(A),b=S(!1);k(()=>{let i=Se.init();return i.then(f=>(c.current=f)&&s(!1)).catch(f=>f?.type!==\"cancelation\"&&console.error(\"Monaco initialization: error:\",f)),()=>u.current?I():i.cancel()}),l(()=>{if(u.current&&c.current){let i=u.current.getOriginalEditor(),f=h(c.current,e||\"\",t||n||\"text\",m||\"\");f!==i.getModel()&&i.setModel(f)}},[m],M),l(()=>{if(u.current&&c.current){let i=u.current.getModifiedEditor(),f=h(c.current,r||\"\",a||n||\"text\",E||\"\");f!==i.getModel()&&i.setModel(f)}},[E],M),l(()=>{let i=u.current.getModifiedEditor();i.getOption(c.current.editor.EditorOption.readOnly)?i.setValue(r||\"\"):r!==i.getValue()&&(i.executeEdits(\"\",[{range:i.getModel().getFullModelRange(),text:r||\"\",forceMoveMarkers:!0}]),i.pushUndoStop())},[r],M),l(()=>{u.current?.getModel()?.original.setValue(e||\"\")},[e],M),l(()=>{let{original:i,modified:f}=u.current.getModel();c.current.editor.setModelLanguage(i,t||n||\"text\"),c.current.editor.setModelLanguage(f,a||n||\"text\")},[n,t,a],M),l(()=>{c.current?.editor.setTheme(x)},[x],M),l(()=>{u.current?.updateOptions(y)},[y],M);let L=oe(()=>{if(!c.current)return;o.current(c.current);let i=h(c.current,e||\"\",t||n||\"text\",m||\"\"),f=h(c.current,r||\"\",a||n||\"text\",E||\"\");u.current?.setModel({original:i,modified:f})},[n,r,a,e,t,m,E]),U=oe(()=>{!b.current&&w.current&&(u.current=c.current.editor.createDiffEditor(w.current,{automaticLayout:!0,...y}),L(),c.current?.editor.setTheme(x),O(!0),b.current=!0)},[y,x,L]);ne(()=>{M&&d.current(u.current,c.current)},[M]),ne(()=>{!T&&!M&&U()},[T,M,U]);function I(){let i=u.current?.getModel();g||i?.original?.dispose(),N||i?.modified?.dispose(),u.current?.dispose()}return ke.createElement(H,{width:z,height:V,isEditorReady:M,loading:P,_ref:w,className:F,wrapperProps:j})}var ie=Oe;var we=Te(ie);import{useState as Ie}from\"react\";import ce from\"@monaco-editor/loader\";function Pe(){let[e,r]=Ie(ce.__getMonacoInstance());return k(()=>{let n;return e||(n=ce.init(),n.then(t=>{r(t)})),()=>n?.cancel()}),e}var Le=Pe;import{memo as ze}from\"react\";import We,{useState as ue,useEffect as W,useRef as C,useCallback as _e}from\"react\";import Ne from\"@monaco-editor/loader\";import{useEffect as Ue,useRef as ve}from\"react\";function He(e){let r=ve();return Ue(()=>{r.current=e},[e]),r.current}var se=He;var _=new Map;function Ve({defaultValue:e,defaultLanguage:r,defaultPath:n,value:t,language:a,path:m,theme:E=\"light\",line:g,loading:N=\"Loading...\",options:x={},overrideServices:P={},saveViewState:y=!0,keepCurrentModel:V=!1,width:z=\"100%\",height:F=\"100%\",className:j,wrapperProps:A={},beforeMount:q=D,onMount:M=D,onChange:O,onValidate:T=D}){let[s,u]=ue(!1),[c,w]=ue(!0),d=C(null),o=C(null),b=C(null),L=C(M),U=C(q),I=C(),i=C(t),f=se(m),Q=C(!1),B=C(!1);k(()=>{let p=Ne.init();return p.then(R=>(d.current=R)&&w(!1)).catch(R=>R?.type!==\"cancelation\"&&console.error(\"Monaco initialization: error:\",R)),()=>o.current?pe():p.cancel()}),l(()=>{let p=h(d.current,e||t||\"\",r||a||\"\",m||n||\"\");p!==o.current?.getModel()&&(y&&_.set(f,o.current?.saveViewState()),o.current?.setModel(p),y&&o.current?.restoreViewState(_.get(m)))},[m],s),l(()=>{o.current?.updateOptions(x)},[x],s),l(()=>{!o.current||t===void 0||(o.current.getOption(d.current.editor.EditorOption.readOnly)?o.current.setValue(t):t!==o.current.getValue()&&(B.current=!0,o.current.executeEdits(\"\",[{range:o.current.getModel().getFullModelRange(),text:t,forceMoveMarkers:!0}]),o.current.pushUndoStop(),B.current=!1))},[t],s),l(()=>{let p=o.current?.getModel();p&&a&&d.current?.editor.setModelLanguage(p,a)},[a],s),l(()=>{g!==void 0&&o.current?.revealLine(g)},[g],s),l(()=>{d.current?.editor.setTheme(E)},[E],s);let X=_e(()=>{if(!(!b.current||!d.current)&&!Q.current){U.current(d.current);let p=m||n,R=h(d.current,t||e||\"\",r||a||\"\",p||\"\");o.current=d.current?.editor.create(b.current,{model:R,automaticLayout:!0,...x},P),y&&o.current.restoreViewState(_.get(p)),d.current.editor.setTheme(E),g!==void 0&&o.current.revealLine(g),u(!0),Q.current=!0}},[e,r,n,t,a,m,x,P,y,E,g]);W(()=>{s&&L.current(o.current,d.current)},[s]),W(()=>{!c&&!s&&X()},[c,s,X]),i.current=t,W(()=>{s&&O&&(I.current?.dispose(),I.current=o.current?.onDidChangeModelContent(p=>{B.current||O(o.current.getValue(),p)}))},[s,O]),W(()=>{if(s){let p=d.current.editor.onDidChangeMarkers(R=>{let G=o.current.getModel()?.uri;if(G&&R.find(J=>J.path===G.path)){let J=d.current.editor.getModelMarkers({resource:G});T?.(J)}});return()=>{p?.dispose()}}return()=>{}},[s,T]);function pe(){I.current?.dispose(),V?y&&_.set(m,o.current.saveViewState()):o.current.getModel()?.dispose(),o.current.dispose()}return We.createElement(H,{width:z,height:F,isEditorReady:s,loading:N,_ref:b,className:j,wrapperProps:A})}var fe=Ve;var de=ze(fe);var Ft=de;export{we as DiffEditor,de as Editor,Ft as default,_t as loader,Le as useMonaco};\n//# sourceMappingURL=index.mjs.map","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)([/*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14\"\n}, \"0\"), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z\"\n}, \"1\")], 'ZoomIn');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z\"\n}), 'ZoomOut');","/**\r\n * Monaco编辑器服务\r\n * 提供Monaco编辑器的配置和初始化功能\r\n */\r\n\r\n// 配置JSON语言支持\r\nexport const configureJsonLanguage = (monaco) => {\r\n  if (!monaco || !monaco.languages || !monaco.languages.json || !monaco.languages.json.jsonDefaults) {\r\n    console.warn('Monaco JSON language support not available');\r\n    return;\r\n  }\r\n\r\n  try {\r\n    // 设置JSON语言诊断选项\r\n    monaco.languages.json.jsonDefaults.setDiagnosticsOptions({\r\n      validate: true,\r\n      allowComments: false,\r\n      schemas: [],\r\n      enableSchemaRequest: true,\r\n      schemaRequest: 'warning'\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to configure JSON language:', error);\r\n  }\r\n\r\n  // 配置JSON语言特性\r\n  if (typeof monaco.languages.registerDocumentFormattingEditProvider === 'function') {\r\n    monaco.languages.registerDocumentFormattingEditProvider('json', {\r\n      provideDocumentFormattingEdits: (model) => {\r\n        try {\r\n          const text = model.getValue();\r\n          const parsed = JSON.parse(text);\r\n          const formatted = JSON.stringify(parsed, null, 2);\r\n          \r\n          return [\r\n            {\r\n              range: model.getFullModelRange(),\r\n              text: formatted,\r\n            },\r\n          ];\r\n        } catch (e) {\r\n          console.error('JSON格式化失败:', e);\r\n          return [];\r\n        }\r\n      }\r\n    });\r\n  }\r\n  \r\n  // 配置JSON自动完成提供程序\r\n  if (typeof monaco.languages.registerCompletionItemProvider === 'function') {\r\n    monaco.languages.registerCompletionItemProvider('json', {\r\n      triggerCharacters: ['\"', ':'],\r\n      provideCompletionItems: (model, position) => {\r\n        try {\r\n          const textUntilPosition = model.getValueInRange({\r\n            startLineNumber: 1,\r\n            startColumn: 1,\r\n            endLineNumber: position.lineNumber,\r\n            endColumn: position.column\r\n          });\r\n          \r\n          // 检查是否在键位置\r\n          const isInKey = /\"[^\"]*$/.test(textUntilPosition);\r\n        \r\n          // 检查是否在值位置\r\n          const isInValue = /:\\s*$/.test(textUntilPosition);\r\n          \r\n          // 获取当前行内容\r\n          const lineContent = model.getLineContent(position.lineNumber);\r\n          \r\n          // 获取当前行前面的内容\r\n          const lineUntilPosition = lineContent.substring(0, position.column - 1);\r\n          \r\n          // 创建建议项\r\n          const suggestions = [];\r\n          \r\n          if (isInKey) {\r\n            // 在键位置提供建议\r\n            // 这里的建议将由Schema提供，如果有Schema的话\r\n            // 基本建议\r\n            suggestions.push({\r\n              label: '\"name\"',\r\n              kind: monaco.languages.CompletionItemKind.Property,\r\n              insertText: 'name',\r\n              detail: '常用属性',\r\n              documentation: '名称属性'\r\n            });\r\n            \r\n            suggestions.push({\r\n              label: '\"description\"',\r\n              kind: monaco.languages.CompletionItemKind.Property,\r\n              insertText: 'description',\r\n              detail: '常用属性',\r\n              documentation: '描述属性'\r\n            });\r\n            \r\n            suggestions.push({\r\n              label: '\"version\"',\r\n              kind: monaco.languages.CompletionItemKind.Property,\r\n              insertText: 'version',\r\n              detail: '常用属性',\r\n              documentation: '版本号属性'\r\n            });\r\n          } else if (isInValue) {\r\n            // 在值位置提供建议\r\n            // 检查键名\r\n            const keyMatch = lineUntilPosition.match(/\"([^\"]+)\"\\s*:\\s*$/);\r\n            if (keyMatch) {\r\n              const key = keyMatch[1];\r\n              \r\n              // 根据键名提供不同的建议\r\n              if (key === 'type') {\r\n                ['string', 'number', 'boolean', 'object', 'array', 'null'].forEach(type => {\r\n                  suggestions.push({\r\n                    label: `\"${type}\"`,\r\n                    kind: monaco.languages.CompletionItemKind.Value,\r\n                    insertText: `\"${type}\"`,\r\n                    detail: 'JSON类型',\r\n                    documentation: `JSON ${type} 类型`\r\n                  });\r\n                });\r\n              } else if (key === 'boolean' || key.endsWith('able') || key.startsWith('is') || key.startsWith('has')) {\r\n                ['true', 'false'].forEach(value => {\r\n                  suggestions.push({\r\n                    label: value,\r\n                    kind: monaco.languages.CompletionItemKind.Value,\r\n                    insertText: value,\r\n                    detail: '布尔值',\r\n                    documentation: `布尔值 ${value}`\r\n                  });\r\n                });\r\n              }\r\n            }\r\n          }\r\n          \r\n          return {\r\n            suggestions\r\n          };\r\n        } catch (e) {\r\n          console.error('提供自动完成建议失败:', e);\r\n          return { suggestions: [] };\r\n        }\r\n      }\r\n    });\r\n  }\r\n  \r\n  // 注册悬停提示提供程序\r\n  if (typeof monaco.languages.registerHoverProvider === 'function') {\r\n    monaco.languages.registerHoverProvider('json', {\r\n      provideHover: (model, position) => {\r\n        try {\r\n          // 获取当前位置的单词\r\n          const wordInfo = model.getWordAtPosition(position);\r\n          if (!wordInfo) return null;\r\n          \r\n          const word = wordInfo.word;\r\n          const lineContent = model.getLineContent(position.lineNumber);\r\n          \r\n          // 检查是否是键\r\n          const isKey = /\"([^\"]+)\"\\s*:/.test(lineContent.substring(0, wordInfo.endColumn));\r\n          \r\n          // 检查是否是值\r\n          const isValue = /:\\s*\"?([^\",}\\]]+)\"?/.test(lineContent.substring(wordInfo.startColumn - 2));\r\n          \r\n          // 获取完整的JSON内容\r\n          const text = model.getValue();\r\n          let parsed;\r\n          try {\r\n            parsed = JSON.parse(text);\r\n          } catch (e) {\r\n            // JSON无效，无法提供上下文信息\r\n            return null;\r\n          }\r\n          \r\n          // 构建悬停内容\r\n          let contents = [];\r\n          \r\n          if (isKey) {\r\n            // 对于键，显示类型信息\r\n            contents.push({ value: `**键**: \\`${word}\\`` });\r\n            \r\n            // 尝试获取值的类型\r\n            const keyMatch = lineContent.match(new RegExp(`\"${word}\"\\\\s*:\\\\s*(.+)`));\r\n            if (keyMatch) {\r\n              const valueText = keyMatch[1].trim().replace(/,$/, '');\r\n              let valueType = 'unknown';\r\n              \r\n              if (valueText === 'true' || valueText === 'false') {\r\n                valueType = 'boolean';\r\n              } else if (valueText === 'null') {\r\n                valueType = 'null';\r\n              } else if (/^-?\\d+(\\.\\d+)?$/.test(valueText)) {\r\n                valueType = 'number';\r\n              } else if (/^\".*\"$/.test(valueText)) {\r\n                valueType = 'string';\r\n              } else if (valueText.startsWith('{')) {\r\n                valueType = 'object';\r\n              } else if (valueText.startsWith('[')) {\r\n                valueType = 'array';\r\n              }\r\n              \r\n              contents.push({ value: `**值类型**: \\`${valueType}\\`` });\r\n            }\r\n          } else if (isValue) {\r\n            // 对于值，显示类型和值信息\r\n            let valueType = typeof word;\r\n            if (word === 'true' || word === 'false') {\r\n              valueType = 'boolean';\r\n            } else if (word === 'null') {\r\n              valueType = 'null';\r\n            } else if (/^-?\\d+(\\.\\d+)?$/.test(word)) {\r\n              valueType = 'number';\r\n            } else {\r\n              valueType = 'string';\r\n            }\r\n            \r\n            contents.push({ value: `**值**: \\`${word}\\`` });\r\n            contents.push({ value: `**类型**: \\`${valueType}\\`` });\r\n          }\r\n          \r\n          // 如果没有内容，返回null\r\n          if (contents.length === 0) return null;\r\n          \r\n          return {\r\n            contents: contents\r\n          };\r\n        } catch (e) {\r\n          console.error('提供悬停信息失败:', e);\r\n          return null;\r\n        }\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * 配置JSON折叠策略\r\n * @param {any} monaco - Monaco实例\r\n */\r\nexport const configureJsonFolding = (monaco) => {\r\n  if (!monaco) return;\r\n  \r\n  // 注册自定义折叠提供程序\r\n  if (typeof monaco.languages.registerFoldingRangeProvider === 'function') {\r\n    monaco.languages.registerFoldingRangeProvider('json', {\r\n      provideFoldingRanges: (model) => {\r\n        const ranges = [];\r\n        const text = model.getValue();\r\n        const lines = text.split('\\n');\r\n        \r\n        // 跟踪大括号和方括号的位置\r\n        const stack = [];\r\n        \r\n        for (let i = 0; i < lines.length; i++) {\r\n          const line = lines[i];\r\n          \r\n          // 检查开始括号\r\n          if (line.includes('{') || line.includes('[')) {\r\n            stack.push({\r\n              type: line.includes('{') ? '{' : '[',\r\n              startLine: i + 1\r\n            });\r\n          }\r\n          \r\n          // 检查结束括号\r\n          if (line.includes('}') || line.includes(']')) {\r\n            const bracket = line.includes('}') ? '}' : ']';\r\n            const matchingBracket = bracket === '}' ? '{' : '[';\r\n            \r\n            // 查找匹配的开始括号\r\n            for (let j = stack.length - 1; j >= 0; j--) {\r\n              if (stack[j].type === matchingBracket) {\r\n                // 只有当折叠区域至少有3行时才添加折叠范围\r\n                if (i + 1 - stack[j].startLine >= 2) {\r\n                  ranges.push({\r\n                    start: stack[j].startLine,\r\n                    end: i + 1,\r\n                    kind: monaco.languages.FoldingRangeKind ? monaco.languages.FoldingRangeKind.Region : 'region'\r\n                  });\r\n                }\r\n                stack.splice(j, 1);\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        \r\n        return ranges;\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * 获取编辑器默认选项\r\n * @param {boolean} darkMode - 是否为深色模式\r\n * @param {boolean} highContrast - 是否为高对比度模式\r\n * @param {boolean} isLargeFile - 是否为大文件\r\n * @param {number} fontSize - 字体大小\r\n * @returns {Object} - 编辑器选项\r\n */\r\nexport const getEditorOptions = (darkMode = false, highContrast = false, isLargeFile = false, fontSize = 14) => {\r\n  // 基本选项\r\n  const baseOptions = {\r\n    // 基本设置\r\n    language: 'json',\r\n    theme: darkMode ? 'vs-dark' : 'vs-light',\r\n    automaticLayout: true,\r\n    fontSize: fontSize,\r\n\r\n    // 代码折叠\r\n    folding: true,\r\n    foldingStrategy: 'indentation',\r\n    foldingHighlight: true,\r\n    showFoldingControls: 'always',\r\n    unfoldOnClickAfterEndOfLine: true,\r\n\r\n    // 智能编辑\r\n    autoClosingBrackets: 'always',\r\n    autoClosingQuotes: 'always',\r\n    autoIndent: 'full',\r\n    autoSurround: 'languageDefined',\r\n    bracketPairColorization: {\r\n      enabled: true,\r\n      independentColorPoolPerBracketType: true\r\n    },\r\n    matchBrackets: 'always',\r\n    formatOnPaste: true,\r\n    formatOnType: false,\r\n\r\n    // 导航与搜索\r\n    minimap: {\r\n      enabled: true,\r\n      showSlider: 'always',\r\n      renderCharacters: true,\r\n      maxColumn: 120,\r\n      scale: 1,\r\n      side: 'right'\r\n    },\r\n    find: {\r\n      addExtraSpaceOnTop: false,\r\n      autoFindInSelection: 'never',\r\n      seedSearchStringFromSelection: 'always'\r\n    },\r\n\r\n    // 性能优化\r\n    largeFileOptimizations: true,\r\n\r\n    // 可访问性\r\n    accessibilitySupport: 'auto',\r\n\r\n    // 外观\r\n    lineNumbers: 'on',\r\n    renderLineHighlight: 'all',\r\n    roundedSelection: true,\r\n    scrollBeyondLastLine: false,\r\n    \r\n    // 缩进\r\n    tabSize: 2,\r\n    \r\n    // 多光标和选择\r\n    multiCursorModifier: 'alt',\r\n    multiCursorMergeOverlapping: true,\r\n    columnSelection: false,\r\n    \r\n    // 错误装饰器\r\n    glyphMargin: true, // 启用装订线图标\r\n    \r\n    // 标记导航\r\n    overviewRulerBorder: true,\r\n    overviewRulerLanes: 3, // 显示所有标记\r\n    \r\n    // 行高亮\r\n    renderLineHighlightOnlyWhenFocus: false,\r\n    \r\n    // 错误和警告\r\n    quickSuggestions: {\r\n      other: true,\r\n      comments: false,\r\n      strings: true\r\n    },\r\n    \r\n    // 启用错误装饰器\r\n    renderValidationDecorations: 'on'\r\n  };\r\n  \r\n  // 大文件优化选项\r\n  if (isLargeFile) {\r\n    return {\r\n      ...baseOptions,\r\n      // 禁用一些高级功能以提高性能\r\n      folding: false, // 禁用代码折叠\r\n      minimap: {\r\n        enabled: false // 禁用缩略图\r\n      },\r\n      bracketPairColorization: {\r\n        enabled: false // 禁用括号对着色\r\n      },\r\n      formatOnPaste: false, // 禁用粘贴时格式化\r\n      formatOnType: false, // 禁用输入时格式化\r\n      renderWhitespace: 'none', // 不渲染空白字符\r\n      renderControlCharacters: false, // 不渲染控制字符\r\n      renderIndentGuides: false, // 不渲染缩进参考线\r\n      occurrencesHighlight: false, // 禁用相同单词高亮\r\n      renderLineHighlight: 'none', // 禁用当前行高亮\r\n      \r\n      // 性能优化\r\n      largeFileOptimizations: true,\r\n      \r\n      // 限制撤销/重做历史记录\r\n      wordBasedSuggestions: false, // 禁用基于单词的建议\r\n      suggestOnTriggerCharacters: false, // 禁用触发字符的建议\r\n      \r\n      // 虚拟化设置\r\n      scrollBeyondLastLine: false,\r\n      \r\n      // 延迟加载\r\n      quickSuggestions: false, // 禁用快速建议\r\n      parameterHints: {\r\n        enabled: false // 禁用参数提示\r\n      },\r\n      \r\n      // 减少内存使用\r\n      maxTokenizationLineLength: 5000, // 限制标记化的行长度\r\n      \r\n      // 禁用不必要的功能\r\n      links: false, // 禁用链接\r\n      hover: {\r\n        enabled: false // 禁用悬停提示\r\n      }\r\n    };\r\n  }\r\n  \r\n  return baseOptions;\r\n};","/**\r\n * JSON验证服务\r\n * 提供JSON验证和错误处理功能\r\n */\r\n\r\n/**\r\n * JSON错误接口\r\n * @typedef {Object} JsonError\r\n * @property {number} line - 错误所在行号\r\n * @property {number} column - 错误所在列号\r\n * @property {string} message - 错误信息\r\n * @property {('error'|'warning')} severity - 错误严重程度\r\n */\r\n\r\n/**\r\n * 验证JSON字符串\r\n * @param {string} jsonString - 要验证的JSON字符串\r\n * @returns {JsonError[]} - 错误列表\r\n */\r\nexport const validateJson = (jsonString) => {\r\n  if (!jsonString || jsonString.trim() === '') {\r\n    return [];\r\n  }\r\n\r\n  try {\r\n    JSON.parse(jsonString);\r\n    return []; // 如果解析成功，返回空错误列表\r\n  } catch (error) {\r\n    return parseJsonError(error, jsonString);\r\n  }\r\n};\r\n\r\n/**\r\n * 解析JSON错误并转换为编辑器可用的错误对象\r\n * @param {Error} error - JSON解析错误\r\n * @param {string} jsonString - 原始JSON字符串\r\n * @returns {JsonError[]} - 错误列表\r\n */\r\nexport const parseJsonError = (error, jsonString) => {\r\n  const message = error.message;\r\n  const lines = jsonString.split('\\n');\r\n  \r\n  // 尝试从错误消息中提取位置信息\r\n  const positionMatch = /at position (\\d+)/.exec(message);\r\n  if (positionMatch) {\r\n    const position = parseInt(positionMatch[1], 10);\r\n    const { line, column } = positionToLineColumn(position, jsonString);\r\n    \r\n    // 获取错误所在行的内容\r\n    const lineContent = line <= lines.length ? lines[line - 1] : '';\r\n    \r\n    return [{\r\n      line,\r\n      column,\r\n      lineContent,\r\n      message: message.replace(/^JSON\\.parse: /, '').replace(/^Unexpected token /, '意外的标记 '),\r\n      severity: 'error'\r\n    }];\r\n  }\r\n  \r\n  // 尝试从错误消息中提取行号和列号\r\n  const lineColMatch = /at line (\\d+) column (\\d+)/.exec(message);\r\n  if (lineColMatch) {\r\n    const line = parseInt(lineColMatch[1], 10);\r\n    const column = parseInt(lineColMatch[2], 10);\r\n    \r\n    // 获取错误所在行的内容\r\n    const lineContent = line <= lines.length ? lines[line - 1] : '';\r\n    \r\n    return [{\r\n      line,\r\n      column,\r\n      lineContent,\r\n      message: message.replace(/^JSON\\.parse: /, '').replace(/^Unexpected token /, '意外的标记 '),\r\n      severity: 'error'\r\n    }];\r\n  }\r\n  \r\n  // 如果无法提取位置信息，返回一个通用错误\r\n  return [{\r\n    line: 1,\r\n    column: 1,\r\n    lineContent: lines.length > 0 ? lines[0] : '',\r\n    message: message.replace(/^JSON\\.parse: /, ''),\r\n    severity: 'error'\r\n  }];\r\n};\r\n\r\n/**\r\n * 将字符位置转换为行号和列号\r\n * @param {number} position - 字符位置\r\n * @param {string} text - 文本内容\r\n * @returns {{line: number, column: number}} - 行号和列号\r\n */\r\nexport const positionToLineColumn = (position, text) => {\r\n  const lines = text.substring(0, position).split('\\n');\r\n  const line = lines.length;\r\n  const column = lines[lines.length - 1].length + 1;\r\n  \r\n  return { line, column };\r\n};\r\n\r\n/**\r\n * 将Monaco编辑器的标记转换为JsonError对象\r\n * @param {Object} marker - Monaco编辑器的标记\r\n * @returns {JsonError} - JsonError对象\r\n */\r\nexport const markerToJsonError = (marker) => {\r\n  return {\r\n    line: marker.startLineNumber,\r\n    column: marker.startColumn,\r\n    message: marker.message,\r\n    severity: marker.severity === 8 ? 'error' : 'warning'\r\n  };\r\n};\r\n\r\n/**\r\n * 将JsonError对象转换为Monaco编辑器的标记\r\n * @param {JsonError} error - JsonError对象\r\n * @param {string} modelUri - 模型URI\r\n * @returns {Object} - Monaco编辑器的标记\r\n */\r\nexport const jsonErrorToMarker = (error, modelUri) => {\r\n  // 获取行内容以确定更准确的错误范围\r\n  const lineContent = error.lineContent || '';\r\n  \r\n  // 计算错误范围\r\n  let endColumn = error.column + 1;\r\n  \r\n  // 如果有行内容，尝试确定更精确的错误范围\r\n  if (lineContent) {\r\n    // 对于常见的JSON错误，尝试确定更精确的范围\r\n    if (error.message.includes('Unexpected token')) {\r\n      // 从错误位置开始，找到下一个分隔符\r\n      const separators = [',', '}', ']', '{', '[', ':', '\\n'];\r\n      let nextSeparatorPos = -1;\r\n      \r\n      for (const sep of separators) {\r\n        const pos = lineContent.indexOf(sep, error.column - 1);\r\n        if (pos !== -1 && (nextSeparatorPos === -1 || pos < nextSeparatorPos)) {\r\n          nextSeparatorPos = pos;\r\n        }\r\n      }\r\n      \r\n      if (nextSeparatorPos !== -1) {\r\n        endColumn = nextSeparatorPos + 1;\r\n      } else {\r\n        // 如果找不到分隔符，使用行尾\r\n        endColumn = lineContent.length + 1;\r\n      }\r\n    } else if (error.message.includes('Expected') || error.message.includes('Missing')) {\r\n      // 对于缺少某些内容的错误，高亮整行\r\n      endColumn = lineContent.length + 1;\r\n    }\r\n  }\r\n  \r\n  return {\r\n    severity: error.severity === 'error' ? 8 : 4,\r\n    message: error.message,\r\n    startLineNumber: error.line,\r\n    startColumn: error.column,\r\n    endLineNumber: error.line,\r\n    endColumn: endColumn,\r\n    source: 'PDX JSON Editor',\r\n    modelUri,\r\n    // 添加标签，用于自定义装饰器\r\n    tags: ['json-error']\r\n  };\r\n};","/**\r\n * JSON验证Hook\r\n * 提供JSON验证功能和错误状态管理\r\n */\r\n\r\nimport { useState, useCallback } from 'preact/hooks';\r\nimport { validateJson, jsonErrorToMarker } from '../services/validationService';\r\n\r\n/**\r\n * 使用JSON验证的Hook\r\n * @returns {{\r\n *   errors: import('../services/validationService').JsonError[],\r\n *   validate: (jsonString: string) => import('../services/validationService').JsonError[],\r\n *   isValid: boolean,\r\n *   setModelMarkers: (monaco: any, model: any) => void\r\n * }} - JSON验证相关状态和方法\r\n */\r\nexport const useJsonValidation = () => {\r\n  const [errors, setErrors] = useState([]);\r\n  const [isValid, setIsValid] = useState(true);\r\n  \r\n  /**\r\n   * 验证JSON字符串\r\n   * @param {string} jsonString - 要验证的JSON字符串\r\n   * @returns {import('../services/validationService').JsonError[]} - 错误列表\r\n   */\r\n  const validate = useCallback((jsonString) => {\r\n    const validationErrors = validateJson(jsonString);\r\n    setErrors(validationErrors);\r\n    setIsValid(validationErrors.length === 0);\r\n    return validationErrors;\r\n  }, []);\r\n  \r\n  /**\r\n   * 设置Monaco编辑器的标记\r\n   * @param {any} monaco - Monaco实例\r\n   * @param {any} model - 编辑器模型\r\n   */\r\n  const setModelMarkers = useCallback((monaco, model) => {\r\n    if (!monaco || !model) return;\r\n    \r\n    const markers = errors.map(error => jsonErrorToMarker(error, model.uri));\r\n    monaco.editor.setModelMarkers(model, 'pdx-json-editor', markers);\r\n  }, [errors]);\r\n  \r\n  return {\r\n    errors,\r\n    validate,\r\n    isValid,\r\n    setModelMarkers\r\n  };\r\n};","/**\r\n * JSON编辑器Hook\r\n * 提供JSON编辑、格式化和压缩功能\r\n */\r\n\r\nimport { useState, useCallback } from 'preact/hooks';\r\nimport { formatJson, compressJson, tryFixJson } from '../services/jsonService';\r\n\r\n/**\r\n * 使用JSON编辑器的Hook\r\n * @param {string} initialValue - 初始JSON字符串\r\n * @returns {{\r\n *   value: string,\r\n *   setValue: (value: string) => void,\r\n *   formatJson: () => void,\r\n *   compressJson: () => void,\r\n *   tryFixJson: () => void,\r\n *   indentSize: number,\r\n *   setIndentSize: (size: number) => void,\r\n *   error: Error | null\r\n * }} - JSON编辑器相关状态和方法\r\n */\r\nexport const useJsonEditor = (initialValue = '') => {\r\n  const [value, setValue] = useState(initialValue);\r\n  const [indentSize, setIndentSize] = useState(2);\r\n  const [error, setError] = useState(null);\r\n  \r\n  /**\r\n   * 格式化当前JSON内容\r\n   * @returns {string} 格式化后的JSON\r\n   */\r\n  const format = useCallback(() => {\r\n    try {\r\n      const formatted = formatJson(value, indentSize);\r\n      setValue(formatted);\r\n      setError(null);\r\n      return formatted;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    }\r\n  }, [value, indentSize]);\r\n  \r\n  /**\r\n   * 压缩当前JSON内容\r\n   * @returns {string} 压缩后的JSON\r\n   */\r\n  const compress = useCallback(() => {\r\n    try {\r\n      const compressed = compressJson(value);\r\n      setValue(compressed);\r\n      setError(null);\r\n      return compressed;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    }\r\n  }, [value]);\r\n  \r\n  /**\r\n   * 尝试修复当前JSON内容\r\n   * @returns {string} 尝试修复后的JSON\r\n   */\r\n  const fix = useCallback(() => {\r\n    const fixed = tryFixJson(value);\r\n    \r\n    // 只有当修复后的内容与原始内容不同时才更新值\r\n    if (fixed !== value) {\r\n      setValue(fixed);\r\n    }\r\n    \r\n    // 检查修复是否成功\r\n    try {\r\n      JSON.parse(fixed);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError(new Error('无法自动修复JSON，请手动修复语法错误'));\r\n    }\r\n    \r\n    return fixed;\r\n  }, [value]);\r\n  \r\n  return {\r\n    value,\r\n    setValue,\r\n    formatJson: format,\r\n    compressJson: compress,\r\n    tryFixJson: fix,\r\n    indentSize,\r\n    setIndentSize,\r\n    error\r\n  };\r\n};","/**\r\n * JSON处理服务\r\n * 提供JSON格式化、压缩和其他处理功能\r\n */\r\n\r\n/**\r\n * 格式化JSON字符串\r\n * @param {string} jsonString - 要格式化的JSON字符串\r\n * @param {number} indentSize - 缩进大小（空格数）\r\n * @returns {string} - 格式化后的JSON字符串\r\n * @throws {Error} - 如果JSON无效，则抛出错误\r\n */\r\nexport const formatJson = (jsonString, indentSize = 2) => {\r\n  if (!jsonString || jsonString.trim() === '') {\r\n    return '';\r\n  }\r\n  \r\n  try {\r\n    // 首先验证JSON是否有效\r\n    const parsed = JSON.parse(jsonString);\r\n    \r\n    // 使用JSON.stringify进行格式化\r\n    // 注意：这可能会改变一些值的表示形式，比如数字、布尔值和null\r\n    // 但这是标准的JSON格式化行为\r\n    return JSON.stringify(parsed, null, indentSize);\r\n  } catch (error) {\r\n    throw new Error(`无法格式化无效的JSON: ${error.message}`);\r\n  }\r\n};\r\n\r\n/**\r\n * 压缩JSON字符串（移除所有空白字符）\r\n * @param {string} jsonString - 要压缩的JSON字符串\r\n * @returns {string} - 压缩后的JSON字符串\r\n * @throws {Error} - 如果JSON无效，则抛出错误\r\n */\r\nexport const compressJson = (jsonString) => {\r\n  if (!jsonString || jsonString.trim() === '') {\r\n    return '';\r\n  }\r\n  \r\n  try {\r\n    // 首先验证JSON是否有效\r\n    JSON.parse(jsonString);\r\n    \r\n    // 使用更安全的方法压缩JSON\r\n    // 这个方法会保留所有原始内容，只移除不必要的空白字符\r\n    let inString = false;  // 是否在字符串内\r\n    let escaped = false;   // 是否转义\r\n    let compressed = '';   // 压缩后的结果\r\n    \r\n    // 逐字符处理\r\n    for (let i = 0; i < jsonString.length; i++) {\r\n      const char = jsonString[i];\r\n      \r\n      // 处理字符串内的字符\r\n      if (inString) {\r\n        compressed += char;\r\n        if (escaped) {\r\n          escaped = false;  // 重置转义状态\r\n        } else if (char === '\\\\') {\r\n          escaped = true;   // 设置转义状态\r\n        } else if (char === '\"') {\r\n          inString = false; // 字符串结束\r\n        }\r\n        continue;\r\n      }\r\n      \r\n      // 处理字符串外的字符\r\n      if (char === '\"') {\r\n        inString = true;    // 字符串开始\r\n        compressed += char;\r\n      } else if (/\\s/.test(char)) {\r\n        // 忽略字符串外的空白字符\r\n        continue;\r\n      } else {\r\n        compressed += char;\r\n      }\r\n    }\r\n    \r\n    return compressed;\r\n  } catch (error) {\r\n    throw new Error(`无法压缩无效的JSON: ${error.message}`);\r\n  }\r\n};\r\n\r\n/**\r\n * 尝试修复简单的JSON错误\r\n * @param {string} jsonString - 可能包含错误的JSON字符串\r\n * @returns {string} - 尝试修复后的JSON字符串\r\n */\r\nexport const tryFixJson = (jsonString) => {\r\n  if (!jsonString || jsonString.trim() === '') {\r\n    return jsonString; // 返回原始字符串，而不是空字符串\r\n  }\r\n  \r\n  // 尝试先解析，如果已经是有效的JSON，则直接返回原始字符串\r\n  try {\r\n    JSON.parse(jsonString);\r\n    return jsonString; // 已经是有效的JSON，无需修复\r\n  } catch (initialError) {\r\n    // 继续尝试修复\r\n  }\r\n  \r\n  // 尝试修复常见错误\r\n  let fixedJson = jsonString\r\n    // 修复缺少引号的键\r\n    .replace(/([{,]\\s*)(\\w+)(\\s*:)/g, '$1\"$2\"$3')\r\n    // 修复单引号\r\n    .replace(/([{,]\\s*)\"?(\\w+)\"?\\s*:\\s*'([^']*)'(\\s*[},])/g, '$1\"$2\":\"$3\"$4')\r\n    // 修复尾随逗号\r\n    .replace(/,(\\s*[}\\]])/g, '$1');\r\n  \r\n  try {\r\n    // 验证修复是否成功\r\n    JSON.parse(fixedJson);\r\n    return fixedJson;\r\n  } catch (error) {\r\n    // 如果修复失败，返回原始字符串\r\n    return jsonString;\r\n  }\r\n};\r\n\r\n/**\r\n * 获取JSON的结构摘要\r\n * @param {string} jsonString - JSON字符串\r\n * @returns {Object} - 包含键数量、嵌套深度等信息的摘要对象\r\n */\r\nexport const getJsonSummary = (jsonString) => {\r\n  if (!jsonString || jsonString.trim() === '') {\r\n    return {\r\n      valid: false,\r\n      keyCount: 0,\r\n      depth: 0,\r\n      arrayCount: 0,\r\n      objectCount: 0\r\n    };\r\n  }\r\n  \r\n  try {\r\n    const parsed = JSON.parse(jsonString);\r\n    \r\n    // 计算键数量、嵌套深度等\r\n    let keyCount = 0;\r\n    let maxDepth = 0;\r\n    let arrayCount = 0;\r\n    let objectCount = 0;\r\n    \r\n    const traverse = (obj, depth = 1, maxAllowedDepth = 100) => {\r\n      // 添加深度限制以防止栈溢出\r\n      if (depth > maxAllowedDepth) {\r\n        throw new Error(`JSON嵌套深度超过${maxAllowedDepth}层，可能导致性能问题`);\r\n      }\r\n      \r\n      if (depth > maxDepth) maxDepth = depth;\r\n      \r\n      if (Array.isArray(obj)) {\r\n        arrayCount++;\r\n        obj.forEach(item => {\r\n          if (typeof item === 'object' && item !== null) {\r\n            traverse(item, depth + 1, maxAllowedDepth);\r\n          }\r\n        });\r\n      } else if (typeof obj === 'object' && obj !== null) {\r\n        objectCount++;\r\n        Object.keys(obj).forEach(key => {\r\n          keyCount++;\r\n          if (typeof obj[key] === 'object' && obj[key] !== null) {\r\n            traverse(obj[key], depth + 1, maxAllowedDepth);\r\n          }\r\n        });\r\n      }\r\n    };\r\n    \r\n    traverse(parsed);\r\n    \r\n    return {\r\n      valid: true,\r\n      keyCount,\r\n      depth: maxDepth,\r\n      arrayCount,\r\n      objectCount\r\n    };\r\n  } catch (error) {\r\n    return {\r\n      valid: false,\r\n      keyCount: 0,\r\n      depth: 0,\r\n      arrayCount: 0,\r\n      objectCount: 0,\r\n      error: error.message\r\n    };\r\n  }\r\n};","/**\r\n * JSON Schema服务\r\n * 提供JSON Schema加载、管理和验证功能\r\n */\r\n\r\n// 预定义的常用JSON Schema\r\nconst PREDEFINED_SCHEMAS = {\r\n  'package.json': {\r\n    uri: 'https://json.schemastore.org/package.json',\r\n    fileMatch: ['package.json'],\r\n    name: 'NPM包配置',\r\n    description: 'NPM包配置文件的JSON Schema'\r\n  },\r\n  'tsconfig.json': {\r\n    uri: 'https://json.schemastore.org/tsconfig.json',\r\n    fileMatch: ['tsconfig.json'],\r\n    name: 'TypeScript配置',\r\n    description: 'TypeScript配置文件的JSON Schema'\r\n  },\r\n  'eslintrc.json': {\r\n    uri: 'https://json.schemastore.org/eslintrc.json',\r\n    fileMatch: ['.eslintrc', '.eslintrc.json'],\r\n    name: 'ESLint配置',\r\n    description: 'ESLint配置文件的JSON Schema'\r\n  },\r\n  'prettierrc.json': {\r\n    uri: 'https://json.schemastore.org/prettierrc.json',\r\n    fileMatch: ['.prettierrc', '.prettierrc.json'],\r\n    name: 'Prettier配置',\r\n    description: 'Prettier配置文件的JSON Schema'\r\n  },\r\n  'swagger.json': {\r\n    uri: 'https://json.schemastore.org/swagger-2.0.json',\r\n    fileMatch: ['swagger.json'],\r\n    name: 'Swagger 2.0',\r\n    description: 'Swagger 2.0 API文档的JSON Schema'\r\n  },\r\n  'openapi.json': {\r\n    uri: 'https://json.schemastore.org/openapi-3.0.json',\r\n    fileMatch: ['openapi.json'],\r\n    name: 'OpenAPI 3.0',\r\n    description: 'OpenAPI 3.0 API文档的JSON Schema'\r\n  },\r\n  'github-workflow': {\r\n    uri: 'https://json.schemastore.org/github-workflow.json',\r\n    fileMatch: ['.github/workflows/*.yml', '.github/workflows/*.yaml'],\r\n    name: 'GitHub工作流',\r\n    description: 'GitHub Actions工作流配置的JSON Schema'\r\n  },\r\n  'docker-compose': {\r\n    uri: 'https://json.schemastore.org/docker-compose.json',\r\n    fileMatch: ['docker-compose.yml', 'docker-compose.yaml'],\r\n    name: 'Docker Compose',\r\n    description: 'Docker Compose配置文件的JSON Schema'\r\n  }\r\n};\r\n\r\n// 用户自定义Schema存储\r\nconst USER_SCHEMAS_STORAGE_KEY = 'pdx-json-editor-schemas';\r\n\r\n/**\r\n * 获取所有可用的Schema\r\n * @returns {Object[]} - Schema列表\r\n */\r\nexport const getAllSchemas = () => {\r\n  const predefinedSchemasList = Object.entries(PREDEFINED_SCHEMAS).map(([id, schema]) => ({\r\n    id,\r\n    ...schema,\r\n    predefined: true\r\n  }));\r\n  \r\n  const userSchemas = getUserSchemas();\r\n  \r\n  return [...predefinedSchemasList, ...userSchemas];\r\n};\r\n\r\n/**\r\n * 获取用户自定义Schema\r\n * @returns {Object[]} - 用户自定义Schema列表\r\n */\r\nexport const getUserSchemas = () => {\r\n  try {\r\n    const storedSchemas = localStorage.getItem(USER_SCHEMAS_STORAGE_KEY);\r\n    return storedSchemas ? JSON.parse(storedSchemas) : [];\r\n  } catch (error) {\r\n    console.error('加载用户Schema失败:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * 保存用户自定义Schema\r\n * @param {Object[]} schemas - 用户自定义Schema列表\r\n */\r\nexport const saveUserSchemas = (schemas) => {\r\n  try {\r\n    localStorage.setItem(USER_SCHEMAS_STORAGE_KEY, JSON.stringify(schemas));\r\n  } catch (error) {\r\n    console.error('保存用户Schema失败:', error);\r\n  }\r\n};\r\n\r\n/**\r\n * 添加用户自定义Schema\r\n * @param {Object} schema - 用户自定义Schema\r\n * @returns {Object[]} - 更新后的用户自定义Schema列表\r\n */\r\nexport const addUserSchema = (schema) => {\r\n  const userSchemas = getUserSchemas();\r\n  \r\n  // 生成唯一ID\r\n  const id = `user-schema-${Date.now()}`;\r\n  const newSchema = {\r\n    id,\r\n    ...schema,\r\n    predefined: false\r\n  };\r\n  \r\n  const updatedSchemas = [...userSchemas, newSchema];\r\n  saveUserSchemas(updatedSchemas);\r\n  \r\n  return updatedSchemas;\r\n};\r\n\r\n/**\r\n * 删除用户自定义Schema\r\n * @param {string} id - Schema ID\r\n * @returns {Object[]} - 更新后的用户自定义Schema列表\r\n */\r\nexport const deleteUserSchema = (id) => {\r\n  const userSchemas = getUserSchemas();\r\n  const updatedSchemas = userSchemas.filter(schema => schema.id !== id);\r\n  saveUserSchemas(updatedSchemas);\r\n  \r\n  return updatedSchemas;\r\n};\r\n\r\n/**\r\n * 更新用户自定义Schema\r\n * @param {string} id - Schema ID\r\n * @param {Object} updatedSchema - 更新后的Schema\r\n * @returns {Object[]} - 更新后的用户自定义Schema列表\r\n */\r\nexport const updateUserSchema = (id, updatedSchema) => {\r\n  const userSchemas = getUserSchemas();\r\n  const updatedSchemas = userSchemas.map(schema => \r\n    schema.id === id ? { ...schema, ...updatedSchema } : schema\r\n  );\r\n  saveUserSchemas(updatedSchemas);\r\n  \r\n  return updatedSchemas;\r\n};\r\n\r\n/**\r\n * 配置Monaco编辑器的JSON Schema支持\r\n * @param {any} monaco - Monaco实例\r\n * @param {string|null} schemaId - 要应用的Schema ID，如果为null则清除Schema\r\n */\r\nexport const configureJsonSchema = (monaco, schemaId = null) => {\r\n  if (!monaco || !monaco.languages || !monaco.languages.json || !monaco.languages.json.jsonDefaults) {\r\n    console.warn('Monaco JSON language support not available');\r\n    return;\r\n  }\r\n  \r\n  try {\r\n    // 默认诊断选项\r\n    const defaultOptions = {\r\n      validate: true,\r\n      allowComments: false,\r\n      schemas: [],\r\n      enableSchemaRequest: true,\r\n      schemaRequest: 'warning'\r\n    };\r\n    \r\n    // 尝试获取当前的诊断选项，如果不可用则使用默认选项\r\n    let currentOptions = defaultOptions;\r\n    try {\r\n      if (typeof monaco.languages.json.jsonDefaults.getDiagnosticsOptions === 'function') {\r\n        currentOptions = monaco.languages.json.jsonDefaults.getDiagnosticsOptions();\r\n      }\r\n    } catch (e) {\r\n      console.warn('Failed to get diagnostics options, using defaults');\r\n    }\r\n    \r\n    if (!schemaId) {\r\n      // 清除Schema\r\n      monaco.languages.json.jsonDefaults.setDiagnosticsOptions({\r\n        ...currentOptions,\r\n        schemas: []\r\n      });\r\n      return;\r\n    }\r\n    \r\n    // 查找指定的Schema\r\n    const allSchemas = getAllSchemas();\r\n    const selectedSchema = allSchemas.find(schema => schema.id === schemaId);\r\n    \r\n    if (!selectedSchema) {\r\n      console.error(`未找到ID为${schemaId}的Schema`);\r\n      return;\r\n    }\r\n    \r\n    // 设置Schema\r\n    monaco.languages.json.jsonDefaults.setDiagnosticsOptions({\r\n      ...currentOptions,\r\n      validate: true,\r\n      schemas: [\r\n        {\r\n          uri: selectedSchema.uri,\r\n          fileMatch: selectedSchema.fileMatch || ['*'],\r\n          schema: selectedSchema.schema // 如果是内联Schema\r\n        }\r\n      ],\r\n      enableSchemaRequest: true\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to configure JSON schema:', error);\r\n  }\r\n};\r\n\r\n/**\r\n * 从URL加载JSON Schema\r\n * @param {string} url - Schema URL\r\n * @returns {Promise<Object>} - 加载的Schema对象\r\n */\r\nexport const loadSchemaFromUrl = async (url) => {\r\n  try {\r\n    const response = await fetch(url);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP错误: ${response.status}`);\r\n    }\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('加载Schema失败:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * 从文件加载JSON Schema\r\n * @param {File} file - Schema文件\r\n * @returns {Promise<Object>} - 加载的Schema对象\r\n */\r\nexport const loadSchemaFromFile = (file) => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    \r\n    reader.onload = (event) => {\r\n      try {\r\n        const schema = JSON.parse(event.target.result);\r\n        resolve(schema);\r\n      } catch (error) {\r\n        reject(new Error('无效的JSON Schema文件'));\r\n      }\r\n    };\r\n    \r\n    reader.onerror = () => {\r\n      reject(new Error('读取文件失败'));\r\n    };\r\n    \r\n    reader.readAsText(file);\r\n  });\r\n};\r\n\r\n/**\r\n * 检测JSON内容可能匹配的Schema\r\n * @param {string} jsonContent - JSON内容\r\n * @returns {string|null} - 匹配的Schema ID，如果没有匹配则返回null\r\n */\r\nexport const detectSchema = (jsonContent) => {\r\n  try {\r\n    const content = JSON.parse(jsonContent);\r\n    const allSchemas = getAllSchemas();\r\n    \r\n    // 检查常见的标识字段\r\n    if (content.name && content.version && content.dependencies) {\r\n      return 'package.json';\r\n    }\r\n    \r\n    if (content.compilerOptions && content.include) {\r\n      return 'tsconfig.json';\r\n    }\r\n    \r\n    if (content.rules && content.extends) {\r\n      return 'eslintrc.json';\r\n    }\r\n    \r\n    if (content.swagger && content.info && content.paths) {\r\n      return 'swagger.json';\r\n    }\r\n    \r\n    if (content.openapi && content.info && content.paths) {\r\n      return 'openapi.json';\r\n    }\r\n    \r\n    // 如果没有匹配到预定义Schema，尝试匹配用户Schema\r\n    for (const schema of allSchemas) {\r\n      if (!schema.predefined && schema.detectPattern) {\r\n        try {\r\n          const pattern = new RegExp(schema.detectPattern);\r\n          if (pattern.test(jsonContent)) {\r\n            return schema.id;\r\n          }\r\n        } catch (e) {\r\n          // 忽略无效的正则表达式\r\n        }\r\n      }\r\n    }\r\n    \r\n    return null;\r\n  } catch (error) {\r\n    // JSON解析失败，无法检测Schema\r\n    return null;\r\n  }\r\n};","/**\r\n * JSON Schema Hook\r\n * 提供JSON Schema管理和应用功能\r\n */\r\n\r\nimport { useState, useEffect, useCallback, useRef } from 'preact/hooks';\r\nimport { \r\n  getAllSchemas, \r\n  configureJsonSchema, \r\n  detectSchema,\r\n  addUserSchema,\r\n  deleteUserSchema,\r\n  updateUserSchema\r\n} from '../services/schemaService';\r\nimport PersistenceService from '../services/persistenceService';\r\nimport errorService from '../services/errorService';\r\n\r\n/**\r\n * 使用JSON Schema的Hook\r\n * @param {Object} monaco - Monaco实例\r\n * @param {string} jsonContent - JSON内容\r\n * @returns {{\r\n *   schemas: Object[],\r\n *   selectedSchemaId: string|null,\r\n *   setSelectedSchemaId: (id: string|null) => void,\r\n *   addSchema: (schema: Object) => void,\r\n *   deleteSchema: (id: string) => void,\r\n *   updateSchema: (id: string, schema: Object) => void,\r\n *   autoDetectSchema: () => string|null\r\n * }} - JSON Schema相关状态和方法\r\n */\r\nexport const useJsonSchema = (monaco, jsonContent) => {\r\n  const [schemas, setSchemas] = useState([]);\r\n  const [selectedSchemaId, setSelectedSchemaId] = useState(null);\r\n  // 添加一个引用来跟踪最新的Schema ID\r\n  const latestSchemaIdRef = useRef(selectedSchemaId);\r\n  \r\n  // 加载所有可用的Schema\r\n  useEffect(() => {\r\n    // 先加载内置Schema\r\n    const builtInSchemas = getAllSchemas();\r\n    \r\n    // 尝试从本地存储加载用户Schema\r\n    try {\r\n      const savedSchemas = PersistenceService.loadSchemas();\r\n      if (savedSchemas && Array.isArray(savedSchemas)) {\r\n        // 合并内置Schema和用户Schema，确保没有重复\r\n        const userSchemas = savedSchemas.filter(\r\n          schema => !builtInSchemas.some(s => s.id === schema.id)\r\n        );\r\n        \r\n        setSchemas([...builtInSchemas, ...userSchemas]);\r\n        return;\r\n      }\r\n    } catch (error) {\r\n      errorService.handleError(error);\r\n    }\r\n    \r\n    // 如果没有保存的Schema或加载失败，使用内置Schema\r\n    setSchemas(builtInSchemas);\r\n  }, []);\r\n  \r\n  // 当选择的Schema ID变化时，配置Monaco编辑器\r\n  useEffect(() => {\r\n    // 更新引用以跟踪最新的Schema ID\r\n    latestSchemaIdRef.current = selectedSchemaId;\r\n    \r\n    if (monaco) {\r\n      configureJsonSchema(monaco, selectedSchemaId);\r\n    }\r\n  }, [monaco, selectedSchemaId]);\r\n  \r\n  // 添加新的Schema\r\n  const addSchema = useCallback((schema) => {\r\n    const updatedSchemas = addUserSchema(schema);\r\n    const allSchemas = [...getAllSchemas()];\r\n    setSchemas(allSchemas);\r\n    \r\n    // 保存到本地存储\r\n    try {\r\n      // 只保存用户自定义的Schema\r\n      const userSchemas = allSchemas.filter(s => !s.predefined);\r\n      PersistenceService.saveSchemas(userSchemas);\r\n    } catch (error) {\r\n      errorService.handleError(error);\r\n    }\r\n    \r\n    return schema;\r\n  }, []);\r\n  \r\n  // 删除Schema\r\n  const deleteSchema = useCallback((id) => {\r\n    // 只能删除用户自定义的Schema\r\n    const schema = schemas.find(s => s.id === id);\r\n    if (schema && !schema.predefined) {\r\n      deleteUserSchema(id);\r\n      const allSchemas = [...getAllSchemas()];\r\n      setSchemas(allSchemas);\r\n      \r\n      // 如果删除的是当前选中的Schema，清除选择\r\n      if (selectedSchemaId === id) {\r\n        setSelectedSchemaId(null);\r\n      }\r\n      \r\n      // 保存到本地存储\r\n      try {\r\n        // 只保存用户自定义的Schema\r\n        const userSchemas = allSchemas.filter(s => !s.predefined);\r\n        PersistenceService.saveSchemas(userSchemas);\r\n      } catch (error) {\r\n        errorService.handleError(error);\r\n      }\r\n    }\r\n  }, [schemas, selectedSchemaId]);\r\n  \r\n  // 更新Schema\r\n  const updateSchema = useCallback((id, updatedSchema) => {\r\n    // 只能更新用户自定义的Schema\r\n    const schema = schemas.find(s => s.id === id);\r\n    if (schema && !schema.predefined) {\r\n      updateUserSchema(id, updatedSchema);\r\n      const allSchemas = [...getAllSchemas()];\r\n      setSchemas(allSchemas);\r\n      \r\n      // 保存到本地存储\r\n      try {\r\n        // 只保存用户自定义的Schema\r\n        const userSchemas = allSchemas.filter(s => !s.predefined);\r\n        PersistenceService.saveSchemas(userSchemas);\r\n      } catch (error) {\r\n        errorService.handleError(error);\r\n      }\r\n    }\r\n  }, [schemas]);\r\n  \r\n  // 自动检测Schema\r\n  const autoDetectSchema = useCallback(() => {\r\n    if (!jsonContent) return null;\r\n    \r\n    const detectedSchemaId = detectSchema(jsonContent);\r\n    if (detectedSchemaId) {\r\n      setSelectedSchemaId(detectedSchemaId);\r\n    }\r\n    \r\n    return detectedSchemaId;\r\n  }, [jsonContent]);\r\n  \r\n  return {\r\n    schemas,\r\n    selectedSchemaId,\r\n    setSelectedSchemaId,\r\n    addSchema,\r\n    deleteSchema,\r\n    updateSchema,\r\n    autoDetectSchema\r\n  };\r\n};","/**\r\n * 响应式Hook\r\n * 提供响应式设计相关的功能\r\n */\r\n\r\nimport { useState, useEffect } from 'preact/hooks';\r\n\r\n/**\r\n * 断点定义\r\n */\r\nexport const breakpoints = {\r\n  xs: 0,\r\n  sm: 600,\r\n  md: 960,\r\n  lg: 1280,\r\n  xl: 1920\r\n};\r\n\r\n/**\r\n * 使用媒体查询的Hook\r\n * @param {string} query - 媒体查询字符串\r\n * @returns {boolean} - 媒体查询结果\r\n */\r\nexport const useMediaQuery = (query) => {\r\n  const [matches, setMatches] = useState(false);\r\n  \r\n  useEffect(() => {\r\n    const mediaQuery = window.matchMedia(query);\r\n    \r\n    // 设置初始值\r\n    setMatches(mediaQuery.matches);\r\n    \r\n    // 监听媒体查询变化\r\n    const handleChange = (event) => {\r\n      setMatches(event.matches);\r\n    };\r\n    \r\n    // 添加监听器\r\n    if (mediaQuery.addEventListener) {\r\n      mediaQuery.addEventListener('change', handleChange);\r\n    } else if (mediaQuery.addListener) {\r\n      // 兼容旧版浏览器\r\n      mediaQuery.addListener(handleChange);\r\n    }\r\n    \r\n    // 清理监听器\r\n    return () => {\r\n      if (mediaQuery.removeEventListener) {\r\n        mediaQuery.removeEventListener('change', handleChange);\r\n      } else if (mediaQuery.removeListener) {\r\n        mediaQuery.removeListener(handleChange);\r\n      }\r\n    };\r\n  }, [query]);\r\n  \r\n  return matches;\r\n};\r\n\r\n/**\r\n * 使用断点的Hook\r\n * @returns {{\r\n *   isMobile: boolean,\r\n *   isTablet: boolean,\r\n *   isDesktop: boolean,\r\n *   isLargeDesktop: boolean,\r\n *   breakpoint: string\r\n * }} - 断点相关状态\r\n */\r\nexport const useBreakpoint = () => {\r\n  const isXs = useMediaQuery(`(max-width: ${breakpoints.sm - 1}px)`);\r\n  const isSm = useMediaQuery(`(min-width: ${breakpoints.sm}px) and (max-width: ${breakpoints.md - 1}px)`);\r\n  const isMd = useMediaQuery(`(min-width: ${breakpoints.md}px) and (max-width: ${breakpoints.lg - 1}px)`);\r\n  const isLg = useMediaQuery(`(min-width: ${breakpoints.lg}px) and (max-width: ${breakpoints.xl - 1}px)`);\r\n  const isXl = useMediaQuery(`(min-width: ${breakpoints.xl}px)`);\r\n  \r\n  // 当前断点\r\n  const breakpoint = isXs ? 'xs' : isSm ? 'sm' : isMd ? 'md' : isLg ? 'lg' : 'xl';\r\n  \r\n  return {\r\n    isMobile: isXs,\r\n    isTablet: isSm || isMd,\r\n    isDesktop: isLg || isXl,\r\n    isLargeDesktop: isXl,\r\n    breakpoint\r\n  };\r\n};\r\n\r\n/**\r\n * 使用触摸设备检测的Hook\r\n * @returns {boolean} - 是否为触摸设备\r\n */\r\nexport const useTouchDevice = () => {\r\n  const [isTouch, setIsTouch] = useState(false);\r\n  \r\n  useEffect(() => {\r\n    // 检测是否为触摸设备\r\n    const isTouchDevice = 'ontouchstart' in window || \r\n      navigator.maxTouchPoints > 0 ||\r\n      navigator.msMaxTouchPoints > 0;\r\n    \r\n    setIsTouch(isTouchDevice);\r\n  }, []);\r\n  \r\n  return isTouch;\r\n};\r\n\r\n/**\r\n * 使用屏幕方向的Hook\r\n * @returns {string} - 屏幕方向 ('portrait' 或 'landscape')\r\n */\r\nexport const useOrientation = () => {\r\n  const [orientation, setOrientation] = useState('portrait');\r\n  \r\n  useEffect(() => {\r\n    // 获取初始方向\r\n    const getOrientation = () => {\r\n      if (window.screen && window.screen.orientation) {\r\n        return window.screen.orientation.type.includes('portrait') ? 'portrait' : 'landscape';\r\n      } else if (window.matchMedia) {\r\n        return window.matchMedia('(orientation: portrait)').matches ? 'portrait' : 'landscape';\r\n      }\r\n      return 'portrait';\r\n    };\r\n    \r\n    setOrientation(getOrientation());\r\n    \r\n    // 监听方向变化\r\n    const handleOrientationChange = () => {\r\n      setOrientation(getOrientation());\r\n    };\r\n    \r\n    window.addEventListener('orientationchange', handleOrientationChange);\r\n    \r\n    if (window.screen && window.screen.orientation) {\r\n      window.screen.orientation.addEventListener('change', handleOrientationChange);\r\n    } else if (window.matchMedia) {\r\n      window.matchMedia('(orientation: portrait)').addEventListener('change', handleOrientationChange);\r\n    }\r\n    \r\n    return () => {\r\n      window.removeEventListener('orientationchange', handleOrientationChange);\r\n      \r\n      if (window.screen && window.screen.orientation) {\r\n        window.screen.orientation.removeEventListener('change', handleOrientationChange);\r\n      } else if (window.matchMedia) {\r\n        window.matchMedia('(orientation: portrait)').removeEventListener('change', handleOrientationChange);\r\n      }\r\n    };\r\n  }, []);\r\n  \r\n  return orientation;\r\n};","/**\r\n * 键盘快捷键Hook\r\n * 提供键盘快捷键处理功能\r\n */\r\n\r\nimport { useState, useEffect, useCallback } from 'preact/hooks';\r\nimport { useTouchDevice } from './useResponsive';\r\n\r\n/**\r\n * 快捷键定义\r\n */\r\nexport const SHORTCUTS = {\r\n  FORMAT: {\r\n    key: 'F',\r\n    modifier: 'Ctrl+Shift',\r\n    description: '格式化JSON',\r\n    action: 'format'\r\n  },\r\n  COMPRESS: {\r\n    key: 'M',\r\n    modifier: 'Ctrl+Shift',\r\n    description: '压缩JSON',\r\n    action: 'compress'\r\n  },\r\n  SEARCH: {\r\n    key: 'F',\r\n    modifier: 'Ctrl',\r\n    description: '搜索',\r\n    action: 'search'\r\n  },\r\n  SAVE: {\r\n    key: 'S',\r\n    modifier: 'Ctrl',\r\n    description: '保存',\r\n    action: 'save'\r\n  },\r\n  NEW: {\r\n    key: 'N',\r\n    modifier: 'Ctrl',\r\n    description: '新建',\r\n    action: 'new'\r\n  },\r\n  OPEN: {\r\n    key: 'O',\r\n    modifier: 'Ctrl',\r\n    description: '打开',\r\n    action: 'open'\r\n  },\r\n  DIFF: {\r\n    key: 'D',\r\n    modifier: 'Ctrl+Alt',\r\n    description: '差异对比',\r\n    action: 'diff'\r\n  },\r\n  HELP: {\r\n    key: '?',\r\n    modifier: '',\r\n    description: '显示快捷键帮助',\r\n    action: 'help'\r\n  },\r\n  FOLD_ALL: {\r\n    key: '[',\r\n    modifier: 'Ctrl',\r\n    description: '折叠所有',\r\n    action: 'foldAll'\r\n  },\r\n  UNFOLD_ALL: {\r\n    key: ']',\r\n    modifier: 'Ctrl',\r\n    description: '展开所有',\r\n    action: 'unfoldAll'\r\n  },\r\n  UNDO: {\r\n    key: 'Z',\r\n    modifier: 'Ctrl',\r\n    description: '撤销',\r\n    action: 'undo'\r\n  },\r\n  REDO: {\r\n    key: 'Y',\r\n    modifier: 'Ctrl',\r\n    description: '重做',\r\n    action: 'redo'\r\n  }\r\n};\r\n\r\n/**\r\n * 使用键盘快捷键的Hook\r\n * @param {Object} handlers - 快捷键处理函数映射\r\n * @param {Function} handlers.format - 格式化处理函数\r\n * @param {Function} handlers.compress - 压缩处理函数\r\n * @param {Function} handlers.search - 搜索处理函数\r\n * @param {Function} handlers.save - 保存处理函数\r\n * @param {Function} handlers.new - 新建处理函数\r\n * @param {Function} handlers.open - 打开处理函数\r\n * @param {Function} handlers.diff - 差异对比处理函数\r\n * @param {Function} handlers.help - 帮助处理函数\r\n * @param {Function} handlers.foldAll - 折叠所有处理函数\r\n * @param {Function} handlers.unfoldAll - 展开所有处理函数\r\n * @param {Function} handlers.undo - 撤销处理函数\r\n * @param {Function} handlers.redo - 重做处理函数\r\n * @param {boolean} enabled - 是否启用快捷键\r\n * @returns {{\r\n *   showHelp: boolean,\r\n *   setShowHelp: (show: boolean) => void,\r\n *   toggleHelp: () => void\r\n * }} - 快捷键相关状态和方法\r\n */\r\nexport const useKeyboardShortcuts = (handlers = {}, enabled = true) => {\r\n  const [showHelp, setShowHelp] = useState(false);\r\n  const isTouch = useTouchDevice();\r\n  \r\n  // 切换帮助对话框\r\n  const toggleHelp = useCallback(() => {\r\n    setShowHelp(prev => !prev);\r\n  }, []);\r\n  \r\n  // 在触摸设备上禁用键盘快捷键\r\n  const isEnabled = enabled && !isTouch;\r\n  \r\n  useEffect(() => {\r\n    if (!isEnabled) return;\r\n    \r\n    const handleKeyDown = (event) => {\r\n      // 检查是否在输入元素中\r\n      const isInInput = ['INPUT', 'TEXTAREA', 'SELECT'].includes(event.target.tagName) ||\r\n                        event.target.isContentEditable ||\r\n                        event.target.getAttribute('role') === 'textbox';\r\n      \r\n      // 如果在输入元素中，只处理特定的快捷键（如Esc和?）\r\n      if (isInInput && event.key !== 'Escape' && event.key !== '?') {\r\n        return;\r\n      }\r\n      \r\n      // 格式化: Ctrl+Shift+F\r\n      if (event.ctrlKey && event.shiftKey && event.key.toUpperCase() === 'F') {\r\n        event.preventDefault();\r\n        if (handlers.format) handlers.format();\r\n      }\r\n      \r\n      // 压缩: Ctrl+Shift+M\r\n      if (event.ctrlKey && event.shiftKey && event.key.toUpperCase() === 'M') {\r\n        event.preventDefault();\r\n        if (handlers.compress) handlers.compress();\r\n      }\r\n      \r\n      // 搜索: Ctrl+F (由Monaco Editor处理)\r\n      if (event.ctrlKey && !event.shiftKey && event.key.toLowerCase() === 'f') {\r\n        if (handlers.search) {\r\n          event.preventDefault();\r\n          handlers.search();\r\n        }\r\n      }\r\n      \r\n      // 保存: Ctrl+S\r\n      if (event.ctrlKey && !event.shiftKey && event.key.toLowerCase() === 's') {\r\n        event.preventDefault();\r\n        if (handlers.save) handlers.save();\r\n      }\r\n      \r\n      // 新建: Ctrl+N\r\n      if (event.ctrlKey && !event.shiftKey && event.key.toLowerCase() === 'n') {\r\n        event.preventDefault();\r\n        if (handlers.new) handlers.new();\r\n      }\r\n      \r\n      // 打开: Ctrl+O\r\n      if (event.ctrlKey && !event.shiftKey && event.key.toLowerCase() === 'o') {\r\n        event.preventDefault();\r\n        if (handlers.open) handlers.open();\r\n      }\r\n      \r\n      // 帮助: ?\r\n      if (!event.ctrlKey && !event.shiftKey && event.key === '?') {\r\n        event.preventDefault();\r\n        if (handlers.help) {\r\n          handlers.help();\r\n        } else {\r\n          toggleHelp();\r\n        }\r\n      }\r\n      \r\n      // 折叠所有: Ctrl+[\r\n      if (event.ctrlKey && !event.shiftKey && event.key === '[') {\r\n        event.preventDefault();\r\n        if (handlers.foldAll) handlers.foldAll();\r\n      }\r\n      \r\n      // 展开所有: Ctrl+]\r\n      if (event.ctrlKey && !event.shiftKey && event.key === ']') {\r\n        event.preventDefault();\r\n        if (handlers.unfoldAll) handlers.unfoldAll();\r\n      }\r\n      \r\n      // 差异对比: Ctrl+Alt+D\r\n      if (event.ctrlKey && event.altKey && event.key.toLowerCase() === 'd') {\r\n        event.preventDefault();\r\n        if (handlers.diff) handlers.diff();\r\n      }\r\n      \r\n      // 撤销: Ctrl+Z (通常由Monaco Editor处理，但我们也可以添加自定义处理)\r\n      if (event.ctrlKey && !event.shiftKey && !event.altKey && event.key.toLowerCase() === 'z') {\r\n        // 注意：我们不阻止默认行为，因为Monaco Editor已经处理了这个快捷键\r\n        if (handlers.undo) handlers.undo();\r\n      }\r\n      \r\n      // 重做: Ctrl+Y (通常由Monaco Editor处理，但我们也可以添加自定义处理)\r\n      if (event.ctrlKey && !event.shiftKey && !event.altKey && event.key.toLowerCase() === 'y') {\r\n        // 注意：我们不阻止默认行为，因为Monaco Editor已经处理了这个快捷键\r\n        if (handlers.redo) handlers.redo();\r\n      }\r\n    };\r\n    \r\n    window.addEventListener('keydown', handleKeyDown);\r\n    \r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [handlers, isEnabled, toggleHelp]);\r\n  \r\n  return {\r\n    showHelp,\r\n    setShowHelp,\r\n    toggleHelp\r\n  };\r\n};","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z\"\n}), 'Add');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.9959.9959 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12z\"\n}), 'AutoFixHigh');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z\"\n}), 'Delete');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z\"\n}), 'Edit');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4\"\n}), 'HelpOutline');","import { useState } from 'preact/hooks';\r\nimport { \r\n  Box, \r\n  FormControl, \r\n  InputLabel, \r\n  Select, \r\n  MenuItem, \r\n  Button, \r\n  Dialog, \r\n  DialogTitle, \r\n  DialogContent, \r\n  DialogActions, \r\n  TextField, \r\n  Typography,\r\n  IconButton,\r\n  Tooltip,\r\n  Alert\r\n} from '@mui/material';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport AutoFixHighIcon from '@mui/icons-material/AutoFixHigh';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport HelpOutlineIcon from '@mui/icons-material/HelpOutline';\r\n\r\n/**\r\n * Schema选择器组件\r\n * @param {Object} props - 组件属性\r\n * @param {Object[]} props.schemas - 可用的Schema列表\r\n * @param {string|null} props.selectedSchemaId - 当前选中的Schema ID\r\n * @param {Function} props.onSelectSchema - 选择Schema的回调函数\r\n * @param {Function} props.onAddSchema - 添加Schema的回调函数\r\n * @param {Function} props.onDeleteSchema - 删除Schema的回调函数\r\n * @param {Function} props.onUpdateSchema - 更新Schema的回调函数\r\n * @param {Function} props.onAutoDetect - 自动检测Schema的回调函数\r\n */\r\nexport function SchemaSelector({ \r\n  schemas, \r\n  selectedSchemaId, \r\n  onSelectSchema, \r\n  onAddSchema, \r\n  onDeleteSchema, \r\n  onUpdateSchema,\r\n  onAutoDetect\r\n}) {\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [editingSchema, setEditingSchema] = useState(null);\r\n  const [schemaName, setSchemaName] = useState('');\r\n  const [schemaUri, setSchemaUri] = useState('');\r\n  const [schemaDescription, setSchemaDescription] = useState('');\r\n  const [schemaFileMatch, setSchemaFileMatch] = useState('');\r\n  const [schemaContent, setSchemaContent] = useState('');\r\n  const [schemaError, setSchemaError] = useState('');\r\n  const [schemaSource, setSchemaSource] = useState('url'); // 'url' 或 'inline'\r\n\r\n  // 打开添加Schema对话框\r\n  const handleOpenAddDialog = () => {\r\n    setEditingSchema(null);\r\n    setSchemaName('');\r\n    setSchemaUri('');\r\n    setSchemaDescription('');\r\n    setSchemaFileMatch('');\r\n    setSchemaContent('');\r\n    setSchemaError('');\r\n    setSchemaSource('url');\r\n    setDialogOpen(true);\r\n  };\r\n\r\n  // 打开编辑Schema对话框\r\n  const handleOpenEditDialog = (schema) => {\r\n    setEditingSchema(schema);\r\n    setSchemaName(schema.name);\r\n    setSchemaUri(schema.uri || '');\r\n    setSchemaDescription(schema.description || '');\r\n    setSchemaFileMatch((schema.fileMatch || []).join(', '));\r\n    setSchemaContent(schema.schema ? JSON.stringify(schema.schema, null, 2) : '');\r\n    setSchemaSource(schema.uri ? 'url' : 'inline');\r\n    setSchemaError('');\r\n    setDialogOpen(true);\r\n  };\r\n\r\n  // 关闭对话框\r\n  const handleCloseDialog = () => {\r\n    setDialogOpen(false);\r\n  };\r\n\r\n  // 保存Schema\r\n  const handleSaveSchema = () => {\r\n    // 验证输入\r\n    if (!schemaName.trim()) {\r\n      setSchemaError('Schema名称不能为空');\r\n      return;\r\n    }\r\n\r\n    if (schemaSource === 'url' && !schemaUri.trim()) {\r\n      setSchemaError('Schema URI不能为空');\r\n      return;\r\n    }\r\n\r\n    if (schemaSource === 'inline') {\r\n      try {\r\n        if (!schemaContent.trim()) {\r\n          setSchemaError('Schema内容不能为空');\r\n          return;\r\n        }\r\n        JSON.parse(schemaContent);\r\n      } catch (error) {\r\n        setSchemaError('无效的JSON Schema格式');\r\n        return;\r\n      }\r\n    }\r\n\r\n    // 准备Schema对象\r\n    const fileMatchArray = schemaFileMatch\r\n      .split(',')\r\n      .map(pattern => pattern.trim())\r\n      .filter(pattern => pattern);\r\n\r\n    const newSchema = {\r\n      name: schemaName,\r\n      description: schemaDescription,\r\n      fileMatch: fileMatchArray.length > 0 ? fileMatchArray : ['*']\r\n    };\r\n\r\n    if (schemaSource === 'url') {\r\n      newSchema.uri = schemaUri;\r\n    } else {\r\n      try {\r\n        newSchema.schema = JSON.parse(schemaContent);\r\n      } catch (error) {\r\n        setSchemaError('无效的JSON Schema格式');\r\n        return;\r\n      }\r\n    }\r\n\r\n    // 添加或更新Schema\r\n    if (editingSchema) {\r\n      onUpdateSchema(editingSchema.id, newSchema);\r\n    } else {\r\n      onAddSchema(newSchema);\r\n    }\r\n\r\n    handleCloseDialog();\r\n  };\r\n\r\n  // 处理Schema选择变化\r\n  const handleSchemaChange = (event) => {\r\n    onSelectSchema(event.target.value === 'none' ? null : event.target.value);\r\n  };\r\n\r\n  // 处理删除Schema\r\n  const handleDeleteSchema = (id, event) => {\r\n    event.stopPropagation();\r\n    if (window.confirm('确定要删除此Schema吗？')) {\r\n      onDeleteSchema(id);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n      <FormControl size=\"small\" sx={{ minWidth: 150, width: '50%' }}>\r\n        <InputLabel id=\"schema-select-label\">JSON Schema</InputLabel>\r\n        <Select\r\n          labelId=\"schema-select-label\"\r\n          id=\"schema-select\"\r\n          value={selectedSchemaId || 'none'}\r\n          label=\"JSON Schema\"\r\n          onChange={handleSchemaChange}\r\n        >\r\n          <MenuItem value=\"none\">\r\n            <em>无</em>\r\n          </MenuItem>\r\n          {schemas.map((schema) => (\r\n            <MenuItem \r\n              key={schema.id} \r\n              value={schema.id}\r\n              sx={{ \r\n                display: 'flex', \r\n                justifyContent: 'space-between',\r\n                '&:hover .schema-actions': {\r\n                  visibility: 'visible'\r\n                }\r\n              }}\r\n            >\r\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                {schema.name}\r\n                <Tooltip title={schema.description || ''}>\r\n                  <HelpOutlineIcon fontSize=\"small\" color=\"action\" />\r\n                </Tooltip>\r\n              </Box>\r\n              {!schema.predefined && (\r\n                <Box \r\n                  className=\"schema-actions\"\r\n                  sx={{ \r\n                    visibility: 'hidden',\r\n                    display: 'flex'\r\n                  }}\r\n                >\r\n                  <IconButton \r\n                    size=\"small\" \r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      handleOpenEditDialog(schema);\r\n                    }}\r\n                  >\r\n                    <EditIcon fontSize=\"small\" />\r\n                  </IconButton>\r\n                  <IconButton \r\n                    size=\"small\" \r\n                    onClick={(e) => handleDeleteSchema(schema.id, e)}\r\n                  >\r\n                    <DeleteIcon fontSize=\"small\" />\r\n                  </IconButton>\r\n                </Box>\r\n              )}\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n      </FormControl>\r\n      \r\n      <Tooltip title=\"添加Schema\">\r\n        <IconButton onClick={handleOpenAddDialog} size=\"small\">\r\n          <AddIcon />\r\n        </IconButton>\r\n      </Tooltip>\r\n      \r\n      <Tooltip title=\"自动检测Schema\">\r\n        <IconButton onClick={onAutoDetect} size=\"small\">\r\n          <AutoFixHighIcon />\r\n        </IconButton>\r\n      </Tooltip>\r\n\r\n      {/* 添加/编辑Schema对话框 */}\r\n      <Dialog open={dialogOpen} onClose={handleCloseDialog} maxWidth=\"md\" fullWidth>\r\n        <DialogTitle>\r\n          {editingSchema ? '编辑Schema' : '添加新Schema'}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {schemaError && (\r\n            <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n              {schemaError}\r\n            </Alert>\r\n          )}\r\n          \r\n          <TextField\r\n            margin=\"dense\"\r\n            label=\"Schema名称\"\r\n            fullWidth\r\n            value={schemaName}\r\n            onChange={(e) => setSchemaName(e.target.value)}\r\n            required\r\n          />\r\n          \r\n          <TextField\r\n            margin=\"dense\"\r\n            label=\"描述\"\r\n            fullWidth\r\n            value={schemaDescription}\r\n            onChange={(e) => setSchemaDescription(e.target.value)}\r\n          />\r\n          \r\n          <TextField\r\n            margin=\"dense\"\r\n            label=\"文件匹配模式 (逗号分隔)\"\r\n            fullWidth\r\n            value={schemaFileMatch}\r\n            onChange={(e) => setSchemaFileMatch(e.target.value)}\r\n            helperText=\"例如: *.json, config.json\"\r\n          />\r\n          \r\n          <Box sx={{ mt: 2, mb: 1 }}>\r\n            <Typography variant=\"subtitle2\">Schema来源</Typography>\r\n            <Box sx={{ display: 'flex', gap: 1, mt: 1 }}>\r\n              <Button \r\n                variant={schemaSource === 'url' ? 'contained' : 'outlined'} \r\n                onClick={() => setSchemaSource('url')}\r\n              >\r\n                URL\r\n              </Button>\r\n              <Button \r\n                variant={schemaSource === 'inline' ? 'contained' : 'outlined'} \r\n                onClick={() => setSchemaSource('inline')}\r\n              >\r\n                内联JSON\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n          \r\n          {schemaSource === 'url' ? (\r\n            <TextField\r\n              margin=\"dense\"\r\n              label=\"Schema URL\"\r\n              fullWidth\r\n              value={schemaUri}\r\n              onChange={(e) => setSchemaUri(e.target.value)}\r\n              required\r\n              helperText=\"例如: https://json.schemastore.org/package.json\"\r\n            />\r\n          ) : (\r\n            <TextField\r\n              margin=\"dense\"\r\n              label=\"Schema内容 (JSON)\"\r\n              fullWidth\r\n              multiline\r\n              rows={10}\r\n              value={schemaContent}\r\n              onChange={(e) => setSchemaContent(e.target.value)}\r\n              required\r\n            />\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseDialog}>取消</Button>\r\n          <Button onClick={handleSaveSchema} variant=\"contained\">\r\n            保存\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n}","import { Box, Button, Tooltip, IconButton, Divider } from '@mui/material';\r\nimport {\r\n  FormatIndentIncrease,\r\n  CompressOutlined,\r\n  Healing,\r\n  Search,\r\n  Settings,\r\n  Compare,\r\n  UnfoldLess,\r\n  UnfoldMore,\r\n  Keyboard,\r\n  ZoomIn,\r\n  ZoomOut,\r\n  Undo,\r\n  Redo\r\n} from '@mui/icons-material';\r\nimport { SchemaSelector } from './SchemaSelector';\r\n\r\n/**\r\n * 编辑器工具栏组件\r\n * 提供格式化、压缩、搜索等功能按钮\r\n * \r\n * @param {Object} props - 组件属性\r\n * @param {Function} props.onSearchClick - 搜索按钮点击处理函数\r\n * @param {Function} props.onSettingsClick - 设置按钮点击处理函数\r\n * @param {Function} props.onFoldAllClick - 折叠所有按钮点击处理函数\r\n * @param {Function} props.onUnfoldAllClick - 展开所有按钮点击处理函数\r\n * @param {Function} props.onIncreaseFontSize - 增大字体按钮点击处理函数\r\n * @param {Function} props.onDecreaseFontSize - 减小字体按钮点击处理函数\r\n * @param {Object[]} props.schemas - 可用的Schema列表\r\n * @param {string|null} props.selectedSchemaId - 当前选中的Schema ID\r\n * @param {Function} props.onSelectSchema - 选择Schema的回调函数\r\n * @param {Function} props.onAddSchema - 添加Schema的回调函数\r\n * @param {Function} props.onDeleteSchema - 删除Schema的回调函数\r\n * @param {Function} props.onUpdateSchema - 更新Schema的回调函数\r\n * @param {Function} props.onAutoDetectSchema - 自动检测Schema的回调函数\r\n */\r\nexport function EditorToolbar({ \r\n  onSearchClick, \r\n  onSettingsClick, \r\n  onFoldAllClick,\r\n  onUnfoldAllClick,\r\n  onKeyboardShortcutsClick,\r\n  onIncreaseFontSize = () => {},\r\n  onDecreaseFontSize = () => {},\r\n  schemas = [],\r\n  selectedSchemaId = null,\r\n  onSelectSchema = () => {},\r\n  onAddSchema = () => {},\r\n  onDeleteSchema = () => {},\r\n  onUpdateSchema = () => {},\r\n  onAutoDetectSchema = () => {}\r\n}) {\r\n  // 处理格式化按钮点击\r\n  const handleFormat = () => {\r\n    console.log('格式化按钮点击');\r\n    if (window.pdxJsonEditor && window.pdxJsonEditor.formatJson) {\r\n      console.log('调用 formatJson 函数');\r\n      window.pdxJsonEditor.formatJson();\r\n    } else {\r\n      console.error('formatJson 函数不存在');\r\n    }\r\n  };\r\n  \r\n  // 处理压缩按钮点击\r\n  const handleCompress = () => {\r\n    console.log('压缩按钮点击');\r\n    if (window.pdxJsonEditor && window.pdxJsonEditor.compressJson) {\r\n      console.log('调用 compressJson 函数');\r\n      window.pdxJsonEditor.compressJson();\r\n    } else {\r\n      console.error('compressJson 函数不存在');\r\n    }\r\n  };\r\n  \r\n  // 处理修复按钮点击\r\n  const handleTryFix = () => {\r\n    console.log('修复按钮点击');\r\n    if (window.pdxJsonEditor && window.pdxJsonEditor.tryFixJson) {\r\n      console.log('调用 tryFixJson 函数');\r\n      window.pdxJsonEditor.tryFixJson();\r\n    } else {\r\n      console.error('tryFixJson 函数不存在');\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <Box\r\n      sx={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: '4px 8px',\r\n        borderBottom: '1px solid',\r\n        borderColor: 'divider',\r\n        backgroundColor: theme => theme.palette.mode === 'dark' ? '#1E1E1E' : '#F9FAFB',\r\n        overflowX: 'auto'\r\n      }}\r\n    >\r\n      {/* 格式化和压缩按钮组 */}\r\n      <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n        <Tooltip title=\"格式化 JSON (Ctrl+Shift+F)\">\r\n          <Button\r\n            startIcon={<FormatIndentIncrease />}\r\n            size=\"small\"\r\n            onClick={handleFormat}\r\n            sx={{ mr: 1 }}\r\n          >\r\n            格式化\r\n          </Button>\r\n        </Tooltip>\r\n        \r\n        <Tooltip title=\"压缩 JSON (Ctrl+Shift+M)\">\r\n          <Button\r\n            startIcon={<CompressOutlined />}\r\n            size=\"small\"\r\n            onClick={handleCompress}\r\n            sx={{ mr: 1 }}\r\n          >\r\n            压缩\r\n          </Button>\r\n        </Tooltip>\r\n        \r\n        <Tooltip title=\"尝试修复 JSON\">\r\n          <Button\r\n            startIcon={<Healing />}\r\n            size=\"small\"\r\n            onClick={handleTryFix}\r\n          >\r\n            修复\r\n          </Button>\r\n        </Tooltip>\r\n      </Box>\r\n      \r\n      <Divider orientation=\"vertical\" flexItem sx={{ mx: 2 }} />\r\n      \r\n      {/* Schema选择器 */}\r\n      <Box sx={{ flexGrow: 1 }}>\r\n        <SchemaSelector\r\n          schemas={schemas}\r\n          selectedSchemaId={selectedSchemaId}\r\n          onSelectSchema={onSelectSchema}\r\n          onAddSchema={onAddSchema}\r\n          onDeleteSchema={onDeleteSchema}\r\n          onUpdateSchema={onUpdateSchema}\r\n          onAutoDetect={onAutoDetectSchema}\r\n        />\r\n      </Box>\r\n      \r\n      <Divider orientation=\"vertical\" flexItem sx={{ mx: 2 }} />\r\n      \r\n      {/* 折叠控制按钮组 */}\r\n      <Box sx={{ display: 'flex', alignItems: 'center', mr: 2 }}>\r\n        <Tooltip title=\"折叠所有\">\r\n          <IconButton size=\"small\" onClick={onFoldAllClick}>\r\n            <UnfoldLess fontSize=\"small\" />\r\n          </IconButton>\r\n        </Tooltip>\r\n        \r\n        <Tooltip title=\"展开所有\">\r\n          <IconButton size=\"small\" onClick={onUnfoldAllClick}>\r\n            <UnfoldMore fontSize=\"small\" />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </Box>\r\n      \r\n      {/* 字体大小调整按钮 */}\r\n      <Box sx={{ display: 'flex', alignItems: 'center', mr: 2 }}>\r\n        <Tooltip title=\"增大字体\">\r\n          <IconButton size=\"small\" onClick={onIncreaseFontSize}>\r\n            <ZoomIn fontSize=\"small\" />\r\n          </IconButton>\r\n        </Tooltip>\r\n        \r\n        <Tooltip title=\"减小字体\">\r\n          <IconButton size=\"small\" onClick={onDecreaseFontSize}>\r\n            <ZoomOut fontSize=\"small\" />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </Box>\r\n      \r\n      {/* 撤销和重做按钮 */}\r\n      <Box sx={{ display: 'flex', alignItems: 'center', mr: 2 }}>\r\n        <Tooltip title=\"撤销 (Ctrl+Z)\">\r\n          <IconButton size=\"small\" onClick={() => {\r\n            if (window.pdxJsonEditor?.getEditorRef?.()) {\r\n              const editor = window.pdxJsonEditor.getEditorRef();\r\n              editor.trigger('keyboard', 'undo', null);\r\n            }\r\n          }}>\r\n            <Undo fontSize=\"small\" />\r\n          </IconButton>\r\n        </Tooltip>\r\n        \r\n        <Tooltip title=\"重做 (Ctrl+Y)\">\r\n          <IconButton size=\"small\" onClick={() => {\r\n            if (window.pdxJsonEditor?.getEditorRef?.()) {\r\n              const editor = window.pdxJsonEditor.getEditorRef();\r\n              editor.trigger('keyboard', 'redo', null);\r\n            }\r\n          }}>\r\n            <Redo fontSize=\"small\" />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </Box>\r\n      \r\n      {/* 工具按钮组 */}\r\n      <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n        <Tooltip title=\"搜索 (Ctrl+F)\">\r\n          <IconButton size=\"small\" onClick={() => {\r\n            // 触发Monaco编辑器的原生搜索功能\r\n            if (window.pdxJsonEditor?.getEditorRef?.()) {\r\n              const editor = window.pdxJsonEditor.getEditorRef();\r\n              // 使用正确的搜索动作ID\r\n              const findAction = editor.getAction('actions.find');\r\n              if (findAction) {\r\n                findAction.run();\r\n              } else {\r\n                // 备用方法：直接触发搜索\r\n                editor.trigger('keyboard', 'actions.find', null);\r\n              }\r\n            }\r\n          }}>\r\n            <Search />\r\n          </IconButton>\r\n        </Tooltip>\r\n        \r\n\r\n        \r\n        <Tooltip title=\"设置\">\r\n          <IconButton size=\"small\" onClick={onSettingsClick}>\r\n            <Settings />\r\n          </IconButton>\r\n        </Tooltip>\r\n        \r\n        <Tooltip title=\"键盘快捷键 (?)\">\r\n          <IconButton size=\"small\" onClick={onKeyboardShortcutsClick}>\r\n            <Keyboard />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M3 21h18v-2H3zM3 8v8l4-4zm8 9h10v-2H11zM3 3v2h18V3zm8 6h10V7H11zm0 4h10v-2H11z\"\n}), 'FormatIndentIncrease');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M4 9v2h16V9zm12-5-1.41-1.41L13 4.17V1h-2v3.19L9.39 2.61 8 4l4 4zM4 14h16v-2H4zm4 5 1.39 1.39L11 18.81V22h2v-3.17l1.59 1.59L16 19l-4-4z\"\n}), 'CompressOutlined');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m17.73 12.02 3.98-3.98c.39-.39.39-1.02 0-1.41l-4.34-4.34a.9959.9959 0 0 0-1.41 0l-3.98 3.98L8 2.29C7.8 2.1 7.55 2 7.29 2c-.25 0-.51.1-.7.29L2.25 6.63c-.39.39-.39 1.02 0 1.41l3.98 3.98L2.25 16c-.39.39-.39 1.02 0 1.41l4.34 4.34c.39.39 1.02.39 1.41 0l3.98-3.98 3.98 3.98c.2.2.45.29.71.29.26 0 .51-.1.71-.29l4.34-4.34c.39-.39.39-1.02 0-1.41zM12 9c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m-4.71 1.96L3.66 7.34l3.63-3.63 3.62 3.62zM10 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2 2c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2-4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2.66 9.34-3.63-3.62 3.63-3.63 3.62 3.62z\"\n}), 'Healing');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14\"\n}), 'Search');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M7.41 18.59 8.83 20 12 16.83 15.17 20l1.41-1.41L12 14zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10z\"\n}), 'UnfoldLess');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15z\"\n}), 'UnfoldMore');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2\"\n}), 'MoreVert');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M14 9v2h-3V9H8.5V7H11V1H4v6h2.5v2H4v6h2.5v2H4v6h7v-6H8.5v-2H11v-2h3v2h7V9z\"\n}), 'Schema');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m-9 3h2v2h-2zm0 3h2v2h-2zM8 8h2v2H8zm0 3h2v2H8zm-1 2H5v-2h2zm0-3H5V8h2zm9 7H8v-2h8zm0-4h-2v-2h2zm0-3h-2V8h2zm3 3h-2v-2h2zm0-3h-2V8h2z\"\n}), 'Keyboard');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8\"\n}), 'Undo');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z\"\n}), 'Redo');","import { useState } from 'preact/hooks';\r\nimport { \r\n  Box, \r\n  IconButton, \r\n  Tooltip, \r\n  SpeedDial, \r\n  SpeedDialAction, \r\n  SpeedDialIcon,\r\n  Menu,\r\n  MenuItem,\r\n  ListItemIcon,\r\n  ListItemText\r\n} from '@mui/material';\r\nimport FormatIndentIncreaseIcon from '@mui/icons-material/FormatIndentIncrease';\r\nimport CompressOutlinedIcon from '@mui/icons-material/CompressOutlined';\r\nimport HealingIcon from '@mui/icons-material/Healing';\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport SettingsIcon from '@mui/icons-material/Settings';\r\nimport CompareIcon from '@mui/icons-material/Compare';\r\nimport UnfoldLessIcon from '@mui/icons-material/UnfoldLess';\r\nimport UnfoldMoreIcon from '@mui/icons-material/UnfoldMore';\r\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\r\nimport SchemaIcon from '@mui/icons-material/Schema';\r\nimport KeyboardIcon from '@mui/icons-material/Keyboard';\r\nimport UndoIcon from '@mui/icons-material/Undo';\r\nimport RedoIcon from '@mui/icons-material/Redo';\r\nimport { useBreakpoint } from '../hooks/useResponsive';\r\n\r\n/**\r\n * 移动端编辑器工具栏组件\r\n * 提供适合移动设备的工具栏布局\r\n * \r\n * @param {Object} props - 组件属性\r\n * @param {Function} props.onFoldAllClick - 折叠所有按钮点击处理函数\r\n * @param {Function} props.onUnfoldAllClick - 展开所有按钮点击处理函数\r\n * @param {Function} props.onSearchClick - 搜索按钮点击处理函数\r\n * @param {Function} props.onSettingsClick - 设置按钮点击处理函数\r\n * @param {Function} props.onSchemaClick - Schema按钮点击处理函数\r\n */\r\nexport function MobileEditorToolbar({\r\n  onFoldAllClick,\r\n  onUnfoldAllClick,\r\n  onSearchClick,\r\n  onSettingsClick,\r\n  onSchemaClick,\r\n  onKeyboardShortcutsClick\r\n}) {\r\n  const [menuAnchorEl, setMenuAnchorEl] = useState(null);\r\n  const [speedDialOpen, setSpeedDialOpen] = useState(false);\r\n  const { isMobile } = useBreakpoint();\r\n  \r\n  // 处理菜单打开\r\n  const handleMenuOpen = (event) => {\r\n    setMenuAnchorEl(event.currentTarget);\r\n  };\r\n  \r\n  // 处理菜单关闭\r\n  const handleMenuClose = () => {\r\n    setMenuAnchorEl(null);\r\n  };\r\n  \r\n  // 处理格式化按钮点击\r\n  const handleFormat = () => {\r\n    if (window.pdxJsonEditor && window.pdxJsonEditor.formatJson) {\r\n      window.pdxJsonEditor.formatJson();\r\n    }\r\n    setSpeedDialOpen(false);\r\n  };\r\n  \r\n  // 处理压缩按钮点击\r\n  const handleCompress = () => {\r\n    if (window.pdxJsonEditor && window.pdxJsonEditor.compressJson) {\r\n      window.pdxJsonEditor.compressJson();\r\n    }\r\n    setSpeedDialOpen(false);\r\n  };\r\n  \r\n  // 处理修复按钮点击\r\n  const handleTryFix = () => {\r\n    if (window.pdxJsonEditor && window.pdxJsonEditor.tryFixJson) {\r\n      window.pdxJsonEditor.tryFixJson();\r\n    }\r\n    setSpeedDialOpen(false);\r\n  };\r\n  \r\n  // 处理撤销操作\r\n  const handleUndo = () => {\r\n    if (window.pdxJsonEditor?.getEditorRef?.()) {\r\n      const editor = window.pdxJsonEditor.getEditorRef();\r\n      editor.trigger('keyboard', 'undo', null);\r\n    }\r\n    setSpeedDialOpen(false);\r\n  };\r\n  \r\n  // 处理重做操作\r\n  const handleRedo = () => {\r\n    if (window.pdxJsonEditor?.getEditorRef?.()) {\r\n      const editor = window.pdxJsonEditor.getEditorRef();\r\n      editor.trigger('keyboard', 'redo', null);\r\n    }\r\n    setSpeedDialOpen(false);\r\n  };\r\n\r\n  // SpeedDial操作\r\n  const actions = [\r\n    { icon: <FormatIndentIncreaseIcon />, name: '格式化', onClick: handleFormat },\r\n    { icon: <CompressOutlinedIcon />, name: '压缩', onClick: handleCompress },\r\n    { icon: <HealingIcon />, name: '修复', onClick: handleTryFix },\r\n    { icon: <UndoIcon />, name: '撤销', onClick: handleUndo },\r\n    { icon: <RedoIcon />, name: '重做', onClick: handleRedo },\r\n    { icon: <SearchIcon />, name: '搜索', onClick: () => { \r\n      // 触发Monaco编辑器的原生搜索功能\r\n      if (window.pdxJsonEditor?.getEditorRef?.()) {\r\n        const editor = window.pdxJsonEditor.getEditorRef();\r\n        editor.getAction('actions.find')?.run();\r\n      }\r\n      setSpeedDialOpen(false); \r\n    } },\r\n    { icon: <SchemaIcon />, name: 'Schema', onClick: () => { onSchemaClick(); setSpeedDialOpen(false); } }\r\n  ];\r\n  \r\n  // 如果不是移动设备，使用常规工具栏\r\n  if (!isMobile) {\r\n    return null;\r\n  }\r\n  \r\n  return (\r\n    <>\r\n      {/* 固定工具栏 */}\r\n      <Box\r\n        sx={{\r\n          position: 'absolute',\r\n          top: 8,\r\n          right: 8,\r\n          zIndex: 1000,\r\n          display: 'flex',\r\n          gap: 1\r\n        }}\r\n      >\r\n        <Tooltip title=\"更多选项\">\r\n          <IconButton\r\n            size=\"small\"\r\n            onClick={handleMenuOpen}\r\n            sx={{ \r\n              backgroundColor: 'background.paper',\r\n              boxShadow: 1\r\n            }}\r\n          >\r\n            <MoreVertIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      </Box>\r\n      \r\n      {/* 浮动操作按钮 */}\r\n      <SpeedDial\r\n        ariaLabel=\"编辑器操作\"\r\n        sx={{ position: 'absolute', bottom: 16, right: 16 }}\r\n        icon={<SpeedDialIcon />}\r\n        onClose={() => setSpeedDialOpen(false)}\r\n        onOpen={() => setSpeedDialOpen(true)}\r\n        open={speedDialOpen}\r\n        direction=\"up\"\r\n      >\r\n        {actions.map((action) => (\r\n          <SpeedDialAction\r\n            key={action.name}\r\n            icon={action.icon}\r\n            tooltipTitle={action.name}\r\n            tooltipOpen\r\n            onClick={action.onClick}\r\n          />\r\n        ))}\r\n      </SpeedDial>\r\n      \r\n      {/* 更多选项菜单 */}\r\n      <Menu\r\n        anchorEl={menuAnchorEl}\r\n        open={Boolean(menuAnchorEl)}\r\n        onClose={handleMenuClose}\r\n      >\r\n        <MenuItem onClick={() => { onFoldAllClick(); handleMenuClose(); }}>\r\n          <ListItemIcon>\r\n            <UnfoldLessIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          <ListItemText primary=\"折叠所有\" />\r\n        </MenuItem>\r\n        \r\n        <MenuItem onClick={() => { onUnfoldAllClick(); handleMenuClose(); }}>\r\n          <ListItemIcon>\r\n            <UnfoldMoreIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          <ListItemText primary=\"展开所有\" />\r\n        </MenuItem>\r\n        \r\n        <MenuItem onClick={() => { onSettingsClick(); handleMenuClose(); }}>\r\n          <ListItemIcon>\r\n            <SettingsIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          <ListItemText primary=\"设置\" />\r\n        </MenuItem>\r\n        \r\n\r\n        \r\n        <MenuItem onClick={() => { onKeyboardShortcutsClick(); handleMenuClose(); }}>\r\n          <ListItemIcon>\r\n            <KeyboardIcon fontSize=\"small\" />\r\n          </ListItemIcon>\r\n          <ListItemText primary=\"键盘快捷键\" />\r\n        </MenuItem>\r\n      </Menu>\r\n    </>\r\n  );\r\n}","import { \r\n  Dialog, \r\n  DialogTitle, \r\n  DialogContent, \r\n  DialogActions, \r\n  Button, \r\n  Typography, \r\n  Table, \r\n  TableBody, \r\n  TableCell, \r\n  TableContainer, \r\n  TableHead, \r\n  TableRow, \r\n  Paper,\r\n  Chip,\r\n  Box\r\n} from '@mui/material';\r\nimport { SHORTCUTS } from '../hooks/useKeyboardShortcuts';\r\n\r\n/**\r\n * 键盘快捷键对话框组件\r\n * 显示可用的键盘快捷键\r\n * \r\n * @param {Object} props - 组件属性\r\n * @param {boolean} props.open - 是否打开对话框\r\n * @param {Function} props.onClose - 关闭对话框的回调函数\r\n */\r\nexport function KeyboardShortcutsDialog({ open, onClose }) {\r\n  // 格式化修饰键\r\n  const formatModifier = (modifier) => {\r\n    if (!modifier) return '';\r\n    \r\n    return modifier.split('+').map(key => (\r\n      <Chip \r\n        key={key} \r\n        label={key} \r\n        size=\"small\" \r\n        variant=\"outlined\" \r\n        sx={{ mr: 0.5, fontSize: '0.75rem' }} \r\n      />\r\n    ));\r\n  };\r\n  \r\n  // 格式化按键\r\n  const formatKey = (key) => {\r\n    return <Chip label={key} size=\"small\" color=\"primary\" sx={{ fontSize: '0.75rem' }} />;\r\n  };\r\n  \r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={onClose}\r\n      aria-labelledby=\"keyboard-shortcuts-dialog-title\"\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n    >\r\n      <DialogTitle id=\"keyboard-shortcuts-dialog-title\">\r\n        键盘快捷键\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        <Typography variant=\"body2\" paragraph>\r\n          以下是可用的键盘快捷键，帮助您更高效地使用PDX JSON编辑器。\r\n        </Typography>\r\n        \r\n        <TableContainer component={Paper} variant=\"outlined\">\r\n          <Table size=\"small\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>操作</TableCell>\r\n                <TableCell>快捷键</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {Object.values(SHORTCUTS).map((shortcut) => (\r\n                <TableRow key={shortcut.action}>\r\n                  <TableCell>{shortcut.description}</TableCell>\r\n                  <TableCell>\r\n                    <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                      {formatModifier(shortcut.modifier)}\r\n                      {shortcut.modifier && ' + '}\r\n                      {formatKey(shortcut.key)}\r\n                    </Box>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        \r\n        <Typography variant=\"caption\" sx={{ display: 'block', mt: 2, color: 'text.secondary' }}>\r\n          注意：Monaco Editor还提供了许多内置快捷键，如Ctrl+/ (注释)、Ctrl+Space (自动完成)等。\r\n        </Typography>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onClose}>关闭</Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}","import { Box, Typography, Chip, Tooltip } from '@mui/material';\r\nimport { CheckCircle, Error, Warning } from '@mui/icons-material';\r\nimport { useBreakpoint } from '../hooks/useResponsive';\r\nimport { ariaAttributes, createStatus } from '../utils/accessibilityUtils';\r\n\r\n/**\r\n * 状态栏组件\r\n * 显示编辑器状态信息，如验证状态、光标位置等\r\n * \r\n * @param {Object} props - 组件属性\r\n * @param {boolean} props.isValid - JSON是否有效\r\n * @param {Array} props.errors - 错误列表\r\n * @param {Object} props.cursorPosition - 光标位置 {line, column}\r\n * @param {number} props.fileSize - 文件大小（字节）\r\n */\r\nexport function StatusBar({ isValid = true, errors = [], cursorPosition = { line: 1, column: 1 }, fileSize = 0 }) {\r\n  // 使用响应式Hook\r\n  const { isMobile } = useBreakpoint();\r\n  // 计算错误和警告数量\r\n  const errorCount = errors.filter(e => e.severity === 'error').length;\r\n  const warningCount = errors.filter(e => e.severity === 'warning').length;\r\n  \r\n  // 格式化文件大小\r\n  const formatFileSize = (bytes) => {\r\n    if (bytes === 0) return '0 B';\r\n    const k = 1024;\r\n    const sizes = ['B', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  };\r\n  \r\n  // 创建状态ARIA属性\r\n  const statusAttrs = createStatus('编辑器状态');\r\n  \r\n  return (\r\n    <Box\r\n      sx={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'space-between',\r\n        padding: isMobile ? '4px 8px' : '4px 16px',\r\n        borderTop: '1px solid',\r\n        borderColor: 'divider',\r\n        backgroundColor: theme => theme.palette.mode === 'dark' ? '#1E1E1E' : '#F9FAFB',\r\n        flexWrap: isMobile ? 'wrap' : 'nowrap'\r\n      }}\r\n      {...statusAttrs}\r\n    >\r\n      {/* 左侧：验证状态 */}\r\n      <Box sx={{ \r\n        display: 'flex', \r\n        alignItems: 'center', \r\n        gap: 1,\r\n        width: isMobile ? '100%' : 'auto',\r\n        justifyContent: isMobile ? 'center' : 'flex-start',\r\n        mb: isMobile ? 0.5 : 0\r\n      }}>\r\n        {isValid ? (\r\n          <Chip\r\n            icon={<CheckCircle fontSize=\"small\" />}\r\n            label={isMobile ? \"\" : \"有效的JSON\"}\r\n            size=\"small\"\r\n            color=\"success\"\r\n            variant=\"outlined\"\r\n            aria-label=\"JSON验证通过\"\r\n          />\r\n        ) : (\r\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n            {errorCount > 0 && (\r\n              <Tooltip title=\"错误\">\r\n                <Chip\r\n                  icon={<Error fontSize=\"small\" />}\r\n                  label={isMobile ? errorCount : `${errorCount} 错误`}\r\n                  size=\"small\"\r\n                  color=\"error\"\r\n                  variant=\"outlined\"\r\n                  aria-label={`${errorCount}个JSON验证错误`}\r\n                />\r\n              </Tooltip>\r\n            )}\r\n            {warningCount > 0 && (\r\n              <Tooltip title=\"警告\">\r\n                <Chip\r\n                  icon={<Warning fontSize=\"small\" />}\r\n                  label={isMobile ? warningCount : `${warningCount} 警告`}\r\n                  size=\"small\"\r\n                  color=\"warning\"\r\n                  variant=\"outlined\"\r\n                  aria-label={`${warningCount}个JSON验证警告`}\r\n                />\r\n              </Tooltip>\r\n            )}\r\n          </Box>\r\n        )}\r\n      </Box>\r\n      \r\n      {/* 右侧：光标位置和文件大小 */}\r\n      <Box sx={{ \r\n        display: 'flex', \r\n        alignItems: 'center', \r\n        gap: isMobile ? 1 : 2,\r\n        width: isMobile ? '100%' : 'auto',\r\n        justifyContent: isMobile ? 'space-between' : 'flex-end'\r\n      }}>\r\n        <Typography \r\n          variant=\"caption\" \r\n          color=\"text.secondary\"\r\n          aria-label={`光标位置：行 ${cursorPosition.line}, 列 ${cursorPosition.column}`}\r\n        >\r\n          {isMobile ? `${cursorPosition.line}:${cursorPosition.column}` : `行 ${cursorPosition.line}, 列 ${cursorPosition.column}`}\r\n        </Typography>\r\n        <Typography \r\n          variant=\"caption\" \r\n          color=\"text.secondary\"\r\n          aria-label={`文件大小：${formatFileSize(fileSize)}`}\r\n        >\r\n          {formatFileSize(fileSize)}\r\n        </Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}","/**\r\n * 支持触摸手势的JSON编辑器组件\r\n */\r\n\r\nimport { useRef, useState, useEffect, useCallback } from 'preact/hooks';\r\nimport { Box, Paper, Snackbar, Alert, Typography, Dialog, DialogTitle, DialogContent, DialogActions, Button, Fab, Tooltip } from '@mui/material';\r\nimport Editor from '@monaco-editor/react';\r\nimport ZoomInIcon from '@mui/icons-material/ZoomIn';\r\nimport ZoomOutIcon from '@mui/icons-material/ZoomOut';\r\nimport { configureJsonLanguage, configureJsonFolding, getEditorOptions } from '../services/monacoService';\r\nimport { useJsonValidation } from '../hooks/useJsonValidation';\r\nimport { useJsonEditor } from '../hooks/useJsonEditor';\r\nimport { useJsonSchema } from '../hooks/useJsonSchema';\r\nimport { formatJson, compressJson, tryFixJson } from '../services/jsonService';\r\nimport { useKeyboardShortcuts } from '../hooks/useKeyboardShortcuts';\r\nimport { useBreakpoint, useTouchDevice } from '../hooks/useResponsive';\r\nimport { useSwipe, usePinch, useDoubleTap } from '../hooks/useGestures';\r\nimport { useTheme } from '../theme/ThemeContext';\r\nimport { EditorToolbar } from './EditorToolbar';\r\nimport { MobileEditorToolbar } from './MobileEditorToolbar';\r\nimport { KeyboardShortcutsDialog } from './KeyboardShortcutsDialog';\r\nimport { StatusBar } from './StatusBar';\r\n\r\nconst DEFAULT_JSON = `{\r\n  \"name\": \"PDX JSON Editor\",\r\n  \"version\": \"1.0.0\",\r\n  \"description\": \"A lightweight JSON editor with Monaco Editor\",\r\n  \"features\": [\r\n    \"Syntax highlighting\",\r\n    \"Error validation\",\r\n    \"Formatting\",\r\n    \"Search and replace\",\r\n    \"File operations\"\r\n  ],\r\n  \"settings\": {\r\n    \"theme\": \"light\",\r\n    \"indentation\": 2,\r\n    \"wordWrap\": true\r\n  }\r\n}`;\r\n\r\nexport function TouchEnabledJsonEditor({ \r\n  onSettingsClick,\r\n  value: externalValue,\r\n  onChange: externalOnChange,\r\n  isLoading,\r\n  isLargeFile = false\r\n}) {\r\n  // 使用主题上下文\r\n  const { themeId, monacoTheme } = useTheme();\r\n  // 使用响应式Hook\r\n  const { isMobile, isTablet } = useBreakpoint();\r\n  const isTouch = useTouchDevice();\r\n  // Schema对话框状态\r\n  const [schemaDialogOpen, setSchemaDialogOpen] = useState(false);\r\n  // 性能优化状态\r\n  const [performanceMode, setPerformanceMode] = useState(isLargeFile);\r\n  // 编辑器字体大小\r\n  const [fontSize, setFontSize] = useState(14);\r\n  \r\n  // 增大字体大小\r\n  const increaseFontSize = useCallback(() => {\r\n    if (editorRef.current && monacoRef.current) {\r\n      const newSize = fontSize + 2;\r\n      setFontSize(newSize);\r\n      editorRef.current.updateOptions({ fontSize: newSize });\r\n      showAlert(`字体大小已增加到 ${newSize}px`, 'info');\r\n    }\r\n  }, [fontSize]);\r\n  \r\n  // 减小字体大小\r\n  const decreaseFontSize = useCallback(() => {\r\n    if (editorRef.current && monacoRef.current) {\r\n      const newSize = Math.max(8, fontSize - 2); // 最小不低于8px\r\n      setFontSize(newSize);\r\n      editorRef.current.updateOptions({ fontSize: newSize });\r\n      showAlert(`字体大小已减小到 ${newSize}px`, 'info');\r\n    }\r\n  }, [fontSize]);\r\n  const editorRef = useRef(null);\r\n  const monacoRef = useRef(null);\r\n  const editorContainerRef = useRef(null);\r\n  const [cursorPosition, setCursorPosition] = useState({ line: 1, column: 1 });\r\n  const [alertOpen, setAlertOpen] = useState(false);\r\n  const [alertMessage, setAlertMessage] = useState('');\r\n  const [alertSeverity, setAlertSeverity] = useState('success');\r\n  const [gestureMode, setGestureMode] = useState('scroll'); // 'scroll' 或 'zoom'\r\n  \r\n  // 使用自定义Hooks\r\n  const { \r\n    value: internalValue, \r\n    setValue: setInternalValue, \r\n    formatJson, \r\n    compressJson, \r\n    tryFixJson, \r\n    indentSize, \r\n    setIndentSize, \r\n    error: jsonError \r\n  } = useJsonEditor(externalValue !== undefined ? externalValue : '');\r\n  \r\n  // 使用外部值或内部值\r\n  const value = externalValue !== undefined ? externalValue : internalValue;\r\n  \r\n  const { errors, validate, isValid, setModelMarkers } = useJsonValidation();\r\n  \r\n  // 使用JSON Schema Hook\r\n  const {\r\n    schemas,\r\n    selectedSchemaId,\r\n    setSelectedSchemaId,\r\n    addSchema,\r\n    deleteSchema,\r\n    updateSchema,\r\n    autoDetectSchema\r\n  } = useJsonSchema(monacoRef.current, value);\r\n\r\n  // 处理编辑器内容变化\r\n  const handleEditorChange = (newValue) => {\r\n    if (externalValue === undefined) {\r\n      setInternalValue(newValue);\r\n    }\r\n    \r\n    if (externalOnChange) {\r\n      externalOnChange(newValue);\r\n    }\r\n    \r\n    validate(newValue);\r\n  };\r\n  \r\n  // 这里之前有一个setContent函数，但它与setEditorContent功能重复，已删除\r\n\r\n  // 设置编辑器内容\r\n  const setEditorContent = useCallback((newContent) => {\r\n    if (editorRef.current) {\r\n      // 保存当前光标位置\r\n      const position = editorRef.current.getPosition();\r\n      \r\n      // 设置新内容\r\n      editorRef.current.setValue(newContent);\r\n      \r\n      // 尝试恢复光标位置（如果位置仍然有效）\r\n      try {\r\n        const model = editorRef.current.getModel();\r\n        const lineCount = model.getLineCount();\r\n        const lastLineLength = model.getLineLength(lineCount);\r\n        \r\n        if (position && position.lineNumber <= lineCount) {\r\n          const maxColumn = position.lineNumber === lineCount ? lastLineLength + 1 : model.getLineLength(position.lineNumber) + 1;\r\n          const newPosition = {\r\n            lineNumber: position.lineNumber,\r\n            column: Math.min(position.column, maxColumn)\r\n          };\r\n          editorRef.current.setPosition(newPosition);\r\n        }\r\n      } catch (err) {\r\n        // 如果恢复光标位置失败，忽略错误\r\n        console.warn('无法恢复光标位置:', err);\r\n      }\r\n    }\r\n    \r\n    // 同时更新React状态\r\n    if (externalOnChange) {\r\n      externalOnChange(newContent);\r\n    } else {\r\n      setInternalValue(newContent);\r\n    }\r\n  }, [externalOnChange, setInternalValue]);\r\n\r\n  // 处理编辑器挂载\r\n  const handleEditorDidMount = (editor, monaco) => {\r\n    editorRef.current = editor;\r\n    monacoRef.current = monaco;\r\n    \r\n    // 设置初始字体大小\r\n    editor.updateOptions({ fontSize });\r\n    \r\n    // 配置JSON语言支持\r\n    configureJsonLanguage(monaco);\r\n    \r\n    // 配置JSON折叠（如果不是大文件）\r\n    if (!performanceMode) {\r\n      configureJsonFolding(monaco);\r\n    }\r\n    \r\n    // 初始验证（如果不是大文件）\r\n    if (!performanceMode) {\r\n      const initialErrors = validate(editor.getValue());\r\n      setModelMarkers(monaco, editor.getModel());\r\n    }\r\n    \r\n    // 监听光标位置变化\r\n    editor.onDidChangeCursorPosition(e => {\r\n      setCursorPosition({\r\n        line: e.position.lineNumber,\r\n        column: e.position.column\r\n      });\r\n    });\r\n    \r\n    // 监听内容变化，实时验证\r\n    editor.onDidChangeModelContent(() => {\r\n      const content = editor.getValue();\r\n      validate(content);\r\n    });\r\n    \r\n    // 配置错误高亮样式\r\n    const styleElement = document.getElementById('json-error-styles');\r\n    if (!styleElement) {\r\n      const style = document.createElement('style');\r\n      style.id = 'json-error-styles';\r\n      style.innerHTML = `\r\n        .json-error-line {\r\n          background-color: rgba(255, 0, 0, 0.1);\r\n          border-left: 3px solid red;\r\n        }\r\n        .json-error-glyph {\r\n          background-color: red;\r\n          border-radius: 50%;\r\n          margin-left: 5px;\r\n        }\r\n        .json-error-inline {\r\n          text-decoration: wavy underline red;\r\n        }\r\n      `;\r\n      document.head.appendChild(style);\r\n    }\r\n    \r\n    // 尝试自动检测Schema（如果不是大文件）\r\n    if (!performanceMode) {\r\n      setTimeout(() => {\r\n        const detectedSchema = autoDetectSchema();\r\n        if (detectedSchema) {\r\n          showAlert(`已自动检测并应用Schema: ${detectedSchema}`, 'info');\r\n        }\r\n      }, 500);\r\n    }\r\n    \r\n    // 如果是大文件，显示性能模式提示\r\n    if (performanceMode) {\r\n      showAlert('已启用性能模式，部分功能已禁用以提高性能', 'info');\r\n    }\r\n  };\r\n  \r\n  // 折叠所有代码\r\n  const handleFoldAll = useCallback(() => {\r\n    if (editorRef.current) {\r\n      editorRef.current.getAction('editor.foldAll')?.run();\r\n    }\r\n  }, []);\r\n  \r\n  // 展开所有代码\r\n  const handleUnfoldAll = useCallback(() => {\r\n    if (editorRef.current) {\r\n      editorRef.current.getAction('editor.unfoldAll')?.run();\r\n    }\r\n  }, []);\r\n\r\n  // 格式化JSON\r\n  const handleFormat = useCallback(() => {\r\n    if (!editorRef.current || !monacoRef.current) {\r\n      showAlert('编辑器未准备就绪', 'error');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      // 使用Monaco编辑器的内置格式化功能\r\n      const formatAction = editorRef.current.getAction('editor.action.formatDocument');\r\n      if (formatAction) {\r\n        formatAction.run().then(() => {\r\n          showAlert('JSON已格式化', 'success');\r\n        }).catch(err => {\r\n          showAlert(`格式化失败: ${err.message}`, 'error');\r\n        });\r\n      } else {\r\n        // 如果找不到内置格式化动作，显示错误\r\n        showAlert('无法找到格式化功能', 'error');\r\n      }\r\n    } catch (err) {\r\n      showAlert(`格式化失败: ${err.message}`, 'error');\r\n    }\r\n  }, []);\r\n\r\n  // 压缩JSON - 使用Monaco编辑器的内置功能\r\n  const handleCompress = useCallback(() => {\r\n    if (!editorRef.current || !monacoRef.current) {\r\n      showAlert('编辑器未准备就绪', 'error');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      // 获取当前编辑器模型\r\n      const model = editorRef.current.getModel();\r\n      if (!model) {\r\n        showAlert('无法获取编辑器模型', 'error');\r\n        return;\r\n      }\r\n      \r\n      // 获取当前文本\r\n      const text = model.getValue();\r\n      \r\n      // 验证JSON是否有效\r\n      try {\r\n        JSON.parse(text);\r\n      } catch (parseErr) {\r\n        showAlert(`无法压缩无效的JSON: ${parseErr.message}`, 'error');\r\n        return;\r\n      }\r\n      \r\n      // 使用Monaco的编辑操作来压缩JSON\r\n      // 这种方法不会改变内容，只会移除空白字符\r\n      const edits = [];\r\n      const lineCount = model.getLineCount();\r\n      \r\n      // 创建一个编辑操作，替换整个文本\r\n      // 使用正则表达式移除不必要的空白字符\r\n      const compressedText = text\r\n        // 移除行注释\r\n        .replace(/\\/\\/.*$/gm, '')\r\n        // 移除块注释\r\n        .replace(/\\/\\*[\\s\\S]*?\\*\\//g, '')\r\n        // 移除行首和行尾的空白\r\n        .replace(/^\\s+|\\s+$/gm, '')\r\n        // 移除冒号后的空白\r\n        .replace(/:\\s+/g, ':')\r\n        // 移除逗号后的空白\r\n        .replace(/,\\s+/g, ',')\r\n        // 移除大括号和方括号周围的空白\r\n        .replace(/\\{\\s+/g, '{')\r\n        .replace(/\\s+\\}/g, '}')\r\n        .replace(/\\[\\s+/g, '[')\r\n        .replace(/\\s+\\]/g, ']');\r\n      \r\n      // 应用编辑操作\r\n      editorRef.current.executeEdits('compress', [{\r\n        range: model.getFullModelRange(),\r\n        text: compressedText,\r\n        forceMoveMarkers: true\r\n      }]);\r\n      \r\n      showAlert('JSON已压缩', 'success');\r\n    } catch (err) {\r\n      showAlert(`压缩失败: ${err.message}`, 'error');\r\n    }\r\n  }, []);\r\n\r\n  // 尝试修复JSON\r\n  const handleTryFix = useCallback(() => {\r\n    if (!editorRef.current) {\r\n      showAlert('编辑器未准备就绪', 'error');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      // 直接从Monaco编辑器获取当前值\r\n      const currentValue = editorRef.current.getValue();\r\n      \r\n      // 如果当前值为空，不进行修复\r\n      if (!currentValue || currentValue.trim() === '') {\r\n        showAlert('无内容可修复', 'warning');\r\n        return;\r\n      }\r\n      \r\n      // 尝试修复JSON\r\n      try {\r\n        // 首先尝试解析，如果成功则不需要修复\r\n        JSON.parse(currentValue);\r\n        showAlert('JSON已经是有效的，无需修复', 'info');\r\n        return;\r\n      } catch (parseErr) {\r\n        // 如果解析失败，尝试修复\r\n        const model = editorRef.current.getModel();\r\n        if (!model) {\r\n          showAlert('无法获取编辑器模型', 'error');\r\n          return;\r\n        }\r\n        \r\n        // 使用tryFixJson函数尝试修复\r\n        const fixed = tryFixJson(currentValue);\r\n        \r\n        // 检查修复是否成功且与原始内容不同\r\n        try {\r\n          JSON.parse(fixed);\r\n          \r\n          // 只有当修复后的内容与原始内容不同时才应用更改\r\n          if (fixed !== currentValue) {\r\n            // 应用编辑操作\r\n            editorRef.current.executeEdits('fix', [{\r\n              range: model.getFullModelRange(),\r\n              text: fixed,\r\n              forceMoveMarkers: true\r\n            }]);\r\n            \r\n            showAlert('JSON已尝试修复', 'success');\r\n          } else {\r\n            showAlert('JSON无法自动修复，请手动检查语法错误', 'warning');\r\n          }\r\n        } catch (fixErr) {\r\n          // 如果修复失败，不进行任何更改\r\n          showAlert(`无法自动修复JSON: ${fixErr.message}`, 'warning');\r\n        }\r\n      }\r\n    } catch (err) {\r\n      showAlert(`修复失败: ${err.message}`, 'error');\r\n    }\r\n  }, []);\r\n  \r\n  // 处理自动检测Schema\r\n  const handleAutoDetectSchema = useCallback(() => {\r\n    const detectedSchema = autoDetectSchema();\r\n    if (detectedSchema) {\r\n      const schema = schemas.find(s => s.id === detectedSchema);\r\n      showAlert(`已检测并应用Schema: ${schema?.name || detectedSchema}`, 'success');\r\n    } else {\r\n      showAlert('未能检测到匹配的Schema', 'info');\r\n    }\r\n  }, [autoDetectSchema, schemas]);\r\n  \r\n  // 处理Schema对话框打开\r\n  const handleSchemaDialogOpen = useCallback(() => {\r\n    setSchemaDialogOpen(true);\r\n  }, []);\r\n  \r\n  // 处理Schema对话框关闭\r\n  const handleSchemaDialogClose = useCallback(() => {\r\n    setSchemaDialogOpen(false);\r\n  }, []);\r\n\r\n  // 显示提示信息\r\n  const showAlert = (message, severity) => {\r\n    setAlertMessage(message);\r\n    setAlertSeverity(severity);\r\n    setAlertOpen(true);\r\n  };\r\n\r\n  // 关闭提示信息\r\n  const handleAlertClose = () => {\r\n    setAlertOpen(false);\r\n  };\r\n\r\n  // 当错误变化时更新编辑器标记和装饰器\r\n  useEffect(() => {\r\n    if (monacoRef.current && editorRef.current) {\r\n      const monaco = monacoRef.current;\r\n      const editor = editorRef.current;\r\n      const model = editor.getModel();\r\n      \r\n      // 设置错误标记\r\n      setModelMarkers(monaco, model);\r\n      \r\n      // 添加自定义错误行装饰器\r\n      if (errors.length > 0) {\r\n        // 创建错误行的装饰器\r\n        const errorLineDecorations = errors.map(error => ({\r\n          range: new monaco.Range(\r\n            error.line,\r\n            1,\r\n            error.line,\r\n            model.getLineLength(error.line) + 1\r\n          ),\r\n          options: {\r\n            isWholeLine: true,\r\n            className: 'json-error-line',\r\n            glyphMarginClassName: 'json-error-glyph',\r\n            overviewRuler: {\r\n              color: 'red',\r\n              position: monaco.editor.OverviewRulerLane.Right\r\n            },\r\n            minimap: {\r\n              color: 'red',\r\n              position: monaco.editor.MinimapPosition.Inline\r\n            },\r\n            // 添加波浪线下划线\r\n            inlineClassName: 'json-error-inline'\r\n          }\r\n        }));\r\n        \r\n        // 应用装饰器\r\n        editor.deltaDecorations([], errorLineDecorations);\r\n        \r\n        // 添加CSS样式\r\n        const styleElement = document.getElementById('json-error-styles');\r\n        if (!styleElement) {\r\n          const style = document.createElement('style');\r\n          style.id = 'json-error-styles';\r\n          style.innerHTML = `\r\n            .json-error-line {\r\n              background-color: rgba(255, 0, 0, 0.1);\r\n              border-left: 3px solid red;\r\n            }\r\n            .json-error-glyph {\r\n              background-color: red;\r\n              border-radius: 50%;\r\n              margin-left: 5px;\r\n            }\r\n            .json-error-inline {\r\n              text-decoration: wavy underline red;\r\n            }\r\n          `;\r\n          document.head.appendChild(style);\r\n        }\r\n      } else {\r\n        // 如果没有错误，清除所有装饰器\r\n        editor.deltaDecorations([], []);\r\n      }\r\n    }\r\n  }, [errors, setModelMarkers]);\r\n\r\n  // 当主题或性能模式改变时更新编辑器选项\r\n  useEffect(() => {\r\n    if (editorRef.current && monacoRef.current) {\r\n      const monaco = monacoRef.current;\r\n      const editor = editorRef.current;\r\n      \r\n      // 更新主题\r\n      editor.updateOptions({ \r\n        theme: monacoTheme,\r\n        fontSize: fontSize,\r\n        // 根据性能模式更新其他选项\r\n        ...(performanceMode ? {\r\n          folding: false,\r\n          minimap: { enabled: false },\r\n          bracketPairColorization: { enabled: false },\r\n          renderWhitespace: 'none',\r\n          renderControlCharacters: false,\r\n          renderIndentGuides: false,\r\n          occurrencesHighlight: false,\r\n          renderLineHighlight: 'none'\r\n        } : {})\r\n      });\r\n    }\r\n  }, [monacoTheme, performanceMode, fontSize]);\r\n  \r\n  // 注册键盘快捷键\r\n  const { showHelp, setShowHelp, toggleHelp } = useKeyboardShortcuts({\r\n    format: handleFormat,\r\n    compress: handleCompress,\r\n    search: () => {\r\n      // 触发Monaco编辑器的原生搜索功能\r\n      if (editorRef.current) {\r\n        editorRef.current.getAction('actions.find')?.run();\r\n      }\r\n    },\r\n    save: () => window.pdxJsonEditor?.saveFile?.(),\r\n    new: () => window.pdxJsonEditor?.newFile?.(),\r\n    open: () => window.pdxJsonEditor?.openFile?.(),\r\n    foldAll: handleFoldAll,\r\n    unfoldAll: handleUnfoldAll\r\n  });\r\n\r\n  // 应用编辑器设置\r\n  const applySettings = useCallback((settings) => {\r\n    if (!editorRef.current) return;\r\n    \r\n    const editor = editorRef.current;\r\n    \r\n    // 应用编辑器设置\r\n    editor.updateOptions({\r\n      // 缩略图设置\r\n      minimap: {\r\n        enabled: settings.minimapEnabled,\r\n        showSlider: settings.minimapShowSlider,\r\n        renderCharacters: settings.minimapRenderCharacters,\r\n        side: settings.minimapSide\r\n      },\r\n      \r\n      // 基本编辑器设置\r\n      wordWrap: settings.wordWrap ? 'on' : 'off',\r\n      lineNumbers: settings.lineNumbers ? 'on' : 'off',\r\n      tabSize: settings.indentSize,\r\n      insertSpaces: settings.indentType === 'spaces',\r\n      fontSize: settings.fontSize || fontSize,\r\n      \r\n      // 智能编辑设置\r\n      autoClosingBrackets: settings.autoClosingBrackets ? 'always' : 'never',\r\n      autoClosingQuotes: settings.autoClosingQuotes ? 'always' : 'never',\r\n      matchBrackets: settings.matchBrackets ? 'always' : 'never',\r\n      bracketPairColorization: {\r\n        enabled: settings.bracketPairColorization\r\n      },\r\n      \r\n      // 多光标和选择设置\r\n      multiCursorModifier: settings.multiCursorModifier,\r\n      columnSelection: settings.columnSelection\r\n    });\r\n    \r\n    // 应用缩进设置\r\n    setIndentSize(settings.indentSize);\r\n    \r\n    // 更新字体大小\r\n    if (settings.fontSize) {\r\n      setFontSize(settings.fontSize);\r\n    }\r\n  }, [setIndentSize, fontSize]);\r\n  \r\n  // 加载保存的设置\r\n  useEffect(() => {\r\n    const savedSettings = localStorage.getItem('pdx-json-editor-settings');\r\n    if (savedSettings && editorRef.current) {\r\n      try {\r\n        const settings = JSON.parse(savedSettings);\r\n        applySettings(settings);\r\n      } catch (err) {\r\n        console.error('加载设置失败:', err);\r\n      }\r\n    }\r\n  }, [applySettings]);\r\n  \r\n  // 暴露方法给父组件\r\n  useEffect(() => {\r\n    // 创建一个安全的tryFixJson包装函数，确保不会修改为默认文本\r\n    const safeTryFixJson = () => {\r\n      // 只有当编辑器已初始化时才执行修复\r\n      if (editorRef.current) {\r\n        handleTryFix();\r\n      } else {\r\n        console.warn('编辑器未准备就绪，无法执行修复操作');\r\n      }\r\n    };\r\n    \r\n    if (window.pdxJsonEditor) {\r\n      window.pdxJsonEditor.formatJson = handleFormat;\r\n      window.pdxJsonEditor.compressJson = handleCompress;\r\n      window.pdxJsonEditor.tryFixJson = safeTryFixJson;\r\n      window.pdxJsonEditor.applySettings = applySettings;\r\n      window.pdxJsonEditor.getCurrentContent = () => editorRef.current ? editorRef.current.getValue() : value;\r\n      window.pdxJsonEditor.setContent = setEditorContent;\r\n      window.pdxJsonEditor.getEditorRef = () => editorRef.current;\r\n      window.pdxJsonEditor.getMonacoRef = () => monacoRef.current;\r\n    } else {\r\n      window.pdxJsonEditor = {\r\n        formatJson: handleFormat,\r\n        compressJson: handleCompress,\r\n        tryFixJson: safeTryFixJson,\r\n        applySettings: applySettings,\r\n        getCurrentContent: () => editorRef.current ? editorRef.current.getValue() : value,\r\n        setContent: setEditorContent,\r\n        getEditorRef: () => editorRef.current,\r\n        getMonacoRef: () => monacoRef.current\r\n      };\r\n    }\r\n    \r\n    return () => {\r\n      if (window.pdxJsonEditor) {\r\n        delete window.pdxJsonEditor.formatJson;\r\n        delete window.pdxJsonEditor.compressJson;\r\n        delete window.pdxJsonEditor.tryFixJson;\r\n        delete window.pdxJsonEditor.applySettings;\r\n        delete window.pdxJsonEditor.getCurrentContent;\r\n        delete window.pdxJsonEditor.setContent;\r\n        delete window.pdxJsonEditor.getEditorRef;\r\n        delete window.pdxJsonEditor.getMonacoRef;\r\n      }\r\n    };\r\n  }, [handleFormat, handleCompress, handleTryFix, applySettings, value, setEditorContent]);\r\n  \r\n  // 处理字体缩放\r\n  const handleZoomIn = useCallback(() => {\r\n    setFontSize(prev => Math.min(prev + 2, 32));\r\n    showAlert('放大字体', 'info');\r\n  }, []);\r\n  \r\n  const handleZoomOut = useCallback(() => {\r\n    setFontSize(prev => Math.max(prev - 2, 8));\r\n    showAlert('缩小字体', 'info');\r\n  }, []);\r\n  \r\n  // 切换手势模式\r\n  const toggleGestureMode = useCallback(() => {\r\n    setGestureMode(prev => prev === 'scroll' ? 'zoom' : 'scroll');\r\n    showAlert(`已切换到${gestureMode === 'scroll' ? '缩放' : '滚动'}模式`, 'info');\r\n  }, [gestureMode]);\r\n  \r\n  // 双击手势 - 重置字体大小\r\n  const { handleTouchEnd: handleDoubleTapTouchEnd } = useDoubleTap({\r\n    onDoubleTap: () => {\r\n      setFontSize(14); // 重置为默认字体大小\r\n      showAlert('已重置字体大小', 'info');\r\n    }\r\n  });\r\n  \r\n  // 捏合手势 - 缩放字体\r\n  const { \r\n    handleTouchStart: handlePinchTouchStart, \r\n    handleTouchMove: handlePinchTouchMove,\r\n    handleTouchEnd: handlePinchTouchEnd,\r\n    isEnabled: isPinchEnabled\r\n  } = usePinch({\r\n    onPinchIn: ({ distance }) => {\r\n      if (gestureMode === 'zoom') {\r\n        setFontSize(prev => Math.max(prev - 1, 8));\r\n      }\r\n    },\r\n    onPinchOut: ({ distance }) => {\r\n      if (gestureMode === 'zoom') {\r\n        setFontSize(prev => Math.min(prev + 1, 32));\r\n      }\r\n    }\r\n  });\r\n  \r\n  // 滑动手势 - 在大文件中快速导航\r\n  const { \r\n    handleTouchStart: handleSwipeTouchStart, \r\n    handleTouchEnd: handleSwipeTouchEnd,\r\n    isEnabled: isSwipeEnabled\r\n  } = useSwipe({\r\n    threshold: 100,\r\n    onSwipeUp: ({ distance, isQuick }) => {\r\n      if (gestureMode === 'scroll' && isQuick && editorRef.current) {\r\n        // 快速向上滑动 - 向上翻页\r\n        const editor = editorRef.current;\r\n        const scrollAmount = Math.floor(editor.getVisibleRanges()[0].endLineNumber - editor.getVisibleRanges()[0].startLineNumber);\r\n        editor.setScrollPosition({ scrollTop: editor.getScrollTop() - scrollAmount * editor.getOption(monaco.editor.EditorOption.lineHeight) });\r\n      }\r\n    },\r\n    onSwipeDown: ({ distance, isQuick }) => {\r\n      if (gestureMode === 'scroll' && isQuick && editorRef.current) {\r\n        // 快速向下滑动 - 向下翻页\r\n        const editor = editorRef.current;\r\n        const scrollAmount = Math.floor(editor.getVisibleRanges()[0].endLineNumber - editor.getVisibleRanges()[0].startLineNumber);\r\n        editor.setScrollPosition({ scrollTop: editor.getScrollTop() + scrollAmount * editor.getOption(monaco.editor.EditorOption.lineHeight) });\r\n      }\r\n    }\r\n  });\r\n  \r\n  // 合并触摸事件处理函数\r\n  const handleTouchStart = (e) => {\r\n    handlePinchTouchStart(e);\r\n    handleSwipeTouchStart(e);\r\n  };\r\n  \r\n  const handleTouchMove = (e) => {\r\n    handlePinchTouchMove(e);\r\n  };\r\n  \r\n  const handleTouchEnd = (e) => {\r\n    handlePinchTouchEnd(e);\r\n    handleSwipeTouchEnd(e);\r\n    handleDoubleTapTouchEnd(e);\r\n  };\r\n\r\n  return (\r\n    <Box \r\n      sx={{ flexGrow: 1, overflow: 'hidden', position: 'relative', display: 'flex', flexDirection: 'column' }}\r\n      ref={editorContainerRef}\r\n      onTouchStart={handleTouchStart}\r\n      onTouchMove={handleTouchMove}\r\n      onTouchEnd={handleTouchEnd}\r\n    >\r\n      {/* 桌面版工具栏 */}\r\n      {!isMobile && (\r\n        <EditorToolbar \r\n          onFoldAllClick={handleFoldAll}\r\n          onUnfoldAllClick={handleUnfoldAll}\r\n          onSettingsClick={onSettingsClick}\r\n          onKeyboardShortcutsClick={toggleHelp}\r\n          onIncreaseFontSize={increaseFontSize}\r\n          onDecreaseFontSize={decreaseFontSize}\r\n          schemas={schemas}\r\n          selectedSchemaId={selectedSchemaId}\r\n          onSelectSchema={setSelectedSchemaId}\r\n          onAddSchema={addSchema}\r\n          onDeleteSchema={deleteSchema}\r\n          onUpdateSchema={updateSchema}\r\n          onAutoDetectSchema={handleAutoDetectSchema}\r\n        />\r\n      )}\r\n      \r\n      {/* 移动版工具栏 */}\r\n      <MobileEditorToolbar\r\n        onFoldAllClick={handleFoldAll}\r\n        onUnfoldAllClick={handleUnfoldAll}\r\n\r\n        onSettingsClick={onSettingsClick}\r\n        onSchemaClick={handleSchemaDialogOpen}\r\n        onKeyboardShortcutsClick={toggleHelp}\r\n      />\r\n      <Paper \r\n        elevation={0} \r\n        sx={{ \r\n          flexGrow: 1,\r\n          borderRadius: 0,\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          overflow: 'hidden',\r\n          position: 'relative'\r\n        }}\r\n      >\r\n        {isLoading && (\r\n          <Box\r\n            sx={{\r\n              position: 'absolute',\r\n              top: 0,\r\n              left: 0,\r\n              right: 0,\r\n              bottom: 0,\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              backgroundColor: 'rgba(0, 0, 0, 0.3)',\r\n              zIndex: 10\r\n            }}\r\n          >\r\n            <Typography variant=\"h6\" color=\"white\">\r\n              加载中...\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n        <Editor\r\n          height=\"100%\"\r\n          defaultLanguage=\"json\"\r\n          defaultValue={externalValue === undefined ? DEFAULT_JSON : externalValue}\r\n          value={value || (externalValue === undefined ? DEFAULT_JSON : externalValue)}\r\n          onChange={handleEditorChange}\r\n          theme={monacoTheme}\r\n          options={getEditorOptions(\r\n            themeId === 'dark' || themeId === 'highContrast',\r\n            false,\r\n            performanceMode,\r\n            fontSize\r\n          )}\r\n          onMount={handleEditorDidMount}\r\n          loading={<Typography variant=\"body1\">加载编辑器中...</Typography>}\r\n        />\r\n        \r\n        {/* 触摸设备上的缩放按钮 */}\r\n        {isTouch && (\r\n          <Box sx={{ position: 'absolute', bottom: 16, right: 16, display: 'flex', flexDirection: 'column', gap: 1 }}>\r\n            <Tooltip title=\"放大字体\">\r\n              <Fab \r\n                color=\"primary\" \r\n                size=\"small\" \r\n                onClick={handleZoomIn}\r\n                aria-label=\"放大字体\"\r\n              >\r\n                <ZoomInIcon />\r\n              </Fab>\r\n            </Tooltip>\r\n            <Tooltip title=\"缩小字体\">\r\n              <Fab \r\n                color=\"primary\" \r\n                size=\"small\" \r\n                onClick={handleZoomOut}\r\n                aria-label=\"缩小字体\"\r\n              >\r\n                <ZoomOutIcon />\r\n              </Fab>\r\n            </Tooltip>\r\n          </Box>\r\n        )}\r\n        \r\n        {/* 触摸设备上的手势模式切换按钮 */}\r\n        {isTouch && (\r\n          <Tooltip title={`切换到${gestureMode === 'scroll' ? '缩放' : '滚动'}模式`}>\r\n            <Fab\r\n              color=\"secondary\"\r\n              size=\"small\"\r\n              onClick={toggleGestureMode}\r\n              aria-label=\"切换手势模式\"\r\n              sx={{ position: 'absolute', bottom: 16, left: 16 }}\r\n            >\r\n              {gestureMode === 'scroll' ? <ZoomInIcon /> : <ZoomOutIcon />}\r\n            </Fab>\r\n          </Tooltip>\r\n        )}\r\n      </Paper>\r\n      <StatusBar \r\n        isValid={isValid}\r\n        errors={errors}\r\n        cursorPosition={cursorPosition}\r\n        fileSize={value ? new Blob([value]).size : 0}\r\n      />\r\n      <Snackbar\r\n        open={alertOpen}\r\n        autoHideDuration={3000}\r\n        onClose={handleAlertClose}\r\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n      >\r\n        <Alert onClose={handleAlertClose} severity={alertSeverity} sx={{ width: '100%' }}>\r\n          {alertMessage}\r\n        </Alert>\r\n      </Snackbar>\r\n      \r\n      {/* Schema对话框（移动端） */}\r\n      <Dialog\r\n        open={schemaDialogOpen}\r\n        onClose={handleSchemaDialogClose}\r\n        fullWidth\r\n        maxWidth=\"sm\"\r\n      >\r\n        <DialogTitle>JSON Schema</DialogTitle>\r\n        <DialogContent>\r\n          <Box sx={{ py: 1 }}>\r\n            {/* 简化版Schema选择器 */}\r\n            <Box sx={{ mb: 2 }}>\r\n              <Typography variant=\"subtitle2\" gutterBottom>\r\n                当前Schema: {selectedSchemaId ? schemas.find(s => s.id === selectedSchemaId)?.name || selectedSchemaId : '无'}\r\n              </Typography>\r\n              <Button \r\n                variant=\"outlined\" \r\n                size=\"small\" \r\n                onClick={handleAutoDetectSchema}\r\n                sx={{ mr: 1 }}\r\n              >\r\n                自动检测\r\n              </Button>\r\n              <Button \r\n                variant=\"outlined\" \r\n                size=\"small\" \r\n                onClick={() => setSelectedSchemaId(null)}\r\n                disabled={!selectedSchemaId}\r\n              >\r\n                清除\r\n              </Button>\r\n            </Box>\r\n            \r\n            <Typography variant=\"subtitle2\" gutterBottom>\r\n              可用Schema:\r\n            </Typography>\r\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\r\n              {schemas.map(schema => (\r\n                <Button\r\n                  key={schema.id}\r\n                  variant={selectedSchemaId === schema.id ? 'contained' : 'outlined'}\r\n                  size=\"small\"\r\n                  onClick={() => setSelectedSchemaId(schema.id)}\r\n                >\r\n                  {schema.name}\r\n                </Button>\r\n              ))}\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleSchemaDialogClose}>关闭</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      \r\n      {/* 键盘快捷键帮助对话框 */}\r\n      <KeyboardShortcutsDialog\r\n        open={showHelp}\r\n        onClose={() => setShowHelp(false)}\r\n      />\r\n    </Box>\r\n  );\r\n}","/**\r\n * 手势Hook\r\n * 提供触摸手势相关的功能\r\n */\r\n\r\nimport { useState, useEffect, useRef } from 'preact/hooks';\r\nimport { useTouchDevice } from './useResponsive';\r\n\r\n/**\r\n * 使用滑动手势的Hook\r\n * @param {Object} options - 选项\r\n * @param {number} options.threshold - 滑动阈值（像素）\r\n * @param {Function} options.onSwipeLeft - 向左滑动回调\r\n * @param {Function} options.onSwipeRight - 向右滑动回调\r\n * @param {Function} options.onSwipeUp - 向上滑动回调\r\n * @param {Function} options.onSwipeDown - 向下滑动回调\r\n * @returns {Object} - 手势处理函数\r\n */\r\nexport const useSwipe = ({\r\n  threshold = 50,\r\n  onSwipeLeft,\r\n  onSwipeRight,\r\n  onSwipeUp,\r\n  onSwipeDown\r\n} = {}) => {\r\n  const isTouch = useTouchDevice();\r\n  const touchStartRef = useRef({ x: 0, y: 0, time: 0 });\r\n  const touchEndRef = useRef({ x: 0, y: 0, time: 0 });\r\n  \r\n  // 处理触摸开始\r\n  const handleTouchStart = (e) => {\r\n    if (!isTouch) return;\r\n    \r\n    const touch = e.touches[0];\r\n    touchStartRef.current = {\r\n      x: touch.clientX,\r\n      y: touch.clientY,\r\n      time: Date.now()\r\n    };\r\n  };\r\n  \r\n  // 处理触摸结束\r\n  const handleTouchEnd = (e) => {\r\n    if (!isTouch) return;\r\n    \r\n    const touch = e.changedTouches[0];\r\n    touchEndRef.current = {\r\n      x: touch.clientX,\r\n      y: touch.clientY,\r\n      time: Date.now()\r\n    };\r\n    \r\n    handleSwipe();\r\n  };\r\n  \r\n  // 处理滑动\r\n  const handleSwipe = () => {\r\n    const { x: startX, y: startY, time: startTime } = touchStartRef.current;\r\n    const { x: endX, y: endY, time: endTime } = touchEndRef.current;\r\n    \r\n    const distanceX = endX - startX;\r\n    const distanceY = endY - startY;\r\n    const duration = endTime - startTime;\r\n    \r\n    // 检查是否为快速滑动（小于300毫秒）\r\n    const isQuickSwipe = duration < 300;\r\n    \r\n    // 检查滑动方向\r\n    if (Math.abs(distanceX) > Math.abs(distanceY)) {\r\n      // 水平滑动\r\n      if (Math.abs(distanceX) > threshold) {\r\n        if (distanceX > 0 && onSwipeRight) {\r\n          onSwipeRight({ distance: distanceX, duration, isQuick: isQuickSwipe });\r\n        } else if (distanceX < 0 && onSwipeLeft) {\r\n          onSwipeLeft({ distance: Math.abs(distanceX), duration, isQuick: isQuickSwipe });\r\n        }\r\n      }\r\n    } else {\r\n      // 垂直滑动\r\n      if (Math.abs(distanceY) > threshold) {\r\n        if (distanceY > 0 && onSwipeDown) {\r\n          onSwipeDown({ distance: distanceY, duration, isQuick: isQuickSwipe });\r\n        } else if (distanceY < 0 && onSwipeUp) {\r\n          onSwipeUp({ distance: Math.abs(distanceY), duration, isQuick: isQuickSwipe });\r\n        }\r\n      }\r\n    }\r\n  };\r\n  \r\n  return {\r\n    handleTouchStart,\r\n    handleTouchEnd,\r\n    isEnabled: isTouch\r\n  };\r\n};\r\n\r\n/**\r\n * 使用捏合手势的Hook\r\n * @param {Object} options - 选项\r\n * @param {Function} options.onPinchIn - 捏合回调\r\n * @param {Function} options.onPinchOut - 展开回调\r\n * @param {number} options.threshold - 捏合阈值\r\n * @returns {Object} - 手势处理函数\r\n */\r\nexport const usePinch = ({\r\n  onPinchIn,\r\n  onPinchOut,\r\n  threshold = 10\r\n} = {}) => {\r\n  const isTouch = useTouchDevice();\r\n  const touchesRef = useRef([]);\r\n  const initialDistanceRef = useRef(null);\r\n  \r\n  // 处理触摸开始\r\n  const handleTouchStart = (e) => {\r\n    if (!isTouch) return;\r\n    \r\n    if (e.touches.length === 2) {\r\n      const touch1 = e.touches[0];\r\n      const touch2 = e.touches[1];\r\n      \r\n      touchesRef.current = [\r\n        { x: touch1.clientX, y: touch1.clientY },\r\n        { x: touch2.clientX, y: touch2.clientY }\r\n      ];\r\n      \r\n      initialDistanceRef.current = getDistance(touchesRef.current[0], touchesRef.current[1]);\r\n    }\r\n  };\r\n  \r\n  // 处理触摸移动\r\n  const handleTouchMove = (e) => {\r\n    if (!isTouch) return;\r\n    \r\n    if (e.touches.length === 2 && initialDistanceRef.current !== null) {\r\n      const touch1 = e.touches[0];\r\n      const touch2 = e.touches[1];\r\n      \r\n      const currentTouches = [\r\n        { x: touch1.clientX, y: touch1.clientY },\r\n        { x: touch2.clientX, y: touch2.clientY }\r\n      ];\r\n      \r\n      const currentDistance = getDistance(currentTouches[0], currentTouches[1]);\r\n      const distanceDiff = currentDistance - initialDistanceRef.current;\r\n      \r\n      if (Math.abs(distanceDiff) > threshold) {\r\n        if (distanceDiff < 0 && onPinchIn) {\r\n          onPinchIn({ distance: Math.abs(distanceDiff) });\r\n        } else if (distanceDiff > 0 && onPinchOut) {\r\n          onPinchOut({ distance: distanceDiff });\r\n        }\r\n        \r\n        // 更新初始距离，以便连续捏合\r\n        initialDistanceRef.current = currentDistance;\r\n      }\r\n    }\r\n  };\r\n  \r\n  // 处理触摸结束\r\n  const handleTouchEnd = () => {\r\n    if (!isTouch) return;\r\n    initialDistanceRef.current = null;\r\n  };\r\n  \r\n  // 计算两点之间的距离\r\n  const getDistance = (point1, point2) => {\r\n    const dx = point1.x - point2.x;\r\n    const dy = point1.y - point2.y;\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n  };\r\n  \r\n  return {\r\n    handleTouchStart,\r\n    handleTouchMove,\r\n    handleTouchEnd,\r\n    isEnabled: isTouch\r\n  };\r\n};\r\n\r\n/**\r\n * 使用长按手势的Hook\r\n * @param {Object} options - 选项\r\n * @param {Function} options.onLongPress - 长按回调\r\n * @param {number} options.delay - 长按延迟（毫秒）\r\n * @returns {Object} - 手势处理函数\r\n */\r\nexport const useLongPress = ({\r\n  onLongPress,\r\n  delay = 500\r\n} = {}) => {\r\n  const isTouch = useTouchDevice();\r\n  const timerRef = useRef(null);\r\n  const touchPositionRef = useRef({ x: 0, y: 0 });\r\n  const [isLongPress, setIsLongPress] = useState(false);\r\n  \r\n  // 处理触摸开始\r\n  const handleTouchStart = (e) => {\r\n    if (!isTouch) return;\r\n    \r\n    const touch = e.touches[0];\r\n    touchPositionRef.current = {\r\n      x: touch.clientX,\r\n      y: touch.clientY\r\n    };\r\n    \r\n    timerRef.current = setTimeout(() => {\r\n      setIsLongPress(true);\r\n      if (onLongPress) {\r\n        onLongPress({\r\n          x: touchPositionRef.current.x,\r\n          y: touchPositionRef.current.y\r\n        });\r\n      }\r\n    }, delay);\r\n  };\r\n  \r\n  // 处理触摸移动\r\n  const handleTouchMove = (e) => {\r\n    if (!isTouch) return;\r\n    \r\n    const touch = e.touches[0];\r\n    const currentPosition = {\r\n      x: touch.clientX,\r\n      y: touch.clientY\r\n    };\r\n    \r\n    // 如果移动距离超过阈值，取消长按\r\n    const moveThreshold = 10;\r\n    const dx = currentPosition.x - touchPositionRef.current.x;\r\n    const dy = currentPosition.y - touchPositionRef.current.y;\r\n    const distance = Math.sqrt(dx * dx + dy * dy);\r\n    \r\n    if (distance > moveThreshold) {\r\n      clearTimeout(timerRef.current);\r\n      setIsLongPress(false);\r\n    }\r\n  };\r\n  \r\n  // 处理触摸结束\r\n  const handleTouchEnd = () => {\r\n    if (!isTouch) return;\r\n    clearTimeout(timerRef.current);\r\n    setIsLongPress(false);\r\n  };\r\n  \r\n  // 清理定时器\r\n  useEffect(() => {\r\n    return () => {\r\n      if (timerRef.current) {\r\n        clearTimeout(timerRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n  \r\n  return {\r\n    handleTouchStart,\r\n    handleTouchMove,\r\n    handleTouchEnd,\r\n    isLongPress,\r\n    isEnabled: isTouch\r\n  };\r\n};\r\n\r\n/**\r\n * 使用双击手势的Hook\r\n * @param {Object} options - 选项\r\n * @param {Function} options.onDoubleTap - 双击回调\r\n * @param {number} options.delay - 双击间隔（毫秒）\r\n * @returns {Object} - 手势处理函数\r\n */\r\nexport const useDoubleTap = ({\r\n  onDoubleTap,\r\n  delay = 300\r\n} = {}) => {\r\n  const isTouch = useTouchDevice();\r\n  const lastTapRef = useRef({ time: 0, x: 0, y: 0 });\r\n  \r\n  // 处理触摸结束（点击）\r\n  const handleTouchEnd = (e) => {\r\n    if (!isTouch) return;\r\n    \r\n    const touch = e.changedTouches[0];\r\n    const currentTime = Date.now();\r\n    const currentPosition = {\r\n      x: touch.clientX,\r\n      y: touch.clientY\r\n    };\r\n    \r\n    const { time: lastTime, x: lastX, y: lastY } = lastTapRef.current;\r\n    const timeDiff = currentTime - lastTime;\r\n    \r\n    // 检查是否为双击\r\n    if (timeDiff < delay) {\r\n      // 检查两次点击的位置是否接近\r\n      const dx = currentPosition.x - lastX;\r\n      const dy = currentPosition.y - lastY;\r\n      const distance = Math.sqrt(dx * dx + dy * dy);\r\n      \r\n      if (distance < 20) {\r\n        // 防止事件冒泡\r\n        e.preventDefault();\r\n        \r\n        if (onDoubleTap) {\r\n          onDoubleTap({\r\n            x: currentPosition.x,\r\n            y: currentPosition.y\r\n          });\r\n        }\r\n        \r\n        // 重置最后点击时间，防止连续触发\r\n        lastTapRef.current.time = 0;\r\n        return;\r\n      }\r\n    }\r\n    \r\n    // 更新最后点击信息\r\n    lastTapRef.current = {\r\n      time: currentTime,\r\n      x: currentPosition.x,\r\n      y: currentPosition.y\r\n    };\r\n  };\r\n  \r\n  return {\r\n    handleTouchEnd,\r\n    isEnabled: isTouch\r\n  };\r\n};\r\n\r\n/**\r\n * 使用旋转手势的Hook\r\n * @param {Object} options - 选项\r\n * @param {Function} options.onRotate - 旋转回调\r\n * @param {number} options.threshold - 旋转阈值（度）\r\n * @returns {Object} - 手势处理函数\r\n */\r\nexport const useRotate = ({\r\n  onRotate,\r\n  threshold = 5\r\n} = {}) => {\r\n  const isTouch = useTouchDevice();\r\n  const initialAngleRef = useRef(null);\r\n  const lastAngleRef = useRef(null);\r\n  \r\n  // 处理触摸开始\r\n  const handleTouchStart = (e) => {\r\n    if (!isTouch) return;\r\n    \r\n    if (e.touches.length === 2) {\r\n      const angle = getAngle(e.touches[0], e.touches[1]);\r\n      initialAngleRef.current = angle;\r\n      lastAngleRef.current = angle;\r\n    }\r\n  };\r\n  \r\n  // 处理触摸移动\r\n  const handleTouchMove = (e) => {\r\n    if (!isTouch) return;\r\n    \r\n    if (e.touches.length === 2 && initialAngleRef.current !== null) {\r\n      const currentAngle = getAngle(e.touches[0], e.touches[1]);\r\n      let rotation = currentAngle - lastAngleRef.current;\r\n      \r\n      // 处理角度跨越360度的情况\r\n      if (rotation > 180) rotation -= 360;\r\n      if (rotation < -180) rotation += 360;\r\n      \r\n      if (Math.abs(rotation) > threshold && onRotate) {\r\n        onRotate({\r\n          rotation,\r\n          absolute: currentAngle,\r\n          relative: currentAngle - initialAngleRef.current\r\n        });\r\n        \r\n        lastAngleRef.current = currentAngle;\r\n      }\r\n    }\r\n  };\r\n  \r\n  // 处理触摸结束\r\n  const handleTouchEnd = () => {\r\n    if (!isTouch) return;\r\n    initialAngleRef.current = null;\r\n    lastAngleRef.current = null;\r\n  };\r\n  \r\n  // 计算两点之间的角度\r\n  const getAngle = (touch1, touch2) => {\r\n    const dx = touch2.clientX - touch1.clientX;\r\n    const dy = touch2.clientY - touch1.clientY;\r\n    \r\n    // 计算角度（弧度）并转换为度\r\n    let angle = Math.atan2(dy, dx) * 180 / Math.PI;\r\n    \r\n    // 将角度转换为0-360范围\r\n    if (angle < 0) {\r\n      angle += 360;\r\n    }\r\n    \r\n    return angle;\r\n  };\r\n  \r\n  return {\r\n    handleTouchStart,\r\n    handleTouchMove,\r\n    handleTouchEnd,\r\n    isEnabled: isTouch\r\n  };\r\n};","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z\"\n}), 'CloudUpload');","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","/**\r\n * 文件服务\r\n * 提供文件读取、保存和管理功能\r\n */\r\n\r\nimport { saveAs } from 'file-saver';\r\n\r\n/**\r\n * 文件信息接口\r\n * @typedef {Object} FileInfo\r\n * @property {string} name - 文件名\r\n * @property {number} size - 文件大小（字节）\r\n * @property {Date} lastModified - 最后修改时间\r\n * @property {string} content - 文件内容\r\n */\r\n\r\n/**\r\n * 从文件对象读取文本内容\r\n * @param {File} file - 文件对象\r\n * @returns {Promise<FileInfo>} - 文件信息\r\n */\r\nexport const readFile = (file) => {\r\n  return new Promise((resolve, reject) => {\r\n    if (!file) {\r\n      reject(new Error('未提供文件'));\r\n      return;\r\n    }\r\n    \r\n    const reader = new FileReader();\r\n    \r\n    reader.onload = (event) => {\r\n      try {\r\n        const content = event.target.result;\r\n        \r\n        resolve({\r\n          name: file.name,\r\n          size: file.size,\r\n          lastModified: new Date(file.lastModified),\r\n          content\r\n        });\r\n      } catch (error) {\r\n        reject(new Error(`读取文件失败: ${error.message}`));\r\n      }\r\n    };\r\n    \r\n    reader.onerror = () => {\r\n      reject(new Error('读取文件时发生错误'));\r\n    };\r\n    \r\n    reader.readAsText(file);\r\n  });\r\n};\r\n\r\n/**\r\n * 读取文件（使用文件系统访问API）\r\n * @returns {Promise<Object>} - 包含文件内容和名称的Promise\r\n */\r\nexport const readFileWithPicker = async () => {\r\n  // 检查是否支持文件系统访问API\r\n  if ('showOpenFilePicker' in window) {\r\n    try {\r\n      // 配置文件选择器选项\r\n      const options = {\r\n        types: [\r\n          {\r\n            description: 'JSON文件',\r\n            accept: {\r\n              'application/json': ['.json'],\r\n            },\r\n          },\r\n        ],\r\n        multiple: false,\r\n      };\r\n      // 显示文件选择器\r\n      const [fileHandle] = await window.showOpenFilePicker(options);\r\n      const file = await fileHandle.getFile();\r\n      const content = await file.text();\r\n      // 尝试获取父目录句柄\r\n      let directoryHandle = null;\r\n      try {\r\n        directoryHandle = await fileHandle.getParentDirectory();\r\n      } catch (error) {\r\n        console.warn('无法获取父目录句柄:', error);\r\n      }\r\n      return {\r\n        content,\r\n        name: file.name,\r\n        path: file.name, // Web API不提供完整路径\r\n        handle: fileHandle,\r\n        directoryHandle: directoryHandle\r\n      };\r\n    } catch (error) {\r\n      // 如果用户取消了操作，不抛出错误\r\n      if (error.name === 'AbortError') {\r\n        return null;\r\n      }\r\n      throw error;\r\n    }\r\n  } else {\r\n    // 回退到传统的文件输入\r\n    return new Promise((resolve, reject) => {\r\n      const input = document.createElement('input');\r\n      input.type = 'file';\r\n      input.accept = '.json,application/json';\r\n      input.onchange = (event) => {\r\n        const file = event.target.files[0];\r\n        if (!file) {\r\n          resolve(null);\r\n          return;\r\n        }\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n          resolve({\r\n            content: reader.result,\r\n            name: file.name,\r\n            path: file.name,\r\n            handle: null,\r\n            directoryHandle: null\r\n          });\r\n        };\r\n        reader.onerror = () => {\r\n          reject(new Error('读取文件失败'));\r\n        };\r\n        reader.readAsText(file);\r\n      };\r\n      input.click();\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * 检查是否支持文件系统访问API\r\n * @returns {boolean} - 是否支持\r\n */\r\nexport const isFileSystemAccessSupported = () => {\r\n  return 'showSaveFilePicker' in window;\r\n};\r\n\r\n/**\r\n * 保存内容到文件\r\n * @param {string} content - 要保存的内容\r\n * @param {string} filename - 文件名\r\n * @param {Object} [options] - 额外选项\r\n * @param {FileSystemDirectoryHandle} [options.directoryHandle] - 当前文件所在目录的句柄\r\n * @param {FileSystemFileHandle} [options.fileHandle] - 当前文件的句柄\r\n * @returns {Promise<Object>} - 保存操作的结果，包含文件名、路径和句柄\r\n */\r\nexport const saveFile = async (content, filename, options = {}) => {\r\n  // 检查是否支持文件系统访问API\r\n  if (isFileSystemAccessSupported()) {\r\n    try {\r\n      // 配置文件选择器选项\r\n      const pickerOptions = {\r\n        suggestedName: filename,\r\n        types: [\r\n          {\r\n            description: 'JSON文件',\r\n            accept: {\r\n              'application/json': ['.json'],\r\n            },\r\n          },\r\n        ],\r\n      };\r\n      \r\n      // 如果有文件句柄，尝试使用当前文件的父目录作为起始目录\r\n      if (options.fileHandle) {\r\n        try {\r\n          const parentDirectory = await options.fileHandle.getParentDirectory();\r\n          if (parentDirectory) {\r\n            pickerOptions.startIn = parentDirectory;\r\n          }\r\n        } catch (error) {\r\n          console.warn('无法获取文件的父目录:', error);\r\n        }\r\n      } \r\n      // 如果有目录句柄，尝试使用它作为起始点\r\n      else if (options.directoryHandle) {\r\n        pickerOptions.startIn = options.directoryHandle;\r\n      }\r\n\r\n      // 显示保存文件选择器\r\n      const fileHandle = await window.showSaveFilePicker(pickerOptions);\r\n      \r\n      // 创建可写流\r\n      const writable = await fileHandle.createWritable();\r\n      \r\n      // 写入内容\r\n      await writable.write(content);\r\n      \r\n      // 关闭流\r\n      await writable.close();\r\n      \r\n      // 尝试获取父目录句柄\r\n      let directoryHandle = null;\r\n      try {\r\n        directoryHandle = await fileHandle.getParentDirectory();\r\n      } catch (error) {\r\n        console.warn('无法获取父目录句柄:', error);\r\n      }\r\n      \r\n      return {\r\n        name: fileHandle.name,\r\n        path: await fileHandle.getFile().then(file => file.name),\r\n        handle: fileHandle, // 保存文件句柄以便后续操作\r\n        directoryHandle: directoryHandle // 保存目录句柄以便后续操作\r\n      };\r\n    } catch (error) {\r\n      // 如果用户取消了操作，不抛出错误\r\n      if (error.name === 'AbortError') {\r\n        throw new Error('用户取消了保存操作');\r\n      }\r\n      \r\n      // 其他错误，尝试回退到传统方法\r\n      console.warn('文件系统访问API失败，回退到传统下载方式:', error);\r\n      return fallbackSaveFile(content, filename);\r\n    }\r\n  } else {\r\n    // 回退到传统的下载方式\r\n    return fallbackSaveFile(content, filename);\r\n  }\r\n};\r\n\r\n/**\r\n * 传统的文件保存方法（下载）\r\n * @param {string} content - 要保存的内容\r\n * @param {string} filename - 文件名\r\n * @returns {Promise<void>} - 保存操作的Promise\r\n */\r\nconst fallbackSaveFile = (content, filename) => {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      const blob = new Blob([content], { type: 'application/json;charset=utf-8' });\r\n      saveAs(blob, filename);\r\n      resolve({\r\n        name: filename,\r\n        path: filename,\r\n        handle: null, // 传统方式没有文件句柄\r\n        directoryHandle: null // 传统方式没有目录句柄\r\n      });\r\n    } catch (error) {\r\n      reject(new Error(`保存文件失败: ${error.message}`));\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * 创建新文件\r\n * @param {string} name - 文件名\r\n * @param {string} [content=''] - 初始内容\r\n * @returns {FileInfo} - 文件信息\r\n */\r\nexport const createNewFile = (name, content = '') => {\r\n  return {\r\n    name,\r\n    size: new Blob([content]).size,\r\n    lastModified: new Date(),\r\n    content\r\n  };\r\n};\r\n\r\n/**\r\n * 检查文件是否为JSON文件\r\n * @param {File} file - 文件对象\r\n * @returns {boolean} - 是否为JSON文件\r\n */\r\nexport const isJsonFile = (file) => {\r\n  if (!file) return false;\r\n  \r\n  // 检查文件扩展名\r\n  const fileName = file.name.toLowerCase();\r\n  return fileName.endsWith('.json');\r\n};\r\n\r\n/**\r\n * 检查文件大小是否超过限制\r\n * @param {File|number} file - 文件对象或文件大小（字节）\r\n * @param {number} [sizeLimit=5242880] - 大小限制（字节），默认5MB\r\n * @returns {boolean} - 是否超过限制\r\n */\r\nexport const isLargeFile = (file, sizeLimit = 5242880) => {\r\n  if (!file) return false;\r\n  \r\n  const fileSize = typeof file === 'number' ? file : file.size;\r\n  return fileSize > sizeLimit;\r\n};\r\n\r\n/**\r\n * 格式化文件大小显示\r\n * @param {number} bytes - 文件大小（字节）\r\n * @returns {string} - 格式化后的大小\r\n */\r\nexport const formatFileSize = (bytes) => {\r\n  if (bytes === 0) return '0 B';\r\n  \r\n  const units = ['B', 'KB', 'MB', 'GB', 'TB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(1024));\r\n  \r\n  return `${(bytes / Math.pow(1024, i)).toFixed(2)} ${units[i]}`;\r\n};\r\n\r\n/**\r\n * 从文件名中提取基本名称（不含扩展名）\r\n * @param {string} filename - 文件名\r\n * @returns {string} - 基本名称\r\n */\r\nexport const getBaseName = (filename) => {\r\n  if (!filename) return '';\r\n  \r\n  const lastDotIndex = filename.lastIndexOf('.');\r\n  return lastDotIndex === -1 ? filename : filename.substring(0, lastDotIndex);\r\n};\r\n\r\n/**\r\n * 从文件名中提取扩展名\r\n * @param {string} filename - 文件名\r\n * @returns {string} - 扩展名（包含点）\r\n */\r\nexport const getExtension = (filename) => {\r\n  if (!filename) return '';\r\n  \r\n  const lastDotIndex = filename.lastIndexOf('.');\r\n  return lastDotIndex === -1 ? '' : filename.substring(lastDotIndex);\r\n};\r\n\r\n/**\r\n * 确保文件名有.json扩展名\r\n * @param {string} filename - 文件名\r\n * @returns {string} - 确保有.json扩展名的文件名\r\n */\r\nexport const ensureJsonExtension = (filename) => {\r\n  if (!filename) return 'untitled.json';\r\n  \r\n  if (!filename.toLowerCase().endsWith('.json')) {\r\n    return `${filename}.json`;\r\n  }\r\n  \r\n  return filename;\r\n};","import { useState, useRef, useEffect } from 'preact/hooks';\r\nimport { Box, Typography, Paper, Alert } from '@mui/material';\r\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\r\nimport { isJsonFile } from '../services/fileService';\r\n\r\nexport function FileDropZone({ onFileDrop, onError }) {\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [showError, setShowError] = useState(false);\r\n  const dropRef = useRef(null);\r\n  const dragCounter = useRef(0);\r\n\r\n  const handleDragEnter = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    dragCounter.current++;\r\n    setIsDragging(true);\r\n  };\r\n\r\n  const handleDragLeave = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    dragCounter.current--;\r\n    if (dragCounter.current === 0) {\r\n      setIsDragging(false);\r\n    }\r\n  };\r\n\r\n  const handleDragOver = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragging(false);\r\n    dragCounter.current = 0;\r\n    \r\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n      const file = e.dataTransfer.files[0];\r\n      \r\n      // 检查是否为JSON文件\r\n      if (!isJsonFile(file)) {\r\n        const errorMsg = `不支持的文件类型: ${file.name}。请拖放JSON文件。`;\r\n        setErrorMessage(errorMsg);\r\n        setShowError(true);\r\n        if (onError) {\r\n          onError(new Error(errorMsg));\r\n        }\r\n        return;\r\n      }\r\n      \r\n      // 处理文件\r\n      if (onFileDrop) {\r\n        onFileDrop(file);\r\n      }\r\n      e.dataTransfer.clearData();\r\n    }\r\n  };\r\n  \r\n  // 处理错误提示关闭\r\n  const handleErrorClose = () => {\r\n    setShowError(false);\r\n  };\r\n  \r\n  // 组件卸载时重置拖放计数器\r\n  useEffect(() => {\r\n    return () => {\r\n      dragCounter.current = 0;\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Box\r\n      ref={dropRef}\r\n      data-testid=\"file-drop-zone\"\r\n      onDragEnter={handleDragEnter}\r\n      onDragLeave={handleDragLeave}\r\n      onDragOver={handleDragOver}\r\n      onDrop={handleDrop}\r\n      sx={{\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        display: isDragging ? 'flex' : 'none',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n        zIndex: 1200,\r\n      }}\r\n    >\r\n      <Paper\r\n        elevation={3}\r\n        sx={{\r\n          p: 4,\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n          backgroundColor: theme => theme.palette.background.paper,\r\n          borderRadius: 2,\r\n          border: '2px dashed',\r\n          borderColor: 'primary.main',\r\n          maxWidth: '80%'\r\n        }}\r\n      >\r\n        <CloudUploadIcon sx={{ fontSize: 48, color: 'primary.main', mb: 2 }} />\r\n        <Typography variant=\"h6\" gutterBottom>\r\n          拖放 JSON 文件\r\n        </Typography>\r\n        <Typography variant=\"body2\" color=\"textSecondary\">\r\n          释放鼠标以上传文件\r\n        </Typography>\r\n        \r\n        {showError && (\r\n          <Alert \r\n            severity=\"error\" \r\n            onClose={handleErrorClose}\r\n            sx={{ mt: 2, width: '100%' }}\r\n          >\r\n            {errorMessage}\r\n          </Alert>\r\n        )}\r\n      </Paper>\r\n    </Box>\r\n  );\r\n}","import { Dialog, DialogTitle, DialogContent, DialogActions, Button, Typography } from '@mui/material';\r\n\r\n/**\r\n * 未保存更改提示对话框\r\n * @param {Object} props - 组件属性\r\n * @param {boolean} props.open - 是否打开对话框\r\n * @param {Function} props.onClose - 关闭对话框的回调函数\r\n * @param {Function} props.onSave - 保存按钮的回调函数\r\n * @param {Function} props.onDiscard - 放弃更改按钮的回调函数\r\n * @param {string} props.fileName - 文件名\r\n */\r\nexport function UnsavedChangesDialog({ open, onClose, onSave, onDiscard, fileName }) {\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={onClose}\r\n      aria-labelledby=\"unsaved-changes-dialog-title\"\r\n      aria-describedby=\"unsaved-changes-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"unsaved-changes-dialog-title\">\r\n        未保存的更改\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        <Typography id=\"unsaved-changes-dialog-description\">\r\n          {fileName ? `文件 \"${fileName}\" 有未保存的更改。` : '当前文件有未保存的更改。'}\r\n          您想保存这些更改吗？\r\n        </Typography>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onDiscard} color=\"error\">\r\n          放弃更改\r\n        </Button>\r\n        <Button onClick={onClose} color=\"inherit\">\r\n          取消\r\n        </Button>\r\n        <Button onClick={onSave} variant=\"contained\" color=\"primary\">\r\n          保存\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)([/*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 5.99 19.53 19H4.47zM12 2 1 21h22z\"\n}, \"0\"), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M13 16h-2v2h2zm0-6h-2v5h2z\"\n}, \"1\")], 'WarningAmber');","import { useState, useEffect } from 'preact/hooks';\r\nimport { \r\n  Dialog, \r\n  DialogTitle, \r\n  DialogContent, \r\n  DialogActions, \r\n  Button,\r\n  Typography,\r\n  Box,\r\n  LinearProgress,\r\n  FormControlLabel,\r\n  Checkbox,\r\n  Divider,\r\n  Alert\r\n} from '@mui/material';\r\nimport WarningAmberIcon from '@mui/icons-material/WarningAmber';\r\nimport { formatFileSize } from '../services/fileService';\r\n\r\n/**\r\n * 大文件警告对话框组件\r\n * \r\n * @param {Object} props - 组件属性\r\n * @param {boolean} props.open - 是否打开对话框\r\n * @param {number} props.fileSize - 文件大小（字节）\r\n * @param {string} props.fileName - 文件名\r\n * @param {Function} props.onContinue - 继续按钮点击处理函数\r\n * @param {Function} props.onCancel - 取消按钮点击处理函数\r\n * @param {number} props.warningThreshold - 警告阈值（字节），默认为5MB\r\n * @param {number} props.dangerThreshold - 危险阈值（字节），默认为20MB\r\n */\r\nexport function LargeFileWarning({ \r\n  open, \r\n  fileSize, \r\n  fileName, \r\n  onContinue, \r\n  onCancel,\r\n  warningThreshold = 5 * 1024 * 1024, // 5MB\r\n  dangerThreshold = 20 * 1024 * 1024  // 20MB\r\n}) {\r\n  const [rememberChoice, setRememberChoice] = useState(false);\r\n  const [optimizing, setOptimizing] = useState(true);\r\n  const [progress, setProgress] = useState(0);\r\n  \r\n  // 文件大小级别\r\n  const sizeLevel = fileSize >= dangerThreshold ? 'danger' : 'warning';\r\n  \r\n  // 模拟优化进度\r\n  useEffect(() => {\r\n    if (!open) {\r\n      setProgress(0);\r\n      setOptimizing(true);\r\n      return;\r\n    }\r\n    \r\n    const interval = setInterval(() => {\r\n      setProgress(prev => {\r\n        if (prev >= 100) {\r\n          clearInterval(interval);\r\n          setOptimizing(false);\r\n          return 100;\r\n        }\r\n        return prev + 10;\r\n      });\r\n    }, 200);\r\n    \r\n    return () => clearInterval(interval);\r\n  }, [open]);\r\n  \r\n  // 处理继续按钮点击\r\n  const handleContinue = () => {\r\n    // 如果选择记住选择，保存到本地存储\r\n    if (rememberChoice) {\r\n      localStorage.setItem('pdx-json-editor-large-file-choice', 'continue');\r\n    }\r\n    \r\n    onContinue();\r\n  };\r\n  \r\n  // 处理取消按钮点击\r\n  const handleCancel = () => {\r\n    // 如果选择记住选择，保存到本地存储\r\n    if (rememberChoice) {\r\n      localStorage.setItem('pdx-json-editor-large-file-choice', 'cancel');\r\n    }\r\n    \r\n    onCancel();\r\n  };\r\n  \r\n  return (\r\n    <Dialog \r\n      open={open} \r\n      onClose={onCancel} \r\n      maxWidth=\"sm\" \r\n      fullWidth\r\n      disableEscapeKeyDown={optimizing}\r\n    >\r\n      <DialogTitle sx={{ display: 'flex', alignItems: 'center' }}>\r\n        <WarningAmberIcon color={sizeLevel === 'danger' ? 'error' : 'warning'} sx={{ mr: 1 }} />\r\n        大文件警告\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        <Box sx={{ py: 1 }}>\r\n          <Alert severity={sizeLevel === 'danger' ? 'error' : 'warning'} sx={{ mb: 2 }}>\r\n            {fileName ? `文件 \"${fileName}\"` : '该文件'}大小为 {formatFileSize(fileSize || 5000000)}\r\n            {sizeLevel === 'danger' ? '，超过了推荐的最大大小！' : '。'}\r\n          </Alert>\r\n          \r\n          <Typography variant=\"body1\" paragraph>\r\n            打开大文件可能会导致编辑器性能下降，甚至在某些设备上导致浏览器崩溃。\r\n          </Typography>\r\n          \r\n          <Typography variant=\"body2\" paragraph>\r\n            为了提高性能，编辑器将：\r\n          </Typography>\r\n          \r\n          <Typography component=\"ul\" variant=\"body2\">\r\n            <li>禁用某些高级功能（如实时验证）</li>\r\n            <li>使用虚拟滚动优化渲染</li>\r\n            <li>延迟验证和格式化操作</li>\r\n            <li>限制撤销/重做历史记录</li>\r\n            {sizeLevel === 'danger' && (\r\n              <li>分块加载文件内容</li>\r\n            )}\r\n          </Typography>\r\n          \r\n          {sizeLevel === 'danger' && (\r\n            <Alert severity=\"info\" sx={{ mt: 2, mb: 2 }}>\r\n              建议：考虑使用专门的大文件编辑器或将文件拆分为多个小文件。\r\n            </Alert>\r\n          )}\r\n          \r\n          <Divider sx={{ my: 2 }} />\r\n          \r\n          <Box sx={{ mt: 2, mb: 2 }}>\r\n            <Typography variant=\"caption\" display=\"block\" gutterBottom>\r\n              正在优化编辑器设置 ({progress}%)...\r\n            </Typography>\r\n            <LinearProgress variant=\"determinate\" value={progress} />\r\n          </Box>\r\n          \r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                checked={rememberChoice}\r\n                onChange={(e) => setRememberChoice(e.target.checked)}\r\n                disabled={optimizing}\r\n              />\r\n            }\r\n            label=\"记住我的选择\"\r\n          />\r\n        </Box>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleCancel} disabled={optimizing}>取消</Button>\r\n        <Button \r\n          onClick={handleContinue} \r\n          variant=\"contained\" \r\n          color={sizeLevel === 'danger' ? 'error' : 'primary'}\r\n          disabled={optimizing}\r\n        >\r\n          继续打开\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Close');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M21 12.4V7l-4-4H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h7.4zM15 15c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3M6 6h9v4H6zm13.99 10.25 1.77 1.77L16.77 23H15v-1.77zm3.26.26-.85.85-1.77-1.77.85-.85c.2-.2.51-.2.71 0l1.06 1.06c.2.2.2.52 0 .71\"\n}), 'SaveAs');","import { useState } from 'preact/hooks';\r\nimport { \r\n  AppBar, \r\n  Toolbar, \r\n  Typography, \r\n  IconButton, \r\n  Menu, \r\n  MenuItem, \r\n  ListItemIcon, \r\n  ListItemText,\r\n  Tooltip,\r\n  Badge\r\n} from '@mui/material';\r\nimport MenuIcon from '@mui/icons-material/Menu';\r\nimport CreateNewFolderIcon from '@mui/icons-material/CreateNewFolder';\r\nimport FolderOpenIcon from '@mui/icons-material/FolderOpen';\r\nimport SaveIcon from '@mui/icons-material/Save';\r\nimport SaveAsIcon from '@mui/icons-material/SaveAs';\r\nimport ErrorIcon from '@mui/icons-material/Error';\r\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\r\nimport { ThemeSelector } from './ThemeSelector';\r\nimport errorService from '../services/errorService';\r\nimport { ariaAttributes, createNavigation, createMenu } from '../utils/accessibilityUtils';\r\n\r\n/**\r\n * 移动端头部组件\r\n * 提供适合移动设备的头部布局\r\n * \r\n * @param {Object} props - 组件属性\r\n * @param {Function} props.onMenuClick - 菜单按钮点击处理函数\r\n * @param {Function} props.onNewFile - 新建按钮点击处理函数\r\n * @param {Function} props.onOpenFile - 打开按钮点击处理函数\r\n * @param {Function} props.onSaveFile - 保存按钮点击处理函数\r\n * @param {Function} props.onSaveAsFile - 另存为按钮点击处理函数\r\n * @param {string} props.currentFileName - 当前文件名\r\n * @param {boolean} props.isDirty - 是否有未保存的更改\r\n */\r\nexport function MobileHeader({\r\n  onMenuClick,\r\n  onNewFile,\r\n  onOpenFile,\r\n  onSaveFile,\r\n  onSaveAsFile,\r\n  onErrorClick,\r\n  currentFileName,\r\n  isDirty\r\n}) {\r\n  const [menuAnchorEl, setMenuAnchorEl] = useState(null);\r\n  \r\n  // 处理菜单打开\r\n  const handleMenuOpen = (event) => {\r\n    setMenuAnchorEl(event.currentTarget);\r\n  };\r\n  \r\n  // 处理菜单关闭\r\n  const handleMenuClose = () => {\r\n    setMenuAnchorEl(null);\r\n  };\r\n  \r\n  // 创建导航ARIA属性\r\n  const navAttrs = createNavigation('主导航');\r\n  \r\n  // 创建菜单ARIA属性\r\n  const menuId = 'mobile-menu';\r\n  const { menu, item } = createMenu('文件操作');\r\n  \r\n  return (\r\n    <AppBar position=\"static\" color=\"default\" elevation={1} {...navAttrs}>\r\n      <Toolbar variant=\"dense\">\r\n        <IconButton\r\n          color=\"inherit\"\r\n          aria-label=\"打开侧边栏\"\r\n          aria-haspopup=\"true\"\r\n          aria-expanded=\"false\"\r\n          edge=\"start\"\r\n          onClick={onMenuClick}\r\n          sx={{ mr: 1 }}\r\n        >\r\n          <MenuIcon />\r\n        </IconButton>\r\n        \r\n        <Typography \r\n          variant=\"subtitle1\" \r\n          component=\"div\" \r\n          sx={{ \r\n            flexGrow: 1,\r\n            whiteSpace: 'nowrap',\r\n            overflow: 'hidden',\r\n            textOverflow: 'ellipsis'\r\n          }}\r\n          aria-live=\"polite\"\r\n          role=\"status\"\r\n        >\r\n          {currentFileName || '未命名'}\r\n          {isDirty ? ' *' : ''}\r\n        </Typography>\r\n        \r\n        <Tooltip title=\"保存\">\r\n          <IconButton \r\n            color=\"inherit\" \r\n            onClick={onSaveFile}\r\n            disabled={!isDirty}\r\n            aria-label={`保存文件${isDirty ? '（有未保存的更改）' : ''}`}\r\n          >\r\n            <Badge\r\n              color=\"warning\"\r\n              variant=\"dot\"\r\n              invisible={!isDirty}\r\n            >\r\n              <SaveIcon />\r\n            </Badge>\r\n          </IconButton>\r\n        </Tooltip>\r\n        \r\n        {/* 错误按钮 */}\r\n        {onErrorClick && (\r\n          <Tooltip title=\"错误历史\">\r\n            <IconButton \r\n              color=\"inherit\" \r\n              onClick={onErrorClick}\r\n              aria-label={`查看错误历史（${errorService.getErrorHistory().length}个错误）`}\r\n            >\r\n              <Badge badgeContent={errorService.getErrorHistory().length} color=\"error\">\r\n                <ErrorIcon />\r\n              </Badge>\r\n            </IconButton>\r\n          </Tooltip>\r\n        )}\r\n        \r\n        <ThemeSelector />\r\n        \r\n        <IconButton \r\n          color=\"inherit\" \r\n          onClick={handleMenuOpen}\r\n          aria-label=\"更多选项\"\r\n          aria-haspopup=\"true\"\r\n          aria-expanded={Boolean(menuAnchorEl)}\r\n          aria-controls={menuId}\r\n        >\r\n          <MoreVertIcon />\r\n        </IconButton>\r\n        \r\n        <Menu\r\n          id={menuId}\r\n          anchorEl={menuAnchorEl}\r\n          open={Boolean(menuAnchorEl)}\r\n          onClose={handleMenuClose}\r\n          {...menu}\r\n        >\r\n          <MenuItem \r\n            onClick={() => { onNewFile(); handleMenuClose(); }}\r\n            {...item}\r\n            aria-label=\"新建文件\"\r\n          >\r\n            <ListItemIcon>\r\n              <CreateNewFolderIcon fontSize=\"small\" />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"新建\" />\r\n          </MenuItem>\r\n          \r\n          <MenuItem \r\n            onClick={() => { onOpenFile(); handleMenuClose(); }}\r\n            {...item}\r\n            aria-label=\"打开文件\"\r\n          >\r\n            <ListItemIcon>\r\n              <FolderOpenIcon fontSize=\"small\" />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"打开\" />\r\n          </MenuItem>\r\n          \r\n          <MenuItem \r\n            onClick={() => { onSaveAsFile(); handleMenuClose(); }}\r\n            {...item}\r\n            aria-label=\"另存为\"\r\n          >\r\n            <ListItemIcon>\r\n              <SaveAsIcon fontSize=\"small\" />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"另存为\" />\r\n          </MenuItem>\r\n        </Menu>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}","import { useState, useEffect } from 'preact/hooks';\r\nimport { Box, Drawer, IconButton, Fab, useTheme, Tooltip } from '@mui/material';\r\nimport MenuIcon from '@mui/icons-material/Menu';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport SaveIcon from '@mui/icons-material/Save';\r\nimport { useBreakpoint, useTouchDevice } from '../hooks/useResponsive';\r\nimport { Header } from '../components/Header';\r\nimport { MobileHeader } from '../components/MobileHeader';\r\nimport { ariaAttributes, createMain, createComplementary } from '../utils/accessibilityUtils';\r\n\r\n/**\r\n * 响应式布局组件\r\n * 根据屏幕尺寸调整布局\r\n * \r\n * @param {Object} props - 组件属性\r\n * @param {React.ReactNode} props.header - 头部组件\r\n * @param {React.ReactNode} props.sidebar - 侧边栏组件\r\n * @param {React.ReactNode} props.content - 主要内容组件\r\n * @param {boolean} props.isDirty - 是否有未保存的更改\r\n * @param {Function} props.onSave - 保存按钮点击处理函数\r\n */\r\nexport function ResponsiveLayout({ header, sidebar, content, isDirty, onSave }) {\r\n  const { isMobile, isTablet } = useBreakpoint();\r\n  const isTouch = useTouchDevice();\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const theme = useTheme();\r\n  \r\n  // 处理抽屉切换\r\n  const handleDrawerToggle = () => {\r\n    setDrawerOpen(!drawerOpen);\r\n  };\r\n  \r\n  // 关闭抽屉\r\n  const handleDrawerClose = () => {\r\n    setDrawerOpen(false);\r\n  };\r\n  \r\n  // 在移动设备上，当用户点击内容区域时关闭抽屉\r\n  const handleContentClick = () => {\r\n    if (isMobile && drawerOpen) {\r\n      setDrawerOpen(false);\r\n    }\r\n  };\r\n  \r\n  // 抽屉宽度\r\n  const drawerWidth = isMobile ? '85%' : isTablet ? 240 : 280;\r\n  \r\n  // 创建ARIA属性\r\n  const mainAttrs = createMain();\r\n  const sidebarAttrs = createComplementary('侧边栏');\r\n  \r\n  return (\r\n    <Box \r\n      sx={{ display: 'flex', flexDirection: 'column', height: '100vh' }}\r\n      role=\"application\"\r\n      aria-label=\"PDX JSON编辑器应用程序\"\r\n    >\r\n      {/* 头部 */}\r\n      <Box>\r\n        {isMobile ? (\r\n          // 如果是移动设备，使用MobileHeader\r\n          header.type === Header ? (\r\n            <MobileHeader\r\n              onMenuClick={handleDrawerToggle}\r\n              onNewFile={header.props.onNewFile}\r\n              onOpenFile={header.props.onOpenFile}\r\n              onSaveFile={header.props.onSaveFile}\r\n              onSaveAsFile={header.props.onSaveAsFile}\r\n              onErrorClick={header.props.onErrorClick}\r\n              currentFileName={header.props.currentFileName}\r\n              isDirty={header.props.isDirty}\r\n            />\r\n          ) : (\r\n            header\r\n          )\r\n        ) : (\r\n          // 否则使用原始头部\r\n          header\r\n        )}\r\n      </Box>\r\n      \r\n      {/* 主要内容区域 */}\r\n      <Box sx={{ display: 'flex', flexGrow: 1, overflow: 'hidden' }}>\r\n        {/* 侧边栏 - 已移除 */}\r\n        {sidebar && (\r\n          <Drawer\r\n            variant={isMobile || isTablet ? 'temporary' : 'permanent'}\r\n            open={isMobile || isTablet ? drawerOpen : true}\r\n            onClose={handleDrawerClose}\r\n            sx={{\r\n              width: drawerWidth,\r\n              flexShrink: 0,\r\n              '& .MuiDrawer-paper': {\r\n                width: drawerWidth,\r\n                boxSizing: 'border-box',\r\n              },\r\n            }}\r\n            {...sidebarAttrs}\r\n          >\r\n            {/* 移动端关闭按钮 */}\r\n            {(isMobile || isTablet) && (\r\n              <Box sx={{ display: 'flex', justifyContent: 'flex-end', p: 1 }}>\r\n                <IconButton \r\n                  onClick={handleDrawerClose}\r\n                  aria-label=\"关闭侧边栏\"\r\n                >\r\n                  <CloseIcon />\r\n                </IconButton>\r\n              </Box>\r\n            )}\r\n            \r\n            {/* 侧边栏内容 */}\r\n            {sidebar}\r\n          </Drawer>\r\n        )}\r\n        \r\n        {/* 主要内容 */}\r\n        <Box \r\n          component=\"main\" \r\n          sx={{ \r\n            flexGrow: 1, \r\n            display: 'flex', \r\n            flexDirection: 'column', \r\n            overflow: 'hidden',\r\n            position: 'relative'\r\n          }}\r\n          onClick={handleContentClick}\r\n          {...mainAttrs}\r\n        >\r\n          {content}\r\n          \r\n          {/* 移动端菜单按钮 - 已移除 */}\r\n          {sidebar && (isMobile || isTablet) && !drawerOpen && (\r\n            <Fab\r\n              color=\"primary\"\r\n              aria-label=\"打开侧边栏\"\r\n              aria-haspopup=\"true\"\r\n              aria-expanded=\"false\"\r\n              size=\"small\"\r\n              onClick={handleDrawerToggle}\r\n              sx={{\r\n                position: 'absolute',\r\n                bottom: 16,\r\n                left: 16,\r\n                zIndex: 1000\r\n              }}\r\n            >\r\n              <MenuIcon />\r\n            </Fab>\r\n          )}\r\n          \r\n          {/* 移动端保存按钮 */}\r\n          {isTouch && isDirty && (\r\n            <Tooltip title=\"保存\">\r\n              <Fab\r\n                color=\"secondary\"\r\n                aria-label=\"保存文件\"\r\n                onClick={onSave}\r\n                sx={{\r\n                  position: 'absolute',\r\n                  bottom: 16,\r\n                  right: 16,\r\n                  zIndex: 1000\r\n                }}\r\n              >\r\n                <SaveIcon />\r\n              </Fab>\r\n            </Tooltip>\r\n          )}\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}","/**\r\n * 文件操作Hook\r\n * 提供文件读取、保存和管理功能\r\n */\r\n\r\nimport { useState, useCallback, useEffect } from 'preact/hooks';\r\nimport { \r\n  readFile, \r\n  readFileWithPicker,\r\n  saveFile, \r\n  createNewFile, \r\n  isJsonFile, \r\n  isLargeFile,\r\n  ensureJsonExtension,\r\n  isFileSystemAccessSupported\r\n} from '../services/fileService';\r\nimport PersistenceService from '../services/persistenceService';\r\nimport errorService from '../services/errorService';\r\n\r\n/**\r\n * 使用文件操作的Hook\r\n * @param {Object} options - 选项\r\n * @param {Function} options.onContentChange - 内容变化回调\r\n * @param {Function} options.onError - 错误回调\r\n * @param {Function} options.onLargeFile - 大文件处理回调\r\n * @param {number} [options.fileSizeLimit=5242880] - 文件大小限制（字节）\r\n * @returns {{\r\n *   currentFile: import('../services/fileService').FileInfo|null,\r\n *   isDirty: boolean,\r\n *   isLoading: boolean,\r\n *   openFile: (file: File, skipSizeCheck?: boolean) => Promise<void>,\r\n *   saveCurrentFile: () => Promise<void>,\r\n *   saveAs: (filename: string) => Promise<void>,\r\n *   createNew: () => void,\r\n *   setContent: (content: string) => void,\r\n *   checkLargeFile: (file: File) => boolean\r\n * }} - 文件操作相关状态和方法\r\n */\r\nexport const useFileOperations = ({ \r\n  onContentChange, \r\n  onError,\r\n  onLargeFile,\r\n  fileSizeLimit = 5242880\r\n}) => {\r\n  const [currentFile, setCurrentFile] = useState(null);\r\n  const [originalContent, setOriginalContent] = useState('');\r\n  const [isDirty, setIsDirty] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isInitialized, setIsInitialized] = useState(false);\r\n  \r\n  /**\r\n   * 从本地存储加载编辑器状态\r\n   */\r\n  const loadFromStorage = useCallback(() => {\r\n    try {\r\n      if (!PersistenceService.isStorageAvailable()) {\r\n        return;\r\n      }\r\n      \r\n      const savedState = PersistenceService.loadEditorContent();\r\n      if (!savedState) {\r\n        return;\r\n      }\r\n      \r\n      const { content, fileInfo } = savedState;\r\n      \r\n      if (content && fileInfo) {\r\n        setCurrentFile({\r\n          name: fileInfo.name,\r\n          content,\r\n          size: new Blob([content]).size,\r\n          lastModified: fileInfo.lastModified,\r\n          type: fileInfo.type,\r\n          path: fileInfo.path\r\n        });\r\n        setOriginalContent(content);\r\n        setIsDirty(false);\r\n        \r\n        onContentChange && onContentChange(content);\r\n      }\r\n    } catch (error) {\r\n      errorService.handleError(error);\r\n    }\r\n  }, [onContentChange]);\r\n  \r\n  // 初始化时从本地存储加载\r\n  useEffect(() => {\r\n    if (!isInitialized) {\r\n      loadFromStorage();\r\n      setIsInitialized(true);\r\n    }\r\n  }, [isInitialized, loadFromStorage]);\r\n  \r\n  /**\r\n   * 打开文件\r\n   * @param {File} file - 文件对象\r\n   * @param {boolean} [skipSizeCheck=false] - 是否跳过大小检查\r\n   * @returns {Promise<void>}\r\n   */\r\n  const openFile = useCallback(async (file, skipSizeCheck = false) => {\r\n    if (!file) return;\r\n    \r\n    // 检查是否为JSON文件\r\n    if (!isJsonFile(file)) {\r\n      onError && onError(new Error('只能打开JSON文件'));\r\n      return;\r\n    }\r\n    \r\n    // 检查文件大小\r\n    if (!skipSizeCheck && isLargeFile(file, fileSizeLimit)) {\r\n      // 检查用户是否已经设置了记住选择\r\n      const savedChoice = localStorage.getItem('pdx-json-editor-large-file-choice');\r\n      \r\n      if (savedChoice === 'cancel') {\r\n        return;\r\n      } else if (savedChoice !== 'continue') {\r\n        // 如果没有保存选择，则触发大文件警告\r\n        // 这里需要通过回调通知父组件显示大文件警告\r\n        if (onLargeFile) {\r\n          onLargeFile(file);\r\n          return;\r\n        }\r\n        \r\n        // 如果没有提供大文件处理回调，则使用传统确认框\r\n        const shouldContinue = window.confirm(\r\n          `文件大小超过${Math.round(fileSizeLimit / 1024 / 1024)}MB，可能会影响性能。是否继续？`\r\n        );\r\n        \r\n        if (!shouldContinue) return;\r\n      }\r\n    }\r\n    \r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      const fileInfo = await readFile(file);\r\n      \r\n      setCurrentFile(fileInfo);\r\n      setOriginalContent(fileInfo.content);\r\n      setIsDirty(false);\r\n      \r\n      // 保存到本地存储\r\n      PersistenceService.saveEditorContent(fileInfo.content, fileInfo);\r\n      \r\n      // 最近文件功能已移除\r\n      \r\n      onContentChange && onContentChange(fileInfo.content);\r\n    } catch (error) {\r\n      onError && onError(error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [onContentChange, onError, fileSizeLimit, onLargeFile]);\r\n  \r\n  /**\r\n   * 使用文件选择器打开文件\r\n   * @returns {Promise<void>}\r\n   */\r\n  const openFileWithPicker = useCallback(async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      // 使用文件服务打开文件\r\n      const result = await readFileWithPicker();\r\n      if (result) {\r\n        // 检查文件大小\r\n        const isLarge = isLargeFile(result.content);\r\n        // 更新当前文件信息\r\n        setCurrentFile({\r\n          name: result.name,\r\n          path: result.path,\r\n          content: result.content,\r\n          handle: result.handle,\r\n          directoryHandle: result.directoryHandle,\r\n          isLarge\r\n        });\r\n        // 更新原始内容，用于脏检查\r\n        setOriginalContent(result.content);\r\n        setIsDirty(false);\r\n        // 更新本地存储\r\n        PersistenceService.saveEditorContent(result.content, {\r\n          name: result.name,\r\n          path: result.path,\r\n          handle: result.handle,\r\n          directoryHandle: result.directoryHandle\r\n        });\r\n        // 如果是大文件，触发回调\r\n        if (isLarge && onLargeFile) {\r\n          onLargeFile(result.content, result.name);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      onError && onError(error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [onError, onLargeFile]);\r\n  \r\n  /**\r\n   * 保存当前文件\r\n   * @returns {Promise<void>}\r\n   */\r\n  const saveCurrentFile = useCallback(async () => {\r\n    if (!currentFile) {\r\n      onError && onError(new Error('没有打开的文件'));\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      // 传递当前文件的句柄，以便保存对话框可以打开在相同目录\r\n      const saveOptions = {\r\n        fileHandle: currentFile.handle,\r\n        directoryHandle: currentFile.directoryHandle\r\n      };\r\n      \r\n      const saveResult = await saveFile(currentFile.content, currentFile.name, saveOptions);\r\n      \r\n      // 如果用户取消了保存操作，saveResult可能为undefined\r\n      if (!saveResult) return;\r\n      \r\n      // 更新文件信息\r\n      const updatedFile = {\r\n        ...currentFile,\r\n        name: saveResult.name,\r\n        path: saveResult.path,\r\n        handle: saveResult.handle,\r\n        directoryHandle: saveResult.directoryHandle\r\n      };\r\n      \r\n      setCurrentFile(updatedFile);\r\n      setOriginalContent(currentFile.content);\r\n      setIsDirty(false);\r\n      \r\n      // 更新本地存储\r\n      PersistenceService.saveEditorContent(currentFile.content, updatedFile);\r\n      \r\n      // 最近文件功能已移除\r\n    } catch (error) {\r\n      // 如果是用户取消操作，不显示错误\r\n      if (error.message === '用户取消了保存操作') {\r\n        return;\r\n      }\r\n      onError && onError(error);\r\n    }\r\n  }, [currentFile, onError]);\r\n  \r\n  /**\r\n   * 另存为\r\n   * @param {string} filename - 文件名\r\n   * @returns {Promise<void>}\r\n   */\r\n  const saveAs = useCallback(async (filename) => {\r\n    if (!currentFile) {\r\n      onError && onError(new Error('没有打开的文件'));\r\n      return;\r\n    }\r\n    \r\n    const safeFilename = ensureJsonExtension(filename);\r\n    \r\n    try {\r\n      // 传递当前文件的句柄，以便保存对话框可以打开在相同目录\r\n      const saveOptions = {\r\n        fileHandle: currentFile.handle,\r\n        directoryHandle: currentFile.directoryHandle\r\n      };\r\n      \r\n      const saveResult = await saveFile(currentFile.content, safeFilename, saveOptions);\r\n      \r\n      // 如果用户取消了保存操作，saveResult可能为undefined\r\n      if (!saveResult) return;\r\n      \r\n      // 更新当前文件信息\r\n      const updatedFile = {\r\n        ...currentFile,\r\n        name: saveResult.name,\r\n        path: saveResult.path,\r\n        handle: saveResult.handle,\r\n        directoryHandle: saveResult.directoryHandle\r\n      };\r\n      \r\n      setCurrentFile(updatedFile);\r\n      setOriginalContent(currentFile.content);\r\n      setIsDirty(false);\r\n      \r\n      // 更新本地存储\r\n      PersistenceService.saveEditorContent(currentFile.content, updatedFile);\r\n      \r\n      // 最近文件功能已移除\r\n    } catch (error) {\r\n      // 如果是用户取消操作，不显示错误\r\n      if (error.message === '用户取消了保存操作') {\r\n        return;\r\n      }\r\n      onError && onError(error);\r\n    }\r\n  }, [currentFile, onError]);\r\n  \r\n  /**\r\n   * 创建新文件\r\n   */\r\n  const createNew = useCallback(() => {\r\n    // 如果有未保存的更改，提示用户\r\n    if (isDirty) {\r\n      const shouldContinue = window.confirm('有未保存的更改，是否继续？');\r\n      if (!shouldContinue) return;\r\n    }\r\n    \r\n    const newFile = createNewFile('untitled.json', '{}');\r\n    \r\n    setCurrentFile(newFile);\r\n    setOriginalContent(newFile.content);\r\n    setIsDirty(false);\r\n    \r\n    // 更新本地存储\r\n    PersistenceService.saveEditorContent(newFile.content, newFile);\r\n    \r\n    onContentChange && onContentChange(newFile.content);\r\n  }, [isDirty, onContentChange]);\r\n  \r\n  /**\r\n   * 设置内容\r\n   * @param {string} content - 新内容\r\n   */\r\n  const setContent = useCallback((content) => {\r\n    if (!currentFile) return;\r\n    \r\n    const newFile = {\r\n      ...currentFile,\r\n      content,\r\n      size: new Blob([content]).size\r\n    };\r\n    \r\n    setCurrentFile(newFile);\r\n    const newIsDirty = content !== originalContent;\r\n    setIsDirty(newIsDirty);\r\n    \r\n    // 保存到本地存储\r\n    try {\r\n      PersistenceService.saveEditorContent(content, newFile);\r\n    } catch (error) {\r\n      errorService.handleError(error);\r\n    }\r\n  }, [currentFile, originalContent]);\r\n  \r\n  /**\r\n   * 检查是否为大文件\r\n   * @param {File} file - 文件对象\r\n   * @returns {boolean} - 是否为大文件\r\n   */\r\n  const checkLargeFile = useCallback((file) => {\r\n    return isLargeFile(file, fileSizeLimit);\r\n  }, [fileSizeLimit]);\r\n  \r\n  // 检查当前文件是否为大文件\r\n  const isCurrentFileLarge = currentFile ? isLargeFile(currentFile.size, fileSizeLimit) : false;\r\n  \r\n  /**\r\n   * 清除本地存储\r\n   */\r\n  const clearStorage = useCallback(() => {\r\n    try {\r\n      PersistenceService.clearEditorContent();\r\n    } catch (error) {\r\n      errorService.handleError(error);\r\n    }\r\n  }, []);\r\n  \r\n  return {\r\n    currentFile,\r\n    isDirty,\r\n    isLoading,\r\n    openFile,\r\n    openFileWithPicker,\r\n    saveCurrentFile,\r\n    saveAs,\r\n    createNew,\r\n    setContent,\r\n    checkLargeFile,\r\n    isLargeFile: isCurrentFileLarge,\r\n    clearStorage,\r\n    loadFromStorage,\r\n    isFileSystemAccessSupported: isFileSystemAccessSupported()\r\n  };\r\n};","import { useState, useRef, useCallback, useEffect } from 'preact/hooks';\r\nimport { Box, Dialog, DialogTitle, DialogContent, DialogActions, TextField, Button } from '@mui/material';\r\nimport { Header } from '../components/Header';\r\nimport { TouchEnabledJsonEditor } from '../components/TouchEnabledJsonEditor';\r\n// SidePanel 已移除\r\nimport { FileDropZone } from '../components/FileDropZone';\r\nimport { UnsavedChangesDialog } from '../components/UnsavedChangesDialog';\r\nimport { LargeFileWarning } from '../components/LargeFileWarning';\r\nimport { ResponsiveLayout } from './ResponsiveLayout';\r\nimport { useFileOperations } from '../hooks/useFileOperations';\r\nimport { useBeforeUnload } from '../hooks/useBeforeUnload';\r\n\r\nexport function MainLayout({ \r\n  onSettingsClick,\r\n  onErrorClick\r\n}) {\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [editorContent, setEditorContent] = useState('');\r\n  const [unsavedChangesDialogOpen, setUnsavedChangesDialogOpen] = useState(false);\r\n  const [pendingOperation, setPendingOperation] = useState(null);\r\n  \r\n  const fileInputRef = useRef(null);\r\n\r\n  // 当前大文件\r\n  const [currentLargeFile, setCurrentLargeFile] = useState(null);\r\n  const [largeFileWarningOpen, setLargeFileWarningOpen] = useState(false);\r\n  \r\n  // 处理大文件\r\n  const handleLargeFile = useCallback((file) => {\r\n    setCurrentLargeFile(file);\r\n    setLargeFileWarningOpen(true);\r\n  }, []);\r\n  \r\n  // 文件操作Hook\r\n  const { \r\n    currentFile,\r\n    isDirty,\r\n    isLoading,\r\n    openFile,\r\n    openFileWithPicker,\r\n    saveCurrentFile,\r\n    saveAs,\r\n    createNew,\r\n    setContent,\r\n    isLargeFile\r\n  } = useFileOperations({\r\n    onContentChange: setEditorContent,\r\n    onError: (error) => setErrorMessage(error.message),\r\n    onLargeFile: handleLargeFile\r\n  });\r\n  \r\n  // 处理大文件继续\r\n  const handleLargeFileContinue = useCallback(() => {\r\n    setLargeFileWarningOpen(false);\r\n    \r\n    // 继续打开文件，跳过大小检查\r\n    if (currentLargeFile) {\r\n      openFile(currentLargeFile, true);\r\n    }\r\n    \r\n    setCurrentLargeFile(null);\r\n  }, [currentLargeFile, openFile]);\r\n  \r\n  // 处理大文件取消\r\n  const handleLargeFileCancel = useCallback(() => {\r\n    setLargeFileWarningOpen(false);\r\n    setCurrentLargeFile(null);\r\n  }, []);\r\n  \r\n  // 使用beforeunload钩子\r\n  useBeforeUnload(isDirty);\r\n  \r\n  // 处理未保存更改检查\r\n  const checkUnsavedChanges = useCallback((operation) => {\r\n    if (isDirty) {\r\n      setPendingOperation(operation);\r\n      setUnsavedChangesDialogOpen(true);\r\n      return true; // 有未保存的更改\r\n    }\r\n    return false; // 没有未保存的更改\r\n  }, [isDirty]);\r\n  \r\n  // 监听触发文件选择对话框和设置当前文件的事件\r\n  useEffect(() => {\r\n    const handleTriggerFileOpen = () => {\r\n      console.log('收到触发文件选择对话框事件');\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.click();\r\n      }\r\n    };\r\n    \r\n    const handleSetCurrentFile = (event) => {\r\n      console.log('收到设置当前文件事件:', event.detail);\r\n      if (event.detail) {\r\n        // 设置编辑器内容\r\n        setEditorContent(event.detail.content || '');\r\n        \r\n        // 如果有文件操作钩子，更新当前文件\r\n        if (setContent) {\r\n          setContent(event.detail.content || '');\r\n        }\r\n      }\r\n    };\r\n    \r\n    const handleUseFilePickerAPI = () => {\r\n      console.log('收到使用文件选择器API事件');\r\n      // 检查是否有未保存的更改\r\n      const proceed = () => openFileWithPicker();\r\n      \r\n      if (!checkUnsavedChanges(proceed)) {\r\n        proceed();\r\n      }\r\n    };\r\n    \r\n    window.addEventListener('triggerFileOpen', handleTriggerFileOpen);\r\n    window.addEventListener('setCurrentFile', handleSetCurrentFile);\r\n    window.addEventListener('useFilePickerAPI', handleUseFilePickerAPI);\r\n    \r\n    return () => {\r\n      window.removeEventListener('triggerFileOpen', handleTriggerFileOpen);\r\n      window.removeEventListener('setCurrentFile', handleSetCurrentFile);\r\n      window.removeEventListener('useFilePickerAPI', handleUseFilePickerAPI);\r\n    };\r\n  }, [setContent, openFileWithPicker, checkUnsavedChanges]);\r\n  \r\n  // 处理未保存更改对话框关闭\r\n  const handleUnsavedChangesClose = useCallback(() => {\r\n    setUnsavedChangesDialogOpen(false);\r\n    setPendingOperation(null);\r\n  }, []);\r\n  \r\n  // 处理保存并继续\r\n  const handleSaveAndContinue = useCallback(() => {\r\n    setUnsavedChangesDialogOpen(false);\r\n    \r\n    // 保存文件并执行挂起的操作\r\n    saveCurrentFile().then(() => {\r\n      if (pendingOperation) {\r\n        pendingOperation();\r\n        setPendingOperation(null);\r\n      }\r\n    });\r\n  }, [currentFile, saveCurrentFile, pendingOperation]);\r\n  \r\n  // 处理放弃更改并继续\r\n  const handleDiscardAndContinue = useCallback(() => {\r\n    setUnsavedChangesDialogOpen(false);\r\n    \r\n    // 执行挂起的操作\r\n    if (pendingOperation) {\r\n      pendingOperation();\r\n      setPendingOperation(null);\r\n    }\r\n  }, [pendingOperation]);\r\n  \r\n  // 处理新建文件\r\n  const handleNewFile = useCallback(() => {\r\n    const proceed = () => createNew();\r\n    \r\n    if (!checkUnsavedChanges(proceed)) {\r\n      proceed();\r\n    }\r\n  }, [createNew, checkUnsavedChanges]);\r\n  \r\n  // 处理打开文件\r\n  const handleOpenFile = useCallback(() => {\r\n    // 检查是否支持文件系统访问API\r\n    if ('showOpenFilePicker' in window) {\r\n      const proceed = () => openFileWithPicker();\r\n      \r\n      if (!checkUnsavedChanges(proceed)) {\r\n        proceed();\r\n      }\r\n    } else {\r\n      // 回退到传统的文件输入方式\r\n      const proceed = () => fileInputRef.current?.click();\r\n      \r\n      if (!checkUnsavedChanges(proceed)) {\r\n        proceed();\r\n      }\r\n    }\r\n  }, [checkUnsavedChanges, openFileWithPicker]);\r\n  \r\n  // 处理文件选择\r\n  const handleFileSelect = useCallback((event) => {\r\n    const file = event.target.files?.[0];\r\n    if (file) {\r\n      openFile(file);\r\n    }\r\n    // 重置input，以便能够重新选择同一个文件\r\n    event.target.value = '';\r\n  }, [openFile]);\r\n  \r\n  // 处理保存文件\r\n  const handleSaveFile = useCallback(() => {\r\n    // 使用新的文件系统访问API，总是弹出系统的文件选择对话框\r\n    // 不再需要区分是否为未命名文件\r\n    saveCurrentFile();\r\n    \r\n    // 如果浏览器不支持文件系统访问API，显示提示\r\n    if (!window.showSaveFilePicker) {\r\n      // 使用setTimeout确保提示在保存操作之后显示\r\n      setTimeout(() => {\r\n        alert('您的浏览器不支持文件系统访问API，将使用传统的下载方式保存文件。');\r\n      }, 100);\r\n    }\r\n  }, [saveCurrentFile]);\r\n  \r\n  // 处理另存为\r\n  const handleSaveAsFile = useCallback(() => {\r\n    // 使用新的文件系统访问API，直接弹出系统的文件选择对话框\r\n    // 不再需要通过自定义对话框输入文件名\r\n    const suggestedName = currentFile?.name || 'untitled.json';\r\n    saveAs(suggestedName);\r\n    \r\n    // 如果浏览器不支持文件系统访问API，显示提示\r\n    if (!window.showSaveFilePicker) {\r\n      // 使用setTimeout确保提示在保存操作之后显示\r\n      setTimeout(() => {\r\n        alert('您的浏览器不支持文件系统访问API，将使用传统的下载方式保存文件。');\r\n      }, 100);\r\n    }\r\n  }, [currentFile, saveAs]);\r\n  \r\n  // 另存为对话框相关函数已移除，使用系统原生文件选择对话框\r\n  \r\n  // 处理编辑器内容变化\r\n  const handleEditorContentChange = useCallback((content) => {\r\n    setContent(content);\r\n  }, [setContent]);\r\n\r\n  return (\r\n    <>\r\n      {/* 隐藏的文件输入 */}\r\n      <input\r\n        type=\"file\"\r\n        ref={fileInputRef}\r\n        style={{ display: 'none' }}\r\n        accept=\".json\"\r\n        onChange={handleFileSelect}\r\n      />\r\n      \r\n      <ResponsiveLayout\r\n        header={\r\n          <Header \r\n            onNewFile={handleNewFile}\r\n            onOpenFile={handleOpenFile}\r\n            onSaveFile={handleSaveFile}\r\n            onSaveAsFile={handleSaveAsFile}\r\n            onErrorClick={onErrorClick}\r\n            currentFileName={currentFile?.name}\r\n            isDirty={isDirty}\r\n          />\r\n        }\r\n        sidebar={null}\r\n        content={\r\n          <TouchEnabledJsonEditor \r\n            onSettingsClick={onSettingsClick}\r\n            value={editorContent}\r\n            onChange={handleEditorContentChange}\r\n            isLoading={isLoading}\r\n            isLargeFile={isLargeFile}\r\n          />\r\n        }\r\n        isDirty={isDirty}\r\n        onSave={handleSaveFile}\r\n      />\r\n      \r\n      {/* 文件拖放区域 */}\r\n      <FileDropZone \r\n        onFileDrop={openFile}\r\n        onError={(error) => setErrorMessage(error.message)}\r\n      />\r\n      \r\n      {/* 另存为对话框已移除，使用系统原生文件选择对话框 */}\r\n      \r\n      {/* 未保存更改对话框 */}\r\n      <UnsavedChangesDialog\r\n        open={unsavedChangesDialogOpen}\r\n        onClose={handleUnsavedChangesClose}\r\n        onSave={handleSaveAndContinue}\r\n        onDiscard={handleDiscardAndContinue}\r\n        fileName={currentFile?.name}\r\n      />\r\n      \r\n      {/* 大文件警告对话框 */}\r\n      <LargeFileWarning\r\n        open={largeFileWarningOpen}\r\n        fileSize={currentLargeFile?.size}\r\n        fileName={currentLargeFile?.name}\r\n        onContinue={handleLargeFileContinue}\r\n        onCancel={handleLargeFileCancel}\r\n      />\r\n    </>\r\n  );\r\n}","/**\r\n * 页面关闭前提示Hook\r\n * 当用户尝试关闭页面时，如果有未保存的更改，会显示确认提示\r\n */\r\n\r\nimport { useEffect } from 'preact/hooks';\r\n\r\n/**\r\n * 使用页面关闭前提示的Hook\r\n * @param {boolean} isDirty - 是否有未保存的更改\r\n * @param {string} [message='您有未保存的更改，确定要离开吗？'] - 提示消息\r\n */\r\nexport const useBeforeUnload = (isDirty, message = '您有未保存的更改，确定要离开吗？') => {\r\n  useEffect(() => {\r\n    const handleBeforeUnload = (event) => {\r\n      if (!isDirty) return;\r\n      \r\n      // 现代浏览器\r\n      event.preventDefault();\r\n      \r\n      // 兼容旧版浏览器\r\n      event.returnValue = message;\r\n      \r\n      return message;\r\n    };\r\n    \r\n    window.addEventListener('beforeunload', handleBeforeUnload);\r\n    \r\n    return () => {\r\n      window.removeEventListener('beforeunload', handleBeforeUnload);\r\n    };\r\n  }, [isDirty, message]);\r\n};","import { useState } from 'preact/hooks';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  FormControl,\r\n  FormControlLabel,\r\n  FormGroup,\r\n  Switch,\r\n  Select,\r\n  MenuItem,\r\n  InputLabel,\r\n  Typography,\r\n  Divider,\r\n  Box\r\n} from '@mui/material';\r\n\r\n/**\r\n * 设置对话框组件\r\n * 允许用户自定义编辑器设置\r\n * \r\n * @param {Object} props - 组件属性\r\n * @param {boolean} props.open - 对话框是否打开\r\n * @param {Function} props.onClose - 关闭对话框的处理函数\r\n */\r\nexport function SettingsDialog({ open, onClose }) {\r\n  // 编辑器设置状态\r\n  const [settings, setSettings] = useState({\r\n    // 缩略图设置\r\n    minimapEnabled: true,\r\n    minimapShowSlider: 'always',\r\n    minimapRenderCharacters: true,\r\n    minimapSide: 'right',\r\n    \r\n    // 编辑器设置\r\n    wordWrap: false,\r\n    lineNumbers: true,\r\n    indentSize: 2,\r\n    indentType: 'spaces',\r\n    \r\n    // 智能编辑设置\r\n    autoClosingBrackets: true,\r\n    autoClosingQuotes: true,\r\n    bracketPairColorization: true,\r\n    matchBrackets: true,\r\n    \r\n    // 多光标和选择设置\r\n    multiCursorModifier: 'alt',\r\n    columnSelection: false,\r\n    \r\n    // 主题设置\r\n    followSystemTheme: false\r\n  });\r\n  \r\n  // 处理设置变更\r\n  const handleSettingChange = (setting, value) => {\r\n    setSettings(prev => ({\r\n      ...prev,\r\n      [setting]: value\r\n    }));\r\n  };\r\n  \r\n  // 处理保存设置\r\n  const handleSave = () => {\r\n    // 保存设置到本地存储\r\n    localStorage.setItem('pdx-json-editor-settings', JSON.stringify(settings));\r\n    \r\n    // 应用设置到编辑器\r\n    if (window.pdxJsonEditor && window.pdxJsonEditor.applySettings) {\r\n      window.pdxJsonEditor.applySettings(settings);\r\n    }\r\n    \r\n    onClose();\r\n  };\r\n  \r\n  return (\r\n    <Dialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\r\n      <DialogTitle>编辑器设置</DialogTitle>\r\n      <DialogContent>\r\n        <Box sx={{ mt: 2 }}>\r\n          <Typography variant=\"subtitle1\" gutterBottom>缩略图设置</Typography>\r\n          <FormGroup>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={settings.minimapEnabled}\r\n                  onChange={(e) => handleSettingChange('minimapEnabled', e.target.checked)}\r\n                />\r\n              }\r\n              label=\"启用缩略图\"\r\n            />\r\n            \r\n            {settings.minimapEnabled && (\r\n              <>\r\n                <FormControl fullWidth margin=\"normal\" size=\"small\">\r\n                  <InputLabel>缩略图滑块</InputLabel>\r\n                  <Select\r\n                    value={settings.minimapShowSlider}\r\n                    label=\"缩略图滑块\"\r\n                    onChange={(e) => handleSettingChange('minimapShowSlider', e.target.value)}\r\n                  >\r\n                    <MenuItem value=\"always\">始终显示</MenuItem>\r\n                    <MenuItem value=\"mouseover\">鼠标悬停时显示</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n                \r\n                <FormControlLabel\r\n                  control={\r\n                    <Switch\r\n                      checked={settings.minimapRenderCharacters}\r\n                      onChange={(e) => handleSettingChange('minimapRenderCharacters', e.target.checked)}\r\n                    />\r\n                  }\r\n                  label=\"在缩略图中渲染字符\"\r\n                />\r\n                \r\n                <FormControl fullWidth margin=\"normal\" size=\"small\">\r\n                  <InputLabel>缩略图位置</InputLabel>\r\n                  <Select\r\n                    value={settings.minimapSide}\r\n                    label=\"缩略图位置\"\r\n                    onChange={(e) => handleSettingChange('minimapSide', e.target.value)}\r\n                  >\r\n                    <MenuItem value=\"right\">右侧</MenuItem>\r\n                    <MenuItem value=\"left\">左侧</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n              </>\r\n            )}\r\n          </FormGroup>\r\n          \r\n          <Divider sx={{ my: 2 }} />\r\n          \r\n          <Typography variant=\"subtitle1\" gutterBottom>编辑器设置</Typography>\r\n          <FormGroup>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={settings.wordWrap}\r\n                  onChange={(e) => handleSettingChange('wordWrap', e.target.checked)}\r\n                />\r\n              }\r\n              label=\"自动换行\"\r\n            />\r\n            \r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={settings.lineNumbers}\r\n                  onChange={(e) => handleSettingChange('lineNumbers', e.target.checked)}\r\n                />\r\n              }\r\n              label=\"显示行号\"\r\n            />\r\n            \r\n            <FormControl fullWidth margin=\"normal\" size=\"small\">\r\n              <InputLabel>缩进大小</InputLabel>\r\n              <Select\r\n                value={settings.indentSize}\r\n                label=\"缩进大小\"\r\n                onChange={(e) => handleSettingChange('indentSize', e.target.value)}\r\n              >\r\n                <MenuItem value={2}>2 空格</MenuItem>\r\n                <MenuItem value={4}>4 空格</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n            \r\n            <FormControl fullWidth margin=\"normal\" size=\"small\">\r\n              <InputLabel>缩进类型</InputLabel>\r\n              <Select\r\n                value={settings.indentType}\r\n                label=\"缩进类型\"\r\n                onChange={(e) => handleSettingChange('indentType', e.target.value)}\r\n              >\r\n                <MenuItem value=\"spaces\">空格</MenuItem>\r\n                <MenuItem value=\"tabs\">制表符</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </FormGroup>\r\n          \r\n          <Divider sx={{ my: 2 }} />\r\n          \r\n          <Typography variant=\"subtitle1\" gutterBottom>智能编辑设置</Typography>\r\n          <FormGroup>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={settings.autoClosingBrackets}\r\n                  onChange={(e) => handleSettingChange('autoClosingBrackets', e.target.checked)}\r\n                />\r\n              }\r\n              label=\"自动闭合括号\"\r\n            />\r\n            \r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={settings.autoClosingQuotes}\r\n                  onChange={(e) => handleSettingChange('autoClosingQuotes', e.target.checked)}\r\n                />\r\n              }\r\n              label=\"自动闭合引号\"\r\n            />\r\n            \r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={settings.bracketPairColorization}\r\n                  onChange={(e) => handleSettingChange('bracketPairColorization', e.target.checked)}\r\n                />\r\n              }\r\n              label=\"括号对着色\"\r\n            />\r\n            \r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={settings.matchBrackets}\r\n                  onChange={(e) => handleSettingChange('matchBrackets', e.target.checked)}\r\n                />\r\n              }\r\n              label=\"括号匹配高亮\"\r\n            />\r\n          </FormGroup>\r\n          \r\n          <Divider sx={{ my: 2 }} />\r\n          \r\n          <Typography variant=\"subtitle1\" gutterBottom>多光标和选择设置</Typography>\r\n          <FormGroup>\r\n            <FormControl fullWidth margin=\"normal\" size=\"small\">\r\n              <InputLabel>多光标修饰键</InputLabel>\r\n              <Select\r\n                value={settings.multiCursorModifier}\r\n                label=\"多光标修饰键\"\r\n                onChange={(e) => handleSettingChange('multiCursorModifier', e.target.value)}\r\n              >\r\n                <MenuItem value=\"alt\">Alt</MenuItem>\r\n                <MenuItem value=\"ctrlCmd\">Ctrl (Cmd)</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n            \r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={settings.columnSelection}\r\n                  onChange={(e) => handleSettingChange('columnSelection', e.target.checked)}\r\n                />\r\n              }\r\n              label=\"启用列选择模式\"\r\n            />\r\n          </FormGroup>\r\n          \r\n          <Divider sx={{ my: 2 }} />\r\n          \r\n          <Typography variant=\"subtitle1\" gutterBottom>主题设置</Typography>\r\n          <FormGroup>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={settings.followSystemTheme}\r\n                  onChange={(e) => handleSettingChange('followSystemTheme', e.target.checked)}\r\n                />\r\n              }\r\n              label=\"跟随系统主题\"\r\n            />\r\n          </FormGroup>\r\n        </Box>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onClose}>取消</Button>\r\n        <Button onClick={handleSave} variant=\"contained\">保存</Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z\"\n}), 'Warning');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z\"\n}), 'Info');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z\"\n}), 'ExpandMore');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z\"\n}), 'ExpandLess');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z\"\n}), 'Refresh');","/**\r\n * 错误显示组件\r\n * 显示错误信息和错误历史\r\n */\r\n\r\nimport { useState, useEffect } from 'preact/hooks';\r\nimport { \r\n  Box, \r\n  Typography, \r\n  List, \r\n  ListItem, \r\n  ListItemText, \r\n  ListItemIcon, \r\n  IconButton, \r\n  Paper, \r\n  Collapse, \r\n  Divider,\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions\r\n} from '@mui/material';\r\nimport ErrorIcon from '@mui/icons-material/Error';\r\nimport WarningIcon from '@mui/icons-material/Warning';\r\nimport InfoIcon from '@mui/icons-material/Info';\r\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\r\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport RefreshIcon from '@mui/icons-material/Refresh';\r\nimport errorService, { ErrorSeverity } from '../services/errorService';\r\n\r\n/**\r\n * 错误显示组件\r\n */\r\nexport function ErrorDisplay({ maxErrors = 10 }) {\r\n  const [errors, setErrors] = useState([]);\r\n  const [expandedError, setExpandedError] = useState(null);\r\n  const [clearDialogOpen, setClearDialogOpen] = useState(false);\r\n  \r\n  // 加载错误历史\r\n  useEffect(() => {\r\n    // 获取当前错误历史\r\n    setErrors(errorService.getErrorHistory().slice(0, maxErrors));\r\n    \r\n    // 添加错误监听器\r\n    const handleError = (error) => {\r\n      setErrors(prev => [error, ...prev].slice(0, maxErrors));\r\n    };\r\n    \r\n    errorService.addListener(handleError);\r\n    \r\n    // 清理监听器\r\n    return () => {\r\n      errorService.removeListener(handleError);\r\n    };\r\n  }, [maxErrors]);\r\n  \r\n  // 切换错误详情展开/折叠\r\n  const toggleErrorDetails = (index) => {\r\n    setExpandedError(expandedError === index ? null : index);\r\n  };\r\n  \r\n  // 清除所有错误\r\n  const handleClearErrors = () => {\r\n    errorService.clearErrorHistory();\r\n    setErrors([]);\r\n    setClearDialogOpen(false);\r\n  };\r\n  \r\n  // 获取错误图标\r\n  const getErrorIcon = (severity) => {\r\n    switch (severity) {\r\n      case ErrorSeverity.ERROR:\r\n      case ErrorSeverity.FATAL:\r\n        return <ErrorIcon color=\"error\" />;\r\n      case ErrorSeverity.WARNING:\r\n        return <WarningIcon color=\"warning\" />;\r\n      case ErrorSeverity.INFO:\r\n      default:\r\n        return <InfoIcon color=\"info\" />;\r\n    }\r\n  };\r\n  \r\n  // 获取错误时间格式化\r\n  const formatErrorTime = (timestamp) => {\r\n    if (!timestamp) return '';\r\n    \r\n    const date = new Date(timestamp);\r\n    return date.toLocaleTimeString();\r\n  };\r\n  \r\n  // 如果没有错误，显示空状态\r\n  if (errors.length === 0) {\r\n    return (\r\n      <Box sx={{ p: 2, textAlign: 'center' }}>\r\n        <Typography variant=\"body1\" color=\"text.secondary\">\r\n          没有错误记录\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <Box sx={{ width: '100%' }}>\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', p: 1 }}>\r\n        <Typography variant=\"subtitle1\">\r\n          错误历史 ({errors.length})\r\n        </Typography>\r\n        <Button\r\n          startIcon={<DeleteIcon />}\r\n          size=\"small\"\r\n          onClick={() => setClearDialogOpen(true)}\r\n        >\r\n          清除\r\n        </Button>\r\n      </Box>\r\n      \r\n      <Divider />\r\n      \r\n      <List sx={{ width: '100%', bgcolor: 'background.paper' }}>\r\n        {errors.map((error, index) => (\r\n          <Box key={index}>\r\n            <ListItem\r\n              alignItems=\"flex-start\"\r\n              secondaryAction={\r\n                <IconButton edge=\"end\" onClick={() => toggleErrorDetails(index)}>\r\n                  {expandedError === index ? <ExpandLessIcon /> : <ExpandMoreIcon />}\r\n                </IconButton>\r\n              }\r\n            >\r\n              <ListItemIcon>\r\n                {getErrorIcon(error.severity)}\r\n              </ListItemIcon>\r\n              <ListItemText\r\n                primary={error.message}\r\n                secondary={\r\n                  <Typography\r\n                    component=\"span\"\r\n                    variant=\"body2\"\r\n                    color=\"text.secondary\"\r\n                  >\r\n                    {formatErrorTime(error.timestamp)} - {error.type}\r\n                  </Typography>\r\n                }\r\n              />\r\n            </ListItem>\r\n            \r\n            <Collapse in={expandedError === index} timeout=\"auto\" unmountOnExit>\r\n              <Box sx={{ pl: 9, pr: 2, pb: 2 }}>\r\n                <Paper\r\n                  variant=\"outlined\"\r\n                  sx={{\r\n                    p: 1,\r\n                    backgroundColor: 'background.default',\r\n                    overflowX: 'auto'\r\n                  }}\r\n                >\r\n                  <Typography variant=\"caption\" component=\"pre\" sx={{ whiteSpace: 'pre-wrap' }}>\r\n                    {error.originalError ? error.originalError.stack : '无详细信息'}\r\n                  </Typography>\r\n                </Paper>\r\n              </Box>\r\n            </Collapse>\r\n            \r\n            {index < errors.length - 1 && <Divider variant=\"inset\" component=\"li\" />}\r\n          </Box>\r\n        ))}\r\n      </List>\r\n      \r\n      {/* 清除确认对话框 */}\r\n      <Dialog\r\n        open={clearDialogOpen}\r\n        onClose={() => setClearDialogOpen(false)}\r\n      >\r\n        <DialogTitle>清除错误历史</DialogTitle>\r\n        <DialogContent>\r\n          <Typography>\r\n            确定要清除所有错误历史记录吗？此操作无法撤销。\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setClearDialogOpen(false)}>取消</Button>\r\n          <Button onClick={handleClearErrors} color=\"error\" variant=\"contained\">\r\n            清除\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n}","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M3 15h8v-2H3zm0 4h8v-2H3zm0-8h8V9H3zm0-6v2h8V5zm10 0h8v14h-8z\"\n}), 'VerticalSplit');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M3 19h18v-6H3zm0-8h18V9H3zm0-6v2h18V5z\"\n}), 'HorizontalSplit');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M9.01 14H2v2h7.01v3L13 15l-3.99-4zm5.98-1v-3H22V8h-7.01V5L11 9z\"\n}), 'CompareArrows');","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z\"\n}), 'ContentCopy');","/**\r\n * 按钮组件\r\n * 基于设计系统的按钮组件\r\n */\r\n\r\nimport { Button as MuiButton } from '@mui/material';\r\nimport { ariaAttributes } from '../../utils/accessibilityUtils';\r\n\r\n/**\r\n * 按钮组件\r\n * @param {Object} props - 组件属性\r\n * @param {string} props.variant - 按钮变体（contained, outlined, text）\r\n * @param {string} props.color - 按钮颜色（primary, secondary, success, error, warning, info）\r\n * @param {string} props.size - 按钮大小（small, medium, large）\r\n * @param {boolean} props.fullWidth - 是否占满宽度\r\n * @param {boolean} props.disabled - 是否禁用\r\n * @param {Function} props.onClick - 点击回调\r\n * @param {React.ReactNode} props.startIcon - 开始图标\r\n * @param {React.ReactNode} props.endIcon - 结束图标\r\n * @param {string} props.type - 按钮类型（button, submit, reset）\r\n * @param {string} props.href - 链接地址\r\n * @param {string} props.target - 链接目标\r\n * @param {string} props.rel - 链接关系\r\n * @param {string} props.download - 下载文件名\r\n * @param {string} props.id - 按钮ID\r\n * @param {string} props.className - 自定义类名\r\n * @param {Object} props.sx - 自定义样式\r\n * @param {string} props.ariaLabel - ARIA标签\r\n * @param {boolean} props.ariaExpanded - ARIA展开状态\r\n * @param {string} props.ariaControls - ARIA控制元素ID\r\n * @param {boolean} props.ariaPressed - ARIA按下状态\r\n * @param {string} props.ariaDescribedby - ARIA描述元素ID\r\n * @param {React.ReactNode} props.children - 子元素\r\n * @returns {React.ReactElement} - 按钮组件\r\n */\r\nexport function Button({\r\n  variant = 'contained',\r\n  color = 'primary',\r\n  size = 'medium',\r\n  fullWidth = false,\r\n  disabled = false,\r\n  onClick,\r\n  startIcon,\r\n  endIcon,\r\n  type = 'button',\r\n  href,\r\n  target,\r\n  rel,\r\n  download,\r\n  id,\r\n  className,\r\n  sx,\r\n  ariaLabel,\r\n  ariaExpanded,\r\n  ariaControls,\r\n  ariaPressed,\r\n  ariaDescribedby,\r\n  children,\r\n  ...rest\r\n}) {\r\n  // 创建ARIA属性\r\n  const ariaProps = ariaAttributes({\r\n    label: ariaLabel,\r\n    expanded: ariaExpanded,\r\n    controls: ariaControls,\r\n    pressed: ariaPressed,\r\n    describedBy: ariaDescribedby\r\n  });\r\n  \r\n  return (\r\n    <MuiButton\r\n      variant={variant}\r\n      color={color}\r\n      size={size}\r\n      fullWidth={fullWidth}\r\n      disabled={disabled}\r\n      onClick={onClick}\r\n      startIcon={startIcon}\r\n      endIcon={endIcon}\r\n      type={type}\r\n      href={href}\r\n      target={target}\r\n      rel={rel}\r\n      download={download}\r\n      id={id}\r\n      className={className}\r\n      sx={{\r\n        textTransform: 'none',\r\n        fontWeight: 500,\r\n        borderRadius: '8px',\r\n        boxShadow: variant === 'contained' ? '0 2px 4px rgba(0,0,0,0.1)' : 'none',\r\n        '&:hover': {\r\n          boxShadow: variant === 'contained' ? '0 4px 8px rgba(0,0,0,0.15)' : 'none',\r\n        },\r\n        ...sx\r\n      }}\r\n      {...ariaProps}\r\n      {...rest}\r\n    >\r\n      {children}\r\n    </MuiButton>\r\n  );\r\n}","/**\r\n * 警告提示组件\r\n * 基于设计系统的警告提示组件\r\n */\r\n\r\nimport { Alert as MuiAlert, AlertTitle } from '@mui/material';\r\nimport { ariaAttributes, createAlert } from '../../utils/accessibilityUtils';\r\n\r\n/**\r\n * 警告提示组件\r\n * @param {Object} props - 组件属性\r\n * @param {string} props.severity - 严重程度（success, info, warning, error）\r\n * @param {string} props.title - 标题\r\n * @param {boolean} props.outlined - 是否显示边框\r\n * @param {boolean} props.filled - 是否填充\r\n * @param {boolean} props.icon - 是否显示图标\r\n * @param {React.ReactNode} props.action - 操作\r\n * @param {Function} props.onClose - 关闭回调\r\n * @param {string} props.id - 提示ID\r\n * @param {string} props.className - 自定义类名\r\n * @param {Object} props.sx - 自定义样式\r\n * @param {React.ReactNode} props.children - 子元素\r\n * @returns {React.ReactElement} - 警告提示组件\r\n */\r\nexport function Alert({\r\n  severity = 'info',\r\n  title,\r\n  outlined = false,\r\n  filled = false,\r\n  icon = true,\r\n  action,\r\n  onClose,\r\n  id,\r\n  className,\r\n  sx,\r\n  children,\r\n  ...rest\r\n}) {\r\n  // 创建ARIA属性\r\n  const alertAttrs = createAlert(children, severity);\r\n  \r\n  // 变体\r\n  const variant = filled ? 'filled' : outlined ? 'outlined' : 'standard';\r\n  \r\n  return (\r\n    <MuiAlert\r\n      severity={severity}\r\n      variant={variant}\r\n      icon={icon}\r\n      action={action}\r\n      onClose={onClose}\r\n      id={id || alertAttrs.id}\r\n      className={className}\r\n      sx={{\r\n        borderRadius: '8px',\r\n        '& .MuiAlert-icon': {\r\n          alignItems: 'center'\r\n        },\r\n        ...sx\r\n      }}\r\n      role=\"alert\"\r\n      {...rest}\r\n    >\r\n      {title && <AlertTitle>{title}</AlertTitle>}\r\n      {children}\r\n    </MuiAlert>\r\n  );\r\n}\r\n\r\n/**\r\n * 成功提示组件\r\n * @param {Object} props - 组件属性\r\n * @returns {React.ReactElement} - 成功提示组件\r\n */\r\nexport function SuccessAlert(props) {\r\n  return <Alert severity=\"success\" {...props} />;\r\n}\r\n\r\n/**\r\n * 信息提示组件\r\n * @param {Object} props - 组件属性\r\n * @returns {React.ReactElement} - 信息提示组件\r\n */\r\nexport function InfoAlert(props) {\r\n  return <Alert severity=\"info\" {...props} />;\r\n}\r\n\r\n/**\r\n * 警告提示组件\r\n * @param {Object} props - 组件属性\r\n * @returns {React.ReactElement} - 警告提示组件\r\n */\r\nexport function WarningAlert(props) {\r\n  return <Alert severity=\"warning\" {...props} />;\r\n}\r\n\r\n/**\r\n * 错误提示组件\r\n * @param {Object} props - 组件属性\r\n * @returns {React.ReactElement} - 错误提示组件\r\n */\r\nexport function ErrorAlert(props) {\r\n  return <Alert severity=\"error\" {...props} />;\r\n}","/**\r\n * 过渡组件\r\n * 提供各种过渡动画组件\r\n */\r\n\r\nimport { useState, useEffect } from 'preact/hooks';\r\nimport { Fade, Grow, Slide, Zoom, Collapse, Box } from '@mui/material';\r\n\r\n/**\r\n * 淡入淡出过渡组件\r\n * @param {Object} props - 组件属性\r\n * @param {boolean} props.in - 是否显示\r\n * @param {number} props.timeout - 过渡时间\r\n * @param {React.ReactNode} props.children - 子元素\r\n * @returns {React.ReactElement} - 淡入淡出过渡组件\r\n */\r\nexport function FadeTransition({ in: inProp, timeout = 300, children, ...rest }) {\r\n  // 如果没有子元素，则不渲染任何内容\r\n  if (!children) {\r\n    return null;\r\n  }\r\n  \r\n  // 确保子元素被包装在一个div中，以避免直接操作undefined\r\n  return (\r\n    <Fade in={inProp} timeout={timeout} {...rest}>\r\n      <div style={{ display: 'contents' }}>\r\n        {children}\r\n      </div>\r\n    </Fade>\r\n  );\r\n}\r\n\r\n/**\r\n * 增长过渡组件\r\n * @param {Object} props - 组件属性\r\n * @param {boolean} props.in - 是否显示\r\n * @param {number} props.timeout - 过渡时间\r\n * @param {React.ReactNode} props.children - 子元素\r\n * @returns {React.ReactElement} - 增长过渡组件\r\n */\r\nexport function GrowTransition({ in: inProp, timeout = 300, children, ...rest }) {\r\n  if (!children) {\r\n    return null;\r\n  }\r\n  \r\n  return (\r\n    <Grow in={inProp} timeout={timeout} {...rest}>\r\n      <div style={{ display: 'contents' }}>\r\n        {children}\r\n      </div>\r\n    </Grow>\r\n  );\r\n}\r\n\r\n/**\r\n * 滑动过渡组件\r\n * @param {Object} props - 组件属性\r\n * @param {boolean} props.in - 是否显示\r\n * @param {number} props.timeout - 过渡时间\r\n * @param {string} props.direction - 方向（up, down, left, right）\r\n * @param {React.ReactNode} props.children - 子元素\r\n * @returns {React.ReactElement} - 滑动过渡组件\r\n */\r\nexport function SlideTransition({ in: inProp, timeout = 300, direction = 'down', children, ...rest }) {\r\n  if (!children) {\r\n    return null;\r\n  }\r\n  \r\n  return (\r\n    <Slide in={inProp} timeout={timeout} direction={direction} {...rest}>\r\n      <div style={{ display: 'contents' }}>\r\n        {children}\r\n      </div>\r\n    </Slide>\r\n  );\r\n}\r\n\r\n/**\r\n * 缩放过渡组件\r\n * @param {Object} props - 组件属性\r\n * @param {boolean} props.in - 是否显示\r\n * @param {number} props.timeout - 过渡时间\r\n * @param {React.ReactNode} props.children - 子元素\r\n * @returns {React.ReactElement} - 缩放过渡组件\r\n */\r\nexport function ZoomTransition({ in: inProp, timeout = 300, children, ...rest }) {\r\n  if (!children) {\r\n    return null;\r\n  }\r\n  \r\n  return (\r\n    <Zoom in={inProp} timeout={timeout} {...rest}>\r\n      <div style={{ display: 'contents' }}>\r\n        {children}\r\n      </div>\r\n    </Zoom>\r\n  );\r\n}\r\n\r\n/**\r\n * 折叠过渡组件\r\n * @param {Object} props - 组件属性\r\n * @param {boolean} props.in - 是否显示\r\n * @param {number} props.timeout - 过渡时间\r\n * @param {string} props.orientation - 方向（horizontal, vertical）\r\n * @param {React.ReactNode} props.children - 子元素\r\n * @returns {React.ReactElement} - 折叠过渡组件\r\n */\r\nexport function CollapseTransition({ in: inProp, timeout = 300, orientation = 'vertical', children, ...rest }) {\r\n  if (!children) {\r\n    return null;\r\n  }\r\n  \r\n  return (\r\n    <Collapse in={inProp} timeout={timeout} orientation={orientation} {...rest}>\r\n      <div style={{ display: 'contents' }}>\r\n        {children}\r\n      </div>\r\n    </Collapse>\r\n  );\r\n}\r\n\r\n/**\r\n * 交替过渡组件\r\n * @param {Object} props - 组件属性\r\n * @param {boolean} props.in - 是否显示\r\n * @param {number} props.timeout - 过渡时间\r\n * @param {React.ReactNode} props.primary - 主要内容\r\n * @param {React.ReactNode} props.secondary - 次要内容\r\n * @param {string} props.type - 过渡类型（fade, grow, slide, zoom, collapse）\r\n * @returns {React.ReactElement} - 交替过渡组件\r\n */\r\nexport function AlternateTransition({\r\n  in: inProp,\r\n  timeout = 300,\r\n  primary,\r\n  secondary,\r\n  type = 'fade',\r\n  ...rest\r\n}) {\r\n  const TransitionComponent = {\r\n    fade: FadeTransition,\r\n    grow: GrowTransition,\r\n    slide: SlideTransition,\r\n    zoom: ZoomTransition,\r\n    collapse: CollapseTransition\r\n  }[type] || FadeTransition;\r\n  \r\n  return (\r\n    <Box position=\"relative\" {...rest}>\r\n      <TransitionComponent in={inProp} timeout={timeout}>\r\n        <div>{primary}</div>\r\n      </TransitionComponent>\r\n      \r\n      <TransitionComponent in={!inProp} timeout={timeout}>\r\n        <Box position=\"absolute\" top={0} left={0} right={0}>\r\n          {secondary}\r\n        </Box>\r\n      </TransitionComponent>\r\n    </Box>\r\n  );\r\n}\r\n\r\n/**\r\n * 序列过渡组件\r\n * @param {Object} props - 组件属性\r\n * @param {boolean} props.in - 是否显示\r\n * @param {number} props.timeout - 过渡时间\r\n * @param {number} props.delay - 延迟时间\r\n * @param {React.ReactNode[]} props.children - 子元素\r\n * @param {string} props.type - 过渡类型（fade, grow, slide, zoom, collapse）\r\n * @returns {React.ReactElement} - 序列过渡组件\r\n */\r\nexport function SequenceTransition({\r\n  in: inProp,\r\n  timeout = 300,\r\n  delay = 100,\r\n  children,\r\n  type = 'fade',\r\n  ...rest\r\n}) {\r\n  const TransitionComponent = {\r\n    fade: FadeTransition,\r\n    grow: GrowTransition,\r\n    slide: SlideTransition,\r\n    zoom: ZoomTransition,\r\n    collapse: CollapseTransition\r\n  }[type] || FadeTransition;\r\n  \r\n  return (\r\n    <Box {...rest}>\r\n      {Array.isArray(children) ? \r\n        children.map((child, index) => (\r\n          <TransitionComponent\r\n            key={index}\r\n            in={inProp}\r\n            timeout={timeout}\r\n            style={{ transitionDelay: `${inProp ? index * delay : 0}ms` }}\r\n          >\r\n            <div>{child}</div>\r\n          </TransitionComponent>\r\n        )) : \r\n        <TransitionComponent in={inProp} timeout={timeout}>\r\n          <div>{children}</div>\r\n        </TransitionComponent>\r\n      }\r\n    </Box>\r\n  );\r\n}\r\n\r\n/**\r\n * 页面过渡组件\r\n * @param {Object} props - 组件属性\r\n * @param {boolean} props.in - 是否显示\r\n * @param {number} props.timeout - 过渡时间\r\n * @param {string} props.type - 过渡类型（fade, slide, zoom）\r\n * @param {React.ReactNode} props.children - 子元素\r\n * @returns {React.ReactElement} - 页面过渡组件\r\n */\r\nexport function PageTransition({\r\n  in: inProp = true,\r\n  timeout = 300,\r\n  type = 'fade',\r\n  children,\r\n  ...rest\r\n}) {\r\n  const [mounted, setMounted] = useState(false);\r\n  \r\n  useEffect(() => {\r\n    setMounted(true);\r\n    return () => setMounted(false);\r\n  }, []);\r\n  \r\n  const TransitionProps = {\r\n    in: mounted && inProp,\r\n    timeout,\r\n    ...rest\r\n  };\r\n  \r\n  // 如果没有子元素，则不渲染任何内容\r\n  if (!children) {\r\n    return null;\r\n  }\r\n  \r\n  switch (type) {\r\n    case 'slide':\r\n      return (\r\n        <Slide {...TransitionProps} direction=\"up\">\r\n          <div>{children}</div>\r\n        </Slide>\r\n      );\r\n    case 'zoom':\r\n      return (\r\n        <Zoom {...TransitionProps}>\r\n          <div>{children}</div>\r\n        </Zoom>\r\n      );\r\n    case 'fade':\r\n    default:\r\n      return (\r\n        <Fade {...TransitionProps}>\r\n          <div>{children}</div>\r\n        </Fade>\r\n      );\r\n  }\r\n}","import { useState, useRef, useEffect } from 'preact/hooks';\r\nimport { Box, Paper, Typography, Divider, IconButton, Button, ToggleButtonGroup, ToggleButton, Tooltip } from '@mui/material';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport VerticalSplitIcon from '@mui/icons-material/VerticalSplit';\r\nimport HorizontalSplitIcon from '@mui/icons-material/HorizontalSplit';\r\nimport CompareArrowsIcon from '@mui/icons-material/CompareArrows';\r\nimport ContentCopyIcon from '@mui/icons-material/ContentCopy';\r\nimport SaveIcon from '@mui/icons-material/Save';\r\nimport DiffEditor from '@monaco-editor/react';\r\nimport { useTheme } from '../theme/ThemeContext';\r\nimport { ariaAttributes } from '../utils/accessibilityUtils';\r\nimport { FadeTransition } from './design';\r\n\r\n/**\r\n * 差异对比组件\r\n * @param {Object} props - 组件属性\r\n * @param {string} props.original - 原始内容\r\n * @param {string} props.modified - 修改后内容\r\n * @param {Function} props.onClose - 关闭回调\r\n * @param {Function} props.onSave - 保存回调\r\n * @param {string} props.originalTitle - 原始内容标题\r\n * @param {string} props.modifiedTitle - 修改后内容标题\r\n * @returns {React.ReactElement} - 差异对比组件\r\n */\r\nexport function DiffViewer({ \r\n  original = '{\\n  \"example\": \"original content\"\\n}', \r\n  modified = '{\\n  \"example\": \"modified content\"\\n}', \r\n  onClose,\r\n  onSave,\r\n  originalTitle = '原始',\r\n  modifiedTitle = '修改后'\r\n}) {\r\n  // 使用主题上下文\r\n  const { themeId, monacoTheme } = useTheme();\r\n  \r\n  // 编辑器引用\r\n  const diffEditorRef = useRef(null);\r\n  \r\n  // 状态\r\n  const [layout, setLayout] = useState('vertical');\r\n  const [isInline, setIsInline] = useState(false);\r\n  const [alertMessage, setAlertMessage] = useState('');\r\n  const [alertOpen, setAlertOpen] = useState(false);\r\n  \r\n  // 处理编辑器挂载\r\n  const handleEditorDidMount = (editor) => {\r\n    diffEditorRef.current = editor;\r\n  };\r\n  \r\n  // 处理布局变化\r\n  const handleLayoutChange = (event, newLayout) => {\r\n    if (newLayout !== null) {\r\n      setLayout(newLayout);\r\n    }\r\n  };\r\n  \r\n  // 切换内联模式\r\n  const toggleInlineMode = () => {\r\n    setIsInline(!isInline);\r\n  };\r\n  \r\n  // 复制修改后内容\r\n  const copyModified = () => {\r\n    navigator.clipboard.writeText(modified).then(() => {\r\n      showAlert('已复制到剪贴板');\r\n    }).catch(() => {\r\n      showAlert('复制失败', 'error');\r\n    });\r\n  };\r\n  \r\n  // 保存修改后内容\r\n  const handleSave = () => {\r\n    if (onSave) {\r\n      onSave(modified);\r\n      showAlert('已保存');\r\n    }\r\n  };\r\n  \r\n  // 显示提示信息\r\n  const showAlert = (message, severity = 'success') => {\r\n    setAlertMessage(message);\r\n    setAlertOpen(true);\r\n    \r\n    setTimeout(() => {\r\n      setAlertOpen(false);\r\n    }, 3000);\r\n  };\r\n  \r\n  // 编辑器选项\r\n  const editorOptions = {\r\n    readOnly: true,\r\n    minimap: { enabled: false },\r\n    scrollBeyondLastLine: false,\r\n    automaticLayout: true,\r\n    renderSideBySide: layout === 'vertical',\r\n    renderOverviewRuler: false,\r\n    fontSize: 14,\r\n    lineNumbers: 'on',\r\n    scrollbar: {\r\n      vertical: 'auto',\r\n      horizontal: 'auto'\r\n    },\r\n    diffWordWrap: 'on',\r\n    ignoreTrimWhitespace: false,\r\n    renderIndicators: true,\r\n    originalEditable: false\r\n  };\r\n  \r\n  return (\r\n    <FadeTransition in={true}>\r\n      <Box\r\n        sx={{\r\n          position: 'absolute',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          backgroundColor: 'background.default',\r\n          zIndex: 1100,\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n        }}\r\n        role=\"dialog\"\r\n        aria-modal=\"true\"\r\n        aria-label=\"差异对比\"\r\n      >\r\n        <Box\r\n          sx={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'space-between',\r\n            p: 1,\r\n            borderBottom: '1px solid',\r\n            borderColor: 'divider',\r\n          }}\r\n        >\r\n          <Typography variant=\"subtitle1\">差异对比</Typography>\r\n          \r\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n            <ToggleButtonGroup\r\n              value={layout}\r\n              exclusive\r\n              onChange={handleLayoutChange}\r\n              size=\"small\"\r\n              aria-label=\"差异视图布局\"\r\n            >\r\n              <ToggleButton value=\"vertical\" aria-label=\"垂直布局\">\r\n                <Tooltip title=\"垂直布局\">\r\n                  <VerticalSplitIcon fontSize=\"small\" />\r\n                </Tooltip>\r\n              </ToggleButton>\r\n              <ToggleButton value=\"horizontal\" aria-label=\"水平布局\">\r\n                <Tooltip title=\"水平布局\">\r\n                  <HorizontalSplitIcon fontSize=\"small\" />\r\n                </Tooltip>\r\n              </ToggleButton>\r\n            </ToggleButtonGroup>\r\n            \r\n            <Tooltip title={isInline ? \"并排视图\" : \"内联视图\"}>\r\n              <IconButton size=\"small\" onClick={toggleInlineMode}>\r\n                <CompareArrowsIcon fontSize=\"small\" />\r\n              </IconButton>\r\n            </Tooltip>\r\n            \r\n            <Tooltip title=\"复制修改后内容\">\r\n              <IconButton size=\"small\" onClick={copyModified}>\r\n                <ContentCopyIcon fontSize=\"small\" />\r\n              </IconButton>\r\n            </Tooltip>\r\n            \r\n            {onSave && (\r\n              <Tooltip title=\"保存修改\">\r\n                <IconButton size=\"small\" onClick={handleSave}>\r\n                  <SaveIcon fontSize=\"small\" />\r\n                </IconButton>\r\n              </Tooltip>\r\n            )}\r\n            \r\n            <IconButton onClick={onClose} size=\"small\" aria-label=\"关闭\">\r\n              <CloseIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          </Box>\r\n        </Box>\r\n        \r\n        <Box\r\n          sx={{\r\n            flexGrow: 1,\r\n            overflow: 'hidden',\r\n            position: 'relative'\r\n          }}\r\n        >\r\n          <DiffEditor\r\n            height=\"100%\"\r\n            language=\"json\"\r\n            original={original}\r\n            modified={modified}\r\n            theme={monacoTheme}\r\n            options={{\r\n              ...editorOptions,\r\n              renderSideBySide: !isInline && layout === 'vertical'\r\n            }}\r\n            onMount={handleEditorDidMount}\r\n            originalTitle={originalTitle}\r\n            modifiedTitle={modifiedTitle}\r\n          />\r\n        </Box>\r\n        \r\n        {/* 提示信息 */}\r\n        <FadeTransition in={alertOpen}>\r\n          <Box\r\n            sx={{\r\n              position: 'absolute',\r\n              bottom: 16,\r\n              left: '50%',\r\n              transform: 'translateX(-50%)',\r\n              backgroundColor: 'success.main',\r\n              color: 'white',\r\n              padding: '8px 16px',\r\n              borderRadius: '4px',\r\n              boxShadow: '0 2px 4px rgba(0,0,0,0.2)',\r\n              zIndex: 1200\r\n            }}\r\n          >\r\n            {alertMessage}\r\n          </Box>\r\n        </FadeTransition>\r\n      </Box>\r\n    </FadeTransition>\r\n  );\r\n}","/**\r\n * 动画工具函数\r\n * 提供动画和过渡相关的辅助功能\r\n */\r\n\r\nimport { keyframes } from '@emotion/react';\r\n\r\n/**\r\n * 淡入动画\r\n */\r\nexport const fadeIn = keyframes`\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n`;\r\n\r\n/**\r\n * 淡出动画\r\n */\r\nexport const fadeOut = keyframes`\r\n  from {\r\n    opacity: 1;\r\n  }\r\n  to {\r\n    opacity: 0;\r\n  }\r\n`;\r\n\r\n/**\r\n * 从上滑入动画\r\n */\r\nexport const slideInFromTop = keyframes`\r\n  from {\r\n    transform: translateY(-20px);\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    transform: translateY(0);\r\n    opacity: 1;\r\n  }\r\n`;\r\n\r\n/**\r\n * 从下滑入动画\r\n */\r\nexport const slideInFromBottom = keyframes`\r\n  from {\r\n    transform: translateY(20px);\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    transform: translateY(0);\r\n    opacity: 1;\r\n  }\r\n`;\r\n\r\n/**\r\n * 从左滑入动画\r\n */\r\nexport const slideInFromLeft = keyframes`\r\n  from {\r\n    transform: translateX(-20px);\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    transform: translateX(0);\r\n    opacity: 1;\r\n  }\r\n`;\r\n\r\n/**\r\n * 从右滑入动画\r\n */\r\nexport const slideInFromRight = keyframes`\r\n  from {\r\n    transform: translateX(20px);\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    transform: translateX(0);\r\n    opacity: 1;\r\n  }\r\n`;\r\n\r\n/**\r\n * 缩放入场动画\r\n */\r\nexport const zoomIn = keyframes`\r\n  from {\r\n    transform: scale(0.9);\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    transform: scale(1);\r\n    opacity: 1;\r\n  }\r\n`;\r\n\r\n/**\r\n * 缩放出场动画\r\n */\r\nexport const zoomOut = keyframes`\r\n  from {\r\n    transform: scale(1);\r\n    opacity: 1;\r\n  }\r\n  to {\r\n    transform: scale(0.9);\r\n    opacity: 0;\r\n  }\r\n`;\r\n\r\n/**\r\n * 弹跳动画\r\n */\r\nexport const bounce = keyframes`\r\n  0%, 20%, 50%, 80%, 100% {\r\n    transform: translateY(0);\r\n  }\r\n  40% {\r\n    transform: translateY(-10px);\r\n  }\r\n  60% {\r\n    transform: translateY(-5px);\r\n  }\r\n`;\r\n\r\n/**\r\n * 脉冲动画\r\n */\r\nexport const pulse = keyframes`\r\n  0% {\r\n    transform: scale(1);\r\n  }\r\n  50% {\r\n    transform: scale(1.05);\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n  }\r\n`;\r\n\r\n/**\r\n * 旋转动画\r\n */\r\nexport const rotate = keyframes`\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n`;\r\n\r\n/**\r\n * 闪烁动画\r\n */\r\nexport const blink = keyframes`\r\n  0%, 100% {\r\n    opacity: 1;\r\n  }\r\n  50% {\r\n    opacity: 0.5;\r\n  }\r\n`;\r\n\r\n/**\r\n * 波纹动画\r\n */\r\nexport const ripple = keyframes`\r\n  0% {\r\n    transform: scale(0);\r\n    opacity: 1;\r\n  }\r\n  100% {\r\n    transform: scale(4);\r\n    opacity: 0;\r\n  }\r\n`;\r\n\r\n/**\r\n * 抖动动画\r\n */\r\nexport const shake = keyframes`\r\n  0%, 100% {\r\n    transform: translateX(0);\r\n  }\r\n  10%, 30%, 50%, 70%, 90% {\r\n    transform: translateX(-5px);\r\n  }\r\n  20%, 40%, 60%, 80% {\r\n    transform: translateX(5px);\r\n  }\r\n`;\r\n\r\n/**\r\n * 创建动画样式\r\n * @param {keyframes} animation - 动画关键帧\r\n * @param {string} duration - 动画持续时间\r\n * @param {string} timingFunction - 动画时间函数\r\n * @param {string} delay - 动画延迟\r\n * @param {string} iterationCount - 动画迭代次数\r\n * @param {string} direction - 动画方向\r\n * @param {string} fillMode - 动画填充模式\r\n * @returns {Object} - 动画样式对象\r\n */\r\nexport const createAnimation = (\r\n  animation,\r\n  duration = '0.3s',\r\n  timingFunction = 'ease',\r\n  delay = '0s',\r\n  iterationCount = '1',\r\n  direction = 'normal',\r\n  fillMode = 'forwards'\r\n) => {\r\n  return {\r\n    animation: `${animation} ${duration} ${timingFunction} ${delay} ${iterationCount} ${direction} ${fillMode}`\r\n  };\r\n};\r\n\r\n/**\r\n * 创建过渡样式\r\n * @param {string} properties - 过渡属性\r\n * @param {string} duration - 过渡持续时间\r\n * @param {string} timingFunction - 过渡时间函数\r\n * @param {string} delay - 过渡延迟\r\n * @returns {Object} - 过渡样式对象\r\n */\r\nexport const createTransition = (\r\n  properties = 'all',\r\n  duration = '0.3s',\r\n  timingFunction = 'ease',\r\n  delay = '0s'\r\n) => {\r\n  return {\r\n    transition: `${properties} ${duration} ${timingFunction} ${delay}`\r\n  };\r\n};\r\n\r\n/**\r\n * 创建悬停效果样式\r\n * @param {Object} baseStyle - 基础样式\r\n * @param {Object} hoverStyle - 悬停样式\r\n * @returns {Object} - 悬停效果样式对象\r\n */\r\nexport const createHoverEffect = (baseStyle, hoverStyle) => {\r\n  return {\r\n    ...baseStyle,\r\n    ...createTransition('all', '0.2s', 'ease'),\r\n    '&:hover': {\r\n      ...hoverStyle\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * 创建点击效果样式\r\n * @param {Object} baseStyle - 基础样式\r\n * @param {Object} activeStyle - 激活样式\r\n * @returns {Object} - 点击效果样式对象\r\n */\r\nexport const createActiveEffect = (baseStyle, activeStyle) => {\r\n  return {\r\n    ...baseStyle,\r\n    ...createTransition('all', '0.1s', 'ease'),\r\n    '&:active': {\r\n      ...activeStyle\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * 创建按钮点击效果\r\n * @returns {Object} - 按钮点击效果样式对象\r\n */\r\nexport const createButtonClickEffect = () => {\r\n  return createActiveEffect(\r\n    {},\r\n    {\r\n      transform: 'scale(0.98)',\r\n      boxShadow: 'none'\r\n    }\r\n  );\r\n};\r\n\r\n/**\r\n * 创建卡片悬停效果\r\n * @returns {Object} - 卡片悬停效果样式对象\r\n */\r\nexport const createCardHoverEffect = () => {\r\n  return createHoverEffect(\r\n    {},\r\n    {\r\n      transform: 'translateY(-4px)',\r\n      boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)'\r\n    }\r\n  );\r\n};\r\n\r\n/**\r\n * 创建波纹效果\r\n * @param {string} color - 波纹颜色\r\n * @returns {Object} - 波纹效果样式对象\r\n */\r\nexport const createRippleEffect = (color = 'rgba(0, 0, 0, 0.1)') => {\r\n  return {\r\n    position: 'relative',\r\n    overflow: 'hidden',\r\n    '&::after': {\r\n      content: '\"\"',\r\n      display: 'block',\r\n      position: 'absolute',\r\n      width: '100%',\r\n      height: '100%',\r\n      top: 0,\r\n      left: 0,\r\n      pointerEvents: 'none',\r\n      backgroundColor: color,\r\n      borderRadius: 'inherit',\r\n      transform: 'scale(0)',\r\n      opacity: 0,\r\n      transition: 'transform 0.3s, opacity 0.3s'\r\n    },\r\n    '&:active::after': {\r\n      transform: 'scale(2)',\r\n      opacity: 0.3,\r\n      transition: 'transform 0s'\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * 创建加载动画\r\n * @param {string} color - 加载动画颜色\r\n * @param {string} size - 加载动画大小\r\n * @returns {Object} - 加载动画样式对象\r\n */\r\nexport const createLoadingAnimation = (color = 'currentColor', size = '20px') => {\r\n  return {\r\n    display: 'inline-block',\r\n    width: size,\r\n    height: size,\r\n    borderRadius: '50%',\r\n    border: `2px solid ${color}`,\r\n    borderTopColor: 'transparent',\r\n    animation: `${rotate} 0.8s linear infinite`\r\n  };\r\n};\r\n\r\n/**\r\n * 创建骨架屏动画\r\n * @returns {Object} - 骨架屏动画样式对象\r\n */\r\nexport const createSkeletonAnimation = () => {\r\n  const shimmer = keyframes`\r\n    0% {\r\n      background-position: -200% 0;\r\n    }\r\n    100% {\r\n      background-position: 200% 0;\r\n    }\r\n  `;\r\n  \r\n  return {\r\n    background: 'linear-gradient(90deg, rgba(0, 0, 0, 0.06) 25%, rgba(0, 0, 0, 0.12) 37%, rgba(0, 0, 0, 0.06) 63%)',\r\n    backgroundSize: '400% 100%',\r\n    animation: `${shimmer} 1.4s ease infinite`\r\n  };\r\n};\r\n\r\n/**\r\n * 创建渐变背景动画\r\n * @param {Array} colors - 渐变颜色数组\r\n * @returns {Object} - 渐变背景动画样式对象\r\n */\r\nexport const createGradientAnimation = (colors = ['#3B82F6', '#10B981', '#F59E0B', '#EF4444']) => {\r\n  const gradient = keyframes`\r\n    0% {\r\n      background-position: 0% 50%;\r\n    }\r\n    50% {\r\n      background-position: 100% 50%;\r\n    }\r\n    100% {\r\n      background-position: 0% 50%;\r\n    }\r\n  `;\r\n  \r\n  const colorString = colors.join(', ');\r\n  \r\n  return {\r\n    background: `linear-gradient(45deg, ${colorString})`,\r\n    backgroundSize: '400% 400%',\r\n    animation: `${gradient} 15s ease infinite`\r\n  };\r\n};","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = exports.default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20zm-6 8h-4v-2h4zm0-4h-4v-2h4z\"\n}), 'BugReport');","/**\r\n * 错误边界组件\r\n * 捕获子组件中的错误并显示友好的错误界面\r\n */\r\n\r\nimport { Component } from 'preact';\r\nimport { Box, Typography, Button, Paper, Divider } from '@mui/material';\r\nimport ErrorIcon from '@mui/icons-material/Error';\r\nimport RefreshIcon from '@mui/icons-material/Refresh';\r\nimport BugReportIcon from '@mui/icons-material/BugReport';\r\nimport errorService, { ErrorSeverity } from '../services/errorService';\r\n\r\n/**\r\n * 错误边界组件\r\n */\r\nexport class ErrorBoundary extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { \r\n      hasError: false, \r\n      error: null,\r\n      errorInfo: null,\r\n      showDetails: false\r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // 更新状态，下次渲染时显示错误UI\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    // 记录错误信息\r\n    this.setState({ errorInfo });\r\n    \r\n    // 使用错误服务处理错误\r\n    errorService.handleError(error);\r\n    \r\n    // 调用onError回调（如果有）\r\n    if (this.props.onError) {\r\n      this.props.onError(error, errorInfo);\r\n    }\r\n  }\r\n  \r\n  // 重置错误状态\r\n  handleReset = () => {\r\n    this.setState({ \r\n      hasError: false, \r\n      error: null,\r\n      errorInfo: null,\r\n      showDetails: false\r\n    });\r\n    \r\n    // 调用onReset回调（如果有）\r\n    if (this.props.onReset) {\r\n      this.props.onReset();\r\n    }\r\n    \r\n    // 强制重新渲染子组件\r\n    if (this.props.children) {\r\n      try {\r\n        // 使用forceUpdate确保子组件重新渲染\r\n        this.forceUpdate();\r\n      } catch (e) {\r\n        console.error('重置组件状态失败:', e);\r\n      }\r\n    }\r\n  };\r\n  \r\n  // 重新加载页面\r\n  handleReload = () => {\r\n    window.location.reload();\r\n  };\r\n  \r\n  // 切换显示详细信息\r\n  toggleDetails = () => {\r\n    this.setState(prevState => ({\r\n      showDetails: !prevState.showDetails\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const { hasError, error, errorInfo, showDetails } = this.state;\r\n    const { fallback, children } = this.props;\r\n    \r\n    // 如果没有错误，正常渲染子组件\r\n    if (!hasError) {\r\n      return children;\r\n    }\r\n    \r\n    // 如果提供了自定义的fallback，使用它\r\n    if (fallback) {\r\n      return typeof fallback === 'function'\r\n        ? fallback(error, errorInfo, this.handleReset)\r\n        : fallback;\r\n    }\r\n    \r\n    // 默认错误UI\r\n    return (\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          height: '100%',\r\n          p: 3,\r\n          textAlign: 'center'\r\n        }}\r\n      >\r\n        <Paper\r\n          elevation={3}\r\n          sx={{\r\n            p: 4,\r\n            maxWidth: 600,\r\n            width: '100%',\r\n            borderRadius: 2\r\n          }}\r\n        >\r\n          <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\r\n            <ErrorIcon color=\"error\" sx={{ fontSize: 40, mr: 2 }} />\r\n            <Typography variant=\"h5\" component=\"h2\">\r\n              出现了一个错误\r\n            </Typography>\r\n          </Box>\r\n          \r\n          <Typography variant=\"body1\" color=\"text.secondary\" sx={{ mb: 3 }}>\r\n            {error?.message || '应用程序遇到了一个未知错误'}\r\n          </Typography>\r\n          \r\n          <Box sx={{ display: 'flex', justifyContent: 'center', gap: 2, mb: 3 }}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              startIcon={<RefreshIcon />}\r\n              onClick={this.handleReset}\r\n            >\r\n              重试\r\n            </Button>\r\n            <Button\r\n              variant=\"outlined\"\r\n              startIcon={<RefreshIcon />}\r\n              onClick={this.handleReload}\r\n            >\r\n              刷新页面\r\n            </Button>\r\n          </Box>\r\n          \r\n          <Divider sx={{ my: 2 }} />\r\n          \r\n          <Box sx={{ textAlign: 'left' }}>\r\n            <Button\r\n              startIcon={<BugReportIcon />}\r\n              size=\"small\"\r\n              onClick={this.toggleDetails}\r\n              sx={{ mb: 1 }}\r\n            >\r\n              {showDetails ? '隐藏详细信息' : '显示详细信息'}\r\n            </Button>\r\n            \r\n            {showDetails && errorInfo && (\r\n              <Paper\r\n                variant=\"outlined\"\r\n                sx={{\r\n                  p: 2,\r\n                  backgroundColor: 'background.default',\r\n                  overflowX: 'auto'\r\n                }}\r\n              >\r\n                <Typography variant=\"caption\" component=\"pre\" sx={{ whiteSpace: 'pre-wrap' }}>\r\n                  {error && error.toString()}\r\n                  <br />\r\n                  {errorInfo.componentStack}\r\n                </Typography>\r\n              </Paper>\r\n            )}\r\n          </Box>\r\n        </Paper>\r\n      </Box>\r\n    );\r\n  }\r\n}","import { useState, useEffect, useRef } from 'preact/hooks';\r\nimport { CssBaseline, Dialog, DialogTitle, DialogContent, DialogActions } from '@mui/material';\r\nimport { ThemeProvider } from './components/ThemeProvider';\r\nimport { MainLayout } from './layouts/MainLayout';\r\n\r\nimport { SettingsDialog } from './components/SettingsDialog';\r\nimport { FileDropZone } from './components/FileDropZone';\r\nimport { ErrorDisplay } from './components/ErrorDisplay';\r\nimport { LargeFileWarning } from './components/LargeFileWarning';\r\nimport { DiffViewer } from './components/DiffViewer';\r\nimport { ErrorBoundary } from './components/ErrorBoundary';\r\nimport errorService, { ErrorSeverity } from './services/errorService';\r\n\r\n// 导入设计系统组件\r\nimport { \r\n  Button, \r\n  Alert, \r\n  FadeTransition, \r\n  ZoomTransition,\r\n  PageTransition\r\n} from './components/design';\r\n\r\nexport function App() {\r\n\r\n  const [settingsOpen, setSettingsOpen] = useState(false);\r\n  const [largeFileWarningOpen, setLargeFileWarningOpen] = useState(false);\r\n  const [diffViewerOpen, setDiffViewerOpen] = useState(false);\r\n  const [errorDialogOpen, setErrorDialogOpen] = useState(false);\r\n  \r\n  // 最近文件功能已移除\r\n  \r\n  // 错误通知状态\r\n  const [errorAlert, setErrorAlert] = useState({ open: false, message: '', severity: 'error', action: null });\r\n  \r\n  // 当前大文件\r\n  const [currentLargeFile, setCurrentLargeFile] = useState(null);\r\n  \r\n  // 差异对比状态\r\n  const [diffViewerContent, setDiffViewerContent] = useState({\r\n    original: '{\\n  \"example\": \"original content\"\\n}',\r\n    modified: '{\\n  \"example\": \"modified content\"\\n}',\r\n    originalTitle: '原始',\r\n    modifiedTitle: '修改后'\r\n  });\r\n  \r\n  // 保存原始内容的引用\r\n  const originalContentRef = useRef('');\r\n\r\n  // 监听错误服务\r\n  useEffect(() => {\r\n    const handleError = (error) => {\r\n      // 只显示警告和错误级别的通知\r\n      if (error.severity === ErrorSeverity.ERROR || error.severity === ErrorSeverity.WARNING) {\r\n        setErrorAlert({\r\n          open: true,\r\n          message: error.message,\r\n          severity: error.severity === ErrorSeverity.ERROR ? 'error' : 'warning'\r\n        });\r\n      }\r\n    };\r\n    \r\n    // 添加错误监听器\r\n    errorService.addListener(handleError);\r\n    \r\n    // 清理监听器\r\n    return () => {\r\n      errorService.removeListener(handleError);\r\n    };\r\n  }, []);\r\n  \r\n  // 扩展pdxJsonEditor全局对象，添加差异对比相关功能\r\n  useEffect(() => {\r\n    // 保存原始内容的函数\r\n    const saveOriginalContent = (content) => {\r\n      originalContentRef.current = content;\r\n    };\r\n    \r\n    // 打开差异对比视图的函数\r\n    const openDiffViewer = (original, modified, originalTitle = '原始', modifiedTitle = '修改后') => {\r\n      setDiffViewerContent({\r\n        original: original || originalContentRef.current,\r\n        modified: modified || (window.pdxJsonEditor?.getCurrentContent?.() || ''),\r\n        originalTitle,\r\n        modifiedTitle\r\n      });\r\n      setDiffViewerOpen(true);\r\n    };\r\n    \r\n    // 处理大文件的函数\r\n    const handleLargeFile = (file) => {\r\n      if (file) {\r\n        setCurrentLargeFile(file);\r\n        setLargeFileWarningOpen(true);\r\n      }\r\n    };\r\n\r\n    // 最近文件功能已移除\r\n    \r\n    // 触发文件选择对话框\r\n    const triggerFileOpen = () => {\r\n      // 检查是否支持文件系统访问API\r\n      if ('showOpenFilePicker' in window && window.pdxJsonEditor?.openFileWithPicker) {\r\n        // 使用文件系统访问API\r\n        window.pdxJsonEditor.openFileWithPicker();\r\n      } else {\r\n        // 回退到传统方式\r\n        // 通过自定义事件通知MainLayout组件打开文件选择对话框\r\n        window.dispatchEvent(new CustomEvent('triggerFileOpen'));\r\n        \r\n        // 同时尝试直接查找文件输入元素（备用方案）\r\n        setTimeout(() => {\r\n          const fileInput = document.querySelector('input[type=\"file\"]');\r\n          if (fileInput) {\r\n            fileInput.click();\r\n          } else {\r\n            console.error('未找到文件输入元素');\r\n          }\r\n        }, 100);\r\n      }\r\n    };\r\n    \r\n    // 设置当前文件\r\n    const setCurrentFile = (fileInfo) => {\r\n      // 这个函数需要在MainLayout组件中实现\r\n      // 这里只是一个占位符\r\n      console.log('设置当前文件:', fileInfo);\r\n      \r\n      // 尝试通过事件通知MainLayout组件\r\n      window.dispatchEvent(new CustomEvent('setCurrentFile', { detail: fileInfo }));\r\n    };\r\n    \r\n    // 将函数添加到全局对象\r\n    if (window.pdxJsonEditor) {\r\n      window.pdxJsonEditor.saveOriginalContent = saveOriginalContent;\r\n      window.pdxJsonEditor.openDiffViewer = openDiffViewer;\r\n      window.pdxJsonEditor.handleLargeFile = handleLargeFile;\r\n      window.pdxJsonEditor.triggerFileOpen = triggerFileOpen;\r\n      window.pdxJsonEditor.setCurrentFile = setCurrentFile;\r\n      \r\n      // 添加openFileWithPicker函数\r\n      if (!window.pdxJsonEditor.openFileWithPicker && window.showOpenFilePicker) {\r\n        window.pdxJsonEditor.openFileWithPicker = () => {\r\n          // 通过自定义事件通知MainLayout组件使用文件选择器API打开文件\r\n          window.dispatchEvent(new CustomEvent('useFilePickerAPI'));\r\n        };\r\n      }\r\n      \r\n      // 如果没有定义openFileByPath函数，添加一个基本实现\r\n      if (!window.pdxJsonEditor.openFileByPath) {\r\n        window.pdxJsonEditor.openFileByPath = (filePath) => {\r\n          console.log('尝试打开文件路径:', filePath);\r\n          // 这里可以添加实际的文件打开逻辑，如果有文件系统API支持\r\n          // 目前只是记录日志，实际功能需要根据应用环境实现\r\n        };\r\n      }\r\n    } else {\r\n      window.pdxJsonEditor = {\r\n        saveOriginalContent,\r\n        openDiffViewer,\r\n        handleLargeFile,\r\n        triggerFileOpen,\r\n        setCurrentFile,\r\n        openFileByPath: (filePath) => {\r\n          console.log('尝试打开文件路径:', filePath);\r\n          // 这里可以添加实际的文件打开逻辑，如果有文件系统API支持\r\n        },\r\n        // 添加openFileWithPicker函数\r\n        openFileWithPicker: window.showOpenFilePicker ? () => {\r\n          // 通过自定义事件通知MainLayout组件使用文件选择器API打开文件\r\n          window.dispatchEvent(new CustomEvent('useFilePickerAPI'));\r\n        } : undefined\r\n      };\r\n    }\r\n    \r\n    // 清理函数\r\n    return () => {\r\n      if (window.pdxJsonEditor) {\r\n        delete window.pdxJsonEditor.saveOriginalContent;\r\n        delete window.pdxJsonEditor.openDiffViewer;\r\n        delete window.pdxJsonEditor.handleLargeFile;\r\n        delete window.pdxJsonEditor.triggerFileOpen;\r\n        delete window.pdxJsonEditor.setCurrentFile;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n\r\n\r\n  const toggleSettings = () => {\r\n    setSettingsOpen(!settingsOpen);\r\n  };\r\n\r\n  const toggleLargeFileWarning = () => {\r\n    setLargeFileWarningOpen(!largeFileWarningOpen);\r\n  };\r\n\r\n  const toggleDiffViewer = () => {\r\n    if (!diffViewerOpen) {\r\n      // 打开差异对比视图时，获取当前内容作为修改后内容\r\n      const currentContent = window.pdxJsonEditor?.getCurrentContent?.() || '{\\n  \"example\": \"modified content\"\\n}';\r\n      \r\n      // 检查内容大小\r\n      const contentSize = new Blob([currentContent]).size;\r\n      if (contentSize > 2 * 1024 * 1024) { // 2MB\r\n        // 对于大文件，显示警告而不是直接打开差异对比视图\r\n        setErrorAlert({\r\n          open: true,\r\n          message: '文件过大，差异对比可能导致性能问题',\r\n          severity: 'warning'\r\n        });\r\n        return;\r\n      }\r\n      \r\n      // 如果有原始内容，使用它；否则使用格式化后的当前内容作为原始内容\r\n      let originalContent = originalContentRef.current;\r\n      if (!originalContent) {\r\n        try {\r\n          // 尝试格式化当前内容作为原始内容\r\n          originalContent = JSON.stringify(JSON.parse(currentContent), null, 2);\r\n        } catch (e) {\r\n          // 如果解析失败，使用当前内容\r\n          originalContent = currentContent;\r\n        }\r\n      }\r\n      \r\n      setDiffViewerContent({\r\n        original: originalContent,\r\n        modified: currentContent,\r\n        originalTitle: '原始',\r\n        modifiedTitle: '当前'\r\n      });\r\n    }\r\n    \r\n    setDiffViewerOpen(!diffViewerOpen);\r\n  };\r\n  \r\n  // 保存差异对比结果\r\n  const handleDiffSave = (content) => {\r\n    if (window.pdxJsonEditor?.setContent) {\r\n      window.pdxJsonEditor.setContent(content);\r\n    }\r\n    setDiffViewerOpen(false);\r\n  };\r\n  \r\n  const toggleErrorDialog = () => {\r\n    setErrorDialogOpen(!errorDialogOpen);\r\n  };\r\n  \r\n  // 处理文件拖放\r\n  const handleFileDrop = (file) => {\r\n    // 检查是否为大文件\r\n    if (file && file.size > 1000000) { // 1MB\r\n      // 保存文件引用\r\n      setCurrentLargeFile(file);\r\n      // 显示大文件警告\r\n      setLargeFileWarningOpen(true);\r\n    } else {\r\n      // 如果不是大文件，直接处理\r\n      if (window.pdxJsonEditor?.openFile) {\r\n        window.pdxJsonEditor.openFile(file);\r\n      }\r\n    }\r\n  };\r\n  \r\n  // 处理大文件继续\r\n  const handleLargeFileContinue = () => {\r\n    setLargeFileWarningOpen(false);\r\n    \r\n    // 继续打开文件，跳过大小检查\r\n    if (currentLargeFile && window.pdxJsonEditor?.openFile) {\r\n      window.pdxJsonEditor.openFile(currentLargeFile, true);\r\n    }\r\n    \r\n    setCurrentLargeFile(null);\r\n  };\r\n  \r\n  // 处理大文件取消\r\n  const handleLargeFileCancel = () => {\r\n    setLargeFileWarningOpen(false);\r\n    setCurrentLargeFile(null);\r\n  };\r\n  \r\n  // 处理错误通知关闭\r\n  const handleErrorAlertClose = () => {\r\n    setErrorAlert(prev => ({ ...prev, open: false }));\r\n  };\r\n  \r\n  // 处理应用错误\r\n  const handleAppError = (error) => {\r\n    // 使用错误服务处理错误\r\n    errorService.handleError(error);\r\n  };\r\n\r\n  return (\r\n    <ErrorBoundary onError={handleAppError}>\r\n      <ThemeProvider>\r\n        <CssBaseline />\r\n        <PageTransition type=\"fade\">\r\n          <MainLayout \r\n            onSettingsClick={toggleSettings}\r\n            onErrorClick={toggleErrorDialog}\r\n          />\r\n        </PageTransition>\r\n        \r\n\r\n        <SettingsDialog open={settingsOpen} onClose={toggleSettings} />\r\n        <FileDropZone \r\n          onFileDrop={handleFileDrop} \r\n          onError={handleAppError} \r\n        />\r\n        \r\n        {/* 错误对话框 */}\r\n        <Dialog\r\n          open={errorDialogOpen}\r\n          onClose={toggleErrorDialog}\r\n          fullWidth\r\n          maxWidth=\"md\"\r\n        >\r\n          <DialogTitle>错误历史</DialogTitle>\r\n          <DialogContent>\r\n            <ErrorDisplay />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={toggleErrorDialog}>关闭</Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n        \r\n        <LargeFileWarning \r\n          open={largeFileWarningOpen} \r\n          fileSize={currentLargeFile?.size || 5242880}\r\n          fileName={currentLargeFile?.name}\r\n          onContinue={handleLargeFileContinue}\r\n          onCancel={handleLargeFileCancel}\r\n        />\r\n        \r\n        {diffViewerOpen && (\r\n          <DiffViewer \r\n            original={diffViewerContent.original}\r\n            modified={diffViewerContent.modified}\r\n            originalTitle={diffViewerContent.originalTitle}\r\n            modifiedTitle={diffViewerContent.modifiedTitle}\r\n            onClose={toggleDiffViewer}\r\n            onSave={handleDiffSave}\r\n          />\r\n        )}\r\n        \r\n        {/* 错误通知 */}\r\n        {errorAlert.open && (\r\n          <FadeTransition in={true}>\r\n            <Alert \r\n              severity={errorAlert.severity}\r\n              variant=\"filled\"\r\n              onClose={handleErrorAlertClose}\r\n              action={errorAlert.action}\r\n              sx={{ \r\n                position: 'fixed',\r\n                bottom: 16,\r\n                left: '50%',\r\n                transform: 'translateX(-50%)',\r\n                zIndex: 9999,\r\n                minWidth: 300,\r\n                maxWidth: '90%'\r\n              }}\r\n            >\r\n              {errorAlert.message}\r\n            </Alert>\r\n          </FadeTransition>\r\n        )}\r\n      </ThemeProvider>\r\n    </ErrorBoundary>\r\n  );\r\n}","import { render } from 'preact';\r\nimport { App } from './App';\r\nimport './theme/theme.css';\r\nimport './theme/mobile.css';\r\n\r\nrender(<App />, document.getElementById('app'));"],"names":["colors","primary","main","light","dark","contrastText","secondary","success","warning","error","info","background","default","paper","text","disabled","divider","border","highContrast","typography","fontFamily","join","fontSize","h1","fontWeight","lineHeight","letterSpacing","h2","h3","h4","h5","h6","body1","body2","caption","button","textTransform","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightSemiBold","fontWeightBold","shape","borderRadius","small","medium","large","xl","circle","shadows","sm","md","lg","inner","none","baseTheme","spacing","factor","transitions","easing","easeInOut","easeOut","easeIn","sharp","duration","shortest","shorter","short","standard","complex","enteringScreen","leavingScreen","breakpoints","xs","zIndex","mobileStepper","speedDial","appBar","drawer","modal","snackbar","tooltip","fab","components","MuiButton","styleOverrides","root","padding","boxShadow","sizeSmall","sizeLarge","contained","outlined","borderWidth","MuiCard","overflow","MuiPaper","elevation1","elevation2","elevation3","elevation4","elevation5","MuiTextField","MuiDialog","MuiDrawer","MuiAppBar","MuiIconButton","MuiBadge","badge","MuiTooltip","MuiChip","MuiListItem","MuiMenuItem","MuiTableCell","head","MuiDivider","margin","MuiSwitch","thumb","MuiCheckbox","MuiRadio","MuiTab","minWidth","MuiAlert","standardSuccess","backgroundColor","color","standardWarning","standardError","standardInfo","MuiLinearProgress","height","MuiCircularProgress","strokeLinecap","MuiFab","MuiSlider","themes","id","name","theme","palette","mode","action","active","hover","selected","disabledBackground","monacoTheme","soft","getSystemPreferredTheme","window","matchMedia","matches","ErrorType","ErrorSeverity","AppError","Error","constructor","message","type","severity","originalError","super","this","timestamp","Date","handled","JsonParseError","line","column","FileOperationError","operation","fileName","errorService","listeners","errorHistory","maxHistorySize","handleError","bind","addListener","removeListener","getErrorHistory","clearErrorHistory","setupGlobalHandlers","addEventListener","event","reason","SyntaxError","includes","addToHistory","notifyListeners","logError","unshift","length","pop","serializedErrors","map","err","toISOString","localStorage","setItem","JSON","stringify","e","removeItem","listener","push","index","indexOf","splice","forEach","console","warn","toLocaleTimeString","extractPositionFromJsonError","positionMatch","match","position","parseInt","lineColMatch","calculateLineAndColumn","jsonText","lines","substring","split","getFriendlyMessage","TypeError","ReferenceError","STORAGE_KEYS","PersistenceService","saveEditorContent","content","fileInfo","Blob","size","fileData","lastModified","path","isQuotaError","loadEditorContent","getItem","fileInfoStr","parse","clearEditorContent","saveEditorSettings","settings","loadEditorSettings","settingsStr","saveTheme","loadTheme","addFileToHistory","historyStr","history","Array","isArray","fileRecord","now","existingIndex","findIndex","item","historyJson","dispatchEvent","StorageEvent","key","newValue","getFileHistory","parseError","clearFileHistory","saveSchemas","schemas","loadSchemas","schemasStr","isStorageAvailable","testKey","ThemeContext","createContext","themeId","createTheme","setThemeId","toggleTheme","availableThemes","ThemeContextProvider","children","useState","useEffect","savedThemeId","systemTheme","document","documentElement","style","transition","body","setAttribute","setProperty","setTimeout","applyCssVariables","callback","mediaQuery","handleChange","newTheme","removeEventListener","watchSystemThemeChanges","_a","_b","contextValue","prevThemeId","setThemeMode","Provider","value","useTheme","useContext","ThemeProvider","jsx","ThemedContent","MuiThemeProvider","Object","defineProperty","exports","enumerable","get","_utils","createSvgIcon","require$$0","_interopRequireDefault","Menu","default_1","_createSvgIcon","require$$1","_jsxRuntime","require$$2","d","CreateNewFolder","FolderOpen","Save","_Error","BrightnessMedium","LightMode","DarkMode","Contrast","Palette","Settings","Computer","ThemeSelector","anchorEl","setAnchorEl","dialogOpen","setDialogOpen","followSystem","setFollowSystem","themeMode","handleClose","handleCloseSettings","handleFollowSystemChange","target","checked","jsxs","Fragment","u","Tooltip","title","IconButton","onClick","currentTarget","LightModeIcon","DarkModeIcon","ContrastIcon","PaletteIcon","BrightnessMediumIcon","keepMounted","open","Boolean","onClose","MenuItem","ListItemIcon","ListItemText","ComputerIcon","Divider","SettingsIcon","Dialog","DialogTitle","DialogContent","Box","sx","mb","FormControlLabel","control","Switch","onChange","label","Typography","variant","display","mt","my","FormControl","component","FormLabel","RadioGroup","values","Radio","DialogActions","Button","ariaAttributes","role","description","hidden","live","required","expanded","invalid","errorMessage","controls","labelledBy","describedBy","flowTo","owns","attrs","toString","createUniqueId","prefix","Math","random","createNavigation","Header","onMenuClick","onNewFile","onOpenFile","onSaveFile","onSaveAsFile","onErrorClick","currentFileName","isDirty","useMuiTheme","isMobile","useMediaQuery","down","navAttrs","AppBar","elevation","Toolbar","edge","mr","MenuIcon","flexGrow","gap","startIcon","CreateNewFolderIcon","FolderOpenIcon","SaveIcon","ml","alignSelf","Badge","badgeContent","ErrorIcon","_defineProperty","obj","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","i","arguments","source","getOwnPropertyDescriptors","defineProperties","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","prototype","propertyIsEnumerable","call","_arrayLikeToArray","arr","len","arr2","curry","fn","curried","_this","_len2","args","_key2","_len3","nextArgs","_key3","concat","isObject","isFunction","errorHandler","errorMessages","initialIsRequired","initialType","initialContent","handlerType","handlersType","selectorType","changeType","changeField","validators","changes","initial","some","field","property","hasOwnProperty","selector","handler","_handler","extractChanges","state","causedChanges","current","updateState","didStateUpdate","_handler$field","create","didUpdate","update","validate","getChanges","_len","fns","_key","x","reduceRight","y","f","compose","configIsRequired","configType","deprecation","config","urls","paths","vs","monacoBase","merge","assign","CANCELATION_MESSAGE","msg","makeCancelable","promise","hasCanceled_","wrappedPromise","Promise","resolve","reject","then","val","cancel","_state$create","isInitialized","monaco","_state$create2","_arrayWithHoles","Symbol","iterator","_arr","_n","_d","_e","_s","_i","next","done","_iterableToArrayLimit","o","minLen","n","slice","from","test","_unsupportedIterableToArray","_nonIterableRest","getState","setState","injectScripts","script","appendChild","getMonacoLoaderScript","configureLoader","src","_ref2","loaderScript","createElement","onload","onerror","_ref3","require","storeMonacoInstance","wrapperPromise","loader","globalConfig","_validators$config","init","_ref","editor","__getMonacoInstance","_ref4","v","wrapper","textAlign","fullWidth","width","hide","Y","container","justifyContent","alignItems","$","me","H","ye","r","isEditorReady","loading","t","a","className","m","wrapperProps","E","K","ref","k","l","Re","ge","D","h","getModel","te","De","createModel","be","Uri","ie","original","modified","language","originalLanguage","modifiedLanguage","originalModelPath","modifiedModelPath","keepCurrentOriginalModel","g","keepCurrentModifiedModel","N","P","options","V","z","F","j","beforeMount","A","onMount","q","M","O","re","T","s","S","c","w","b","Se","catch","dispose","_c","I","getOriginalEditor","setModel","getModifiedEditor","getOption","EditorOption","readOnly","setValue","getValue","executeEdits","range","getFullModelRange","forceMoveMarkers","pushUndoStop","setModelLanguage","setTheme","updateOptions","L","oe","U","createDiffEditor","automaticLayout","ne","ke","Te","se","ve","Ue","_","Map","fe","defaultValue","defaultLanguage","defaultPath","overrideServices","saveViewState","keepCurrentModel","onValidate","ue","C","Q","B","p","Ne","R","set","restoreViewState","d$1","revealLine","X","model","W","onDidChangeModelContent","onDidChangeMarkers","G","uri","find","J","getModelMarkers","resource","We","Ft","ze","ZoomIn","ZoomOut","getEditorOptions","darkMode","isLargeFile","baseOptions","folding","foldingStrategy","foldingHighlight","showFoldingControls","unfoldOnClickAfterEndOfLine","autoClosingBrackets","autoClosingQuotes","autoIndent","autoSurround","bracketPairColorization","enabled","independentColorPoolPerBracketType","matchBrackets","formatOnPaste","formatOnType","minimap","showSlider","renderCharacters","maxColumn","scale","side","addExtraSpaceOnTop","autoFindInSelection","seedSearchStringFromSelection","largeFileOptimizations","accessibilitySupport","lineNumbers","renderLineHighlight","roundedSelection","scrollBeyondLastLine","tabSize","multiCursorModifier","multiCursorMergeOverlapping","columnSelection","glyphMargin","overviewRulerBorder","overviewRulerLanes","renderLineHighlightOnlyWhenFocus","quickSuggestions","other","comments","strings","renderValidationDecorations","renderWhitespace","renderControlCharacters","renderIndentGuides","occurrencesHighlight","wordBasedSuggestions","suggestOnTriggerCharacters","parameterHints","maxTokenizationLineLength","links","parseJsonError","jsonString","exec","positionToLineColumn","lineContent","replace","useJsonValidation","errors","setErrors","isValid","setIsValid","useCallback","validationErrors","trim","validateJson","setModelMarkers","markers","modelUri","endColumn","separators","nextSeparatorPos","sep","pos","startLineNumber","startColumn","endLineNumber","tags","jsonErrorToMarker","useJsonEditor","initialValue","indentSize","setIndentSize","setError","format","formatted","parsed","formatJson","compress","compressed","inString","escaped","char","compressJson","fix","fixed","initialError","fixedJson","tryFixJson","PREDEFINED_SCHEMAS","fileMatch","USER_SCHEMAS_STORAGE_KEY","getAllSchemas","entries","schema","predefined","getUserSchemas","storedSchemas","saveUserSchemas","useJsonSchema","jsonContent","setSchemas","selectedSchemaId","setSelectedSchemaId","latestSchemaIdRef","useRef","builtInSchemas","savedSchemas","userSchemas","schemaId","languages","json","jsonDefaults","currentOptions","allowComments","enableSchemaRequest","schemaRequest","getDiagnosticsOptions","setDiagnosticsOptions","selectedSchema","configureJsonSchema","addSchema","updatedSchemas","addUserSchema","allSchemas","deleteSchema","deleteUserSchema","updateSchema","updatedSchema","updateUserSchema","autoDetectSchema","detectedSchemaId","version","dependencies","compilerOptions","include","rules","extends","swagger","openapi","detectPattern","RegExp","detectSchema","query","setMatches","useBreakpoint","isXs","isSm","isMd","isLg","isXl","isTablet","isDesktop","isLargeDesktop","breakpoint","useTouchDevice","isTouch","setIsTouch","isTouchDevice","navigator","maxTouchPoints","msMaxTouchPoints","SHORTCUTS","FORMAT","modifier","COMPRESS","SEARCH","SAVE","NEW","OPEN","DIFF","HELP","FOLD_ALL","UNFOLD_ALL","UNDO","REDO","Add","AutoFixHigh","Delete","Edit","HelpOutline","SchemaSelector","onSelectSchema","onAddSchema","onDeleteSchema","onUpdateSchema","onAutoDetect","editingSchema","setEditingSchema","schemaName","setSchemaName","schemaUri","setSchemaUri","schemaDescription","setSchemaDescription","schemaFileMatch","setSchemaFileMatch","schemaContent","setSchemaContent","schemaError","setSchemaError","schemaSource","setSchemaSource","handleCloseDialog","InputLabel","Select","labelId","visibility","HelpOutlineIcon","stopPropagation","handleOpenEditDialog","EditIcon","handleDeleteSchema","confirm","DeleteIcon","AddIcon","AutoFixHighIcon","maxWidth","Alert","TextField","helperText","multiline","rows","fileMatchArray","pattern","newSchema","EditorToolbar","onSearchClick","onSettingsClick","onFoldAllClick","onUnfoldAllClick","onKeyboardShortcutsClick","onIncreaseFontSize","onDecreaseFontSize","onAutoDetectSchema","borderBottom","borderColor","overflowX","FormatIndentIncrease","pdxJsonEditor","CompressOutlined","Healing","orientation","flexItem","mx","UnfoldLess","UnfoldMore","getEditorRef","trigger","Undo","Redo","findAction","getAction","run","Search","Keyboard","MoreVert","Schema","MobileEditorToolbar","onSchemaClick","menuAnchorEl","setMenuAnchorEl","speedDialOpen","setSpeedDialOpen","handleMenuClose","actions","icon","FormatIndentIncreaseIcon","CompressOutlinedIcon","HealingIcon","UndoIcon","RedoIcon","SearchIcon","SchemaIcon","top","right","MoreVertIcon","SpeedDial","ariaLabel","bottom","SpeedDialIcon","onOpen","direction","SpeedDialAction","tooltipTitle","tooltipOpen","UnfoldLessIcon","UnfoldMoreIcon","KeyboardIcon","KeyboardShortcutsDialog","paragraph","TableContainer","Paper","Table","TableHead","TableRow","TableCell","TableBody","shortcut","Chip","StatusBar","cursorPosition","fileSize","errorCount","warningCount","formatFileSize","bytes","floor","log","parseFloat","pow","toFixed","statusAttrs","borderTop","flexWrap","CheckCircle","Warning","DEFAULT_JSON","TouchEnabledJsonEditor","externalValue","externalOnChange","isLoading","schemaDialogOpen","setSchemaDialogOpen","performanceMode","setPerformanceMode","setFontSize","increaseFontSize","editorRef","monacoRef","newSize","showAlert","decreaseFontSize","max","editorContainerRef","setCursorPosition","alertOpen","setAlertOpen","alertMessage","setAlertMessage","alertSeverity","setAlertSeverity","gestureMode","setGestureMode","internalValue","setInternalValue","jsonError","setEditorContent","newContent","getPosition","lineCount","getLineCount","lastLineLength","getLineLength","lineNumber","newPosition","min","setPosition","handleFoldAll","handleUnfoldAll","handleFormat","formatAction","handleCompress","parseErr","compressedText","handleTryFix","currentValue","fixErr","handleAutoDetectSchema","detectedSchema","handleSchemaDialogOpen","handleSchemaDialogClose","handleAlertClose","errorLineDecorations","Range","isWholeLine","glyphMarginClassName","overviewRuler","OverviewRulerLane","Right","MinimapPosition","Inline","inlineClassName","deltaDecorations","getElementById","innerHTML","showHelp","setShowHelp","toggleHelp","handlers","prev","isEnabled","handleKeyDown","tagName","isContentEditable","getAttribute","ctrlKey","shiftKey","toUpperCase","preventDefault","toLowerCase","search","save","new","help","foldAll","unfoldAll","altKey","diff","undo","redo","useKeyboardShortcuts","saveFile","newFile","openFile","applySettings","minimapEnabled","minimapShowSlider","minimapRenderCharacters","minimapSide","wordWrap","insertSpaces","indentType","savedSettings","safeTryFixJson","getCurrentContent","setContent","getMonacoRef","handleZoomIn","handleZoomOut","toggleGestureMode","handleTouchEnd","handleDoubleTapTouchEnd","onDoubleTap","delay","lastTapRef","time","touch","changedTouches","currentTime","currentPosition","clientX","clientY","lastTime","lastX","lastY","dx","dy","sqrt","useDoubleTap","handleTouchStart","handlePinchTouchStart","handleTouchMove","handlePinchTouchMove","handlePinchTouchEnd","isPinchEnabled","onPinchIn","onPinchOut","threshold","touchesRef","initialDistanceRef","getDistance","point1","point2","touches","touch1","touch2","currentTouches","currentDistance","distanceDiff","abs","distance","usePinch","handleSwipeTouchStart","handleSwipeTouchEnd","isSwipeEnabled","onSwipeLeft","onSwipeRight","onSwipeUp","onSwipeDown","touchStartRef","touchEndRef","handleSwipe","startX","startY","startTime","endX","endY","endTime","distanceX","distanceY","isQuickSwipe","isQuick","useSwipe","scrollAmount","getVisibleRanges","setScrollPosition","scrollTop","getScrollTop","flexDirection","onTouchStart","onTouchMove","onTouchEnd","left","Editor","registerDocumentFormattingEditProvider","provideDocumentFormattingEdits","registerCompletionItemProvider","triggerCharacters","provideCompletionItems","textUntilPosition","getValueInRange","isInKey","isInValue","lineUntilPosition","getLineContent","suggestions","kind","CompletionItemKind","Property","insertText","detail","documentation","keyMatch","Value","endsWith","startsWith","registerHoverProvider","provideHover","wordInfo","getWordAtPosition","word","isKey","isValue","contents","valueText","valueType","configureJsonLanguage","registerFoldingRangeProvider","provideFoldingRanges","ranges","stack","startLine","matchingBracket","start","end","FoldingRangeKind","Region","configureJsonFolding","onDidChangeCursorPosition","Fab","ZoomInIcon","ZoomOutIcon","Snackbar","autoHideDuration","anchorOrigin","vertical","horizontal","py","gutterBottom","CloudUpload","autoBom","XMLHttpRequest","responseType","response","send","status","MouseEvent","createEvent","initMouseEvent","self","global","userAgent","saveAs","HTMLAnchorElement","URL","webkitURL","download","rel","href","origin","location","createObjectURL","revokeObjectURL","msSaveOrOpenBlob","innerText","HTMLElement","safari","FileReader","onloadend","result","readAsDataURL","module","isFileSystemAccessSupported","async","filename","fallbackSaveFile","pickerOptions","suggestedName","types","accept","fileHandle","parentDirectory","getParentDirectory","startIn","directoryHandle","showSaveFilePicker","createWritable","write","close","getFile","file","handle","blob","isJsonFile","sizeLimit","FileDropZone","onFileDrop","onError","isDragging","setIsDragging","setErrorMessage","showError","setShowError","dropRef","dragCounter","onDragEnter","onDragLeave","onDragOver","onDrop","dataTransfer","files","errorMsg","clearData","CloudUploadIcon","UnsavedChangesDialog","onSave","onDiscard","WarningAmber","LargeFileWarning","onContinue","onCancel","warningThreshold","dangerThreshold","rememberChoice","setRememberChoice","optimizing","setOptimizing","progress","setProgress","sizeLevel","interval","setInterval","clearInterval","disableEscapeKeyDown","WarningAmberIcon","LinearProgress","Checkbox","Close","SaveAs","MobileHeader","menuId","menu","tabIndex","whiteSpace","textOverflow","invisible","SaveAsIcon","ResponsiveLayout","header","sidebar","drawerOpen","setDrawerOpen","useTheme$1","handleDrawerToggle","handleDrawerClose","drawerWidth","mainAttrs","sidebarAttrs","props","Drawer","flexShrink","boxSizing","CloseIcon","useFileOperations","onContentChange","onLargeFile","fileSizeLimit","currentFile","setCurrentFile","originalContent","setOriginalContent","setIsDirty","setIsLoading","setIsInitialized","loadFromStorage","savedState","skipSizeCheck","savedChoice","round","reader","readAsText","readFile","openFileWithPicker","input","onchange","click","multiple","showOpenFilePicker","readFileWithPicker","isLarge","saveCurrentFile","saveOptions","saveResult","updatedFile","safeFilename","ensureJsonExtension","createNew","createNewFile","checkLargeFile","isCurrentFileLarge","clearStorage","MainLayout","editorContent","unsavedChangesDialogOpen","setUnsavedChangesDialogOpen","pendingOperation","setPendingOperation","fileInputRef","currentLargeFile","setCurrentLargeFile","largeFileWarningOpen","setLargeFileWarningOpen","handleLargeFile","handleLargeFileContinue","handleLargeFileCancel","handleBeforeUnload","returnValue","useBeforeUnload","checkUnsavedChanges","handleTriggerFileOpen","handleSetCurrentFile","handleUseFilePickerAPI","proceed","handleUnsavedChangesClose","handleSaveAndContinue","handleDiscardAndContinue","handleNewFile","handleOpenFile","handleFileSelect","handleSaveFile","alert","handleSaveAsFile","handleEditorContentChange","SettingsDialog","setSettings","followSystemTheme","handleSettingChange","setting","FormGroup","Info","ExpandMore","ExpandLess","Refresh","ErrorDisplay","maxErrors","expandedError","setExpandedError","clearDialogOpen","setClearDialogOpen","getErrorIcon","WarningIcon","InfoIcon","formatErrorTime","List","bgcolor","ListItem","secondaryAction","toggleErrorDetails","ExpandLessIcon","ExpandMoreIcon","Collapse","in","timeout","unmountOnExit","pl","pr","pb","VerticalSplit","HorizontalSplit","CompareArrows","ContentCopy","endIcon","ariaExpanded","ariaControls","ariaPressed","ariaDescribedby","rest","ariaProps","pressed","filled","alertAttrs","level","createAlert","AlertTitle","FadeTransition","inProp","Fade","PageTransition","mounted","setMounted","TransitionProps","Slide","Zoom","DiffViewer","originalTitle","modifiedTitle","diffEditorRef","layout","setLayout","isInline","setIsInline","editorOptions","renderSideBySide","renderOverviewRuler","scrollbar","diffWordWrap","ignoreTrimWhitespace","renderIndicators","originalEditable","ToggleButtonGroup","exclusive","newLayout","ToggleButton","VerticalSplitIcon","HorizontalSplitIcon","CompareArrowsIcon","clipboard","writeText","ContentCopyIcon","DiffEditor","transform","keyframes","BugReport","ErrorBoundary","Component","__publicField","hasError","errorInfo","showDetails","onReset","forceUpdate","reload","prevState","getDerivedStateFromError","componentDidCatch","render","fallback","handleReset","RefreshIcon","handleReload","BugReportIcon","toggleDetails","componentStack","App","settingsOpen","setSettingsOpen","diffViewerOpen","setDiffViewerOpen","errorDialogOpen","setErrorDialogOpen","errorAlert","setErrorAlert","diffViewerContent","setDiffViewerContent","originalContentRef","saveOriginalContent","openDiffViewer","triggerFileOpen","CustomEvent","fileInput","querySelector","openFileByPath","filePath","toggleSettings","toggleErrorDialog","handleAppError","CssBaseline","currentContent"],"mappings":"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","x_google_ignoreList":[7,8,9,10,11,12,13,14,15,16,17,18,19,23,24,25,26,27,28,29,30,31,32,33,34,35,45,46,47,48,49,52,53,54,55,56,57,58,59,60,61,62,68,69,73,75,76,83,84,85,86,87,89,90,91,92,98]}