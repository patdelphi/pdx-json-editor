var e=Object.defineProperty,t=(t,n,r)=>(((t,n,r)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r})(t,"symbol"!=typeof n?n+"":n,r),r);import{K as n,c as r,d as o,y as i,u as a,x as l,T as s,g as c,a as d,r as u,i as h,b as m,I as p,M as f,e as g,L as v,f as y,D as b,h as w,j as x,k as S,B as C,F as E,S as k,l as F,m as O,n as M,R as j,o as z,p as L,q as P,s as J,t as I,v as T,w as N,z as D,A as H,C as A,E as R,G as B,H as _,J as W,N as V,O as $,P as U,Q as K,U as X,V as q,W as G,X as Y,Z as Q,Y as Z,_ as ee,$ as te,a0 as ne,a1 as re,a2 as oe,a3 as ie,a4 as ae,a5 as le,a6 as se,a7 as ce,a8 as de,a9 as ue,aa as he,ab as me,ac as pe,ad as fe,ae as ge,af as ve,ag as ye,ah as be,ai as we,aj as xe,ak as Se,al as Ce,am as Ee,an as ke,ao as Fe,ap as Oe,aq as Me,ar as je,as as ze,at as Le,au as Pe,av as Je,aw as Ie,ax as Te,ay as Ne,az as De,aA as He}from"./mui-98729d60.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const Ae={primary:{main:"#3B82F6",light:"#93C5FD",dark:"#1D4ED8",contrastText:"#FFFFFF"},secondary:{main:"#10B981",light:"#6EE7B7",dark:"#059669",contrastText:"#FFFFFF"},success:{main:"#10B981",light:"#6EE7B7",dark:"#059669",contrastText:"#FFFFFF"},warning:{main:"#F59E0B",light:"#FCD34D",dark:"#D97706",contrastText:"#FFFFFF"},error:{main:"#EF4444",light:"#FCA5A5",dark:"#B91C1C",contrastText:"#FFFFFF"},info:{main:"#3B82F6",light:"#93C5FD",dark:"#1D4ED8",contrastText:"#FFFFFF"},light:{background:{default:"#FFFFFF",paper:"#F9FAFB",secondary:"#F3F4F6"},text:{primary:"#111827",secondary:"#6B7280",disabled:"#9CA3AF"},divider:"#E5E7EB",border:"#D1D5DB"},dark:{background:{default:"#1F2937",paper:"#111827",secondary:"#374151"},text:{primary:"#F9FAFB",secondary:"#9CA3AF",disabled:"#6B7280"},divider:"#374151",border:"#4B5563"},highContrast:{background:{default:"#000000",paper:"#121212",secondary:"#1E1E1E"},text:{primary:"#FFFFFF",secondary:"#CCCCCC",disabled:"#999999"},divider:"#444444",border:"#666666"}},Re={fontFamily:["Inter","Roboto","-apple-system","BlinkMacSystemFont",'"Segoe UI"','"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),fontSize:16,h1:{fontSize:"2.5rem",fontWeight:600,lineHeight:1.2,letterSpacing:"-0.01em"},h2:{fontSize:"2rem",fontWeight:600,lineHeight:1.3,letterSpacing:"-0.01em"},h3:{fontSize:"1.5rem",fontWeight:600,lineHeight:1.4,letterSpacing:"-0.01em"},h4:{fontSize:"1.25rem",fontWeight:600,lineHeight:1.4,letterSpacing:"-0.01em"},h5:{fontSize:"1.125rem",fontWeight:600,lineHeight:1.5,letterSpacing:"-0.01em"},h6:{fontSize:"1rem",fontWeight:600,lineHeight:1.5,letterSpacing:"-0.01em"},body1:{fontSize:"1rem",fontWeight:400,lineHeight:1.5,letterSpacing:"0.00938em"},body2:{fontSize:"0.875rem",fontWeight:400,lineHeight:1.5,letterSpacing:"0.00938em"},caption:{fontSize:"0.75rem",fontWeight:400,lineHeight:1.5,letterSpacing:"0.00938em"},button:{fontSize:"0.875rem",fontWeight:500,lineHeight:1.5,letterSpacing:"0.02857em",textTransform:"none"},fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500,fontWeightSemiBold:600,fontWeightBold:700},Be={borderRadius:{small:"4px",medium:"8px",large:"12px",xl:"16px",circle:"50%"}},_e={sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",inner:"inset 0 2px 4px 0 rgba(0, 0, 0, 0.06)",none:"none"},We={typography:Re,shape:Be,spacing:e=>8*e+"px",shadows:_e,transitions:{easing:{easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration:{shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195}},breakpoints:{xs:0,sm:600,md:960,lg:1280,xl:1920},zIndex:{mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500,fab:1600},components:{MuiButton:{styleOverrides:{root:{borderRadius:Be.borderRadius.medium,padding:"8px 16px",textTransform:"none",fontWeight:Re.fontWeightMedium,boxShadow:"none","&:hover":{boxShadow:_e.sm}},sizeSmall:{padding:"6px 12px",fontSize:"0.8125rem"},sizeLarge:{padding:"10px 20px",fontSize:"0.9375rem"},contained:{"&:hover":{boxShadow:_e.md}},outlined:{borderWidth:"1px","&:hover":{borderWidth:"1px"}},text:{padding:"8px 12px"}}},MuiCard:{styleOverrides:{root:{borderRadius:Be.borderRadius.medium,boxShadow:_e.md,overflow:"hidden"}}},MuiPaper:{styleOverrides:{root:{borderRadius:Be.borderRadius.medium},elevation1:{boxShadow:_e.sm},elevation2:{boxShadow:_e.md},elevation3:{boxShadow:_e.lg},elevation4:{boxShadow:_e.xl},elevation5:{boxShadow:_e["2xl"]}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:Be.borderRadius.medium}}}},MuiDialog:{styleOverrides:{paper:{borderRadius:Be.borderRadius.large}}},MuiDrawer:{styleOverrides:{paper:{borderRadius:0}}},MuiAppBar:{styleOverrides:{root:{boxShadow:_e.sm}}},MuiIconButton:{styleOverrides:{root:{borderRadius:Be.borderRadius.medium}}},MuiBadge:{styleOverrides:{badge:{fontWeight:Re.fontWeightMedium,fontSize:"0.65rem"}}},MuiTooltip:{styleOverrides:{tooltip:{borderRadius:Be.borderRadius.small,fontSize:"0.75rem",padding:"6px 12px"}}},MuiChip:{styleOverrides:{root:{borderRadius:Be.borderRadius.medium}}},MuiListItem:{styleOverrides:{root:{borderRadius:Be.borderRadius.small}}},MuiMenuItem:{styleOverrides:{root:{borderRadius:Be.borderRadius.small}}},MuiTableCell:{styleOverrides:{root:{padding:"12px 16px"},head:{fontWeight:Re.fontWeightMedium}}},MuiDivider:{styleOverrides:{root:{margin:"16px 0"}}},MuiSwitch:{styleOverrides:{root:{padding:8},thumb:{boxShadow:_e.sm}}},MuiCheckbox:{styleOverrides:{root:{padding:8}}},MuiRadio:{styleOverrides:{root:{padding:8}}},MuiTab:{styleOverrides:{root:{textTransform:"none",fontWeight:Re.fontWeightMedium,minWidth:"auto",padding:"12px 16px"}}},MuiAlert:{styleOverrides:{root:{borderRadius:Be.borderRadius.medium},standardSuccess:{backgroundColor:"rgba(16, 185, 129, 0.1)",color:Ae.success.dark},standardWarning:{backgroundColor:"rgba(245, 158, 11, 0.1)",color:Ae.warning.dark},standardError:{backgroundColor:"rgba(239, 68, 68, 0.1)",color:Ae.error.dark},standardInfo:{backgroundColor:"rgba(59, 130, 246, 0.1)",color:Ae.info.dark}}},MuiLinearProgress:{styleOverrides:{root:{borderRadius:Be.borderRadius.small,height:6}}},MuiCircularProgress:{styleOverrides:{circle:{strokeLinecap:"round"}}},MuiFab:{styleOverrides:{root:{boxShadow:_e.md,"&:hover":{boxShadow:_e.lg}}}},MuiSlider:{styleOverrides:{thumb:{boxShadow:_e.sm}}}}},Ve={light:{id:"light",name:"浅色",theme:{...We,palette:{mode:"light",primary:Ae.primary,secondary:Ae.secondary,error:Ae.error,warning:Ae.warning,info:Ae.info,success:Ae.success,background:Ae.light.background,text:Ae.light.text,divider:Ae.light.divider,action:{active:Ae.light.text.secondary,hover:"rgba(107, 114, 128, 0.08)",selected:"rgba(107, 114, 128, 0.16)",disabled:"rgba(107, 114, 128, 0.38)",disabledBackground:"rgba(107, 114, 128, 0.12)"}}},monacoTheme:"vs-light"},dark:{id:"dark",name:"深色",theme:{...We,palette:{mode:"dark",primary:{...Ae.primary,main:"#60A5FA"},secondary:Ae.secondary,error:Ae.error,warning:Ae.warning,info:{...Ae.info,main:"#60A5FA"},success:Ae.success,background:Ae.dark.background,text:Ae.dark.text,divider:Ae.dark.divider,action:{active:Ae.dark.text.secondary,hover:"rgba(156, 163, 175, 0.08)",selected:"rgba(156, 163, 175, 0.16)",disabled:"rgba(156, 163, 175, 0.38)",disabledBackground:"rgba(156, 163, 175, 0.12)"}}},monacoTheme:"vs-dark"},highContrast:{id:"highContrast",name:"高对比度",theme:{...We,palette:{mode:"dark",primary:{main:"#FFFFFF",light:"#FFFFFF",dark:"#FFFFFF",contrastText:"#000000"},secondary:{main:"#FFFF00",contrastText:"#000000"},error:{main:"#FF0000",contrastText:"#FFFFFF"},warning:{main:"#FFFF00",contrastText:"#000000"},info:{main:"#00FFFF",contrastText:"#000000"},success:{main:"#00FF00",contrastText:"#000000"},background:Ae.highContrast.background,text:Ae.highContrast.text,divider:Ae.highContrast.divider,action:{active:"#FFFFFF",hover:"rgba(255, 255, 255, 0.2)",selected:"rgba(255, 255, 255, 0.4)",disabled:"rgba(255, 255, 255, 0.5)",disabledBackground:"rgba(255, 255, 255, 0.12)"}}},monacoTheme:"hc-black"},soft:{id:"soft",name:"柔和",theme:{...We,palette:{mode:"light",primary:{main:"#7C3AED",light:"#A78BFA",dark:"#5B21B6",contrastText:"#FFFFFF"},secondary:{main:"#EC4899",light:"#F9A8D4",dark:"#BE185D",contrastText:"#FFFFFF"},error:Ae.error,warning:Ae.warning,info:Ae.info,success:Ae.success,background:{default:"#F5F3FF",paper:"#FFFFFF",secondary:"#F3F4F6"},text:{primary:"#1F2937",secondary:"#6B7280",disabled:"#9CA3AF"},divider:"#E5E7EB",action:{active:"#6B7280",hover:"rgba(107, 114, 128, 0.08)",selected:"rgba(107, 114, 128, 0.16)",disabled:"rgba(107, 114, 128, 0.38)",disabledBackground:"rgba(107, 114, 128, 0.12)"}}},monacoTheme:"vs-light"}},$e=()=>window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",Ue="JSON_PARSE",Ke="FILE_OPERATION",Xe="UNKNOWN",qe="warning",Ge="error",Ye="fatal";class Qe extends Error{constructor(e,t=Xe,n=Ge,r=null){super(e),this.name="AppError",this.type=t,this.severity=n,this.originalError=r,this.timestamp=new Date,this.handled=!1}}class Ze extends Qe{constructor(e,t=null,n=null,r=null){super(e,Ue,Ge,t),this.name="JsonParseError",this.line=n,this.column=r}}class et extends Qe{constructor(e,t,n=null,r=null){super(e,Ke,Ge,r),this.name="FileOperationError",this.operation=t,this.fileName=n}}const tt=new class{constructor(){this.listeners=[],this.errorHistory=[],this.maxHistorySize=50,this.handleError=this.handleError.bind(this),this.addListener=this.addListener.bind(this),this.removeListener=this.removeListener.bind(this),this.getErrorHistory=this.getErrorHistory.bind(this),this.clearErrorHistory=this.clearErrorHistory.bind(this),this.setupGlobalHandlers()}setupGlobalHandlers(){window.addEventListener("unhandledrejection",e=>{const t=e.reason;this.handleError(new Qe(`未处理的Promise错误: ${t.message||"未知错误"}`,Xe,Ge,t))}),window.addEventListener("error",e=>{e.error&&this.handleError(new Qe(`全局错误: ${e.error.message||"未知错误"}`,Xe,Ge,e.error))})}handleError(e){return e instanceof Qe||(e=e instanceof SyntaxError&&e.message.includes("JSON")?new Ze(e.message,e):new Qe(e.message,Xe,Ge,e)),e.handled=!0,this.addToHistory(e),this.notifyListeners(e),this.logError(e),e}addToHistory(e){this.errorHistory.unshift(e),this.errorHistory.length>this.maxHistorySize&&this.errorHistory.pop();try{const e=this.errorHistory.map(e=>({message:e.message,type:e.type,severity:e.severity,timestamp:e.timestamp.toISOString(),name:e.name}));localStorage.setItem("pdx-json-editor-errors",JSON.stringify(e))}catch(t){}}getErrorHistory(){return[...this.errorHistory]}clearErrorHistory(){this.errorHistory=[];try{localStorage.removeItem("pdx-json-editor-errors")}catch(e){}}addListener(e){"function"!=typeof e||this.listeners.includes(e)||this.listeners.push(e)}removeListener(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}notifyListeners(e){this.listeners.forEach(t=>{try{t(e)}catch(n){}})}logError(e){(e.severity===Ye||e.severity===Ge?console.error:e.severity===qe?console.warn:console.info)(`[${e.timestamp.toLocaleTimeString()}] ${e.name}: ${e.message}`,e.originalError||"")}static extractPositionFromJsonError(e){if(!e||!e.message)return null;const t=e.message.match(/at position (\d+)/i);if(t&&t[1]){return{position:parseInt(t[1],10),line:null,column:null}}const n=e.message.match(/at line (\d+) column (\d+)/i);return n&&n[1]&&n[2]?{line:parseInt(n[1],10),column:parseInt(n[2],10)}:null}static calculateLineAndColumn(e,t){if(!e||null==t)return{line:null,column:null};const n=e.substring(0,t).split("\n");return{line:n.length,column:n[n.length-1].length+1}}static getFriendlyMessage(e){return e?e instanceof Qe?e.message:e instanceof SyntaxError&&e.message.includes("JSON")?`JSON语法错误: ${e.message}`:e instanceof TypeError?`类型错误: ${e.message}`:e instanceof ReferenceError?`引用错误: ${e.message}`:e.message||"发生未知错误":"发生未知错误"}},nt="pdx-json-editor-content",rt="pdx-json-editor-file",ot="pdx-json-editor-settings",it="pdx-json-editor-recent-files",at="pdx-json-editor-theme",lt="pdx-json-editor-schemas";class st{static saveEditorContent(e,t=null){try{if(new Blob([e]).size>5242880)throw new Error("内容过大，无法保存到本地存储");if(localStorage.setItem(nt,e),t){const e={name:t.name,lastModified:t.lastModified,size:t.size,type:t.type,path:t.path};localStorage.setItem(rt,JSON.stringify(e))}return!0}catch(n){const e="QuotaExceededError"===n.name||n.message.includes("quota")||n.message.includes("storage");return tt.handleError(new et(e?"文件过大，超出本地存储限制":"保存编辑器内容到本地存储失败","write",null,n)),!1}}static loadEditorContent(){try{const e=localStorage.getItem(nt),t=localStorage.getItem(rt);if(!e)return null;return{content:e,fileInfo:t?JSON.parse(t):null}}catch(e){return tt.handleError(new et("从本地存储加载编辑器内容失败","read",null,e)),null}}static clearEditorContent(){try{return localStorage.removeItem(nt),localStorage.removeItem(rt),!0}catch(e){return tt.handleError(new et("清除编辑器内容失败","delete",null,e)),!1}}static saveEditorSettings(e){try{return localStorage.setItem(ot,JSON.stringify(e)),!0}catch(t){return tt.handleError(new et("保存编辑器设置失败","write",null,t)),!1}}static loadEditorSettings(){try{const e=localStorage.getItem(ot);return e?JSON.parse(e):null}catch(e){return tt.handleError(new et("加载编辑器设置失败","read",null,e)),null}}static saveTheme(e){try{return localStorage.setItem(at,e),!0}catch(t){return tt.handleError(new et("保存主题设置失败","write",null,t)),!1}}static loadTheme(){try{return localStorage.getItem(at)}catch(e){return tt.handleError(new et("加载主题设置失败","read",null,e)),null}}static addFileToHistory(e){try{if(!e||!e.name)return!1;const n=localStorage.getItem(it);let r=[];try{n&&(r=JSON.parse(n),Array.isArray(r)||(r=[]))}catch(t){r=[]}const o={name:e.name,path:e.path||"",lastModified:e.lastModified||Date.now(),size:e.size||0,timestamp:Date.now()};e.content&&e.size&&e.size<512e3&&(o.content=e.content);const i=r.findIndex(e=>e.name===o.name&&e.path===o.path);-1!==i?r[i]=o:(r.unshift(o),r.length>10&&r.pop());const a=JSON.stringify(r);return localStorage.setItem(it,a),window.dispatchEvent(new StorageEvent("storage",{key:it,newValue:a})),!0}catch(n){return tt.handleError(new et("添加文件到历史记录失败","write",null==e?void 0:e.name,n)),!1}}static getFileHistory(){try{const t=localStorage.getItem(it);if(!t)return[];try{const e=JSON.parse(t);return Array.isArray(e)?e:[]}catch(e){return[]}}catch(t){return tt.handleError(new et("获取文件历史记录失败","read",null,t)),[]}}static clearFileHistory(){try{return localStorage.removeItem(it),!0}catch(e){return tt.handleError(new et("清除文件历史记录失败","delete",null,e)),!1}}static saveSchemas(e){try{return localStorage.setItem(lt,JSON.stringify(e)),!0}catch(t){return tt.handleError(new et("保存JSON Schema失败","write",null,t)),!1}}static loadSchemas(){try{const e=localStorage.getItem(lt);return e?JSON.parse(e):null}catch(e){return tt.handleError(new et("加载JSON Schema失败","read",null,e)),null}}static isStorageAvailable(){try{const e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}}const ct=n({themeId:"light",theme:r(Ve.light.theme),monacoTheme:"vs-light",setThemeId:()=>{},toggleTheme:()=>{},availableThemes:Ve}),dt=({children:e})=>{var t,n;const[l,s]=o("light");i(()=>{try{const e=st.loadTheme();if("system"===localStorage.getItem("pdx-json-editor-theme-mode")){const e=$e();s(e)}else if(e&&Ve[e])s(e);else{const e=$e();s(e)}}catch(e){tt.handleError(e);const t=$e();s(t)}},[]),i(()=>{try{st.saveTheme(l),(e=>{switch(document.documentElement.style.transition="background-color 0.3s ease, color 0.3s ease",document.body.style.transition="background-color 0.3s ease, color 0.3s ease",document.documentElement.setAttribute("data-theme",e),e){case"dark":document.documentElement.style.setProperty("--background-color","#1F2937"),document.documentElement.style.setProperty("--text-color","#F9FAFB"),document.documentElement.style.setProperty("--primary-color","#60A5FA"),document.documentElement.style.setProperty("--secondary-color","#10B981"),document.documentElement.style.setProperty("--border-color","#374151");break;case"highContrast":document.documentElement.style.setProperty("--background-color","#000000"),document.documentElement.style.setProperty("--text-color","#FFFFFF"),document.documentElement.style.setProperty("--primary-color","#FFFFFF"),document.documentElement.style.setProperty("--secondary-color","#FFFF00"),document.documentElement.style.setProperty("--border-color","#FFFFFF");break;case"soft":document.documentElement.style.setProperty("--background-color","#F5F3FF"),document.documentElement.style.setProperty("--text-color","#1F2937"),document.documentElement.style.setProperty("--primary-color","#7C3AED"),document.documentElement.style.setProperty("--secondary-color","#EC4899"),document.documentElement.style.setProperty("--border-color","#E5E7EB");break;default:document.documentElement.style.setProperty("--background-color","#FFFFFF"),document.documentElement.style.setProperty("--text-color","#111827"),document.documentElement.style.setProperty("--primary-color","#3B82F6"),document.documentElement.style.setProperty("--secondary-color","#10B981"),document.documentElement.style.setProperty("--border-color","#E5E7EB")}setTimeout(()=>{document.documentElement.style.transition="",document.body.style.transition=""},300)})(l)}catch(e){tt.handleError(e)}},[l]),i(()=>{if("system"===localStorage.getItem("pdx-json-editor-theme-mode")){return(e=>{if(!window.matchMedia)return()=>{};const t=window.matchMedia("(prefers-color-scheme: dark)"),n=t=>{const n=t.matches?"dark":"light";e(n)};return t.addEventListener?t.addEventListener("change",n):t.addListener&&t.addListener(n),()=>{t.removeEventListener?t.removeEventListener("change",n):t.removeListener&&t.removeListener(n)}})(e=>{s(e)})}},[]);const c=r((null==(t=Ve[l])?void 0:t.theme)||Ve.light.theme),d=(null==(n=Ve[l])?void 0:n.monacoTheme)||"vs-light",u={themeId:l,theme:c,monacoTheme:d,setThemeId:s,toggleTheme:()=>{s(e=>"light"===e?"dark":"light"),localStorage.setItem("pdx-json-editor-theme-mode","manual")},setThemeMode:e=>{if("system"===e){localStorage.setItem("pdx-json-editor-theme-mode","system");const e=$e();s(e)}else localStorage.setItem("pdx-json-editor-theme-mode","manual")},availableThemes:Ve};return a(ct.Provider,{value:u,children:e})},ut=()=>l(ct);function ht({children:e}){return a(dt,{children:a(mt,{children:e})})}function mt({children:e}){const{theme:t}=ut();return a(s,{theme:t,children:e})}var pt={},ft={};const gt=c(d);var vt;function yt(){return vt||(vt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=gt}(ft)),ft}var bt=h;Object.defineProperty(pt,"__esModule",{value:!0});var wt=pt.default=void 0,xt=bt(yt()),St=u();wt=pt.default=(0,xt.default)((0,St.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu");var Ct={},Et=h;Object.defineProperty(Ct,"__esModule",{value:!0});var kt=Ct.default=void 0,Ft=Et(yt()),Ot=u();kt=Ct.default=(0,Ft.default)((0,Ot.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2m-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3z"}),"CreateNewFolder");var Mt={},jt=h;Object.defineProperty(Mt,"__esModule",{value:!0});var zt=Mt.default=void 0,Lt=jt(yt()),Pt=u();zt=Mt.default=(0,Lt.default)((0,Pt.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"}),"FolderOpen");var Jt={},It=h;Object.defineProperty(Jt,"__esModule",{value:!0});var Tt=Jt.default=void 0,Nt=It(yt()),Dt=u();Tt=Jt.default=(0,Nt.default)((0,Dt.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");var Ht={},At=h;Object.defineProperty(Ht,"__esModule",{value:!0});var Rt=Ht.default=void 0,Bt=At(yt()),_t=u();Rt=Ht.default=(0,Bt.default)((0,_t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error");var Wt={},Vt=h;Object.defineProperty(Wt,"__esModule",{value:!0});var $t=Wt.default=void 0,Ut=Vt(yt()),Kt=u();$t=Wt.default=(0,Ut.default)((0,Kt.jsx)("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"BrightnessMedium");var Xt={},qt=h;Object.defineProperty(Xt,"__esModule",{value:!0});var Gt=Xt.default=void 0,Yt=qt(yt()),Qt=u();Gt=Xt.default=(0,Yt.default)((0,Qt.jsx)("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z"}),"LightMode");var Zt={},en=h;Object.defineProperty(Zt,"__esModule",{value:!0});var tn=Zt.default=void 0,nn=en(yt()),rn=u();tn=Zt.default=(0,nn.default)((0,rn.jsx)("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1"}),"DarkMode");var on={},an=h;Object.defineProperty(on,"__esModule",{value:!0});var ln=on.default=void 0,sn=an(yt()),cn=u();ln=on.default=(0,sn.default)((0,cn.jsx)("path",{d:"M12 22c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10m1-17.93c3.94.49 7 3.85 7 7.93s-3.05 7.44-7 7.93z"}),"Contrast");var dn={},un=h;Object.defineProperty(dn,"__esModule",{value:!0});var hn=dn.default=void 0,mn=un(yt()),pn=u();hn=dn.default=(0,mn.default)((0,pn.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"}),"Palette");var fn={},gn=h;Object.defineProperty(fn,"__esModule",{value:!0});var vn=fn.default=void 0,yn=gn(yt()),bn=u();vn=fn.default=(0,yn.default)((0,bn.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");var wn={},xn=h;Object.defineProperty(wn,"__esModule",{value:!0});var Sn=wn.default=void 0,Cn=xn(yt()),En=u();function kn(){const{themeId:e,setThemeId:t,toggleTheme:n,setThemeMode:r,availableThemes:l}=ut(),[s,c]=o(null),[d,u]=o(!1),[h,I]=o(!1);i(()=>{const e=localStorage.getItem("pdx-json-editor-theme-mode");I("system"===e)},[]);const T=()=>{c(null)},N=()=>{u(!1)},D=e=>{const t=e.target.checked;I(t),r(t?"system":"manual")};return a(J,{children:[a(m,{title:"主题设置",children:a(p,{color:"inherit",onClick:e=>{c(e.currentTarget)},"aria-controls":"theme-menu","aria-haspopup":"true",children:(e=>{switch(e){case"light":return a(Gt,{});case"dark":return a(tn,{});case"highContrast":return a(ln,{});case"soft":return a(hn,{});default:return a($t,{})}})(e)})}),a(f,{id:"theme-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:T,children:[a(g,{onClick:()=>{n(),T()},children:[a(v,{children:a("light"===e?tn:Gt,{})}),a(y,{primary:"light"===e?"切换到深色模式":"切换到浅色模式"})]}),a(g,{onClick:()=>{D({target:{checked:!h}}),T()},children:[a(v,{children:a(Sn,{})}),a(y,{primary:h?"停止跟随系统":"跟随系统主题"})]}),a(b,{}),a(g,{onClick:()=>{u(!0),T()},children:[a(v,{children:a(vn,{})}),a(y,{primary:"主题设置"})]})]}),a(w,{open:d,onClose:N,children:[a(x,{children:"主题设置"}),a(S,{children:[a(C,{sx:{mb:3},children:[a(E,{control:a(k,{checked:h,onChange:D,color:"primary"}),label:"跟随系统主题"}),a(F,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:"启用后，主题将自动跟随系统设置变化"})]}),a(b,{sx:{my:2}}),a(O,{component:"fieldset",disabled:h,children:[a(M,{component:"legend",children:"选择主题"}),a(j,{"aria-label":"theme",name:"theme",value:e,onChange:e=>{t(e.target.value),h&&(I(!1),r("manual"))},children:Object.values(l).map(e=>a(E,{value:e.id,control:a(z,{}),label:e.name},e.id))}),h&&a(F,{variant:"caption",color:"text.secondary",sx:{mt:1},children:"跟随系统主题已启用，手动选择主题将被覆盖"})]})]}),a(L,{children:a(P,{onClick:N,children:"关闭"})})]})]})}Sn=wn.default=(0,Cn.default)((0,En.jsx)("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2zM4 6h16v10H4z"}),"Computer");const Fn=({id:e,role:t,label:n,description:r,hidden:o,live:i,required:a,expanded:l,checked:s,selected:c,disabled:d,invalid:u,errorMessage:h,controls:m,labelledBy:p,describedBy:f,flowTo:g,owns:v}={})=>{const y={};return e&&(y.id=e),t&&(y["aria-role"]=t),n&&(y["aria-label"]=n),r&&(y["aria-description"]=r),void 0!==o&&(y["aria-hidden"]=o.toString()),i&&(y["aria-live"]=i),void 0!==a&&(y["aria-required"]=a.toString()),void 0!==l&&(y["aria-expanded"]=l.toString()),void 0!==s&&(y["aria-checked"]=s.toString()),void 0!==c&&(y["aria-selected"]=c.toString()),void 0!==d&&(y["aria-disabled"]=d.toString()),void 0!==u&&(y["aria-invalid"]=u.toString(),u&&h&&(y["aria-errormessage"]=h)),m&&(y["aria-controls"]=m),p&&(y["aria-labelledby"]=p),f&&(y["aria-describedby"]=f),g&&(y["aria-flowto"]=g),v&&(y["aria-owns"]=v),y},On=(e="aria")=>`${e}-${Math.random().toString(36).substring(2,11)}`,Mn=e=>({id:On("nav"),role:"navigation","aria-label":e});function jn({onMenuClick:e,onNewFile:t,onOpenFile:n,onSaveFile:r,onSaveAsFile:o,onErrorClick:i,currentFileName:l,isDirty:s}){const c=I(),d=T(c.breakpoints.down("md")),u=Mn("主导航");return a(H,{position:"static",color:"default",elevation:1,...u,children:a(N,{children:[d&&a(p,{color:"inherit","aria-label":"打开侧边栏","aria-haspopup":"true","aria-expanded":"false",edge:"start",onClick:e,sx:{mr:2},children:a(wt,{})}),a(F,{variant:"h6",component:"div",sx:{flexGrow:0,mr:4},...Fn({role:"heading",label:"PDX JSON 编辑器"}),children:"PDX JSON 编辑器"}),a(C,{sx:{display:"flex",gap:1,flexGrow:1},children:[a(P,{startIcon:a(kt,{}),size:"small",variant:"outlined",onClick:t,sx:{display:{xs:"none",sm:"flex"}},"aria-label":"新建文件",children:"新建"}),a(P,{startIcon:a(zt,{}),size:"small",variant:"outlined",onClick:n,sx:{display:{xs:"none",sm:"flex"}},"aria-label":"打开文件",children:"打开"}),a(P,{startIcon:a(Tt,{}),size:"small",variant:"outlined",onClick:r,disabled:!s,sx:{display:{xs:"none",sm:"flex"}},"aria-label":"保存文件"+(s?"（有未保存的更改）":""),children:["保存",s?" *":""]}),a(F,{variant:"body2",sx:{ml:2,alignSelf:"center",color:s?"warning.main":"text.secondary",display:{xs:"none",md:"block"}},"aria-live":"polite",role:"status",children:[l||"未命名",s?" (未保存)":""]})]}),i&&a(m,{title:"错误历史",children:a(p,{color:"inherit",onClick:i,sx:{mr:1},"aria-label":`查看错误历史（${tt.getErrorHistory().length}个错误）`,children:a(D,{badgeContent:tt.getErrorHistory().length,color:"error",children:a(Rt,{})})})}),a(kn,{})]})})}function zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ln(Object(n),!0).forEach(function(t){zn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Jn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function In(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach(function(t){Tn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Hn(e){return function t(){for(var n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return o.length>=e.length?e.apply(this,o):function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t.apply(n,[].concat(o,r))}}}function An(e){return{}.toString.call(e).includes("Object")}function Rn(e){return"function"==typeof e}var Bn=Hn(function(e,t){throw new Error(e[t]||e.default)})({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),_n={changes:function(e,t){return An(t)||Bn("changeType"),Object.keys(t).some(function(t){return n=e,r=t,!Object.prototype.hasOwnProperty.call(n,r);var n,r})&&Bn("changeField"),t},selector:function(e){Rn(e)||Bn("selectorType")},handler:function(e){Rn(e)||An(e)||Bn("handlerType"),An(e)&&Object.values(e).some(function(e){return!Rn(e)})&&Bn("handlersType")},initial:function(e){var t;e||Bn("initialIsRequired"),An(e)||Bn("initialType"),t=e,Object.keys(t).length||Bn("initialContent")}};function Wn(e,t){return Rn(t)?t(e.current):t}function Vn(e,t){return e.current=Dn(Dn({},e.current),t),t}function $n(e,t,n){return Rn(t)?t(e.current):Object.keys(n).forEach(function(n){var r;return null===(r=t[n])||void 0===r?void 0:r.call(t,e.current[n])}),n}var Un={create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_n.initial(e),_n.handler(t);var n={current:e},r=Hn($n)(n,t),o=Hn(Vn)(n),i=Hn(_n.changes)(e),a=Hn(Wn)(n);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return _n.selector(e),e(n.current)},function(e){!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}}(r,o,i,a)(e)}]}};var Kn,Xn=(Kn=function(e,t){throw new Error(e[t]||e.default)},function e(){for(var t=this,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return r.length>=Kn.length?Kn.apply(this,r):function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e.apply(t,[].concat(r,o))}})({configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "}),qn={config:function(e){var t;return e||Xn("configIsRequired"),t=e,{}.toString.call(t).includes("Object")||Xn("configType"),e.urls?{paths:{vs:e.urls.monacoBase}}:e}};function Gn(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],Gn(e[n],t[n]))}),Pn(Pn({},e),t)}var Yn={type:"cancelation",msg:"operation is manually canceled"};function Qn(e){var t=!1,n=new Promise(function(n,r){e.then(function(e){return t?r(Yn):n(e)}),e.catch(r)});return n.cancel=function(){return t=!0},n}var Zn,er,tr=Un.create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}),nr=(er=2,function(e){if(Array.isArray(e))return e}(Zn=tr)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(s){o=!0,i=s}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}}(Zn,er)||function(e,t){if(e){if("string"==typeof e)return In(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?In(e,t):void 0}}(Zn,er)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),rr=nr[0],or=nr[1];function ir(e){return document.body.appendChild(e)}function ar(e){var t,n,r=rr(function(e){return{config:e.config,reject:e.reject}}),o=(t="".concat(r.config.paths.vs,"/loader.js"),n=document.createElement("script"),t&&(n.src=t),n);return o.onload=function(){return e()},o.onerror=r.reject,o}function lr(){var e=rr(function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(t){sr(t),e.resolve(t)},function(t){e.reject(t)})}function sr(e){rr().monaco||or({monaco:e})}var cr=new Promise(function(e,t){return or({resolve:e,reject:t})}),dr={config:function(e){var t=qn.config(e),n=t.monaco,r=Jn(t,["monaco"]);or(function(e){return{config:Gn(e.config,r),monaco:n}})},init:function(){var e=rr(function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}});if(!e.isInitialized){if(or({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Qn(cr);if(window.monaco&&window.monaco.editor)return sr(window.monaco),e.resolve(window.monaco),Qn(cr);!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}}(ir,ar)(lr)}return Qn(cr)},__getMonacoInstance:function(){return rr(function(e){return e.monaco})}},ur={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},hr={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}};var mr=function({children:e}){return R.createElement("div",{style:hr.container},e)};var pr=A(function({width:e,height:t,isEditorReady:n,loading:r,_ref:o,className:i,wrapperProps:a}){return R.createElement("section",{style:{...ur.wrapper,width:e,height:t},...a},!n&&R.createElement(mr,null,r),R.createElement("div",{ref:o,style:{...ur.fullWidth,...!n&&ur.hide},className:i}))});var fr=function(e){i(e,[])};var gr=function(e,t,n=!0){let r=B(!0);i(r.current||!n?()=>{r.current=!1}:e,t)};function vr(){}function yr(e,t,n,r){return function(e,t){return e.editor.getModel(br(e,t))}(e,r)||function(e,t,n,r){return e.editor.createModel(t,n,r?br(e,r):void 0)}(e,t,n,r)}function br(e,t){return e.Uri.parse(t)}var wr=function({original:e,modified:t,language:n,originalLanguage:r,modifiedLanguage:a,originalModelPath:l,modifiedModelPath:s,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:d=!1,theme:u="light",loading:h="Loading...",options:m={},height:p="100%",width:f="100%",className:g,wrapperProps:v={},beforeMount:y=vr,onMount:b=vr}){let[w,x]=o(!1),[S,C]=o(!0),E=B(null),k=B(null),F=B(null),O=B(b),M=B(y),j=B(!1);fr(()=>{let e=dr.init();return e.then(e=>(k.current=e)&&C(!1)).catch(e=>"cancelation"!==(null==e?void 0:e.type)&&void 0),()=>E.current?function(){var e,t,n,r;let o=null==(e=E.current)?void 0:e.getModel();c||null==(t=null==o?void 0:o.original)||t.dispose(),d||null==(n=null==o?void 0:o.modified)||n.dispose(),null==(r=E.current)||r.dispose()}():e.cancel()}),gr(()=>{if(E.current&&k.current){let t=E.current.getOriginalEditor(),o=yr(k.current,e||"",r||n||"text",l||"");o!==t.getModel()&&t.setModel(o)}},[l],w),gr(()=>{if(E.current&&k.current){let e=E.current.getModifiedEditor(),r=yr(k.current,t||"",a||n||"text",s||"");r!==e.getModel()&&e.setModel(r)}},[s],w),gr(()=>{let e=E.current.getModifiedEditor();e.getOption(k.current.editor.EditorOption.readOnly)?e.setValue(t||""):t!==e.getValue()&&(e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),e.pushUndoStop())},[t],w),gr(()=>{var t,n;null==(n=null==(t=E.current)?void 0:t.getModel())||n.original.setValue(e||"")},[e],w),gr(()=>{let{original:e,modified:t}=E.current.getModel();k.current.editor.setModelLanguage(e,r||n||"text"),k.current.editor.setModelLanguage(t,a||n||"text")},[n,r,a],w),gr(()=>{var e;null==(e=k.current)||e.editor.setTheme(u)},[u],w),gr(()=>{var e;null==(e=E.current)||e.updateOptions(m)},[m],w);let z=_(()=>{var o;if(!k.current)return;M.current(k.current);let i=yr(k.current,e||"",r||n||"text",l||""),c=yr(k.current,t||"",a||n||"text",s||"");null==(o=E.current)||o.setModel({original:i,modified:c})},[n,t,a,e,r,l,s]),L=_(()=>{var e;!j.current&&F.current&&(E.current=k.current.editor.createDiffEditor(F.current,{automaticLayout:!0,...m}),z(),null==(e=k.current)||e.editor.setTheme(u),x(!0),j.current=!0)},[m,u,z]);return i(()=>{w&&O.current(E.current,k.current)},[w]),i(()=>{!S&&!w&&L()},[S,w,L]),R.createElement(pr,{width:f,height:p,isEditorReady:w,loading:h,_ref:F,className:g,wrapperProps:v})};A(wr);var xr=function(e){let t=B();return i(()=>{t.current=e},[e]),t.current},Sr=new Map;var Cr=function({defaultValue:e,defaultLanguage:t,defaultPath:n,value:r,language:a,path:l,theme:s="light",line:c,loading:d="Loading...",options:u={},overrideServices:h={},saveViewState:m=!0,keepCurrentModel:p=!1,width:f="100%",height:g="100%",className:v,wrapperProps:y={},beforeMount:b=vr,onMount:w=vr,onChange:x,onValidate:S=vr}){let[C,E]=o(!1),[k,F]=o(!0),O=B(null),M=B(null),j=B(null),z=B(w),L=B(b),P=B(),J=B(r),I=xr(l),T=B(!1),N=B(!1);fr(()=>{let e=dr.init();return e.then(e=>(O.current=e)&&F(!1)).catch(e=>"cancelation"!==(null==e?void 0:e.type)&&void 0),()=>{return M.current?(null==(t=P.current)||t.dispose(),p?m&&Sr.set(l,M.current.saveViewState()):null==(n=M.current.getModel())||n.dispose(),void M.current.dispose()):e.cancel();var t,n}}),gr(()=>{var o,i,s,c;let d=yr(O.current,e||r||"",t||a||"",l||n||"");d!==(null==(o=M.current)?void 0:o.getModel())&&(m&&Sr.set(I,null==(i=M.current)?void 0:i.saveViewState()),null==(s=M.current)||s.setModel(d),m&&(null==(c=M.current)||c.restoreViewState(Sr.get(l))))},[l],C),gr(()=>{var e;null==(e=M.current)||e.updateOptions(u)},[u],C),gr(()=>{!M.current||void 0===r||(M.current.getOption(O.current.editor.EditorOption.readOnly)?M.current.setValue(r):r!==M.current.getValue()&&(N.current=!0,M.current.executeEdits("",[{range:M.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),M.current.pushUndoStop(),N.current=!1))},[r],C),gr(()=>{var e,t;let n=null==(e=M.current)?void 0:e.getModel();n&&a&&(null==(t=O.current)||t.editor.setModelLanguage(n,a))},[a],C),gr(()=>{var e;void 0!==c&&(null==(e=M.current)||e.revealLine(c))},[c],C),gr(()=>{var e;null==(e=O.current)||e.editor.setTheme(s)},[s],C);let D=_(()=>{var o;if(j.current&&O.current&&!T.current){L.current(O.current);let i=l||n,d=yr(O.current,r||e||"",t||a||"",i||"");M.current=null==(o=O.current)?void 0:o.editor.create(j.current,{model:d,automaticLayout:!0,...u},h),m&&M.current.restoreViewState(Sr.get(i)),O.current.editor.setTheme(s),void 0!==c&&M.current.revealLine(c),E(!0),T.current=!0}},[e,t,n,r,a,l,u,h,m,s,c]);return i(()=>{C&&z.current(M.current,O.current)},[C]),i(()=>{!k&&!C&&D()},[k,C,D]),J.current=r,i(()=>{var e,t;C&&x&&(null==(e=P.current)||e.dispose(),P.current=null==(t=M.current)?void 0:t.onDidChangeModelContent(e=>{N.current||x(M.current.getValue(),e)}))},[C,x]),i(()=>{if(C){let e=O.current.editor.onDidChangeMarkers(e=>{var t;let n=null==(t=M.current.getModel())?void 0:t.uri;if(n&&e.find(e=>e.path===n.path)){let e=O.current.editor.getModelMarkers({resource:n});null==S||S(e)}});return()=>{null==e||e.dispose()}}return()=>{}},[C,S]),R.createElement(pr,{width:f,height:g,isEditorReady:C,loading:d,_ref:j,className:v,wrapperProps:y})},Er=A(Cr),kr={},Fr=h;Object.defineProperty(kr,"__esModule",{value:!0});var Or=kr.default=void 0,Mr=Fr(yt()),jr=u();Or=kr.default=(0,Mr.default)([(0,jr.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),(0,jr.jsx)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn");var zr={},Lr=h;Object.defineProperty(zr,"__esModule",{value:!0});var Pr=zr.default=void 0,Jr=Lr(yt()),Ir=u();Pr=zr.default=(0,Jr.default)((0,Ir.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOut");const Tr=(e=!1,t=!1,n=!1,r=14)=>{const o={language:"json",theme:e?"vs-dark":"vs-light",automaticLayout:!0,fontSize:r,folding:!0,foldingStrategy:"indentation",foldingHighlight:!0,showFoldingControls:"always",unfoldOnClickAfterEndOfLine:!0,autoClosingBrackets:"always",autoClosingQuotes:"always",autoIndent:"full",autoSurround:"languageDefined",bracketPairColorization:{enabled:!0,independentColorPoolPerBracketType:!0},matchBrackets:"always",formatOnPaste:!0,formatOnType:!1,minimap:{enabled:!0,showSlider:"always",renderCharacters:!0,maxColumn:120,scale:1,side:"right"},find:{addExtraSpaceOnTop:!1,autoFindInSelection:"never",seedSearchStringFromSelection:"always"},largeFileOptimizations:!0,accessibilitySupport:"auto",lineNumbers:"on",renderLineHighlight:"all",roundedSelection:!0,scrollBeyondLastLine:!1,tabSize:2,multiCursorModifier:"alt",multiCursorMergeOverlapping:!0,columnSelection:!1,glyphMargin:!0,overviewRulerBorder:!0,overviewRulerLanes:3,renderLineHighlightOnlyWhenFocus:!1,quickSuggestions:{other:!0,comments:!1,strings:!0},renderValidationDecorations:"on"};return n?{...o,folding:!1,minimap:{enabled:!1},bracketPairColorization:{enabled:!1},formatOnPaste:!1,formatOnType:!1,renderWhitespace:"none",renderControlCharacters:!1,renderIndentGuides:!1,occurrencesHighlight:!1,renderLineHighlight:"none",largeFileOptimizations:!0,wordBasedSuggestions:!1,suggestOnTriggerCharacters:!1,scrollBeyondLastLine:!1,quickSuggestions:!1,parameterHints:{enabled:!1},maxTokenizationLineLength:5e3,links:!1,hover:{enabled:!1}}:o},Nr=(e,t)=>{const n=e.message,r=t.split("\n"),o=/at position (\d+)/.exec(n);if(o){const e=parseInt(o[1],10),{line:i,column:a}=Dr(e,t);return[{line:i,column:a,lineContent:i<=r.length?r[i-1]:"",message:n.replace(/^JSON\.parse: /,"").replace(/^Unexpected token /,"意外的标记 "),severity:"error"}]}const i=/at line (\d+) column (\d+)/.exec(n);if(i){const e=parseInt(i[1],10);return[{line:e,column:parseInt(i[2],10),lineContent:e<=r.length?r[e-1]:"",message:n.replace(/^JSON\.parse: /,"").replace(/^Unexpected token /,"意外的标记 "),severity:"error"}]}return[{line:1,column:1,lineContent:r.length>0?r[0]:"",message:n.replace(/^JSON\.parse: /,""),severity:"error"}]},Dr=(e,t)=>{const n=t.substring(0,e).split("\n");return{line:n.length,column:n[n.length-1].length+1}},Hr=()=>{const[e,t]=o([]),[n,r]=o(!0),i=_(e=>{const n=(e=>{if(!e||""===e.trim())return[];try{return JSON.parse(e),[]}catch(t){return Nr(t,e)}})(e);return t(n),r(0===n.length),n},[]),a=_((t,n)=>{if(!t||!n)return;const r=e.map(e=>((e,t)=>{const n=e.lineContent||"";let r=e.column+1;if(n)if(e.message.includes("Unexpected token")){const t=[",","}","]","{","[",":","\n"];let o=-1;for(const r of t){const t=n.indexOf(r,e.column-1);-1!==t&&(-1===o||t<o)&&(o=t)}r=-1!==o?o+1:n.length+1}else(e.message.includes("Expected")||e.message.includes("Missing"))&&(r=n.length+1);return{severity:"error"===e.severity?8:4,message:e.message,startLineNumber:e.line,startColumn:e.column,endLineNumber:e.line,endColumn:r,source:"PDX JSON Editor",modelUri:t,tags:["json-error"]}})(e,n.uri));t.editor.setModelMarkers(n,"pdx-json-editor",r)},[e]);return{errors:e,validate:i,isValid:n,setModelMarkers:a}},Ar=(e="")=>{const t=e||"{}",[n,r]=o(t),[i,a]=o(2),[l,s]=o(null),c=_(()=>{try{const e=((e,t=2)=>{if(!e||""===e.trim())return"";try{const n=JSON.parse(e);return JSON.stringify(n,null,t)}catch(l){throw new Error(`无法格式化无效的JSON: ${l.message}`)}})(n,i);return r(e),s(null),e}catch(e){throw s(e),e}},[n,i]),d=_(()=>{try{const e=(e=>{if(!e||""===e.trim())return"";try{JSON.parse(e);let t=!1,n=!1,r="";for(let o=0;o<e.length;o++){const i=e[o];if(t)r+=i,n?n=!1:"\\"===i?n=!0:'"'===i&&(t=!1);else if('"'===i)t=!0,r+=i;else{if(/\s/.test(i))continue;r+=i}}return r}catch(l){throw new Error(`无法压缩无效的JSON: ${l.message}`)}})(n);return r(e),s(null),e}catch(e){throw s(e),e}},[n]),u=_(()=>{const e=(e=>{if(!e||""===e.trim())return e;try{return JSON.parse(e),e}catch(n){}let t=e.replace(/([{,]\s*)(\w+)(\s*:)/g,'$1"$2"$3').replace(/([{,]\s*)"?(\w+)"?\s*:\s*'([^']*)'(\s*[},])/g,'$1"$2":"$3"$4').replace(/,(\s*[}\]])/g,"$1");try{return JSON.parse(t),t}catch(l){return e}})(n);e!==n&&r(e);try{JSON.parse(e),s(null)}catch(t){s(new Error("无法自动修复JSON，请手动修复语法错误"))}return e},[n]);return{value:n,setValue:r,formatJson:c,compressJson:d,tryFixJson:u,indentSize:i,setIndentSize:a,error:l}},Rr={"package.json":{uri:"https://json.schemastore.org/package.json",fileMatch:["package.json"],name:"NPM包配置",description:"NPM包配置文件的JSON Schema"},"tsconfig.json":{uri:"https://json.schemastore.org/tsconfig.json",fileMatch:["tsconfig.json"],name:"TypeScript配置",description:"TypeScript配置文件的JSON Schema"},"eslintrc.json":{uri:"https://json.schemastore.org/eslintrc.json",fileMatch:[".eslintrc",".eslintrc.json"],name:"ESLint配置",description:"ESLint配置文件的JSON Schema"},"prettierrc.json":{uri:"https://json.schemastore.org/prettierrc.json",fileMatch:[".prettierrc",".prettierrc.json"],name:"Prettier配置",description:"Prettier配置文件的JSON Schema"},"swagger.json":{uri:"https://json.schemastore.org/swagger-2.0.json",fileMatch:["swagger.json"],name:"Swagger 2.0",description:"Swagger 2.0 API文档的JSON Schema"},"openapi.json":{uri:"https://json.schemastore.org/openapi-3.0.json",fileMatch:["openapi.json"],name:"OpenAPI 3.0",description:"OpenAPI 3.0 API文档的JSON Schema"},"github-workflow":{uri:"https://json.schemastore.org/github-workflow.json",fileMatch:[".github/workflows/*.yml",".github/workflows/*.yaml"],name:"GitHub工作流",description:"GitHub Actions工作流配置的JSON Schema"},"docker-compose":{uri:"https://json.schemastore.org/docker-compose.json",fileMatch:["docker-compose.yml","docker-compose.yaml"],name:"Docker Compose",description:"Docker Compose配置文件的JSON Schema"}},Br="pdx-json-editor-schemas",_r=()=>[...Object.entries(Rr).map(([e,t])=>({id:e,...t,predefined:!0})),...Wr()],Wr=()=>{try{const e=localStorage.getItem(Br);return e?JSON.parse(e):[]}catch(e){return[]}},Vr=e=>{try{localStorage.setItem(Br,JSON.stringify(e))}catch(t){}},$r=(e,t)=>{const[n,r]=o([]),[a,l]=o(null),s=B(a);i(()=>{const e=_r();try{const t=st.loadSchemas();if(t&&Array.isArray(t)){const n=t.filter(t=>!e.some(e=>e.id===t.id));return void r([...e,...n])}}catch(t){tt.handleError(t)}r(e)},[]),i(()=>{s.current=a,e&&((e,t=null)=>{if(e&&e.languages&&e.languages.json&&e.languages.json.jsonDefaults)try{let r={validate:!0,allowComments:!1,schemas:[],enableSchemaRequest:!0,schemaRequest:"warning"};try{"function"==typeof e.languages.json.jsonDefaults.getDiagnosticsOptions&&(r=e.languages.json.jsonDefaults.getDiagnosticsOptions())}catch(n){}if(!t)return void e.languages.json.jsonDefaults.setDiagnosticsOptions({...r,schemas:[]});const o=_r().find(e=>e.id===t);if(!o)return;e.languages.json.jsonDefaults.setDiagnosticsOptions({...r,validate:!0,schemas:[{uri:o.uri,fileMatch:o.fileMatch||["*"],schema:o.schema}],enableSchemaRequest:!0})}catch(r){}})(e,a)},[e,a]);const c=_(e=>{(e=>{const t=[...Wr(),{id:`user-schema-${Date.now()}`,...e,predefined:!1}];Vr(t)})(e);const t=[..._r()];r(t);try{const e=t.filter(e=>!e.predefined);st.saveSchemas(e)}catch(n){tt.handleError(n)}return e},[]),d=_(e=>{const t=n.find(t=>t.id===e);if(t&&!t.predefined){(e=>{const t=Wr().filter(t=>t.id!==e);Vr(t)})(e);const t=[..._r()];r(t),a===e&&l(null);try{const e=t.filter(e=>!e.predefined);st.saveSchemas(e)}catch(o){tt.handleError(o)}}},[n,a]),u=_((e,t)=>{const o=n.find(t=>t.id===e);if(o&&!o.predefined){((e,t)=>{const n=Wr().map(n=>n.id===e?{...n,...t}:n);Vr(n)})(e,t);const n=[..._r()];r(n);try{const e=n.filter(e=>!e.predefined);st.saveSchemas(e)}catch(i){tt.handleError(i)}}},[n]),h=_(()=>{if(!t)return null;const e=(e=>{try{const n=JSON.parse(e),r=_r();if(n.name&&n.version&&n.dependencies)return"package.json";if(n.compilerOptions&&n.include)return"tsconfig.json";if(n.rules&&n.extends)return"eslintrc.json";if(n.swagger&&n.info&&n.paths)return"swagger.json";if(n.openapi&&n.info&&n.paths)return"openapi.json";for(const o of r)if(!o.predefined&&o.detectPattern)try{if(new RegExp(o.detectPattern).test(e))return o.id}catch(t){}return null}catch(n){return null}})(t);return e&&l(e),e},[t]);return{schemas:n,selectedSchemaId:a,setSelectedSchemaId:l,addSchema:c,deleteSchema:d,updateSchema:u,autoDetectSchema:h}},Ur=600,Kr=960,Xr=1280,qr=1920,Gr=e=>{const[t,n]=o(!1);return i(()=>{const t=window.matchMedia(e);n(t.matches);const r=e=>{n(e.matches)};return t.addEventListener?t.addEventListener("change",r):t.addListener&&t.addListener(r),()=>{t.removeEventListener?t.removeEventListener("change",r):t.removeListener&&t.removeListener(r)}},[e]),t},Yr=()=>{const e=Gr(`(max-width: ${Ur-1}px)`),t=Gr(`(min-width: ${Ur}px) and (max-width: ${Kr-1}px)`),n=Gr(`(min-width: ${Kr}px) and (max-width: ${Xr-1}px)`),r=Gr(`(min-width: ${Xr}px) and (max-width: ${qr-1}px)`),o=Gr(`(min-width: ${qr}px)`);return{isMobile:e,isTablet:t||n,isDesktop:r||o,isLargeDesktop:o,breakpoint:e?"xs":t?"sm":n?"md":r?"lg":"xl"}},Qr=()=>{const[e,t]=o(!1);return i(()=>{const e="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;t(e)},[]),e},Zr={FORMAT:{key:"F",modifier:"Ctrl+Shift",description:"格式化JSON",action:"format"},COMPRESS:{key:"M",modifier:"Ctrl+Shift",description:"压缩JSON",action:"compress"},SEARCH:{key:"F",modifier:"Ctrl",description:"搜索",action:"search"},SAVE:{key:"S",modifier:"Ctrl",description:"保存",action:"save"},NEW:{key:"N",modifier:"Ctrl",description:"新建",action:"new"},OPEN:{key:"O",modifier:"Ctrl",description:"打开",action:"open"},DIFF:{key:"D",modifier:"Ctrl+Alt",description:"差异对比",action:"diff"},HELP:{key:"?",modifier:"",description:"显示快捷键帮助",action:"help"},FOLD_ALL:{key:"[",modifier:"Ctrl",description:"折叠所有",action:"foldAll"},UNFOLD_ALL:{key:"]",modifier:"Ctrl",description:"展开所有",action:"unfoldAll"},UNDO:{key:"Z",modifier:"Ctrl",description:"撤销",action:"undo"},REDO:{key:"Y",modifier:"Ctrl",description:"重做",action:"redo"}};var eo={},to=h;Object.defineProperty(eo,"__esModule",{value:!0});var no=eo.default=void 0,ro=to(yt()),oo=u();no=eo.default=(0,ro.default)((0,oo.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var io={},ao=h;Object.defineProperty(io,"__esModule",{value:!0});var lo=io.default=void 0,so=ao(yt()),co=u();lo=io.default=(0,so.default)((0,co.jsx)("path",{d:"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.9959.9959 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12z"}),"AutoFixHigh");var uo={},ho=h;Object.defineProperty(uo,"__esModule",{value:!0});var mo=uo.default=void 0,po=ho(yt()),fo=u();mo=uo.default=(0,po.default)((0,fo.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var go={},vo=h;Object.defineProperty(go,"__esModule",{value:!0});var yo=go.default=void 0,bo=vo(yt()),wo=u();yo=go.default=(0,bo.default)((0,wo.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var xo={},So=h;Object.defineProperty(xo,"__esModule",{value:!0});var Co=xo.default=void 0,Eo=So(yt()),ko=u();function Fo({schemas:e,selectedSchemaId:t,onSelectSchema:n,onAddSchema:r,onDeleteSchema:i,onUpdateSchema:l,onAutoDetect:s}){const[c,d]=o(!1),[u,h]=o(null),[f,v]=o(""),[y,b]=o(""),[E,k]=o(""),[M,j]=o(""),[z,J]=o(""),[I,T]=o(""),[N,D]=o("url"),H=()=>{d(!1)};return a(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(O,{size:"small",sx:{minWidth:150,width:"50%"},children:[a(W,{id:"schema-select-label",children:"JSON Schema"}),a(V,{labelId:"schema-select-label",id:"schema-select",value:t||"none",label:"JSON Schema",onChange:e=>{n("none"===e.target.value?null:e.target.value)},children:[a(g,{value:"none",children:a("em",{children:"无"})}),e.map(e=>a(g,{value:e.id,sx:{display:"flex",justifyContent:"space-between","&:hover .schema-actions":{visibility:"visible"}},children:[a(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.name,a(m,{title:e.description||"",children:a(Co,{fontSize:"small",color:"action"})})]}),!e.predefined&&a(C,{className:"schema-actions",sx:{visibility:"hidden",display:"flex"},children:[a(p,{size:"small",onClick:t=>{t.stopPropagation(),(e=>{h(e),v(e.name),b(e.uri||""),k(e.description||""),j((e.fileMatch||[]).join(", ")),J(e.schema?JSON.stringify(e.schema,null,2):""),D(e.uri?"url":"inline"),T(""),d(!0)})(e)},children:a(yo,{fontSize:"small"})}),a(p,{size:"small",onClick:t=>{return n=e.id,t.stopPropagation(),void(window.confirm("确定要删除此Schema吗？")&&i(n));var n},children:a(mo,{fontSize:"small"})})]})]},e.id))]})]}),a(m,{title:"添加Schema",children:a(p,{onClick:()=>{h(null),v(""),b(""),k(""),j(""),J(""),T(""),D("url"),d(!0)},size:"small",children:a(no,{})})}),a(m,{title:"自动检测Schema",children:a(p,{onClick:s,size:"small",children:a(lo,{})})}),a(w,{open:c,onClose:H,maxWidth:"md",fullWidth:!0,children:[a(x,{children:u?"编辑Schema":"添加新Schema"}),a(S,{children:[I&&a($,{severity:"error",sx:{mb:2},children:I}),a(U,{margin:"dense",label:"Schema名称",fullWidth:!0,value:f,onChange:e=>v(e.target.value),required:!0}),a(U,{margin:"dense",label:"描述",fullWidth:!0,value:E,onChange:e=>k(e.target.value)}),a(U,{margin:"dense",label:"文件匹配模式 (逗号分隔)",fullWidth:!0,value:M,onChange:e=>j(e.target.value),helperText:"例如: *.json, config.json"}),a(C,{sx:{mt:2,mb:1},children:[a(F,{variant:"subtitle2",children:"Schema来源"}),a(C,{sx:{display:"flex",gap:1,mt:1},children:[a(P,{variant:"url"===N?"contained":"outlined",onClick:()=>D("url"),children:"URL"}),a(P,{variant:"inline"===N?"contained":"outlined",onClick:()=>D("inline"),children:"内联JSON"})]})]}),a(U,"url"===N?{margin:"dense",label:"Schema URL",fullWidth:!0,value:y,onChange:e=>b(e.target.value),required:!0,helperText:"例如: https://json.schemastore.org/package.json"}:{margin:"dense",label:"Schema内容 (JSON)",fullWidth:!0,multiline:!0,rows:10,value:z,onChange:e=>J(e.target.value),required:!0})]}),a(L,{children:[a(P,{onClick:H,children:"取消"}),a(P,{onClick:()=>{if(!f.trim())return void T("Schema名称不能为空");if("url"===N&&!y.trim())return void T("Schema URI不能为空");if("inline"===N)try{if(!z.trim())return void T("Schema内容不能为空");JSON.parse(z)}catch(n){return void T("无效的JSON Schema格式")}const e=M.split(",").map(e=>e.trim()).filter(e=>e),t={name:f,description:E,fileMatch:e.length>0?e:["*"]};if("url"===N)t.uri=y;else try{t.schema=JSON.parse(z)}catch(n){return void T("无效的JSON Schema格式")}u?l(u.id,t):r(t),H()},variant:"contained",children:"保存"})]})]})]})}function Oo({onSearchClick:e,onSettingsClick:t,onFoldAllClick:n,onUnfoldAllClick:r,onKeyboardShortcutsClick:o,onIncreaseFontSize:i=()=>{},onDecreaseFontSize:l=()=>{},schemas:s=[],selectedSchemaId:c=null,onSelectSchema:d=()=>{},onAddSchema:u=()=>{},onDeleteSchema:h=()=>{},onUpdateSchema:f=()=>{},onAutoDetectSchema:g=()=>{}}){return a(C,{sx:{display:"flex",alignItems:"center",padding:"4px 8px",borderBottom:"1px solid",borderColor:"divider",backgroundColor:e=>"dark"===e.palette.mode?"#1E1E1E":"#F9FAFB",overflowX:"auto"},children:[a(C,{sx:{display:"flex",alignItems:"center"},children:[a(m,{title:"格式化 JSON (Ctrl+Shift+F)",children:a(P,{startIcon:a(K,{}),size:"small",onClick:()=>{window.pdxJsonEditor&&window.pdxJsonEditor.formatJson&&window.pdxJsonEditor.formatJson()},sx:{mr:1},children:"格式化"})}),a(m,{title:"压缩 JSON (Ctrl+Shift+M)",children:a(P,{startIcon:a(X,{}),size:"small",onClick:()=>{window.pdxJsonEditor&&window.pdxJsonEditor.compressJson&&window.pdxJsonEditor.compressJson()},sx:{mr:1},children:"压缩"})}),a(m,{title:"尝试修复 JSON",children:a(P,{startIcon:a(q,{}),size:"small",onClick:()=>{window.pdxJsonEditor&&window.pdxJsonEditor.tryFixJson&&window.pdxJsonEditor.tryFixJson()},children:"修复"})})]}),a(b,{orientation:"vertical",flexItem:!0,sx:{mx:2}}),a(C,{sx:{flexGrow:1},children:a(Fo,{schemas:s,selectedSchemaId:c,onSelectSchema:d,onAddSchema:u,onDeleteSchema:h,onUpdateSchema:f,onAutoDetect:g})}),a(b,{orientation:"vertical",flexItem:!0,sx:{mx:2}}),a(C,{sx:{display:"flex",alignItems:"center",mr:2},children:[a(m,{title:"折叠所有",children:a(p,{size:"small",onClick:n,children:a(G,{fontSize:"small"})})}),a(m,{title:"展开所有",children:a(p,{size:"small",onClick:r,children:a(Y,{fontSize:"small"})})})]}),a(C,{sx:{display:"flex",alignItems:"center",mr:2},children:[a(m,{title:"增大字体",children:a(p,{size:"small",onClick:i,children:a(Q,{fontSize:"small"})})}),a(m,{title:"减小字体",children:a(p,{size:"small",onClick:l,children:a(Z,{fontSize:"small"})})})]}),a(C,{sx:{display:"flex",alignItems:"center",mr:2},children:[a(m,{title:"撤销 (Ctrl+Z)",children:a(p,{size:"small",onClick:()=>{var e,t;if(null==(t=null==(e=window.pdxJsonEditor)?void 0:e.getEditorRef)?void 0:t.call(e)){window.pdxJsonEditor.getEditorRef().trigger("keyboard","undo",null)}},children:a(ee,{fontSize:"small"})})}),a(m,{title:"重做 (Ctrl+Y)",children:a(p,{size:"small",onClick:()=>{var e,t;if(null==(t=null==(e=window.pdxJsonEditor)?void 0:e.getEditorRef)?void 0:t.call(e)){window.pdxJsonEditor.getEditorRef().trigger("keyboard","redo",null)}},children:a(te,{fontSize:"small"})})})]}),a(C,{sx:{display:"flex",alignItems:"center"},children:[a(m,{title:"搜索 (Ctrl+F)",children:a(p,{size:"small",onClick:()=>{var e,t;if(null==(t=null==(e=window.pdxJsonEditor)?void 0:e.getEditorRef)?void 0:t.call(e)){const e=window.pdxJsonEditor.getEditorRef(),t=e.getAction("actions.find");t?t.run():e.trigger("keyboard","actions.find",null)}},children:a(ne,{})})}),a(m,{title:"设置",children:a(p,{size:"small",onClick:t,children:a(re,{})})}),a(m,{title:"键盘快捷键 (?)",children:a(p,{size:"small",onClick:o,children:a(oe,{})})})]})]})}Co=xo.default=(0,Eo.default)((0,ko.jsx)("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"}),"HelpOutline");var Mo={},jo=h;Object.defineProperty(Mo,"__esModule",{value:!0});var zo=Mo.default=void 0,Lo=jo(yt()),Po=u();zo=Mo.default=(0,Lo.default)((0,Po.jsx)("path",{d:"M3 21h18v-2H3zM3 8v8l4-4zm8 9h10v-2H11zM3 3v2h18V3zm8 6h10V7H11zm0 4h10v-2H11z"}),"FormatIndentIncrease");var Jo={},Io=h;Object.defineProperty(Jo,"__esModule",{value:!0});var To=Jo.default=void 0,No=Io(yt()),Do=u();To=Jo.default=(0,No.default)((0,Do.jsx)("path",{d:"M4 9v2h16V9zm12-5-1.41-1.41L13 4.17V1h-2v3.19L9.39 2.61 8 4l4 4zM4 14h16v-2H4zm4 5 1.39 1.39L11 18.81V22h2v-3.17l1.59 1.59L16 19l-4-4z"}),"CompressOutlined");var Ho={},Ao=h;Object.defineProperty(Ho,"__esModule",{value:!0});var Ro=Ho.default=void 0,Bo=Ao(yt()),_o=u();Ro=Ho.default=(0,Bo.default)((0,_o.jsx)("path",{d:"m17.73 12.02 3.98-3.98c.39-.39.39-1.02 0-1.41l-4.34-4.34a.9959.9959 0 0 0-1.41 0l-3.98 3.98L8 2.29C7.8 2.1 7.55 2 7.29 2c-.25 0-.51.1-.7.29L2.25 6.63c-.39.39-.39 1.02 0 1.41l3.98 3.98L2.25 16c-.39.39-.39 1.02 0 1.41l4.34 4.34c.39.39 1.02.39 1.41 0l3.98-3.98 3.98 3.98c.2.2.45.29.71.29.26 0 .51-.1.71-.29l4.34-4.34c.39-.39.39-1.02 0-1.41zM12 9c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m-4.71 1.96L3.66 7.34l3.63-3.63 3.62 3.62zM10 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2 2c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2-4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2.66 9.34-3.63-3.62 3.63-3.63 3.62 3.62z"}),"Healing");var Wo={},Vo=h;Object.defineProperty(Wo,"__esModule",{value:!0});var $o=Wo.default=void 0,Uo=Vo(yt()),Ko=u();$o=Wo.default=(0,Uo.default)((0,Ko.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");var Xo={},qo=h;Object.defineProperty(Xo,"__esModule",{value:!0});var Go=Xo.default=void 0,Yo=qo(yt()),Qo=u();Go=Xo.default=(0,Yo.default)((0,Qo.jsx)("path",{d:"M7.41 18.59 8.83 20 12 16.83 15.17 20l1.41-1.41L12 14zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10z"}),"UnfoldLess");var Zo={},ei=h;Object.defineProperty(Zo,"__esModule",{value:!0});var ti=Zo.default=void 0,ni=ei(yt()),ri=u();ti=Zo.default=(0,ni.default)((0,ri.jsx)("path",{d:"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15z"}),"UnfoldMore");var oi={},ii=h;Object.defineProperty(oi,"__esModule",{value:!0});var ai=oi.default=void 0,li=ii(yt()),si=u();ai=oi.default=(0,li.default)((0,si.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert");var ci={},di=h;Object.defineProperty(ci,"__esModule",{value:!0});var ui=ci.default=void 0,hi=di(yt()),mi=u();ui=ci.default=(0,hi.default)((0,mi.jsx)("path",{d:"M14 9v2h-3V9H8.5V7H11V1H4v6h2.5v2H4v6h2.5v2H4v6h7v-6H8.5v-2H11v-2h3v2h7V9z"}),"Schema");var pi={},fi=h;Object.defineProperty(pi,"__esModule",{value:!0});var gi=pi.default=void 0,vi=fi(yt()),yi=u();gi=pi.default=(0,vi.default)((0,yi.jsx)("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m-9 3h2v2h-2zm0 3h2v2h-2zM8 8h2v2H8zm0 3h2v2H8zm-1 2H5v-2h2zm0-3H5V8h2zm9 7H8v-2h8zm0-4h-2v-2h2zm0-3h-2V8h2zm3 3h-2v-2h2zm0-3h-2V8h2z"}),"Keyboard");var bi={},wi=h;Object.defineProperty(bi,"__esModule",{value:!0});var xi=bi.default=void 0,Si=wi(yt()),Ci=u();xi=bi.default=(0,Si.default)((0,Ci.jsx)("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"}),"Undo");var Ei={},ki=h;Object.defineProperty(Ei,"__esModule",{value:!0});var Fi=Ei.default=void 0,Oi=ki(yt()),Mi=u();function ji({onFoldAllClick:e,onUnfoldAllClick:t,onSearchClick:n,onSettingsClick:r,onSchemaClick:i,onKeyboardShortcutsClick:l}){const[s,c]=o(null),[d,u]=o(!1),{isMobile:h}=Yr(),b=()=>{c(null)},w=[{icon:a(zo,{}),name:"格式化",onClick:()=>{window.pdxJsonEditor&&window.pdxJsonEditor.formatJson&&window.pdxJsonEditor.formatJson(),u(!1)}},{icon:a(To,{}),name:"压缩",onClick:()=>{window.pdxJsonEditor&&window.pdxJsonEditor.compressJson&&window.pdxJsonEditor.compressJson(),u(!1)}},{icon:a(Ro,{}),name:"修复",onClick:()=>{window.pdxJsonEditor&&window.pdxJsonEditor.tryFixJson&&window.pdxJsonEditor.tryFixJson(),u(!1)}},{icon:a(xi,{}),name:"撤销",onClick:()=>{var e,t;if(null==(t=null==(e=window.pdxJsonEditor)?void 0:e.getEditorRef)?void 0:t.call(e)){window.pdxJsonEditor.getEditorRef().trigger("keyboard","undo",null)}u(!1)}},{icon:a(Fi,{}),name:"重做",onClick:()=>{var e,t;if(null==(t=null==(e=window.pdxJsonEditor)?void 0:e.getEditorRef)?void 0:t.call(e)){window.pdxJsonEditor.getEditorRef().trigger("keyboard","redo",null)}u(!1)}},{icon:a($o,{}),name:"搜索",onClick:()=>{var e,t,n;if(null==(t=null==(e=window.pdxJsonEditor)?void 0:e.getEditorRef)?void 0:t.call(e)){null==(n=window.pdxJsonEditor.getEditorRef().getAction("actions.find"))||n.run()}u(!1)}},{icon:a(ui,{}),name:"Schema",onClick:()=>{i(),u(!1)}}];return h?a(J,{children:[a(C,{sx:{position:"absolute",top:8,right:8,zIndex:1e3,display:"flex",gap:1},children:a(m,{title:"更多选项",children:a(p,{size:"small",onClick:e=>{c(e.currentTarget)},sx:{backgroundColor:"background.paper",boxShadow:1},children:a(ai,{})})})}),a(ie,{ariaLabel:"编辑器操作",sx:{position:"absolute",bottom:16,right:16},icon:a(ae,{}),onClose:()=>u(!1),onOpen:()=>u(!0),open:d,direction:"up",children:w.map(e=>a(le,{icon:e.icon,tooltipTitle:e.name,tooltipOpen:!0,onClick:e.onClick},e.name))}),a(f,{anchorEl:s,open:Boolean(s),onClose:b,children:[a(g,{onClick:()=>{e(),b()},children:[a(v,{children:a(Go,{fontSize:"small"})}),a(y,{primary:"折叠所有"})]}),a(g,{onClick:()=>{t(),b()},children:[a(v,{children:a(ti,{fontSize:"small"})}),a(y,{primary:"展开所有"})]}),a(g,{onClick:()=>{r(),b()},children:[a(v,{children:a(vn,{fontSize:"small"})}),a(y,{primary:"设置"})]}),a(g,{onClick:()=>{l(),b()},children:[a(v,{children:a(gi,{fontSize:"small"})}),a(y,{primary:"键盘快捷键"})]})]})]}):null}function zi({open:e,onClose:t}){return a(w,{open:e,onClose:t,"aria-labelledby":"keyboard-shortcuts-dialog-title",maxWidth:"sm",fullWidth:!0,children:[a(x,{id:"keyboard-shortcuts-dialog-title",children:"键盘快捷键"}),a(S,{children:[a(F,{variant:"body2",paragraph:!0,children:"以下是可用的键盘快捷键，帮助您更高效地使用PDX JSON编辑器。"}),a(se,{component:ce,variant:"outlined",children:a(de,{size:"small",children:[a(ue,{children:a(he,{children:[a(me,{children:"操作"}),a(me,{children:"快捷键"})]})}),a(pe,{children:Object.values(Zr).map(e=>{return a(he,{children:[a(me,{children:e.description}),a(me,{children:a(C,{sx:{display:"flex",alignItems:"center"},children:[(n=e.modifier,n?n.split("+").map(e=>a(fe,{label:e,size:"small",variant:"outlined",sx:{mr:.5,fontSize:"0.75rem"}},e)):""),e.modifier&&" + ",(t=e.key,a(fe,{label:t,size:"small",color:"primary",sx:{fontSize:"0.75rem"}}))]})})]},e.action);var t,n})})]})}),a(F,{variant:"caption",sx:{display:"block",mt:2,color:"text.secondary"},children:"注意：Monaco Editor还提供了许多内置快捷键，如Ctrl+/ (注释)、Ctrl+Space (自动完成)等。"})]}),a(L,{children:a(P,{onClick:t,children:"关闭"})})]})}function Li({isValid:e=!0,errors:t=[],cursorPosition:n={line:1,column:1},fileSize:r=0}){const{isMobile:o}=Yr(),i=t.filter(e=>"error"===e.severity).length,l=t.filter(e=>"warning"===e.severity).length,s=e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]},c={id:On("status"),role:"status","aria-live":"polite"};return a(C,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:o?"4px 8px":"4px 16px",borderTop:"1px solid",borderColor:"divider",backgroundColor:e=>"dark"===e.palette.mode?"#1E1E1E":"#F9FAFB",flexWrap:o?"wrap":"nowrap"},...c,children:[a(C,{sx:{display:"flex",alignItems:"center",gap:1,width:o?"100%":"auto",justifyContent:o?"center":"flex-start",mb:o?.5:0},children:e?a(fe,{icon:a(ge,{fontSize:"small"}),label:o?"":"有效的JSON",size:"small",color:"success",variant:"outlined","aria-label":"JSON验证通过"}):a(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[i>0&&a(m,{title:"错误",children:a(fe,{icon:a(ve,{fontSize:"small"}),label:o?i:`${i} 错误`,size:"small",color:"error",variant:"outlined","aria-label":`${i}个JSON验证错误`})}),l>0&&a(m,{title:"警告",children:a(fe,{icon:a(ye,{fontSize:"small"}),label:o?l:`${l} 警告`,size:"small",color:"warning",variant:"outlined","aria-label":`${l}个JSON验证警告`})})]})}),a(C,{sx:{display:"flex",alignItems:"center",gap:o?1:2,width:o?"100%":"auto",justifyContent:o?"space-between":"flex-end"},children:[a(F,{variant:"caption",color:"text.secondary","aria-label":`光标位置：行 ${n.line}, 列 ${n.column}`,children:o?`${n.line}:${n.column}`:`行 ${n.line}, 列 ${n.column}`}),a(F,{variant:"caption",color:"text.secondary","aria-label":`文件大小：${s(r)}`,children:s(r)})]})]})}Fi=Ei.default=(0,Oi.default)((0,Mi.jsx)("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z"}),"Redo");const Pi='{\n  "name": "PDX JSON Editor",\n  "version": "1.0.0",\n  "description": "A lightweight JSON editor with Monaco Editor",\n  "features": [\n    "Syntax highlighting",\n    "Error validation",\n    "Formatting",\n    "Search and replace",\n    "File operations"\n  ],\n  "settings": {\n    "theme": "light",\n    "indentation": 2,\n    "wordWrap": true\n  }\n}';function Ji({onSettingsClick:e,value:t,onChange:n,isLoading:r,isLargeFile:l=!1}){var s;const{themeId:c,monacoTheme:d}=ut(),{isMobile:u,isTablet:h}=Yr(),p=Qr(),[f,g]=o(!1),[v,y]=o(l),[b,E]=o(14),k=_(()=>{if(M.current&&j.current){const e=b+2;E(e),M.current.updateOptions({fontSize:e}),Ee(`字体大小已增加到 ${e}px`,"info")}},[b]),O=_(()=>{if(M.current&&j.current){const e=Math.max(8,b-2);E(e),M.current.updateOptions({fontSize:e}),Ee(`字体大小已减小到 ${e}px`,"info")}},[b]),M=B(null),j=B(null),z=B(null),[J,I]=o({line:1,column:1}),[T,N]=o(!1),[D,H]=o(""),[A,R]=o("success"),[W,V]=o("scroll"),{value:U,setValue:K,formatJson:X,compressJson:q,tryFixJson:G,indentSize:Y,setIndentSize:Q,error:Z}=Ar(void 0!==t?t:""),ee=void 0!==t?t||Pi:U,{errors:te,validate:ne,isValid:re,setModelMarkers:oe}=Hr(),{schemas:ie,selectedSchemaId:ae,setSelectedSchemaId:le,addSchema:se,deleteSchema:de,updateSchema:ue,autoDetectSchema:he}=$r(j.current,ee),me=_(e=>{if(M.current){const n=M.current.getPosition();M.current.setValue(e);try{const e=M.current.getModel(),t=e.getLineCount(),r=e.getLineLength(t);if(n&&n.lineNumber<=t){const o=n.lineNumber===t?r+1:e.getLineLength(n.lineNumber)+1,i={lineNumber:n.lineNumber,column:Math.min(n.column,o)};M.current.setPosition(i)}}catch(t){}}n?n(e):K(e)},[n,K]),pe=_(()=>{var e;M.current&&(null==(e=M.current.getAction("editor.foldAll"))||e.run())},[]),fe=_(()=>{var e;M.current&&(null==(e=M.current.getAction("editor.unfoldAll"))||e.run())},[]),ge=_(()=>{if(M.current&&j.current)try{const e=M.current.getAction("editor.action.formatDocument");e?e.run().then(()=>{Ee("JSON已格式化","success")}).catch(e=>{Ee(`格式化失败: ${e.message}`,"error")}):Ee("无法找到格式化功能","error")}catch(e){Ee(`格式化失败: ${e.message}`,"error")}else Ee("编辑器未准备就绪","error")},[]),ve=_(()=>{if(M.current&&j.current)try{const t=M.current.getModel();if(!t)return void Ee("无法获取编辑器模型","error");const n=t.getValue();try{JSON.parse(n)}catch(e){return void Ee(`无法压缩无效的JSON: ${e.message}`,"error")}t.getLineCount();const r=n.replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").replace(/^\s+|\s+$/gm,"").replace(/:\s+/g,":").replace(/,\s+/g,",").replace(/\{\s+/g,"{").replace(/\s+\}/g,"}").replace(/\[\s+/g,"[").replace(/\s+\]/g,"]");M.current.executeEdits("compress",[{range:t.getFullModelRange(),text:r,forceMoveMarkers:!0}]),Ee("JSON已压缩","success")}catch(t){Ee(`压缩失败: ${t.message}`,"error")}else Ee("编辑器未准备就绪","error")},[]),ye=_(()=>{if(M.current)try{const n=M.current.getValue();if(!n||""===n.trim())return void Ee("无内容可修复","warning");try{return JSON.parse(n),void Ee("JSON已经是有效的，无需修复","info")}catch(e){const r=M.current.getModel();if(!r)return void Ee("无法获取编辑器模型","error");const o=G(n);try{JSON.parse(o),o!==n?(M.current.executeEdits("fix",[{range:r.getFullModelRange(),text:o,forceMoveMarkers:!0}]),Ee("JSON已尝试修复","success")):Ee("JSON无法自动修复，请手动检查语法错误","warning")}catch(t){Ee(`无法自动修复JSON: ${t.message}`,"warning")}}}catch(n){Ee(`修复失败: ${n.message}`,"error")}else Ee("编辑器未准备就绪","error")},[]),xe=_(()=>{const e=he();if(e){const t=ie.find(t=>t.id===e);Ee(`已检测并应用Schema: ${(null==t?void 0:t.name)||e}`,"success")}else Ee("未能检测到匹配的Schema","info")},[he,ie]),Se=_(()=>{g(!0)},[]),Ce=_(()=>{g(!1)},[]),Ee=(e,t)=>{H(e),R(t),N(!0)},ke=()=>{N(!1)};i(()=>{if(j.current&&M.current){const e=j.current,t=M.current,n=t.getModel();if(oe(e,n),te.length>0){const r=te.map(t=>({range:new e.Range(t.line,1,t.line,n.getLineLength(t.line)+1),options:{isWholeLine:!0,className:"json-error-line",glyphMarginClassName:"json-error-glyph",overviewRuler:{color:"red",position:e.editor.OverviewRulerLane.Right},minimap:{color:"red",position:e.editor.MinimapPosition.Inline},inlineClassName:"json-error-inline"}}));t.deltaDecorations([],r);if(!document.getElementById("json-error-styles")){const e=document.createElement("style");e.id="json-error-styles",e.innerHTML="\n            .json-error-line {\n              background-color: rgba(255, 0, 0, 0.1);\n              border-left: 3px solid red;\n            }\n            .json-error-glyph {\n              background-color: red;\n              border-radius: 50%;\n              margin-left: 5px;\n            }\n            .json-error-inline {\n              text-decoration: wavy underline red;\n            }\n          ",document.head.appendChild(e)}}else t.deltaDecorations([],[])}},[te,oe]),i(()=>{if(M.current&&j.current){j.current;M.current.updateOptions({theme:d,fontSize:b,...v?{folding:!1,minimap:{enabled:!1},bracketPairColorization:{enabled:!1},renderWhitespace:"none",renderControlCharacters:!1,renderIndentGuides:!1,occurrencesHighlight:!1,renderLineHighlight:"none"}:{}})}},[d,v,b]);const{showHelp:Fe,setShowHelp:Oe,toggleHelp:Me}=((e={},t=!0)=>{const[n,r]=o(!1),a=Qr(),l=_(()=>{r(e=>!e)},[]),s=t&&!a;return i(()=>{if(!s)return;const t=t=>{(["INPUT","TEXTAREA","SELECT"].includes(t.target.tagName)||t.target.isContentEditable||"textbox"===t.target.getAttribute("role"))&&"Escape"!==t.key&&"?"!==t.key||(t.ctrlKey&&t.shiftKey&&"F"===t.key.toUpperCase()&&(t.preventDefault(),e.format&&e.format()),t.ctrlKey&&t.shiftKey&&"M"===t.key.toUpperCase()&&(t.preventDefault(),e.compress&&e.compress()),t.ctrlKey&&!t.shiftKey&&"f"===t.key.toLowerCase()&&e.search&&(t.preventDefault(),e.search()),t.ctrlKey&&!t.shiftKey&&"s"===t.key.toLowerCase()&&(t.preventDefault(),e.save&&e.save()),t.ctrlKey&&!t.shiftKey&&"n"===t.key.toLowerCase()&&(t.preventDefault(),e.new&&e.new()),t.ctrlKey&&!t.shiftKey&&"o"===t.key.toLowerCase()&&(t.preventDefault(),e.open&&e.open()),t.ctrlKey||t.shiftKey||"?"!==t.key||(t.preventDefault(),e.help?e.help():l()),t.ctrlKey&&!t.shiftKey&&"["===t.key&&(t.preventDefault(),e.foldAll&&e.foldAll()),t.ctrlKey&&!t.shiftKey&&"]"===t.key&&(t.preventDefault(),e.unfoldAll&&e.unfoldAll()),t.ctrlKey&&t.altKey&&"d"===t.key.toLowerCase()&&(t.preventDefault(),e.diff&&e.diff()),!t.ctrlKey||t.shiftKey||t.altKey||"z"!==t.key.toLowerCase()||e.undo&&e.undo(),!t.ctrlKey||t.shiftKey||t.altKey||"y"!==t.key.toLowerCase()||e.redo&&e.redo())};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[e,s,l]),{showHelp:n,setShowHelp:r,toggleHelp:l}})({format:ge,compress:ve,search:()=>{var e;M.current&&(null==(e=M.current.getAction("actions.find"))||e.run())},save:()=>{var e,t;return null==(t=null==(e=window.pdxJsonEditor)?void 0:e.saveFile)?void 0:t.call(e)},new:()=>{var e,t;return null==(t=null==(e=window.pdxJsonEditor)?void 0:e.newFile)?void 0:t.call(e)},open:()=>{var e,t;return null==(t=null==(e=window.pdxJsonEditor)?void 0:e.openFile)?void 0:t.call(e)},foldAll:pe,unfoldAll:fe}),je=_(e=>{if(!M.current)return;M.current.updateOptions({minimap:{enabled:e.minimapEnabled,showSlider:e.minimapShowSlider,renderCharacters:e.minimapRenderCharacters,side:e.minimapSide},wordWrap:e.wordWrap?"on":"off",lineNumbers:e.lineNumbers?"on":"off",tabSize:e.indentSize,insertSpaces:"spaces"===e.indentType,fontSize:e.fontSize||b,autoClosingBrackets:e.autoClosingBrackets?"always":"never",autoClosingQuotes:e.autoClosingQuotes?"always":"never",matchBrackets:e.matchBrackets?"always":"never",bracketPairColorization:{enabled:e.bracketPairColorization},multiCursorModifier:e.multiCursorModifier,columnSelection:e.columnSelection}),Q(e.indentSize),e.fontSize&&E(e.fontSize)},[Q,b]);i(()=>{const e=localStorage.getItem("pdx-json-editor-settings");if(e&&M.current)try{const t=JSON.parse(e);je(t)}catch(t){}},[je]),i(()=>{const e=()=>{M.current&&ye()};return window.pdxJsonEditor?(window.pdxJsonEditor.formatJson=ge,window.pdxJsonEditor.compressJson=ve,window.pdxJsonEditor.tryFixJson=e,window.pdxJsonEditor.applySettings=je,window.pdxJsonEditor.getCurrentContent=()=>M.current?M.current.getValue():ee,window.pdxJsonEditor.setContent=me,window.pdxJsonEditor.getEditorRef=()=>M.current,window.pdxJsonEditor.getMonacoRef=()=>j.current):window.pdxJsonEditor={formatJson:ge,compressJson:ve,tryFixJson:e,applySettings:je,getCurrentContent:()=>M.current?M.current.getValue():ee,setContent:me,getEditorRef:()=>M.current,getMonacoRef:()=>j.current},()=>{window.pdxJsonEditor&&(delete window.pdxJsonEditor.formatJson,delete window.pdxJsonEditor.compressJson,delete window.pdxJsonEditor.tryFixJson,delete window.pdxJsonEditor.applySettings,delete window.pdxJsonEditor.getCurrentContent,delete window.pdxJsonEditor.setContent,delete window.pdxJsonEditor.getEditorRef,delete window.pdxJsonEditor.getMonacoRef)}},[ge,ve,ye,je,ee,me]);const ze=_(()=>{E(e=>Math.min(e+2,32)),Ee("放大字体","info")},[]),Le=_(()=>{E(e=>Math.max(e-2,8)),Ee("缩小字体","info")},[]),Pe=_(()=>{V(e=>"scroll"===e?"zoom":"scroll"),Ee(`已切换到${"scroll"===W?"缩放":"滚动"}模式`,"info")},[W]),{handleTouchEnd:Je}=(({onDoubleTap:e,delay:t=300}={})=>{const n=Qr(),r=B({time:0,x:0,y:0});return{handleTouchEnd:o=>{if(!n)return;const i=o.changedTouches[0],a=Date.now(),l={x:i.clientX,y:i.clientY},{time:s,x:c,y:d}=r.current;if(a-s<t){const t=l.x-c,n=l.y-d;if(Math.sqrt(t*t+n*n)<20)return o.preventDefault(),e&&e({x:l.x,y:l.y}),void(r.current.time=0)}r.current={time:a,x:l.x,y:l.y}},isEnabled:n}})({onDoubleTap:()=>{E(14),Ee("已重置字体大小","info")}}),{handleTouchStart:Ie,handleTouchMove:Te,handleTouchEnd:Ne,isEnabled:De}=(({onPinchIn:e,onPinchOut:t,threshold:n=10}={})=>{const r=Qr(),o=B([]),i=B(null),a=(e,t)=>{const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)};return{handleTouchStart:e=>{if(r&&2===e.touches.length){const t=e.touches[0],n=e.touches[1];o.current=[{x:t.clientX,y:t.clientY},{x:n.clientX,y:n.clientY}],i.current=a(o.current[0],o.current[1])}},handleTouchMove:o=>{if(r&&2===o.touches.length&&null!==i.current){const r=o.touches[0],l=o.touches[1],s=[{x:r.clientX,y:r.clientY},{x:l.clientX,y:l.clientY}],c=a(s[0],s[1]),d=c-i.current;Math.abs(d)>n&&(d<0&&e?e({distance:Math.abs(d)}):d>0&&t&&t({distance:d}),i.current=c)}},handleTouchEnd:()=>{r&&(i.current=null)},isEnabled:r}})({onPinchIn:({distance:e})=>{"zoom"===W&&E(e=>Math.max(e-1,8))},onPinchOut:({distance:e})=>{"zoom"===W&&E(e=>Math.min(e+1,32))}}),{handleTouchStart:He,handleTouchEnd:Ae,isEnabled:Re}=(({threshold:e=50,onSwipeLeft:t,onSwipeRight:n,onSwipeUp:r,onSwipeDown:o}={})=>{const i=Qr(),a=B({x:0,y:0,time:0}),l=B({x:0,y:0,time:0}),s=()=>{const{x:i,y:s,time:c}=a.current,{x:d,y:u,time:h}=l.current,m=d-i,p=u-s,f=h-c,g=f<300;Math.abs(m)>Math.abs(p)?Math.abs(m)>e&&(m>0&&n?n({distance:m,duration:f,isQuick:g}):m<0&&t&&t({distance:Math.abs(m),duration:f,isQuick:g})):Math.abs(p)>e&&(p>0&&o?o({distance:p,duration:f,isQuick:g}):p<0&&r&&r({distance:Math.abs(p),duration:f,isQuick:g}))};return{handleTouchStart:e=>{if(!i)return;const t=e.touches[0];a.current={x:t.clientX,y:t.clientY,time:Date.now()}},handleTouchEnd:e=>{if(!i)return;const t=e.changedTouches[0];l.current={x:t.clientX,y:t.clientY,time:Date.now()},s()},isEnabled:i}})({threshold:100,onSwipeUp:({distance:e,isQuick:t})=>{if("scroll"===W&&t&&M.current){const e=M.current,t=Math.floor(e.getVisibleRanges()[0].endLineNumber-e.getVisibleRanges()[0].startLineNumber);e.setScrollPosition({scrollTop:e.getScrollTop()-t*e.getOption(monaco.editor.EditorOption.lineHeight)})}},onSwipeDown:({distance:e,isQuick:t})=>{if("scroll"===W&&t&&M.current){const e=M.current,t=Math.floor(e.getVisibleRanges()[0].endLineNumber-e.getVisibleRanges()[0].startLineNumber);e.setScrollPosition({scrollTop:e.getScrollTop()+t*e.getOption(monaco.editor.EditorOption.lineHeight)})}}});return a(C,{sx:{flexGrow:1,overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"},ref:z,onTouchStart:e=>{Ie(e),He(e)},onTouchMove:e=>{Te(e)},onTouchEnd:e=>{Ne(e),Ae(e),Je(e)},children:[!u&&a(Oo,{onFoldAllClick:pe,onUnfoldAllClick:fe,onSettingsClick:e,onKeyboardShortcutsClick:Me,onIncreaseFontSize:k,onDecreaseFontSize:O,schemas:ie,selectedSchemaId:ae,onSelectSchema:le,onAddSchema:se,onDeleteSchema:de,onUpdateSchema:ue,onAutoDetectSchema:xe}),a(ji,{onFoldAllClick:pe,onUnfoldAllClick:fe,onSettingsClick:e,onSchemaClick:Se,onKeyboardShortcutsClick:Me}),a(ce,{elevation:0,sx:{flexGrow:1,borderRadius:0,display:"flex",flexDirection:"column",overflow:"hidden",position:"relative"},children:[r&&a(C,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:10},children:a(F,{variant:"h6",color:"white",children:"加载中..."})}),a(Er,{height:"100%",defaultLanguage:"json",defaultValue:Pi,value:ee||Pi,onChange:e=>{void 0===t&&K(e),n&&n(e),ne(e)},theme:d,options:Tr("dark"===c||"highContrast"===c,!1,v,b),onMount:(e,t)=>{M.current=e,j.current=t,e.updateOptions({fontSize:b}),(e=>{if(e&&e.languages&&e.languages.json&&e.languages.json.jsonDefaults){try{e.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,allowComments:!1,schemas:[],enableSchemaRequest:!0,schemaRequest:"warning"})}catch(t){}"function"==typeof e.languages.registerDocumentFormattingEditProvider&&e.languages.registerDocumentFormattingEditProvider("json",{provideDocumentFormattingEdits:e=>{try{const t=e.getValue(),n=JSON.parse(t),r=JSON.stringify(n,null,2);return[{range:e.getFullModelRange(),text:r}]}catch(t){return[]}}}),"function"==typeof e.languages.registerCompletionItemProvider&&e.languages.registerCompletionItemProvider("json",{triggerCharacters:['"',":"],provideCompletionItems:(t,n)=>{try{const r=t.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column}),o=/"[^"]*$/.test(r),i=/:\s*$/.test(r),a=t.getLineContent(n.lineNumber).substring(0,n.column-1),l=[];if(o)l.push({label:'"name"',kind:e.languages.CompletionItemKind.Property,insertText:"name",detail:"常用属性",documentation:"名称属性"}),l.push({label:'"description"',kind:e.languages.CompletionItemKind.Property,insertText:"description",detail:"常用属性",documentation:"描述属性"}),l.push({label:'"version"',kind:e.languages.CompletionItemKind.Property,insertText:"version",detail:"常用属性",documentation:"版本号属性"});else if(i){const t=a.match(/"([^"]+)"\s*:\s*$/);if(t){const n=t[1];"type"===n?["string","number","boolean","object","array","null"].forEach(t=>{l.push({label:`"${t}"`,kind:e.languages.CompletionItemKind.Value,insertText:`"${t}"`,detail:"JSON类型",documentation:`JSON ${t} 类型`})}):("boolean"===n||n.endsWith("able")||n.startsWith("is")||n.startsWith("has"))&&["true","false"].forEach(t=>{l.push({label:t,kind:e.languages.CompletionItemKind.Value,insertText:t,detail:"布尔值",documentation:`布尔值 ${t}`})})}}return{suggestions:l}}catch(r){return{suggestions:[]}}}}),"function"==typeof e.languages.registerHoverProvider&&e.languages.registerHoverProvider("json",{provideHover:(e,t)=>{try{const r=e.getWordAtPosition(t);if(!r)return null;const o=r.word,i=e.getLineContent(t.lineNumber),a=/"([^"]+)"\s*:/.test(i.substring(0,r.endColumn)),l=/:\s*"?([^",}\]]+)"?/.test(i.substring(r.startColumn-2)),s=e.getValue();let c;try{c=JSON.parse(s)}catch(n){return null}let d=[];if(a){d.push({value:`**键**: \`${o}\``});const e=i.match(new RegExp(`"${o}"\\s*:\\s*(.+)`));if(e){const t=e[1].trim().replace(/,$/,"");let n="unknown";"true"===t||"false"===t?n="boolean":"null"===t?n="null":/^-?\d+(\.\d+)?$/.test(t)?n="number":/^".*"$/.test(t)?n="string":t.startsWith("{")?n="object":t.startsWith("[")&&(n="array"),d.push({value:`**值类型**: \`${n}\``})}}else if(l){let e=typeof o;e="true"===o||"false"===o?"boolean":"null"===o?"null":/^-?\d+(\.\d+)?$/.test(o)?"number":"string",d.push({value:`**值**: \`${o}\``}),d.push({value:`**类型**: \`${e}\``})}return 0===d.length?null:{contents:d}}catch(n){return null}}})}})(t),v||(e=>{e&&"function"==typeof e.languages.registerFoldingRangeProvider&&e.languages.registerFoldingRangeProvider("json",{provideFoldingRanges:t=>{const n=[],r=t.getValue().split("\n"),o=[];for(let i=0;i<r.length;i++){const t=r[i];if((t.includes("{")||t.includes("["))&&o.push({type:t.includes("{")?"{":"[",startLine:i+1}),t.includes("}")||t.includes("]")){const r="}"==(t.includes("}")?"}":"]")?"{":"[";for(let t=o.length-1;t>=0;t--)if(o[t].type===r){i+1-o[t].startLine>=2&&n.push({start:o[t].startLine,end:i+1,kind:e.languages.FoldingRangeKind?e.languages.FoldingRangeKind.Region:"region"}),o.splice(t,1);break}}}return n}})})(t),v||(ne(e.getValue()),oe(t,e.getModel())),e.onDidChangeCursorPosition(e=>{I({line:e.position.lineNumber,column:e.position.column})}),e.onDidChangeModelContent(()=>{const t=e.getValue();ne(t)});if(!document.getElementById("json-error-styles")){const e=document.createElement("style");e.id="json-error-styles",e.innerHTML="\n        .json-error-line {\n          background-color: rgba(255, 0, 0, 0.1);\n          border-left: 3px solid red;\n        }\n        .json-error-glyph {\n          background-color: red;\n          border-radius: 50%;\n          margin-left: 5px;\n        }\n        .json-error-inline {\n          text-decoration: wavy underline red;\n        }\n      ",document.head.appendChild(e)}v||setTimeout(()=>{const e=he();e&&Ee(`已自动检测并应用Schema: ${e}`,"info")},500),v&&Ee("已启用性能模式，部分功能已禁用以提高性能","info")},loading:a(F,{variant:"body1",children:"加载编辑器中..."})}),p&&a(C,{sx:{position:"absolute",bottom:16,right:16,display:"flex",flexDirection:"column",gap:1},children:[a(m,{title:"放大字体",children:a(be,{color:"primary",size:"small",onClick:ze,"aria-label":"放大字体",children:a(Or,{})})}),a(m,{title:"缩小字体",children:a(be,{color:"primary",size:"small",onClick:Le,"aria-label":"缩小字体",children:a(Pr,{})})})]}),p&&a(m,{title:`切换到${"scroll"===W?"缩放":"滚动"}模式`,children:a(be,{color:"secondary",size:"small",onClick:Pe,"aria-label":"切换手势模式",sx:{position:"absolute",bottom:16,left:16},children:a("scroll"===W?Or:Pr,{})})})]}),a(Li,{isValid:re,errors:te,cursorPosition:J,fileSize:ee?new Blob([ee]).size:0}),a(we,{open:T,autoHideDuration:3e3,onClose:ke,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:a($,{onClose:ke,severity:A,sx:{width:"100%"},children:D})}),a(w,{open:f,onClose:Ce,fullWidth:!0,maxWidth:"sm",children:[a(x,{children:"JSON Schema"}),a(S,{children:a(C,{sx:{py:1},children:[a(C,{sx:{mb:2},children:[a(F,{variant:"subtitle2",gutterBottom:!0,children:["当前Schema: ",ae?(null==(s=ie.find(e=>e.id===ae))?void 0:s.name)||ae:"无"]}),a(P,{variant:"outlined",size:"small",onClick:xe,sx:{mr:1},children:"自动检测"}),a(P,{variant:"outlined",size:"small",onClick:()=>le(null),disabled:!ae,children:"清除"})]}),a(F,{variant:"subtitle2",gutterBottom:!0,children:"可用Schema:"}),a(C,{sx:{display:"flex",flexDirection:"column",gap:1},children:ie.map(e=>a(P,{variant:ae===e.id?"contained":"outlined",size:"small",onClick:()=>le(e.id),children:e.name},e.id))})]})}),a(L,{children:a(P,{onClick:Ce,children:"关闭"})})]}),a(zi,{open:Fe,onClose:()=>Oe(!1)})]})}var Ii={},Ti=h;Object.defineProperty(Ii,"__esModule",{value:!0});var Ni=Ii.default=void 0,Di=Ti(yt()),Hi=u();Ni=Ii.default=(0,Di.default)((0,Hi.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");var Ai,Ri={exports:{}};Ai=Ri,function(){function e(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){a(r.response,t,n)},r.onerror=function(){},r.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof xe&&xe.global===xe?xe:void 0,i=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,i,a){var l=o.URL||o.webkitURL,s=document.createElement("a");i=i||e.name||"download",s.download=i,s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?r(s):n(s.href)?t(e,i,a):r(s,s.target="_blank")):(s.href=l.createObjectURL(e),setTimeout(function(){l.revokeObjectURL(s.href)},4e4),setTimeout(function(){r(s)},0))}:"msSaveOrOpenBlob"in navigator?function(o,i,a){if(i=i||o.name||"download","string"!=typeof o)navigator.msSaveOrOpenBlob(e(o,a),i);else if(n(o))t(o,i,a);else{var l=document.createElement("a");l.href=o,l.target="_blank",setTimeout(function(){r(l)})}}:function(e,n,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var l="application/octet-stream"===e.type,s=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||l&&s||i)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},d.readAsDataURL(e)}else{var u=o.URL||o.webkitURL,h=u.createObjectURL(e);a?a.location=h:location.href=h,a=null,setTimeout(function(){u.revokeObjectURL(h)},4e4)}});o.saveAs=a.saveAs=a,Ai.exports=a}();var Bi=Ri.exports;const _i=()=>"showSaveFilePicker"in window,Wi=async(e,t,n={})=>{if(!_i())return Vi(e,t);try{const o={suggestedName:t,types:[{description:"JSON文件",accept:{"application/json":[".json"]}}]};if(n.fileHandle)try{const e=await n.fileHandle.getParentDirectory();e&&(o.startIn=e)}catch(r){}else n.directoryHandle&&(o.startIn=n.directoryHandle);const i=await window.showSaveFilePicker(o),a=await i.createWritable();await a.write(e),await a.close();let l=null;try{l=await i.getParentDirectory()}catch(r){}return{name:i.name,path:await i.getFile().then(e=>e.name),handle:i,directoryHandle:l}}catch(r){if("AbortError"===r.name)throw new Error("用户取消了保存操作");return Vi(e,t)}},Vi=(e,t)=>new Promise((n,r)=>{try{const r=new Blob([e],{type:"application/json;charset=utf-8"});Bi.saveAs(r,t),n({name:t,path:t,handle:null,directoryHandle:null})}catch(o){r(new Error(`保存文件失败: ${o.message}`))}}),$i=e=>{if(!e)return!1;return e.name.toLowerCase().endsWith(".json")},Ui=(e,t=5242880)=>{if(!e)return!1;return("number"==typeof e?e:e.size)>t},Ki=e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,t)).toFixed(2)} ${["B","KB","MB","GB","TB"][t]}`};function Xi({onFileDrop:e,onError:t}){const[n,r]=o(!1),[l,s]=o(""),[c,d]=o(!1),u=B(null),h=B(0);return i(()=>()=>{h.current=0},[]),a(C,{ref:u,"data-testid":"file-drop-zone",onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),h.current++,r(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),h.current--,0===h.current&&r(!1)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:n=>{if(n.preventDefault(),n.stopPropagation(),r(!1),h.current=0,n.dataTransfer.files&&n.dataTransfer.files.length>0){const r=n.dataTransfer.files[0];if(!$i(r)){const e=`不支持的文件类型: ${r.name}。请拖放JSON文件。`;return s(e),d(!0),void(t&&t(new Error(e)))}e&&e(r),n.dataTransfer.clearData()}},sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:n?"flex":"none",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1200},children:a(ce,{elevation:3,sx:{p:4,display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:e=>e.palette.background.paper,borderRadius:2,border:"2px dashed",borderColor:"primary.main",maxWidth:"80%"},children:[a(Ni,{sx:{fontSize:48,color:"primary.main",mb:2}}),a(F,{variant:"h6",gutterBottom:!0,children:"拖放 JSON 文件"}),a(F,{variant:"body2",color:"textSecondary",children:"释放鼠标以上传文件"}),c&&a($,{severity:"error",onClose:()=>{d(!1)},sx:{mt:2,width:"100%"},children:l})]})})}function qi({open:e,onClose:t,onSave:n,onDiscard:r,fileName:o}){return a(w,{open:e,onClose:t,"aria-labelledby":"unsaved-changes-dialog-title","aria-describedby":"unsaved-changes-dialog-description",children:[a(x,{id:"unsaved-changes-dialog-title",children:"未保存的更改"}),a(S,{children:a(F,{id:"unsaved-changes-dialog-description",children:[o?`文件 "${o}" 有未保存的更改。`:"当前文件有未保存的更改。","您想保存这些更改吗？"]})}),a(L,{children:[a(P,{onClick:r,color:"error",children:"放弃更改"}),a(P,{onClick:t,color:"inherit",children:"取消"}),a(P,{onClick:n,variant:"contained",color:"primary",children:"保存"})]})]})}var Gi={},Yi=h;Object.defineProperty(Gi,"__esModule",{value:!0});var Qi=Gi.default=void 0,Zi=Yi(yt()),ea=u();function ta({open:e,fileSize:t,fileName:n,onContinue:r,onCancel:l,warningThreshold:s=5242880,dangerThreshold:c=20971520}){const[d,u]=o(!1),[h,m]=o(!0),[p,f]=o(0),g=t>=c?"danger":"warning";i(()=>{if(!e)return f(0),void m(!0);const t=setInterval(()=>{f(e=>e>=100?(clearInterval(t),m(!1),100):e+10)},200);return()=>clearInterval(t)},[e]);return a(w,{open:e,onClose:l,maxWidth:"sm",fullWidth:!0,disableEscapeKeyDown:h,children:[a(x,{sx:{display:"flex",alignItems:"center"},children:[a(Qi,{color:"danger"===g?"error":"warning",sx:{mr:1}}),"大文件警告"]}),a(S,{children:a(C,{sx:{py:1},children:[a($,{severity:"danger"===g?"error":"warning",sx:{mb:2},children:[n?`文件 "${n}"`:"该文件","大小为 ",Ki(t||5e6),"danger"===g?"，超过了推荐的最大大小！":"。"]}),a(F,{variant:"body1",paragraph:!0,children:"打开大文件可能会导致编辑器性能下降，甚至在某些设备上导致浏览器崩溃。"}),a(F,{variant:"body2",paragraph:!0,children:"为了提高性能，编辑器将："}),a(F,{component:"ul",variant:"body2",children:[a("li",{children:"禁用某些高级功能（如实时验证）"}),a("li",{children:"使用虚拟滚动优化渲染"}),a("li",{children:"延迟验证和格式化操作"}),a("li",{children:"限制撤销/重做历史记录"}),"danger"===g&&a("li",{children:"分块加载文件内容"})]}),"danger"===g&&a($,{severity:"info",sx:{mt:2,mb:2},children:"建议：考虑使用专门的大文件编辑器或将文件拆分为多个小文件。"}),a(b,{sx:{my:2}}),a(C,{sx:{mt:2,mb:2},children:[a(F,{variant:"caption",display:"block",gutterBottom:!0,children:["正在优化编辑器设置 (",p,"%)..."]}),a(Se,{variant:"determinate",value:p})]}),a(E,{control:a(Ce,{checked:d,onChange:e=>u(e.target.checked),disabled:h}),label:"记住我的选择"})]})}),a(L,{children:[a(P,{onClick:()=>{d&&localStorage.setItem("pdx-json-editor-large-file-choice","cancel"),l()},disabled:h,children:"取消"}),a(P,{onClick:()=>{d&&localStorage.setItem("pdx-json-editor-large-file-choice","continue"),r()},variant:"contained",color:"danger"===g?"error":"primary",disabled:h,children:"继续打开"})]})]})}Qi=Gi.default=(0,Zi.default)([(0,ea.jsx)("path",{d:"M12 5.99 19.53 19H4.47zM12 2 1 21h22z"},"0"),(0,ea.jsx)("path",{d:"M13 16h-2v2h2zm0-6h-2v5h2z"},"1")],"WarningAmber");var na={},ra=h;Object.defineProperty(na,"__esModule",{value:!0});var oa=na.default=void 0,ia=ra(yt()),aa=u();oa=na.default=(0,ia.default)((0,aa.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var la={},sa=h;Object.defineProperty(la,"__esModule",{value:!0});var ca=la.default=void 0,da=sa(yt()),ua=u();function ha({onMenuClick:e,onNewFile:t,onOpenFile:n,onSaveFile:r,onSaveAsFile:i,onErrorClick:l,currentFileName:s,isDirty:c}){const[d,u]=o(null),h=()=>{u(null)},b=Mn("主导航"),w="mobile-menu",{menu:x,item:S}=(C="文件操作",{menu:{id:On("menu"),role:"menu","aria-label":C},item:{role:"menuitem",tabIndex:-1}});var C;return a(H,{position:"static",color:"default",elevation:1,...b,children:a(N,{variant:"dense",children:[a(p,{color:"inherit","aria-label":"打开侧边栏","aria-haspopup":"true","aria-expanded":"false",edge:"start",onClick:e,sx:{mr:1},children:a(wt,{})}),a(F,{variant:"subtitle1",component:"div",sx:{flexGrow:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"aria-live":"polite",role:"status",children:[s||"未命名",c?" *":""]}),a(m,{title:"保存",children:a(p,{color:"inherit",onClick:r,disabled:!c,"aria-label":"保存文件"+(c?"（有未保存的更改）":""),children:a(D,{color:"warning",variant:"dot",invisible:!c,children:a(Tt,{})})})}),l&&a(m,{title:"错误历史",children:a(p,{color:"inherit",onClick:l,"aria-label":`查看错误历史（${tt.getErrorHistory().length}个错误）`,children:a(D,{badgeContent:tt.getErrorHistory().length,color:"error",children:a(Rt,{})})})}),a(kn,{}),a(p,{color:"inherit",onClick:e=>{u(e.currentTarget)},"aria-label":"更多选项","aria-haspopup":"true","aria-expanded":Boolean(d),"aria-controls":w,children:a(ai,{})}),a(f,{id:w,anchorEl:d,open:Boolean(d),onClose:h,...x,children:[a(g,{onClick:()=>{t(),h()},...S,"aria-label":"新建文件",children:[a(v,{children:a(kt,{fontSize:"small"})}),a(y,{primary:"新建"})]}),a(g,{onClick:()=>{n(),h()},...S,"aria-label":"打开文件",children:[a(v,{children:a(zt,{fontSize:"small"})}),a(y,{primary:"打开"})]}),a(g,{onClick:()=>{i(),h()},...S,"aria-label":"另存为",children:[a(v,{children:a(ca,{fontSize:"small"})}),a(y,{primary:"另存为"})]})]})]})})}function ma({header:e,sidebar:t,content:n,isDirty:r,onSave:i}){const{isMobile:l,isTablet:s}=Yr(),c=Qr(),[d,u]=o(!1);I();const h=()=>{u(!d)},f=()=>{u(!1)},g=l?"85%":s?240:280,v={id:On("main"),role:"main"},y=(b="侧边栏",{id:On("complementary"),role:"complementary","aria-label":b});var b;return a(C,{sx:{display:"flex",flexDirection:"column",height:"100vh"},role:"application","aria-label":"PDX JSON编辑器应用程序",children:[a(C,{children:l&&e.type===jn?a(ha,{onMenuClick:h,onNewFile:e.props.onNewFile,onOpenFile:e.props.onOpenFile,onSaveFile:e.props.onSaveFile,onSaveAsFile:e.props.onSaveAsFile,onErrorClick:e.props.onErrorClick,currentFileName:e.props.currentFileName,isDirty:e.props.isDirty}):e}),a(C,{sx:{display:"flex",flexGrow:1,overflow:"hidden"},children:[t&&a(Ee,{variant:l||s?"temporary":"permanent",open:!l&&!s||d,onClose:f,sx:{width:g,flexShrink:0,"& .MuiDrawer-paper":{width:g,boxSizing:"border-box"}},...y,children:[(l||s)&&a(C,{sx:{display:"flex",justifyContent:"flex-end",p:1},children:a(p,{onClick:f,"aria-label":"关闭侧边栏",children:a(oa,{})})}),t]}),a(C,{component:"main",sx:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden",position:"relative"},onClick:()=>{l&&d&&u(!1)},...v,children:[n,t&&(l||s)&&!d&&a(be,{color:"primary","aria-label":"打开侧边栏","aria-haspopup":"true","aria-expanded":"false",size:"small",onClick:h,sx:{position:"absolute",bottom:16,left:16,zIndex:1e3},children:a(wt,{})}),c&&r&&a(m,{title:"保存",children:a(be,{color:"secondary","aria-label":"保存文件",onClick:i,sx:{position:"absolute",bottom:16,right:16,zIndex:1e3},children:a(Tt,{})})})]})]})]})}ca=la.default=(0,da.default)((0,ua.jsx)("path",{d:"M21 12.4V7l-4-4H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h7.4zM15 15c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3M6 6h9v4H6zm13.99 10.25 1.77 1.77L16.77 23H15v-1.77zm3.26.26-.85.85-1.77-1.77.85-.85c.2-.2.51-.2.71 0l1.06 1.06c.2.2.2.52 0 .71"}),"SaveAs");const pa=({onContentChange:e,onError:t,onLargeFile:n,fileSizeLimit:r=5242880})=>{const[a,l]=o(null),[s,c]=o(""),[d,u]=o(!1),[h,m]=o(!1),[p,f]=o(!1),g=_(()=>{try{if(!st.isStorageAvailable())return;const t=st.loadEditorContent();if(!t)return;const{content:n,fileInfo:r}=t;n&&r&&(l({name:r.name,content:n,size:new Blob([n]).size,lastModified:r.lastModified,type:r.type,path:r.path}),c(n),u(!1),e&&e(n))}catch(t){tt.handleError(t)}},[e]);i(()=>{p||(g(),f(!0))},[p,g]);const v=_(async(o,i=!1)=>{if(o)if($i(o)){if(!i&&Ui(o,r)){const e=localStorage.getItem("pdx-json-editor-large-file-choice");if("cancel"===e)return;if("continue"!==e){if(n)return void n(o);if(!window.confirm(`文件大小超过${Math.round(r/1024/1024)}MB，可能会影响性能。是否继续？`))return}}m(!0);try{const n=await(e=>new Promise((t,n)=>{if(!e)return void n(new Error("未提供文件"));const r=new FileReader;r.onload=r=>{try{let n=r.target.result;n&&""!==n.trim()||(n="{}"),t({name:e.name,size:e.size,lastModified:new Date(e.lastModified),content:n})}catch(o){n(new Error(`读取文件失败: ${o.message}`))}},r.onerror=()=>{n(new Error("读取文件时发生错误"))},r.readAsText(e)}))(o);try{JSON.parse(n.content),l(n),c(n.content),u(!1),st.saveEditorContent(n.content,n),e&&e(n.content)}catch(a){l(n),c(n.content),u(!1),st.saveEditorContent(n.content,n),e&&e(n.content),t&&t(new Error(`JSON解析错误: ${a.message}。文件已加载，但可能需要修复。`))}}catch(s){t&&t(s)}finally{m(!1)}}else t&&t(new Error("只能打开JSON文件"))},[e,t,r,n]),y=_(async()=>{try{m(!0);const o=await(async()=>{if(!("showOpenFilePicker"in window))return new Promise((e,t)=>{const n=document.createElement("input");n.type="file",n.accept=".json,application/json",n.onchange=n=>{const r=n.target.files[0];if(!r)return void e(null);const o=new FileReader;o.onload=()=>{let t=o.result;t&&""!==t.trim()||(t="{}"),e({content:t,name:r.name,path:r.name,handle:null,directoryHandle:null})},o.onerror=()=>{t(new Error("读取文件失败"))},o.readAsText(r)},n.click()});try{const t={types:[{description:"JSON文件",accept:{"application/json":[".json"]}}],multiple:!1},[n]=await window.showOpenFilePicker(t),r=await n.getFile();let o=await r.text();o&&""!==o.trim()||(o="{}");let i=null;try{i=await n.getParentDirectory()}catch(e){}return{content:o,name:r.name,path:r.name,handle:n,directoryHandle:i}}catch(e){if("AbortError"===e.name)return null;throw e}})();if(o){const i=Ui(o.content);try{JSON.parse(o.content),l({name:o.name,path:o.path,content:o.content,handle:o.handle,directoryHandle:o.directoryHandle,isLarge:i}),c(o.content),u(!1),st.saveEditorContent(o.content,{name:o.name,path:o.path,handle:o.handle,directoryHandle:o.directoryHandle}),i&&n&&n(o.content,o.name),e&&e(o.content)}catch(r){l({name:o.name,path:o.path,content:o.content,handle:o.handle,directoryHandle:o.directoryHandle,isLarge:i}),c(o.content),u(!1),st.saveEditorContent(o.content,{name:o.name,path:o.path,handle:o.handle,directoryHandle:o.directoryHandle}),e&&e(o.content),t&&t(new Error(`JSON解析错误: ${r.message}。文件已加载，但可能需要修复。`))}}}catch(o){t&&t(o)}finally{m(!1)}},[t,n,e]),b=_(async()=>{if(a)try{const e={fileHandle:a.handle,directoryHandle:a.directoryHandle},t=await Wi(a.content,a.name,e);if(!t)return;const n={...a,name:t.name,path:t.path,handle:t.handle,directoryHandle:t.directoryHandle};l(n),c(a.content),u(!1),st.saveEditorContent(a.content,n)}catch(e){if("用户取消了保存操作"===e.message)return;t&&t(e)}else t&&t(new Error("没有打开的文件"))},[a,t]),w=_(async e=>{if(!a)return void(t&&t(new Error("没有打开的文件")));const n=(e=>e?e.toLowerCase().endsWith(".json")?e:`${e}.json`:"untitled.json")(e);try{const e={fileHandle:a.handle,directoryHandle:a.directoryHandle},t=await Wi(a.content,n,e);if(!t)return;const r={...a,name:t.name,path:t.path,handle:t.handle,directoryHandle:t.directoryHandle};l(r),c(a.content),u(!1),st.saveEditorContent(a.content,r)}catch(r){if("用户取消了保存操作"===r.message)return;t&&t(r)}},[a,t]),x=_(()=>{if(d){if(!window.confirm("有未保存的更改，是否继续？"))return}const t=((e,t="")=>({name:e,size:new Blob([t]).size,lastModified:new Date,content:t}))("untitled.json","{}");l(t),c(t.content),u(!1),st.saveEditorContent(t.content,t),e&&e(t.content)},[d,e]),S=_(e=>{if(!a)return;const t={...a,content:e,size:new Blob([e]).size};l(t);u(e!==s);try{st.saveEditorContent(e,t)}catch(n){tt.handleError(n)}},[a,s]),C=_(e=>Ui(e,r),[r]),E=!!a&&Ui(a.size,r),k=_(()=>{try{st.clearEditorContent()}catch(e){tt.handleError(e)}},[]);return{currentFile:a,isDirty:d,isLoading:h,openFile:v,openFileWithPicker:y,saveCurrentFile:b,saveAs:w,createNew:x,setContent:S,checkLargeFile:C,isLargeFile:E,clearStorage:k,loadFromStorage:g,isFileSystemAccessSupported:_i()}};function fa({onSettingsClick:e,onErrorClick:t}){o(!1);const[n,r]=o(""),[l,s]=o(!1),[c,d]=o(null),u=B(null),[h,m]=o(null),[p,f]=o(!1),g=_(e=>{m(e),f(!0)},[]),{currentFile:v,isDirty:y,isLoading:b,openFile:w,openFileWithPicker:x,saveCurrentFile:S,saveAs:C,createNew:E,setContent:k,isLargeFile:F}=pa({onContentChange:r,onError:e=>setErrorMessage(e.message),onLargeFile:g}),O=_(()=>{f(!1),h&&w(h,!0),m(null)},[h,w]),M=_(()=>{f(!1),m(null)},[]);((e,t="您有未保存的更改，确定要离开吗？")=>{i(()=>{const n=n=>{if(e)return n.preventDefault(),n.returnValue=t,t};return window.addEventListener("beforeunload",n),()=>{window.removeEventListener("beforeunload",n)}},[e,t])})(y);const j=_(e=>!!y&&(d(e),s(!0),!0),[y]);i(()=>{const e=()=>{u.current&&u.current.click()},t=e=>{e.detail&&(r(e.detail.content||""),k&&k(e.detail.content||""))},n=()=>{const e=()=>x();j(e)||e()};return window.addEventListener("triggerFileOpen",e),window.addEventListener("setCurrentFile",t),window.addEventListener("useFilePickerAPI",n),()=>{window.removeEventListener("triggerFileOpen",e),window.removeEventListener("setCurrentFile",t),window.removeEventListener("useFilePickerAPI",n)}},[k,x,j]);const z=_(()=>{s(!1),d(null)},[]),L=_(()=>{s(!1),S().then(()=>{c&&(c(),d(null))})},[v,S,c]),P=_(()=>{s(!1),c&&(c(),d(null))},[c]),I=_(()=>{const e=()=>E();j(e)||e()},[E,j]),T=_(()=>{if("showOpenFilePicker"in window){const e=()=>x();j(e)||e()}else{const e=()=>{var e;return null==(e=u.current)?void 0:e.click()};j(e)||e()}},[j,x]),N=_(e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];n&&w(n),e.target.value=""},[w]),D=_(()=>{S(),window.showSaveFilePicker||setTimeout(()=>{alert("您的浏览器不支持文件系统访问API，将使用传统的下载方式保存文件。")},100)},[S]),H=_(()=>{const e=(null==v?void 0:v.name)||"untitled.json";C(e),window.showSaveFilePicker||setTimeout(()=>{alert("您的浏览器不支持文件系统访问API，将使用传统的下载方式保存文件。")},100)},[v,C]),A=_(e=>{k(e)},[k]);return a(J,{children:[a("input",{type:"file",ref:u,style:{display:"none"},accept:".json",onChange:N}),a(ma,{header:a(jn,{onNewFile:I,onOpenFile:T,onSaveFile:D,onSaveAsFile:H,onErrorClick:t,currentFileName:null==v?void 0:v.name,isDirty:y}),sidebar:null,content:a(Ji,{onSettingsClick:e,value:n,onChange:A,isLoading:b,isLargeFile:F}),isDirty:y,onSave:D}),a(Xi,{onFileDrop:w,onError:e=>setErrorMessage(e.message)}),a(qi,{open:l,onClose:z,onSave:L,onDiscard:P,fileName:null==v?void 0:v.name}),a(ta,{open:p,fileSize:null==h?void 0:h.size,fileName:null==h?void 0:h.name,onContinue:O,onCancel:M})]})}function ga({open:e,onClose:t}){const[n,r]=o({minimapEnabled:!0,minimapShowSlider:"always",minimapRenderCharacters:!0,minimapSide:"right",wordWrap:!1,lineNumbers:!0,indentSize:2,indentType:"spaces",autoClosingBrackets:!0,autoClosingQuotes:!0,bracketPairColorization:!0,matchBrackets:!0,multiCursorModifier:"alt",columnSelection:!1,followSystemTheme:!1}),i=(e,t)=>{r(n=>({...n,[e]:t}))};return a(w,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,children:[a(x,{children:"编辑器设置"}),a(S,{children:a(C,{sx:{mt:2},children:[a(F,{variant:"subtitle1",gutterBottom:!0,children:"缩略图设置"}),a(ke,{children:[a(E,{control:a(k,{checked:n.minimapEnabled,onChange:e=>i("minimapEnabled",e.target.checked)}),label:"启用缩略图"}),n.minimapEnabled&&a(J,{children:[a(O,{fullWidth:!0,margin:"normal",size:"small",children:[a(W,{children:"缩略图滑块"}),a(V,{value:n.minimapShowSlider,label:"缩略图滑块",onChange:e=>i("minimapShowSlider",e.target.value),children:[a(g,{value:"always",children:"始终显示"}),a(g,{value:"mouseover",children:"鼠标悬停时显示"})]})]}),a(E,{control:a(k,{checked:n.minimapRenderCharacters,onChange:e=>i("minimapRenderCharacters",e.target.checked)}),label:"在缩略图中渲染字符"}),a(O,{fullWidth:!0,margin:"normal",size:"small",children:[a(W,{children:"缩略图位置"}),a(V,{value:n.minimapSide,label:"缩略图位置",onChange:e=>i("minimapSide",e.target.value),children:[a(g,{value:"right",children:"右侧"}),a(g,{value:"left",children:"左侧"})]})]})]})]}),a(b,{sx:{my:2}}),a(F,{variant:"subtitle1",gutterBottom:!0,children:"编辑器设置"}),a(ke,{children:[a(E,{control:a(k,{checked:n.wordWrap,onChange:e=>i("wordWrap",e.target.checked)}),label:"自动换行"}),a(E,{control:a(k,{checked:n.lineNumbers,onChange:e=>i("lineNumbers",e.target.checked)}),label:"显示行号"}),a(O,{fullWidth:!0,margin:"normal",size:"small",children:[a(W,{children:"缩进大小"}),a(V,{value:n.indentSize,label:"缩进大小",onChange:e=>i("indentSize",e.target.value),children:[a(g,{value:2,children:"2 空格"}),a(g,{value:4,children:"4 空格"})]})]}),a(O,{fullWidth:!0,margin:"normal",size:"small",children:[a(W,{children:"缩进类型"}),a(V,{value:n.indentType,label:"缩进类型",onChange:e=>i("indentType",e.target.value),children:[a(g,{value:"spaces",children:"空格"}),a(g,{value:"tabs",children:"制表符"})]})]})]}),a(b,{sx:{my:2}}),a(F,{variant:"subtitle1",gutterBottom:!0,children:"智能编辑设置"}),a(ke,{children:[a(E,{control:a(k,{checked:n.autoClosingBrackets,onChange:e=>i("autoClosingBrackets",e.target.checked)}),label:"自动闭合括号"}),a(E,{control:a(k,{checked:n.autoClosingQuotes,onChange:e=>i("autoClosingQuotes",e.target.checked)}),label:"自动闭合引号"}),a(E,{control:a(k,{checked:n.bracketPairColorization,onChange:e=>i("bracketPairColorization",e.target.checked)}),label:"括号对着色"}),a(E,{control:a(k,{checked:n.matchBrackets,onChange:e=>i("matchBrackets",e.target.checked)}),label:"括号匹配高亮"})]}),a(b,{sx:{my:2}}),a(F,{variant:"subtitle1",gutterBottom:!0,children:"多光标和选择设置"}),a(ke,{children:[a(O,{fullWidth:!0,margin:"normal",size:"small",children:[a(W,{children:"多光标修饰键"}),a(V,{value:n.multiCursorModifier,label:"多光标修饰键",onChange:e=>i("multiCursorModifier",e.target.value),children:[a(g,{value:"alt",children:"Alt"}),a(g,{value:"ctrlCmd",children:"Ctrl (Cmd)"})]})]}),a(E,{control:a(k,{checked:n.columnSelection,onChange:e=>i("columnSelection",e.target.checked)}),label:"启用列选择模式"})]}),a(b,{sx:{my:2}}),a(F,{variant:"subtitle1",gutterBottom:!0,children:"主题设置"}),a(ke,{children:a(E,{control:a(k,{checked:n.followSystemTheme,onChange:e=>i("followSystemTheme",e.target.checked)}),label:"跟随系统主题"})})]})}),a(L,{children:[a(P,{onClick:t,children:"取消"}),a(P,{onClick:()=>{localStorage.setItem("pdx-json-editor-settings",JSON.stringify(n)),window.pdxJsonEditor&&window.pdxJsonEditor.applySettings&&window.pdxJsonEditor.applySettings(n),t()},variant:"contained",children:"保存"})]})]})}var va={},ya=h;Object.defineProperty(va,"__esModule",{value:!0});var ba=va.default=void 0,wa=ya(yt()),xa=u();ba=va.default=(0,wa.default)((0,xa.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning");var Sa={},Ca=h;Object.defineProperty(Sa,"__esModule",{value:!0});var Ea=Sa.default=void 0,ka=Ca(yt()),Fa=u();Ea=Sa.default=(0,ka.default)((0,Fa.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info");var Oa={},Ma=h;Object.defineProperty(Oa,"__esModule",{value:!0});var ja=Oa.default=void 0,za=Ma(yt()),La=u();ja=Oa.default=(0,za.default)((0,La.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var Pa={},Ja=h;Object.defineProperty(Pa,"__esModule",{value:!0});var Ia=Pa.default=void 0,Ta=Ja(yt()),Na=u();Ia=Pa.default=(0,Ta.default)((0,Na.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");var Da={},Ha=h;Object.defineProperty(Da,"__esModule",{value:!0});var Aa=Da.default=void 0,Ra=Ha(yt()),Ba=u();function _a({maxErrors:e=10}){const[t,n]=o([]),[r,l]=o(null),[s,c]=o(!1);i(()=>{n(tt.getErrorHistory().slice(0,e));const t=t=>{n(n=>[t,...n].slice(0,e))};return tt.addListener(t),()=>{tt.removeListener(t)}},[e]);const d=e=>{switch(e){case Ge:case Ye:return a(Rt,{color:"error"});case qe:return a(ba,{color:"warning"});default:return a(Ea,{color:"info"})}},u=e=>{if(!e)return"";return new Date(e).toLocaleTimeString()};return 0===t.length?a(C,{sx:{p:2,textAlign:"center"},children:a(F,{variant:"body1",color:"text.secondary",children:"没有错误记录"})}):a(C,{sx:{width:"100%"},children:[a(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1},children:[a(F,{variant:"subtitle1",children:["错误历史 (",t.length,")"]}),a(P,{startIcon:a(mo,{}),size:"small",onClick:()=>c(!0),children:"清除"})]}),a(b,{}),a(Fe,{sx:{width:"100%",bgcolor:"background.paper"},children:t.map((e,n)=>a(C,{children:[a(Oe,{alignItems:"flex-start",secondaryAction:a(p,{edge:"end",onClick:()=>(e=>{l(r===e?null:e)})(n),children:a(r===n?Ia:ja,{})}),children:[a(v,{children:d(e.severity)}),a(y,{primary:e.message,secondary:a(F,{component:"span",variant:"body2",color:"text.secondary",children:[u(e.timestamp)," - ",e.type]})})]}),a(Me,{in:r===n,timeout:"auto",unmountOnExit:!0,children:a(C,{sx:{pl:9,pr:2,pb:2},children:a(ce,{variant:"outlined",sx:{p:1,backgroundColor:"background.default",overflowX:"auto"},children:a(F,{variant:"caption",component:"pre",sx:{whiteSpace:"pre-wrap"},children:e.originalError?e.originalError.stack:"无详细信息"})})})}),n<t.length-1&&a(b,{variant:"inset",component:"li"})]},n))}),a(w,{open:s,onClose:()=>c(!1),children:[a(x,{children:"清除错误历史"}),a(S,{children:a(F,{children:"确定要清除所有错误历史记录吗？此操作无法撤销。"})}),a(L,{children:[a(P,{onClick:()=>c(!1),children:"取消"}),a(P,{onClick:()=>{tt.clearErrorHistory(),n([]),c(!1)},color:"error",variant:"contained",children:"清除"})]})]})]})}Aa=Da.default=(0,Ra.default)((0,Ba.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh");var Wa={},Va=h;Object.defineProperty(Wa,"__esModule",{value:!0});var $a=Wa.default=void 0,Ua=Va(yt()),Ka=u();$a=Wa.default=(0,Ua.default)((0,Ka.jsx)("path",{d:"M3 15h8v-2H3zm0 4h8v-2H3zm0-8h8V9H3zm0-6v2h8V5zm10 0h8v14h-8z"}),"VerticalSplit");var Xa={},qa=h;Object.defineProperty(Xa,"__esModule",{value:!0});var Ga=Xa.default=void 0,Ya=qa(yt()),Qa=u();Ga=Xa.default=(0,Ya.default)((0,Qa.jsx)("path",{d:"M3 19h18v-6H3zm0-8h18V9H3zm0-6v2h18V5z"}),"HorizontalSplit");var Za={},el=h;Object.defineProperty(Za,"__esModule",{value:!0});var tl=Za.default=void 0,nl=el(yt()),rl=u();tl=Za.default=(0,nl.default)((0,rl.jsx)("path",{d:"M9.01 14H2v2h7.01v3L13 15l-3.99-4zm5.98-1v-3H22V8h-7.01V5L11 9z"}),"CompareArrows");var ol={},il=h;Object.defineProperty(ol,"__esModule",{value:!0});var al=ol.default=void 0,ll=il(yt()),sl=u();function cl({variant:e="contained",color:t="primary",size:n="medium",fullWidth:r=!1,disabled:o=!1,onClick:i,startIcon:l,endIcon:s,type:c="button",href:d,target:u,rel:h,download:m,id:p,className:f,sx:g,ariaLabel:v,ariaExpanded:y,ariaControls:b,ariaPressed:w,ariaDescribedby:x,children:S,...C}){const E=Fn({label:v,expanded:y,controls:b,pressed:w,describedBy:x});return a(P,{variant:e,color:t,size:n,fullWidth:r,disabled:o,onClick:i,startIcon:l,endIcon:s,type:c,href:d,target:u,rel:h,download:m,id:p,className:f,sx:{textTransform:"none",fontWeight:500,borderRadius:"8px",boxShadow:"contained"===e?"0 2px 4px rgba(0,0,0,0.1)":"none","&:hover":{boxShadow:"contained"===e?"0 4px 8px rgba(0,0,0,0.15)":"none"},...g},...E,...C,children:S})}function dl({severity:e="info",title:t,outlined:n=!1,filled:r=!1,icon:o=!0,action:i,onClose:l,id:s,className:c,sx:d,children:u,...h}){const m=((e,t="info")=>({id:On("alert"),role:"alert","aria-live":"error"===t?"assertive":"polite"}))(0,e);return a($,{severity:e,variant:r?"filled":n?"outlined":"standard",icon:o,action:i,onClose:l,id:s||m.id,className:c,sx:{borderRadius:"8px","& .MuiAlert-icon":{alignItems:"center"},...d},role:"alert",...h,children:[t&&a(ze,{children:t}),u]})}function ul({in:e,timeout:t=300,children:n,...r}){return n?a(Le,{in:e,timeout:t,...r,children:a("div",{style:{display:"contents"},children:n})}):null}function hl({in:e=!0,timeout:t=300,type:n="fade",children:r,...l}){const[s,c]=o(!1);i(()=>(c(!0),()=>c(!1)),[]);const d={in:s&&e,timeout:t,...l};if(!r)return null;switch(n){case"slide":return a(Je,{...d,direction:"up",children:a("div",{children:r})});case"zoom":return a(Pe,{...d,children:a("div",{children:r})});default:return a(Le,{...d,children:a("div",{children:r})})}}function ml({original:e='{\n  "example": "original content"\n}',modified:t='{\n  "example": "modified content"\n}',onClose:n,onSave:r,originalTitle:i="原始",modifiedTitle:l="修改后"}){const{themeId:s,monacoTheme:c}=ut(),d=B(null),[u,h]=o("vertical"),[f,g]=o(!1),[v,y]=o(""),[b,w]=o(!1),x=(e,t="success")=>{y(e),w(!0),setTimeout(()=>{w(!1)},3e3)},S={readOnly:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,automaticLayout:!0,renderSideBySide:"vertical"===u,renderOverviewRuler:!1,fontSize:14,lineNumbers:"on",scrollbar:{vertical:"auto",horizontal:"auto"},diffWordWrap:"on",ignoreTrimWhitespace:!1,renderIndicators:!0,originalEditable:!1};return a(ul,{in:!0,children:a(C,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"background.default",zIndex:1100,display:"flex",flexDirection:"column"},role:"dialog","aria-modal":"true","aria-label":"差异对比",children:[a(C,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:1,borderBottom:"1px solid",borderColor:"divider"},children:[a(F,{variant:"subtitle1",children:"差异对比"}),a(C,{sx:{display:"flex",alignItems:"center",gap:1},children:[a(Ie,{value:u,exclusive:!0,onChange:(e,t)=>{null!==t&&h(t)},size:"small","aria-label":"差异视图布局",children:[a(Te,{value:"vertical","aria-label":"垂直布局",children:a(m,{title:"垂直布局",children:a($a,{fontSize:"small"})})}),a(Te,{value:"horizontal","aria-label":"水平布局",children:a(m,{title:"水平布局",children:a(Ga,{fontSize:"small"})})})]}),a(m,{title:f?"并排视图":"内联视图",children:a(p,{size:"small",onClick:()=>{g(!f)},children:a(tl,{fontSize:"small"})})}),a(m,{title:"复制修改后内容",children:a(p,{size:"small",onClick:()=>{navigator.clipboard.writeText(t).then(()=>{x("已复制到剪贴板")}).catch(()=>{x("复制失败","error")})},children:a(al,{fontSize:"small"})})}),r&&a(m,{title:"保存修改",children:a(p,{size:"small",onClick:()=>{r&&(r(t),x("已保存"))},children:a(Tt,{fontSize:"small"})})}),a(p,{onClick:n,size:"small","aria-label":"关闭",children:a(oa,{fontSize:"small"})})]})]}),a(C,{sx:{flexGrow:1,overflow:"hidden",position:"relative"},children:a(Er,{height:"100%",language:"json",original:e,modified:t,theme:c,options:{...S,renderSideBySide:!f&&"vertical"===u},onMount:e=>{d.current=e},originalTitle:i,modifiedTitle:l})}),a(ul,{in:b,children:a(C,{sx:{position:"absolute",bottom:16,left:"50%",transform:"translateX(-50%)",backgroundColor:"success.main",color:"white",padding:"8px 16px",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",zIndex:1200},children:v})})]})})}al=ol.default=(0,ll.default)((0,sl.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy"),je`
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
`,je`
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
`,je`
  from {
    transform: translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
`,je`
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
`,je`
  from {
    transform: translateX(-20px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
`,je`
  from {
    transform: translateX(20px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
`,je`
  from {
    transform: scale(0.9);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
`,je`
  from {
    transform: scale(1);
    opacity: 1;
  }
  to {
    transform: scale(0.9);
    opacity: 0;
  }
`,je`
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-10px);
  }
  60% {
    transform: translateY(-5px);
  }
`,je`
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
`,je`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,je`
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
`,je`
  0% {
    transform: scale(0);
    opacity: 1;
  }
  100% {
    transform: scale(4);
    opacity: 0;
  }
`,je`
  0%, 100% {
    transform: translateX(0);
  }
  10%, 30%, 50%, 70%, 90% {
    transform: translateX(-5px);
  }
  20%, 40%, 60%, 80% {
    transform: translateX(5px);
  }
`;var pl={},fl=h;Object.defineProperty(pl,"__esModule",{value:!0});var gl=pl.default=void 0,vl=fl(yt()),yl=u();gl=pl.default=(0,vl.default)((0,yl.jsx)("path",{d:"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20zm-6 8h-4v-2h4zm0-4h-4v-2h4z"}),"BugReport");class bl extends Ne{constructor(e){super(e),t(this,"handleReset",()=>{if(this.setState({hasError:!1,error:null,errorInfo:null,showDetails:!1}),this.props.onReset&&this.props.onReset(),this.props.children)try{this.forceUpdate()}catch(e){}}),t(this,"handleReload",()=>{window.location.reload()}),t(this,"toggleDetails",()=>{this.setState(e=>({showDetails:!e.showDetails}))}),this.state={hasError:!1,error:null,errorInfo:null,showDetails:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({errorInfo:t}),tt.handleError(e),this.props.onError&&this.props.onError(e,t)}render(){const{hasError:e,error:t,errorInfo:n,showDetails:r}=this.state,{fallback:o,children:i}=this.props;return e?o?"function"==typeof o?o(t,n,this.handleReset):o:a(C,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",p:3,textAlign:"center"},children:a(ce,{elevation:3,sx:{p:4,maxWidth:600,width:"100%",borderRadius:2},children:[a(C,{sx:{display:"flex",alignItems:"center",mb:2},children:[a(Rt,{color:"error",sx:{fontSize:40,mr:2}}),a(F,{variant:"h5",component:"h2",children:"出现了一个错误"})]}),a(F,{variant:"body1",color:"text.secondary",sx:{mb:3},children:(null==t?void 0:t.message)||"应用程序遇到了一个未知错误"}),a(C,{sx:{display:"flex",justifyContent:"center",gap:2,mb:3},children:[a(P,{variant:"contained",color:"primary",startIcon:a(Aa,{}),onClick:this.handleReset,children:"重试"}),a(P,{variant:"outlined",startIcon:a(Aa,{}),onClick:this.handleReload,children:"刷新页面"})]}),a(b,{sx:{my:2}}),a(C,{sx:{textAlign:"left"},children:[a(P,{startIcon:a(gl,{}),size:"small",onClick:this.toggleDetails,sx:{mb:1},children:r?"隐藏详细信息":"显示详细信息"}),r&&n&&a(ce,{variant:"outlined",sx:{p:2,backgroundColor:"background.default",overflowX:"auto"},children:a(F,{variant:"caption",component:"pre",sx:{whiteSpace:"pre-wrap"},children:[t&&t.toString(),a("br",{}),n.componentStack]})})]})]})}):i}}const wl="2.0.0";function xl(){return a(C,{sx:{position:"fixed",bottom:8,right:8,opacity:.7,zIndex:1e3},children:a(F,{variant:"caption",color:"textSecondary",children:["v",wl]})})}function Sl(){const[e,t]=o(!1),[n,r]=o(!1),[l,s]=o(!1),[c,d]=o(!1),[u,h]=o({open:!1,message:"",severity:"error",action:null}),[m,p]=o(null),[f,g]=o({original:'{\n  "example": "original content"\n}',modified:'{\n  "example": "modified content"\n}',originalTitle:"原始",modifiedTitle:"修改后"}),v=B("");i(()=>{const e=e=>{e.severity!==Ge&&e.severity!==qe||h({open:!0,message:e.message,severity:e.severity===Ge?"error":"warning"})};return tt.addListener(e),()=>{tt.removeListener(e)}},[]),i(()=>{const e=e=>{v.current=e},t=(e,t,n="原始",r="修改后")=>{var o,i;g({original:e||v.current,modified:t||(null==(i=null==(o=window.pdxJsonEditor)?void 0:o.getCurrentContent)?void 0:i.call(o))||"",originalTitle:n,modifiedTitle:r}),s(!0)},n=e=>{e&&(p(e),r(!0))},o=()=>{var e;"showOpenFilePicker"in window&&(null==(e=window.pdxJsonEditor)?void 0:e.openFileWithPicker)?window.pdxJsonEditor.openFileWithPicker():(window.dispatchEvent(new CustomEvent("triggerFileOpen")),setTimeout(()=>{const e=document.querySelector('input[type="file"]');e&&e.click()},100))},i=e=>{window.dispatchEvent(new CustomEvent("setCurrentFile",{detail:e}))};return window.pdxJsonEditor?(window.pdxJsonEditor.saveOriginalContent=e,window.pdxJsonEditor.openDiffViewer=t,window.pdxJsonEditor.handleLargeFile=n,window.pdxJsonEditor.triggerFileOpen=o,window.pdxJsonEditor.setCurrentFile=i,!window.pdxJsonEditor.openFileWithPicker&&window.showOpenFilePicker&&(window.pdxJsonEditor.openFileWithPicker=()=>{window.dispatchEvent(new CustomEvent("useFilePickerAPI"))}),window.pdxJsonEditor.openFileByPath||(window.pdxJsonEditor.openFileByPath=e=>{})):window.pdxJsonEditor={saveOriginalContent:e,openDiffViewer:t,handleLargeFile:n,triggerFileOpen:o,setCurrentFile:i,openFileByPath:e=>{},openFileWithPicker:window.showOpenFilePicker?()=>{window.dispatchEvent(new CustomEvent("useFilePickerAPI"))}:void 0},()=>{window.pdxJsonEditor&&(delete window.pdxJsonEditor.saveOriginalContent,delete window.pdxJsonEditor.openDiffViewer,delete window.pdxJsonEditor.handleLargeFile,delete window.pdxJsonEditor.triggerFileOpen,delete window.pdxJsonEditor.setCurrentFile)}},[]);const y=()=>{t(!e)},b=()=>{d(!c)},C=e=>{tt.handleError(e)};return a(bl,{onError:C,children:a(ht,{children:[a(De,{}),a(hl,{type:"fade",children:a(fa,{onSettingsClick:y,onErrorClick:b})}),a(ga,{open:e,onClose:y}),a(Xi,{onFileDrop:e=>{var t;e&&e.size>1e6?(p(e),r(!0)):(null==(t=window.pdxJsonEditor)?void 0:t.openFile)&&window.pdxJsonEditor.openFile(e)},onError:C}),a(w,{open:c,onClose:b,fullWidth:!0,maxWidth:"md",children:[a(x,{children:"错误历史"}),a(S,{children:a(_a,{})}),a(L,{children:a(cl,{onClick:b,children:"关闭"})})]}),a(ta,{open:n,fileSize:(null==m?void 0:m.size)||5242880,fileName:null==m?void 0:m.name,onContinue:()=>{var e;r(!1),m&&(null==(e=window.pdxJsonEditor)?void 0:e.openFile)&&window.pdxJsonEditor.openFile(m,!0),p(null)},onCancel:()=>{r(!1),p(null)}}),l&&a(ml,{original:f.original,modified:f.modified,originalTitle:f.originalTitle,modifiedTitle:f.modifiedTitle,onClose:()=>{var e,t;if(!l){const r=(null==(t=null==(e=window.pdxJsonEditor)?void 0:e.getCurrentContent)?void 0:t.call(e))||'{\n  "example": "modified content"\n}';if(new Blob([r]).size>2097152)return void h({open:!0,message:"文件过大，差异对比可能导致性能问题",severity:"warning"});let o=v.current;if(!o)try{o=JSON.stringify(JSON.parse(r),null,2)}catch(n){o=r}g({original:o,modified:r,originalTitle:"原始",modifiedTitle:"当前"})}s(!l)},onSave:e=>{var t;(null==(t=window.pdxJsonEditor)?void 0:t.setContent)&&window.pdxJsonEditor.setContent(e),s(!1)}}),u.open&&a(ul,{in:!0,children:a(dl,{severity:u.severity,variant:"filled",onClose:()=>{h(e=>({...e,open:!1}))},action:u.action,sx:{position:"fixed",bottom:16,left:"50%",transform:"translateX(-50%)",zIndex:9999,minWidth:300,maxWidth:"90%"},children:u.message})}),a(xl,{})]})})}He(a(Sl,{}),document.getElementById("app"));
//# sourceMappingURL=index-0f93f80d.js.map
